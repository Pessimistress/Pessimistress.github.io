(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{ESo8:function(t,e,n){"use strict";n.r(e);n("q8oJ"),n("8npG");var r=n("q1tI"),i=n.n(r),o=(n("CczQ"),n("EMED"),n("Klu8"),n("M0K/"),n("PD1m"),n("UOA8"),n("QNMc"),n("JHHQ"),n("kbo5"),n("lAej"),n("xXlm"),n("BK7i"),n("1RH0"),n("xclO"),n("U6Bt"),n("HQhv"),n("YBKJ"),n("sc67"),n("OeI1"),n("sC2a"),n("R48M"),n("E5k/"),n("AqHK"),n("MIFh"),n("C9fy"),"INUMBER"),a="IVAR",s="IEXPR";function u(t,e){this.type=t,this.value=null!=e?e:0}function c(t){return new u("IOP1",t)}function l(t){return new u("IOP2",t)}function h(t){return new u("IOP3",t)}function p(t,e,n){var r,i,u,c,l,h,d=[];if(g(t))return v(t,n);for(var m=t.length,y=0;y<m;y++){var x=t[y],w=x.type;if(w===o||"IVARNAME"===w)d.push(x.value);else if("IOP2"===w)i=d.pop(),r=d.pop(),"and"===x.value?d.push(!!r&&!!p(i,e,n)):"or"===x.value?d.push(!!r||!!p(i,e,n)):"="===x.value?(c=e.binaryOps[x.value],d.push(c(r,p(i,e,n),n))):(c=e.binaryOps[x.value],d.push(c(v(r,n),v(i,n))));else if("IOP3"===w)u=d.pop(),i=d.pop(),r=d.pop(),"?"===x.value?d.push(p(r?i:u,e,n)):(c=e.ternaryOps[x.value],d.push(c(v(r,n),v(i,n),v(u,n))));else if(w===a)if(x.value in e.functions)d.push(e.functions[x.value]);else if(x.value in e.unaryOps&&e.parser.isOperatorEnabled(x.value))d.push(e.unaryOps[x.value]);else{var b=n[x.value];if(void 0===b)throw new Error("undefined variable: "+x.value);d.push(b)}else if("IOP1"===w)r=d.pop(),c=e.unaryOps[x.value],d.push(c(v(r,n)));else if("IFUNCALL"===w){for(h=x.value,l=[];h-- >0;)l.unshift(v(d.pop(),n));if(!(c=d.pop()).apply||!c.call)throw new Error(c+" is not a function");d.push(c.apply(void 0,l))}else if("IFUNDEF"===w)d.push(function(){for(var t=d.pop(),r=[],i=x.value;i-- >0;)r.unshift(d.pop());var o=d.pop(),a=function(){for(var i=Object.assign({},n),o=0,a=r.length;o<a;o++)i[r[o]]=arguments[o];return p(t,e,i)};return Object.defineProperty(a,"name",{value:o,writable:!1}),n[o]=a,a}());else if(w===s)d.push(f(x,e));else if("IEXPREVAL"===w)d.push(x);else if("IMEMBER"===w)r=d.pop(),d.push(r[x.value]);else if("IENDSTATEMENT"===w)d.pop();else{if("IARRAY"!==w)throw new Error("invalid Expression");for(h=x.value,l=[];h-- >0;)l.unshift(d.pop());d.push(l)}}if(d.length>1)throw new Error("invalid Expression (parity)");return 0===d[0]?0:v(d[0],n)}function f(t,e,n){return g(t)?t:{type:"IEXPREVAL",value:function(n){return p(t.value,e,n)}}}function g(t){return t&&"IEXPREVAL"===t.type}function v(t,e){return g(t)?t.value(e):t}function d(t,e){for(var n,r,i,u,c,l,h=[],p=0;p<t.length;p++){var f=t[p],g=f.type;if(g===o)"number"==typeof f.value&&f.value<0?h.push("("+f.value+")"):Array.isArray(f.value)?h.push("["+f.value.map(m).join(", ")+"]"):h.push(m(f.value));else if("IOP2"===g)r=h.pop(),n=h.pop(),u=f.value,e?"^"===u?h.push("Math.pow("+n+", "+r+")"):"and"===u?h.push("(!!"+n+" && !!"+r+")"):"or"===u?h.push("(!!"+n+" || !!"+r+")"):"||"===u?h.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):"=="===u?h.push("("+n+" === "+r+")"):"!="===u?h.push("("+n+" !== "+r+")"):"["===u?h.push(n+"[("+r+") | 0]"):h.push("("+n+" "+u+" "+r+")"):"["===u?h.push(n+"["+r+"]"):h.push("("+n+" "+u+" "+r+")");else if("IOP3"===g){if(i=h.pop(),r=h.pop(),n=h.pop(),"?"!==(u=f.value))throw new Error("invalid Expression");h.push("("+n+" ? "+r+" : "+i+")")}else if(g===a||"IVARNAME"===g)h.push(f.value);else if("IOP1"===g)n=h.pop(),"-"===(u=f.value)||"+"===u?h.push("("+u+n+")"):e?"not"===u?h.push("(!"+n+")"):"!"===u?h.push("fac("+n+")"):h.push(u+"("+n+")"):"!"===u?h.push("("+n+"!)"):h.push("("+u+" "+n+")");else if("IFUNCALL"===g){for(l=f.value,c=[];l-- >0;)c.unshift(h.pop());u=h.pop(),h.push(u+"("+c.join(", ")+")")}else if("IFUNDEF"===g){for(r=h.pop(),l=f.value,c=[];l-- >0;)c.unshift(h.pop());n=h.pop(),e?h.push("("+n+" = function("+c.join(", ")+") { return "+r+" })"):h.push("("+n+"("+c.join(", ")+") = "+r+")")}else if("IMEMBER"===g)n=h.pop(),h.push(n+"."+f.value);else if("IARRAY"===g){for(l=f.value,c=[];l-- >0;)c.unshift(h.pop());h.push("["+c.join(", ")+"]")}else if(g===s)h.push("("+d(f.value,e)+")");else if("IENDSTATEMENT"!==g)throw new Error("invalid Expression")}return h.length>1&&(h=e?[h.join(",")]:[h.join(";")]),String(h[0])}function m(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function x(t,e,n){for(var r=!!(n=n||{}).withMembers,i=null,o=0;o<t.length;o++){var u=t[o];u.type===a||"IVARNAME"===u.type?r||y(e,u.value)?null!==i?(y(e,i)||e.push(i),i=u.value):i=u.value:e.push(u.value):"IMEMBER"===u.type&&r&&null!==i?i+="."+u.value:u.type===s?x(u.value,e,n):null!==i&&(y(e,i)||e.push(i),i=null)}null===i||y(e,i)||e.push(i)}function w(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}u.prototype.toString=function(){switch(this.type){case o:case"IOP1":case"IOP2":case"IOP3":case a:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},w.prototype.simplify=function(t){return t=t||{},new w(function t(e,n,r,i,c){for(var l,h,p,f,g=[],v=[],d=0;d<e.length;d++){var m=e[d],y=m.type;if(y===o||"IVARNAME"===y)Array.isArray(m.value)?g.push.apply(g,t(m.value.map((function(t){return new u(o,t)})).concat(new u("IARRAY",m.value.length)),n,r,i,c)):g.push(m);else if(y===a&&c.hasOwnProperty(m.value))m=new u(o,c[m.value]),g.push(m);else if("IOP2"===y&&g.length>1)h=g.pop(),l=g.pop(),f=r[m.value],m=new u(o,f(l.value,h.value)),g.push(m);else if("IOP3"===y&&g.length>2)p=g.pop(),h=g.pop(),l=g.pop(),"?"===m.value?g.push(l.value?h.value:p.value):(f=i[m.value],m=new u(o,f(l.value,h.value,p.value)),g.push(m));else if("IOP1"===y&&g.length>0)l=g.pop(),f=n[m.value],m=new u(o,f(l.value)),g.push(m);else if(y===s){for(;g.length>0;)v.push(g.shift());v.push(new u(s,t(m.value,n,r,i,c)))}else if("IMEMBER"===y&&g.length>0)l=g.pop(),g.push(new u(o,l.value[m.value]));else{for(;g.length>0;)v.push(g.shift());v.push(m)}}for(;g.length>0;)v.push(g.shift());return v}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},w.prototype.substitute=function(t,e){return e instanceof w||(e=this.parser.parse(String(e))),new w(function t(e,n,r){for(var i=[],o=0;o<e.length;o++){var p=e[o],f=p.type;if(f===a&&p.value===n)for(var g=0;g<r.tokens.length;g++){var v,d=r.tokens[g];v="IOP1"===d.type?c(d.value):"IOP2"===d.type?l(d.value):"IOP3"===d.type?h(d.value):new u(d.type,d.value),i.push(v)}else f===s?i.push(new u(s,t(p.value,n,r))):i.push(p)}return i}(this.tokens,t,e),this.parser)},w.prototype.evaluate=function(t){return t=t||{},p(this.tokens,this,t)},w.prototype.toString=function(){return d(this.tokens,!1)},w.prototype.symbols=function(t){t=t||{};var e=[];return x(this.tokens,e,t),e},w.prototype.variables=function(t){t=t||{};var e=[];x(this.tokens,e,t);var n=this.functions;return e.filter((function(t){return!(t in n)}))},w.prototype.toJSFunction=function(t,e){var n=this,r=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+d(this.simplify(e).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var b="TOP",M="TPAREN";function T(t,e,n){this.type=t,this.value=e,this.index=n}function A(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}T.prototype.toString=function(){return this.type+": "+this.value},A.prototype.newToken=function(t,e,n){return new T(t,e,null!=n?n:this.pos)},A.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},A.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},A.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},A.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var i=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(i),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},A.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(M,t),this.pos++,!0)},A.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",t),this.pos++,!0)},A.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},A.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},A.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},A.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(b,r),this.pos+=r.length,!0}return!1},A.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var i=this.expression.substring(t,e);return this.current=this.newToken("TNAME",i),this.pos+=i.length,!0}return!1},A.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var k=/^[0-9a-f]{4}$/i;function C(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}A.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var i=t.substring(e+1,e+5);k.test(i)||this.parseError("Illegal escape sequence: \\u"+i),n+=String.fromCharCode(parseInt(i,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var o=t.indexOf("\\",e);n+=t.substring(e,o<0?t.length:o),e=o}return n},A.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},A.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,i=n;n<this.expression.length;){var o=this.expression.charAt(n);if(!e.test(o))break;n++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(i,n),t)),this.pos=n),r},A.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,i=n,o=!1,a=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!o&&"."===t);)"."===t?o=!0:a=!0,n++,e=a;if(e&&(i=n),"e"===t||"E"===t){n++;for(var s=!0,u=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,s=!1}else s=!1;n++}u||(n=i)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=i,e},A.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(b,e);else if("∙"===e||"•"===e)this.current=this.newToken(b,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(b,">="),this.pos++):this.current=this.newToken(b,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(b,"<="),this.pos++):this.current=this.newToken(b,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(b,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(b,"=="),this.pos++):this.current=this.newToken(b,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(b,"!="),this.pos++):this.current=this.newToken(b,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},A.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},A.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},A.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},C.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},C.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?y(e,t.value):"function"==typeof e?e(t):t.value===e)},C.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},C.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},C.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},C.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},C.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(b,(function(t){return t.value in e})))t.push(new u(a,this.current.value));else if(this.accept("TNUMBER"))t.push(new u(o,this.current.value));else if(this.accept("TSTRING"))t.push(new u(o,this.current.value));else if(this.accept(M,"("))this.parseExpression(t),this.expect(M,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new u("IARRAY",0));else{var n=this.parseArrayList(t);t.push(new u("IARRAY",n))}}},C.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},C.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},C.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===M&&")"===this.nextToken.value||e.push(new u("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new u(s,e)),!0)},C.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},C.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(b,"=");){var e=t.pop(),n=[],r=t.length-1;if("IFUNCALL"!==e.type){if(e.type!==a&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new u("IVARNAME",e.value)),t.push(new u(s,n)),t.push(l("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,o=e.value+1;i<o;i++){var c=r-i;t[c].type===a&&(t[c]=new u("IVARNAME",t[c].value))}this.parseVariableAssignmentExpression(n),t.push(new u(s,n)),t.push(new u("IFUNDEF",e.value))}}},C.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(b,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(b,":"),this.parseConditionalExpression(n),t.push(new u(s,e)),t.push(new u(s,n)),t.push(h("?"))}},C.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(b,"or");){var e=[];this.parseAndExpression(e),t.push(new u(s,e)),t.push(l("or"))}},C.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(b,"and");){var e=[];this.parseComparison(e),t.push(new u(s,e)),t.push(l("and"))}};var E=["==","!=","<","<=",">=",">","in"];C.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(b,E);){var e=this.current;this.parseAddSub(t),t.push(l(e.value))}};var S=["+","-","||"];C.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(b,S);){var e=this.current;this.parseTerm(t),t.push(l(e.value))}};var O=["*","/","%"];function N(t,e){return Number(t)+Number(e)}function _(t,e){return t-e}function F(t,e){return t*e}function P(t,e){return t/e}function U(t,e){return t%e}function I(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function z(t,e){return t===e}function D(t,e){return t!==e}function R(t,e){return t>e}function j(t,e){return t<e}function L(t,e){return t>=e}function H(t,e){return t<=e}function X(t,e){return Boolean(t&&e)}function Y(t,e){return Boolean(t||e)}function Z(t,e){return y(e,t)}function V(t){return(Math.exp(t)-Math.exp(-t))/2}function q(t){return(Math.exp(t)+Math.exp(-t))/2}function B(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function $(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function J(t){return Math.log(t+Math.sqrt(t*t-1))}function W(t){return Math.log((1+t)/(1-t))/2}function G(t){return Math.log(t)*Math.LOG10E}function K(t){return-t}function Q(t){return!t}function tt(t){return t<0?Math.ceil(t):Math.floor(t)}function et(t){return Math.random()*(t||1)}function nt(t){return it(t+1)}C.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(b,O);){var e=this.current;this.parseFactor(t),t.push(l(e.value))}},C.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(b,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===M&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===M&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(c(n.value))}else this.parseExponential(t)},C.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(b,"^");)this.parseFactor(t),t.push(l("^"))},C.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(b,"!");)t.push(c("!"))},C.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(b,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(c(n.value))}else for(this.parseMemberExpression(t);this.accept(M,"(");)if(this.accept(M,")"))t.push(new u("IFUNCALL",0));else{var r=this.parseArgumentList(t);t.push(new u("IFUNCALL",r))}},C.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(M,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},C.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(b,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new u("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(l("["))}}};var rt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function it(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,i=t-1;r>1;)i*=r,r--;return 0===i&&(i=1),i}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*it(1-t));if(t>=171.35)return 1/0;if(t>85){var o=t*t,a=o*t,s=a*t,u=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*o)-139/(51840*a)-571/(2488320*s)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,n=rt[0];for(var c=1;c<rt.length;++c)n+=rt[c]/(t+c);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}function ot(t){return Array.isArray(t)?t.length:String(t).length}function at(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,i=Math.abs(arguments[n]);e<i?(t=t*(r=e/i)*r+1,e=i):t+=i>0?(r=i/e)*r:i}return e===1/0?1/0:e*Math.sqrt(t)}function st(t,e,n){return t?e:n}function ut(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function ct(t,e,n){return n&&(n[t]=e),e}function lt(t,e){return t[0|e]}function ht(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function pt(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function ft(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))}function gt(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)}function vt(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))}function dt(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function mt(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function yt(t){return(t>0)-(t<0)||+t}function xt(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function wt(t){return Math.exp(t)-1}function bt(t){return Math.log(1+t)}function Mt(t){return Math.log(t)/Math.LN2}function Tt(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||V,cosh:Math.cosh||q,tanh:Math.tanh||B,asinh:Math.asinh||$,acosh:Math.acosh||J,atanh:Math.atanh||W,sqrt:Math.sqrt,cbrt:Math.cbrt||xt,log:Math.log,log2:Math.log2||Mt,ln:Math.log,lg:Math.log10||G,log10:Math.log10||G,expm1:Math.expm1||wt,log1p:Math.log1p||bt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||tt,"-":K,"+":Number,exp:Math.exp,not:Q,length:ot,"!":nt,sign:Math.sign||yt},this.binaryOps={"+":N,"-":_,"*":F,"/":P,"%":U,"^":Math.pow,"||":I,"==":z,"!=":D,">":R,"<":j,">=":L,"<=":H,and:X,or:Y,in:Z,"=":ct,"[":lt},this.ternaryOps={"?":st},this.functions={random:et,fac:nt,min:pt,max:ht,hypot:Math.hypot||at,pyt:Math.hypot||at,pow:Math.pow,atan2:Math.atan2,if:st,gamma:it,roundTo:ut,map:ft,fold:gt,filter:vt,indexOf:dt,join:mt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Tt.prototype.parse=function(t){var e=[],n=new C(this,new A(this,t),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(e),n.expect("TEOF","EOF"),new w(e,this)},Tt.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var At=new Tt;Tt.parse=function(t){return At.parse(t)},Tt.evaluate=function(t,e){return At.parse(t).evaluate(e)};var kt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Tt.prototype.isOperatorEnabled=function(t){var e=function(t){return kt.hasOwnProperty(t)?kt[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};var Ct=n("lxDd"),Et=(n("i8i4"),n("pLLy")),St=n("hUFJ"),Ot=(n("pJf4"),n("YbXK"),n("cFtU"),n("m210"),n("xtjI"),n("4DPX"),n("rzGZ"),n("Dq+y"),n("Ggvi"),n("h3Sa"),n("5irr"),n("5deG")),Nt=n("0mpS"),_t=n("oFBv"),Ft=n("7G5M"),Pt=n("yzHf");function Ut(t,e){t.font=e+"px Helvetica,Arial,sans-serif",t.fillStyle="#000",t.textBaseline="top",t.textAlign="center"}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t){return function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lt=function(t){return t.toFixed(2)},Ht={data:[],fontSize:12,xScale:null,yScale:null,zScale:null,xTicks:6,yTicks:6,zTicks:6,xTickFormat:Lt,yTickFormat:Lt,zTickFormat:Lt,padding:0,color:[0,0,0,255],xTitle:"x",yTitle:"y",zTitle:"z"};function Xt(t){var e=t.reduce((function(t,e){return t.concat(e)}),[]);return Array.isArray(e[0])?Xt(e):e}function Yt(t){var e=t.axis,n=t[e+"Ticks"],r=t[e+"Scale"],i=t[e+"TickFormat"];Array.isArray(n)||(n=r.ticks(n));var o={value:t[e+"Title"],position:(r.range()[0]+r.range()[1])/2,text:t[e+"Title"]};return[].concat(Rt(n.map((function(t){return{value:t,position:r(t),text:i(t,e)}}))),[o])}var Zt=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.initializeState=function(){var t=this.context.gl;this.getAttributeManager().addInstanced({instancePositions:{size:2,update:this.calculateInstancePositions,noAlloc:!0},instanceNormals:{size:3,update:this.calculateInstanceNormals,noAlloc:!0},instanceIsTitle:{size:1,update:this.calculateInstanceIsTitle,noAlloc:!0}}),this.setState(Object.assign({numInstances:0,labels:null},this._getModels(t)))},i.updateState=function(t){var e=t.oldProps,n=t.props,r=(t.changeFlags,this.getAttributeManager());if(e.xScale!==n.xScale||e.yScale!==n.yScale||e.zScale!==n.zScale||e.xTicks!==n.xTicks||e.yTicks!==n.yTicks||e.zTicks!==n.zTicks||e.xTickFormat!==n.xTickFormat||e.yTickFormat!==n.yTickFormat||e.zTickFormat!==n.zTickFormat){var i=n.xScale,o=n.yScale,a=n.zScale,s=[Yt(zt(zt({},n),{},{axis:"x"})),Yt(zt(zt({},n),{},{axis:"z"})),Yt(zt(zt({},n),{},{axis:"y"}))],u=i.range(),c=o.range(),l=a.range();this.setState({ticks:s,labelTexture:this.renderLabelTexture(s),gridDims:[u[1]-u[0],l[1]-l[0],c[1]-c[0]],gridCenter:[(u[0]+u[1])/2,(l[0]+l[1])/2,(c[0]+c[1])/2]}),r.invalidateAll()}},i.draw=function(t){var e=t.uniforms,n=this.state,r=n.gridDims,i=n.gridCenter,o=n.modelsByName,a=n.labelTexture,s=n.numInstances,u=this.props,c=u.fontSize,l=u.color,h=u.padding;if(a){var p={fontSize:c,gridDims:r,gridCenter:i,gridOffset:h,strokeColor:l};o.grids.setInstanceCount(s),o.labels.setInstanceCount(s),o.grids.setUniforms(Object.assign({},e,p)).draw(),o.labels.setUniforms(Object.assign({},e,p,a)).draw()}},i._getModels=function(t){for(var e=[-1,-1,0,-1,1,0,-1,1,0,1,1,0,1,1,0,1,-1,0,1,-1,0,-1,-1,0],n=[-1,0,0,-1,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,-1,0,0,-1,0],r=new _t.a(t,{id:this.props.id+"-grids",vs:"#define SHADER_NAME graph-layer-axis-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 instancePositions;\nattribute vec3 instanceNormals;\nattribute float instanceIsTitle;\n\nuniform vec3 gridDims;\nuniform vec3 gridCenter;\nuniform float gridOffset;\nuniform vec4 strokeColor;\n\nvarying vec4 vColor;\nvarying float shouldDiscard;\n\n// determines if the grid line is behind or in front of the center\nfloat frontFacing(vec3 v) {\n  vec4 v_clipspace = project_uViewProjectionMatrix * project_uModelMatrix * vec4(v, 0.0);\n  return step(v_clipspace.z, 0.0);\n}\n\nvoid main(void) {\n\n  // rotated rectangle to align with slice:\n  // for each x tick, draw rectangle on yz plane\n  // for each y tick, draw rectangle on zx plane\n  // for each z tick, draw rectangle on xy plane\n\n  // offset of each corner of the rectangle from tick on axis\n  vec3 gridVertexOffset = mat3(\n      vec3(positions.z, positions.xy),\n      vec3(positions.yz, positions.x),\n      positions\n    ) * instanceNormals;\n\n  // normal of each edge of the rectangle from tick on axis\n  vec3 gridLineNormal = mat3(\n      vec3(normals.z, normals.xy),\n      vec3(normals.yz, normals.x),\n      normals\n    ) * instanceNormals;\n\n  // do not draw grid line in front of the graph\n  shouldDiscard = frontFacing(gridLineNormal) + instanceIsTitle;\n\n  vec3 position_modelspace = vec3(instancePositions.x) *\n    instanceNormals + gridVertexOffset * gridDims / 2.0 + gridCenter * abs(gridVertexOffset);\n\n  // apply offsets\n  position_modelspace += gridOffset * gridLineNormal;\n\n  vec3 position_commonspace = project_position(position_modelspace);\n  gl_Position = project_common_position_to_clipspace(vec4(position_commonspace, 1.0));\n\n  vColor = strokeColor / 255.0;\n}\n",fs:"#define SHADER_NAME graph-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float shouldDiscard;\n\nvoid main(void) {\n  if (shouldDiscard > 0.0) {\n    discard;\n  }\n  gl_FragColor = vColor;\n}\n",geometry:new Ft.a({drawMode:Nt.a.LINES,attributes:{positions:new Float32Array(e),normals:new Float32Array(n)},vertexCount:e.length/3}),isInstanced:!0}),i=[],o=[],a=[],s=[],u=0;u<8;u++){i=i.concat([0,0,0,1,1,0,1,1]),s=s.concat([4*u+0,4*u+1,4*u+2,4*u+2,4*u+1,4*u+3]);for(var c=0;c<4;c++)o=o.concat(e.slice(3*u,3*u+3)),a=a.concat(n.slice(3*u,3*u+3))}var l=new _t.a(t,{id:this.props.id+"-labels",vs:"#define SHADER_NAME graph-layer-axis-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\nattribute vec2 instancePositions;\nattribute vec3 instanceNormals;\nattribute float instanceIsTitle;\n\nuniform vec3 gridDims;\nuniform vec3 gridCenter;\nuniform float gridOffset;\nuniform vec3 labelWidths;\nuniform float fontSize;\nuniform float labelHeight;\nuniform vec2 labelTextureDim;\n\nvarying vec2 vTexCoords;\nvarying float shouldDiscard;\n\nconst float LABEL_OFFSET = 0.02;\nconst float TITLE_OFFSET = 0.06;\n\nfloat sum2(vec2 v) {\n  return v.x + v.y;\n}\n\nfloat sum3(vec3 v) {\n  return v.x + v.y + v.z;\n}\n\n// determines if the grid line is behind or in front of the center\nfloat frontFacing(vec3 v) {\n  vec4 v_clipspace = project_uViewProjectionMatrix * project_uModelMatrix * vec4(v, 0.0);\n  return step(v_clipspace.z, 0.0);\n}\n\nvoid main(void) {\n\n  // rotated rectangle to align with slice:\n  // for each x tick, draw rectangle on yz plane\n  // for each y tick, draw rectangle on zx plane\n  // for each z tick, draw rectangle on xy plane\n\n  // offset of each corner of the rectangle from tick on axis\n  vec3 gridVertexOffset = mat3(\n      vec3(positions.z, positions.xy),\n      vec3(positions.yz, positions.x),\n      positions\n    ) * instanceNormals;\n\n  // normal of each edge of the rectangle from tick on axis\n  vec3 gridLineNormal = mat3(\n      vec3(normals.z, normals.xy),\n      vec3(normals.yz, normals.x),\n      normals\n    ) * instanceNormals;\n\n  // do not draw grid line in front of the graph\n  // do not draw label behind the graph\n  shouldDiscard = frontFacing(gridLineNormal) + (1.0 - frontFacing(gridVertexOffset));\n\n  // get bounding box of texture in pixels\n  //  +----------+----------+----------+\n  //  | xlabel0  | ylabel0  | zlabel0  |\n  //  +----------+----------+----------+\n  //  | xlabel1  | ylabel1  | zlabel1  |\n  //  +----------+----------+----------+\n  //  | ...      | ...      | ...      |\n  vec2 textureOrigin = vec2(\n    sum3(vec3(0.0, labelWidths.x, sum2(labelWidths.xy)) * instanceNormals),\n    instancePositions.y * labelHeight\n  );\n  vec2 textureSize = vec2(sum3(labelWidths * instanceNormals), labelHeight);\n\n  vTexCoords = (textureOrigin + textureSize * texCoords) / labelTextureDim;\n\n  vec3 position_modelspace = vec3(instancePositions.x) *\n    instanceNormals + gridVertexOffset * gridDims / 2.0 + gridCenter * abs(gridVertexOffset);\n\n  // apply offsets\n  position_modelspace += gridOffset * gridLineNormal;\n  position_modelspace += (LABEL_OFFSET + (instanceIsTitle * TITLE_OFFSET)) * gridVertexOffset;\n\n  vec3 position_commonspace = project_position(position_modelspace);\n  vec4 position_clipspace = project_common_position_to_clipspace(vec4(position_commonspace, 1.0));\n\n  vec2 labelVertexOffset = vec2(texCoords.x - 0.5, 0.5 - texCoords.y) * textureSize;\n  // project to clipspace\n  labelVertexOffset = project_pixel_size_to_clipspace(labelVertexOffset).xy;\n  // scale label to be constant size in pixels\n  labelVertexOffset *= fontSize / labelHeight * position_clipspace.w;\n\n  gl_Position = position_clipspace + vec4(labelVertexOffset, 0.0, 0.0);\n\n}\n",fs:"#define SHADER_NAME graph-layer-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D labelTexture;\n\nvarying vec2 vTexCoords;\nvarying float shouldDiscard;\n\nvoid main(void) {\n  if (shouldDiscard > 0.0) {\n    discard;\n  }\n  vec4 color = texture2D(labelTexture, vTexCoords);\n  if (color.a == 0.0) {\n    discard;\n  }\n  gl_FragColor = color;\n}\n",geometry:new Ft.a({drawMode:Nt.a.TRIANGLES,attributes:{indices:new Uint16Array(s),positions:new Float32Array(o),texCoords:{size:2,value:new Float32Array(i)},normals:new Float32Array(a)}}),isInstanced:!0});return{models:[r,l].filter(Boolean),modelsByName:{grids:r,labels:l}}},i.calculateInstancePositions=function(t){var e=this.state.ticks.map((function(t){return t.map((function(t,e){return[t.position,e]}))})),n=new Float32Array(Xt(e));t.value=n,this.setState({numInstances:n.length/t.size})},i.calculateInstanceNormals=function(t){var e=this.state.ticks,n=e[0],r=e[1],i=e[2],o=[n.map((function(t){return[1,0,0]})),r.map((function(t){return[0,1,0]})),i.map((function(t){return[0,0,1]}))];t.value=new Float32Array(Xt(o))},i.calculateInstanceIsTitle=function(t){var e=this.state.ticks.map((function(t){var e=t.length-1;return t.map((function(t,n){return n<e?0:1}))}));t.value=new Float32Array(Xt(e))},i.renderLabelTexture=function(t){this.state.labels&&this.state.labels.labelTexture.delete();var e=function(t,e,n){var r;void 0===n&&(n=48);var i=document.createElement("canvas"),o=i.getContext("2d");Ut(o,n);var a=e.map((function(t){return t.reduce((function(t,e){var n=o.measureText(e.text).width;return Math.max(t,Math.ceil(n))}),0)})),s=a.reduce((function(t,e){return t+e}),0),u=e.reduce((function(t,e){return Math.max(t,Math.ceil(e.length*n))}),0);if(0===s||0===u)return null;i.width=s,i.height=u,Ut(o,n);var c=0;return e.forEach((function(t,e){c+=a[e]/2,t.forEach((function(t,e){o.fillText(t.text,c,e*n)})),c+=a[e]/2})),{columnWidths:a,texture:new Pt.a(t,(r={pixels:i},r[Nt.a.TEXTURE_MAG_FILTER]=Nt.a.LINEAR,r))}}(this.context.gl,t,48);if(e){var n=e.columnWidths,r=e.texture;return{labelHeight:48,labelWidths:n,labelTextureDim:[r.width,r.height],labelTexture:r}}return null},r}(Ot.a);Zt.layerName="AxesLayer",Zt.defaultProps=Ht;n("HOSt"),n("SIeT");var Vt=n("iIhu");var qt=[0,0,0,255],Bt={data:[],getPosition:function(){return[0,0,0]},getColor:function(){return qt},xScale:null,yScale:null,zScale:null,uCount:100,vCount:100,lightStrength:.1},$t=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.initializeState=function(){var t=this.context.gl;this.getAttributeManager().add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:4,accessor:"getPosition",update:this.calculatePositions,noAlloc:!0},colors:{size:4,accessor:["getPosition","getColor"],type:Nt.a.UNSIGNED_BYTE,update:this.calculateColors,noAlloc:!0},pickingColors:{size:3,type:Nt.a.UNSIGNED_BYTE,update:this.calculatePickingColors,noAlloc:!0}}),t.getExtension("OES_element_index_uint"),this.setState({model:this.getModel(t)})},i.updateState=function(t){var e=t.oldProps,n=t.props;if(t.changeFlags.propsChanged){var r=n.uCount,i=n.vCount;e.uCount===r&&e.vCount===i||(this.setState({vertexCount:r*i}),this.getAttributeManager().invalidateAll())}},i.getModel=function(t){return new _t.a(t,{id:this.props.id+"-surface",vs:"#define SHADER_NAME graph-layer-vertex-shader\n\nattribute vec4 positions;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float lightStrength;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float shouldDiscard;\n\nvoid main(void) {\n\n  // fit into a unit cube that centers at [0, 0, 0]\n  vec3 position_commonspace = project_position(positions.xyz);\n  gl_Position = project_common_position_to_clipspace(vec4(position_commonspace, 1.0));\n\n  // cheap way to produce believable front-lit effect.\n  // Note: clipsspace depth is nonlinear and deltaZ depends on the near and far values\n  // when creating the perspective projection matrix.\n  vec4 position_vector = project_common_position_to_clipspace(vec4(position_commonspace, 0.0));\n  float fadeFactor = 1.0 - position_vector.z * lightStrength;\n\n  vColor = vec4(colors.rgb * fadeFactor, colors.a * opacity) / 255.0;;\n\n  picking_setPickingColor(pickingColors);\n\n  shouldDiscard = positions.w;\n}\n",fs:"#define SHADER_NAME graph-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float shouldDiscard;\n\nvoid main(void) {\n  if (shouldDiscard > 0.0) {\n    discard;\n  }\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[Vt.a],drawMode:Nt.a.TRIANGLES,vertexCount:0,isIndexed:!0})},i.draw=function(t){var e=t.uniforms,n=this.props.lightStrength;this.state.model.setUniforms(Object.assign({},e,{lightStrength:n})).draw()},i.encodePickingColor=function(t){var e=this.props,n=e.uCount,r=t%n;return[r/(n-1)*255,(t-r)/n/(e.vCount-1)*255,1]},i.decodePickingColor=function(t){var e=t[0],n=t[1];return 0===t[2]?-1:[e/255,n/255]},i.getPickingInfo=function(t){var e=t.info;if(e&&-1!==e.index){var n=e.index,r=n[0],i=n[1],o=this.props.getPosition;e.sample=o(r,i)}return e},i.calculateIndices=function(t){for(var e=this.props,n=e.uCount,r=e.vCount,i=(n-1)*(r-1)*2*3,o=new Uint32Array(i),a=0,s=0;s<n-1;s++)for(var u=0;u<r-1;u++){var c=u*n+s,l=c+1,h=c+n,p=h+1;o[a++]=c,o[a++]=h,o[a++]=l,o[a++]=l,o[a++]=h,o[a++]=p}t.value=o,this.state.model.setVertexCount(i)},i.calculatePositions=function(t){for(var e=this.state.vertexCount,n=this.props,r=n.uCount,i=n.vCount,o=n.getPosition,a=n.xScale,s=n.yScale,u=n.zScale,c=new Float32Array(e*t.size),l=0,h=0;h<i;h++)for(var p=0;p<r;p++){var f=o(p/(r-1),h/(i-1)),g=f[0],v=f[1],d=f[2],m=isFinite(g),y=isFinite(v),x=isFinite(d);c[l++]=m?a(g):a.range()[0],c[l++]=x?u(d):u.range()[0],c[l++]=y?s(v):s.range()[0],c[l++]=m&&y&&x?0:1}t.value=c},i.calculateColors=function(t){var e=this.state.vertexCount,n=this.getAttributeManager().attributes.positions.value,r=new Uint8ClampedArray(e*t.size),i=this.props.getColor;i="function"==typeof i?i:function(){return i};for(var o=0;o<e;o++){var a=4*o,s=i(n[a],n[a+2],n[a+1]);r[4*o]=s[0],r[4*o+1]=s[1],r[4*o+2]=s[2],r[4*o+3]=isNaN(s[3])?255:s[3]}t.value=r},i.calculatePickingColors=function(t){for(var e=this.state.vertexCount,n=new Uint8ClampedArray(e*t.size),r=0;r<e;r++){var i=this.encodePickingColor(r);n[3*r]=i[0],n[3*r+1]=i[1],n[3*r+2]=i[2]}t.value=n},r}(Ot.a);$t.layerName="SurfaceLayer",$t.defaultProps=Bt;var Jt=n("5VxJ"),Wt=n("mejf"),Gt=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Kt=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Gt(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var Qt=Kt(Gt),te=Qt.right,ee=(Qt.left,te);var ne=Array.prototype,re=(ne.slice,ne.map,Math.sqrt(50)),ie=Math.sqrt(10),oe=Math.sqrt(2),ae=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=se(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function se(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=re?10:o>=ie?5:o>=oe?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=re?10:o>=ie?5:o>=oe?2:1)}function ue(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=re?i*=10:o>=ie?i*=5:o>=oe&&(i*=2),e<t?-i:i}n("zGcK");function ce(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function le(){}function he(t,e){var n=new le;if(t instanceof le)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}le.prototype=he.prototype={constructor:le,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var pe=he;function fe(){}var ge=pe.prototype;function ve(t,e){var n=new fe;if(t instanceof fe)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}fe.prototype=ve.prototype={constructor:fe,has:ge.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ge.remove,clear:ge.clear,values:ge.keys,size:ge.size,empty:ge.empty,each:ge.each};var de=Array.prototype,me=de.map,ye=de.slice;n("HXzo"),n("klQ5"),n("pS08");var xe=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function we(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function be(){}var Me="\\s*([+-]?\\d+)\\s*",Te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ke=/^#([0-9a-f]{3,8})$/,Ce=new RegExp("^rgb\\("+[Me,Me,Me]+"\\)$"),Ee=new RegExp("^rgb\\("+[Ae,Ae,Ae]+"\\)$"),Se=new RegExp("^rgba\\("+[Me,Me,Me,Te]+"\\)$"),Oe=new RegExp("^rgba\\("+[Ae,Ae,Ae,Te]+"\\)$"),Ne=new RegExp("^hsl\\("+[Te,Ae,Ae]+"\\)$"),_e=new RegExp("^hsla\\("+[Te,Ae,Ae,Te]+"\\)$"),Fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pe(){return this.rgb().formatHex()}function Ue(){return this.rgb().formatRgb()}function Ie(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ke.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ze(e):3===n?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?De(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?De(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ce.exec(t))?new Le(e[1],e[2],e[3],1):(e=Ee.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Se.exec(t))?De(e[1],e[2],e[3],e[4]):(e=Oe.exec(t))?De(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ne.exec(t))?Ze(e[1],e[2]/100,e[3]/100,1):(e=_e.exec(t))?Ze(e[1],e[2]/100,e[3]/100,e[4]):Fe.hasOwnProperty(t)?ze(Fe[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function ze(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function De(t,e,n,r){return r<=0&&(t=e=n=NaN),new Le(t,e,n,r)}function Re(t){return t instanceof be||(t=Ie(t)),t?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}function je(t,e,n,r){return 1===arguments.length?Re(t):new Le(t,e,n,null==r?1:r)}function Le(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function He(){return"#"+Ye(this.r)+Ye(this.g)+Ye(this.b)}function Xe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ye(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ze(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qe(t,e,n,r)}function Ve(t){if(t instanceof qe)return new qe(t.h,t.s,t.l,t.opacity);if(t instanceof be||(t=Ie(t)),!t)return new qe;if(t instanceof qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new qe(a,s,u,t.opacity)}function qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Be(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function $e(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}xe(be,Ie,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Pe,formatHex:Pe,formatHsl:function(){return Ve(this).formatHsl()},formatRgb:Ue,toString:Ue}),xe(Le,je,we(be,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:He,formatHex:He,formatRgb:Xe,toString:Xe})),xe(qe,(function(t,e,n,r){return 1===arguments.length?Ve(t):new qe(t,e,n,null==r?1:r)}),we(be,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Le(Be(t>=240?t-240:t+120,i,r),Be(t,i,r),Be(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Je=function(t){return function(){return t}};function We(t,e){return function(n){return t+n*e}}function Ge(t){return 1==(t=+t)?Ke:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Je(isNaN(e)?n:e)}}function Ke(t,e){var n=e-t;return n?We(t,n):Je(isNaN(t)?e:t)}var Qe=function t(e){var n=Ge(e);function r(t,e){var r=n((t=je(t)).r,(e=je(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Ke(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function tn(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=je(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}tn((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return $e((n-r/e)*e,a,i,o,s)}})),tn((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return $e((n-r/e)*e,i,o,a,s)}})),n("t+I+");var en=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function nn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=hn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var on=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},an=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},sn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=hn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cn=new RegExp(un.source,"g");var ln=function(t,e){var n,r,i,o=un.lastIndex=cn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=un.exec(t))&&(r=cn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:an(n,r)})),o=cn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},hn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Je(e):("number"===r?an:"string"===r?(n=Ie(e))?(e=n,Qe):ln:e instanceof Ie?Qe:e instanceof Date?on:nn(e)?en:Array.isArray(e)?rn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?sn:an)(t,e)},pn=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},fn=function(t){return+t},gn=[0,1];function vn(t){return t}function dn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function mn(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function yn(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=dn(i,r),o=n(a,o)):(r=dn(r,i),o=n(o,a)),function(t){return o(r(t))}}function xn(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=dn(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=ee(t,e,1,r)-1;return o[n](i[n](e))}}function wn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bn(){var t,e,n,r,i,o,a=gn,s=gn,u=hn,c=vn;function l(){return r=Math.min(a.length,s.length)>2?xn:yn,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),an)))(n)))},h.domain=function(t){return arguments.length?(a=me.call(t,fn),c===vn||(c=mn(a)),l()):a.slice()},h.range=function(t){return arguments.length?(s=ye.call(t),l()):s.slice()},h.rangeRound=function(t){return s=ye.call(t),u=pn,l()},h.clamp=function(t){return arguments.length?(c=t?mn(a):vn,h):c!==vn},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function Mn(t,e){return bn()(t,e)}n("n0hJ");var Tn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function An(t){if(!(e=Tn.exec(t)))throw new Error("invalid format: "+t);var e;return new kn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function kn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}An.prototype=kn.prototype,kn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Cn,En,Sn,On,Nn=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},_n=function(t){return(t=Nn(Math.abs(t)))?t[1]:NaN},Fn=function(t,e){var n=Nn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Pn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Fn(100*t,e)},r:Fn,s:function(t,e){var n=Nn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Cn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Nn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Un=function(t){return t},In=Array.prototype.map,zn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];En=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Un:(e=In.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Un:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(In.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=An(t)).fill,n=t.align,h=t.sign,p=t.symbol,f=t.zero,g=t.width,v=t.comma,d=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):Pn[y]||(void 0===d&&(d=12),m=!0,y="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var x="$"===p?i:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===p?o:/[%p]/.test(y)?u:"",b=Pn[y],M=/[defgprs%]/.test(y);function T(t){var i,o,u,p=x,T=w;if("c"===y)T=b(t)+T,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),d),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==h&&(A=!1),p=(A?"("===h?h:c:"-"===h||"("===h?"":h)+p,T=("s"===y?zn[8+Cn/3]:"")+T+(A&&"("===h?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?a+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}v&&!f&&(t=r(t,1/0));var k=p.length+t.length+T.length,C=k<g?new Array(g-k+1).join(e):"";switch(v&&f&&(t=r(C+t,C.length?g-T.length:1/0),C=""),n){case"<":t=p+t+T+C;break;case"=":t=p+C+t+T;break;case"^":t=C.slice(0,k=C.length>>1)+p+t+T+C.slice(k);break;default:t=C+p+t+T}return s(t)}return d=void 0===d?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=An(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(_n(e)/3))),i=Math.pow(10,-r),o=zn[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Sn=En.format,On=En.formatPrefix;var Dn=function(t,e,n,r){var i,o=ue(t,e,n);switch((r=An(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_n(e)/3)))-_n(Math.abs(t)))}(o,a))||(r.precision=i),On(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_n(e)-_n(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-_n(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Sn(r)};function Rn(t){var e=t.domain;return t.ticks=function(t){var n=e();return ae(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Dn(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=se(s,u,n))>0?r=se(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=se(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function jn(){var t=Mn(vn,vn);return t.copy=function(){return wn(t,jn())},ce.apply(t,arguments),Rn(t)}var Ln=new Date,Hn=new Date;function Xn(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Xn((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Ln.setTime(+e),Hn.setTime(+r),t(Ln),t(Hn),Math.floor(n(Ln,Hn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Yn=Xn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Yn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Xn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Zn=Yn,Vn=(Yn.range,Xn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));Vn.range;function qn(t){return Xn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Bn=qn(0),$n=qn(1),Jn=qn(2),Wn=qn(3),Gn=qn(4),Kn=qn(5),Qn=qn(6),tr=(Bn.range,$n.range,Jn.range,Wn.range,Gn.range,Kn.range,Qn.range,Xn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),er=tr,nr=(tr.range,Xn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),rr=(nr.range,Xn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),ir=(rr.range,Xn((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),or=(ir.range,Xn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));or.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Xn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):or:null};or.range;function ar(t){return Xn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var sr=ar(0),ur=ar(1),cr=ar(2),lr=ar(3),hr=ar(4),pr=ar(5),fr=ar(6),gr=(sr.range,ur.range,cr.range,lr.range,hr.range,pr.range,fr.range,Xn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),vr=gr,dr=(gr.range,Xn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));dr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Xn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var mr=dr;dr.range;function yr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var br,Mr={"-":"",_:" ",0:"0"},Tr=/^\s*\d+/,Ar=/^%/,kr=/[\\^$*+?|[\]().{}]/g;function Cr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Er(t){return t.replace(kr,"\\$&")}function Sr(t){return new RegExp("^(?:"+t.map(Er).join("|")+")","i")}function Or(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Nr(t,e,n){var r=Tr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function _r(t,e,n){var r=Tr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Fr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Pr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ir(t,e,n){var r=Tr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Rr(t,e,n){var r=Tr.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function jr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Lr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=Tr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Xr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Yr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Zr(t,e,n){var r=Tr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=Tr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function qr(t,e,n){var r=Tr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Br(t,e,n){var r=Ar.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function $r(t,e,n){var r=Tr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Jr(t,e,n){var r=Tr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Wr(t,e){return Cr(t.getDate(),e,2)}function Gr(t,e){return Cr(t.getHours(),e,2)}function Kr(t,e){return Cr(t.getHours()%12||12,e,2)}function Qr(t,e){return Cr(1+er.count(Zn(t),t),e,3)}function ti(t,e){return Cr(t.getMilliseconds(),e,3)}function ei(t,e){return ti(t,e)+"000"}function ni(t,e){return Cr(t.getMonth()+1,e,2)}function ri(t,e){return Cr(t.getMinutes(),e,2)}function ii(t,e){return Cr(t.getSeconds(),e,2)}function oi(t){var e=t.getDay();return 0===e?7:e}function ai(t,e){return Cr(Bn.count(Zn(t)-1,t),e,2)}function si(t,e){var n=t.getDay();return t=n>=4||0===n?Gn(t):Gn.ceil(t),Cr(Gn.count(Zn(t),t)+(4===Zn(t).getDay()),e,2)}function ui(t){return t.getDay()}function ci(t,e){return Cr($n.count(Zn(t)-1,t),e,2)}function li(t,e){return Cr(t.getFullYear()%100,e,2)}function hi(t,e){return Cr(t.getFullYear()%1e4,e,4)}function pi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Cr(e/60|0,"0",2)+Cr(e%60,"0",2)}function fi(t,e){return Cr(t.getUTCDate(),e,2)}function gi(t,e){return Cr(t.getUTCHours(),e,2)}function vi(t,e){return Cr(t.getUTCHours()%12||12,e,2)}function di(t,e){return Cr(1+vr.count(mr(t),t),e,3)}function mi(t,e){return Cr(t.getUTCMilliseconds(),e,3)}function yi(t,e){return mi(t,e)+"000"}function xi(t,e){return Cr(t.getUTCMonth()+1,e,2)}function wi(t,e){return Cr(t.getUTCMinutes(),e,2)}function bi(t,e){return Cr(t.getUTCSeconds(),e,2)}function Mi(t){var e=t.getUTCDay();return 0===e?7:e}function Ti(t,e){return Cr(sr.count(mr(t)-1,t),e,2)}function Ai(t,e){var n=t.getUTCDay();return t=n>=4||0===n?hr(t):hr.ceil(t),Cr(hr.count(mr(t),t)+(4===mr(t).getUTCDay()),e,2)}function ki(t){return t.getUTCDay()}function Ci(t,e){return Cr(ur.count(mr(t)-1,t),e,2)}function Ei(t,e){return Cr(t.getUTCFullYear()%100,e,2)}function Si(t,e){return Cr(t.getUTCFullYear()%1e4,e,4)}function Oi(){return"+0000"}function Ni(){return"%"}function _i(t){return+t}function Fi(t){return Math.floor(+t/1e3)}!function(t){br=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Sr(i),l=Or(i),h=Sr(o),p=Or(o),f=Sr(a),g=Or(a),v=Sr(s),d=Or(s),m=Sr(u),y=Or(u),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Wr,e:Wr,f:ei,H:Gr,I:Kr,j:Qr,L:ti,m:ni,M:ri,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:_i,s:Fi,S:ii,u:oi,U:ai,V:si,w:ui,W:ci,x:null,X:null,y:li,Y:hi,Z:pi,"%":Ni},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:fi,e:fi,f:yi,H:gi,I:vi,j:di,L:mi,m:xi,M:wi,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:_i,s:Fi,S:bi,u:Mi,U:Ti,V:Ai,w:ki,W:Ci,x:null,X:null,y:Ei,Y:Si,Z:Oi,"%":Ni},b={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=d[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:Lr,e:Lr,f:qr,H:Xr,I:Xr,j:Hr,L:Vr,m:jr,M:Yr,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:Rr,Q:$r,s:Jr,S:Zr,u:_r,U:Fr,V:Pr,w:Nr,W:Ur,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:zr,Y:Ir,Z:Dr,"%":Br};function M(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Mr[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function T(t,e){return function(n){var r,i,o=wr(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=xr(wr(o.y,0,1))).getUTCDay(),r=i>4||0===i?ur.ceil(r):ur(r),r=vr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=yr(wr(o.y,0,1))).getDay(),r=i>4||0===i?$n.ceil(r):$n(r),r=er.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?xr(wr(o.y,0,1)).getUTCDay():yr(wr(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,xr(o)):yr(o)}}function A(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in Mr?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=M(n,x),x.X=M(r,x),x.c=M(e,x),w.x=M(n,w),w.X=M(r,w),w.c=M(e,w),{format:function(t){var e=M(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}(t),br.format,br.parse,br.utcFormat,br.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Pi=Xn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Ui=(Pi.range,Xn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Ii=(Ui.range,Xn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));Ii.range;var zi={type:"function",value:function(){return jn()}},Di={type:"function",value:function(t){return t.toFixed(2)}},Ri=[0,0,0,255],ji={getPosition:{type:"accessor",value:function(t,e){return[0,0,0]}},getColor:{type:"accessor",value:function(t,e,n){return Ri}},getXScale:zi,getYScale:zi,getZScale:zi,uCount:100,vCount:100,lightStrength:.1,drawAxes:!0,fontSize:12,xTicks:6,yTicks:6,zTicks:6,xTickFormat:Di,yTickFormat:Di,zTickFormat:Di,xTitle:"x",yTitle:"y",zTitle:"z",axesPadding:0,axesColor:[0,0,0,255],coordinateSystem:Jt.a.CARTESIAN},Li=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.updateState=function(){for(var t=this.props,e=t.uCount,n=t.vCount,r=t.getPosition,i=t.getXScale,o=t.getYScale,a=t.getZScale,s=1/0,u=-1/0,c=1/0,l=-1/0,h=1/0,p=-1/0,f=0;f<n;f++)for(var g=0;g<e;g++){var v=r(g/(e-1),f/(n-1)),d=v[0],m=v[1],y=v[2];isFinite(d)&&(s=Math.min(s,d),u=Math.max(u,d)),isFinite(m)&&(c=Math.min(c,m),l=Math.max(l,m)),isFinite(y)&&(h=Math.min(h,y),p=Math.max(p,y))}var x=i({min:s,max:u}),w=o({min:c,max:l}),b=a({min:h,max:p});this.setState({xScale:x,yScale:w,zScale:b})},i.renderLayers=function(){var t=this.state,e=t.xScale,n=t.yScale,r=t.zScale,i=this.props,o=i.getPosition,a=i.getColor,s=i.uCount,u=i.vCount,c=i.lightStrength,l=i.fontSize,h=i.xTicks,p=i.yTicks,f=i.zTicks,g=i.xTickFormat,v=i.yTickFormat,d=i.zTickFormat,m=i.xTitle,y=i.yTitle,x=i.zTitle,w=i.axesPadding,b=i.axesColor,M=i.drawAxes,T=i.updateTriggers;return[new $t({getPosition:o,getColor:a,uCount:s,vCount:u,xScale:e,yScale:n,zScale:r,lightStrength:c},this.getSubLayerProps({id:"surface",updateTriggers:T})),new Zt({xScale:e,yScale:n,zScale:r,fontSize:l,xTicks:h,yTicks:p,zTicks:f,xTickFormat:g,yTickFormat:v,zTickFormat:d,xTitle:m,yTitle:y,zTitle:x,padding:w,color:b},this.getSubLayerProps({id:"axes"}),{visible:M,pickable:!1})]},r}(Wt.a);Li.layerName="PlotLayer",Li.defaultProps=ji;var Hi=function(t,e){return Math.sin(t*t+e*e)*t/Math.PI},Xi={target:[.5,.5,.5],orbitAxis:"Y",rotationX:30,rotationOrbit:-30,zoom:"undefined"!=typeof window?Math.log2(window.innerHeight/3):1};function Yi(t){var e=t.min,n=t.max;return jn().domain([e,n]).range([0,1])}function Zi(t){var e=t.sample;return e&&e.map((function(t){return t.toFixed(3)})).join(", ")}function Vi(t){var e=t.resolution,n=void 0===e?200:e,r=t.showAxis,o=void 0===r||r,a=t.equation,s=void 0===a?Hi:a,u=[s&&n&&new Li({getPosition:function(t,e){var n=(t-.5)*Math.PI*2,r=(e-.5)*Math.PI*2;return[n,r,s(n,r)]},getColor:function(t,e,n){return[40,128*n+128,160]},getXScale:Yi,getYScale:Yi,getZScale:Yi,uCount:n,vCount:n,drawAxes:o,axesPadding:.25,axesColor:[0,0,0,128],pickable:!0,updateTriggers:{getPosition:s}})];return i.a.createElement(Et.a,{layers:u,views:new St.a,initialViewState:Xi,controller:!0,getTooltip:Zi})}var qi=n("hChg"),Bi=n("CtqP");var $i=Object(qi.a)((function(t){var e=t.value;try{var n=Tt.parse(e);return{valid:!0,func:function(t,e){return n.evaluate({x:t,y:e})},text:n.toString()}}catch(r){return{valid:!1}}})),Ji=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).state={equation:{}},n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.renderInfo=function(t){return i.a.createElement("div",null,i.a.createElement("p",null,"Surface plot from a mathematical equation"),i.a.createElement("p",null,"Hover on the plot to see the values"))},r.prototype.render=function(){var t=this.props.params,e=t.resolution,n=t.showAxis,r=t.equation,o=$i(r);return i.a.createElement(Vi,{equation:o.valid?o.func:null,resolution:e.value,showAxis:n.value})},r}(r.Component);Ji.title="3D Surface Explorer",Ji.code=Ct.b+"/examples/website/plot",Ji.parameters={equation:{displayName:"Z = f(x, y)",type:"text",value:"sin(x ^ 2 + y ^ 2) * x / 3.14"},resolution:{displayName:"Resolution",type:"range",value:200,step:10,min:10,max:1e3},showAxis:{displayName:"Grid",type:"checkbox",value:!0}};e.default=Object(Bi.a)(Ji)},JHHQ:function(t,e,n){var r=n("P8UN"),i=n("gDik");r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},Klu8:function(t,e,n){var r=n("P8UN");r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},"M0K/":function(t,e,n){var r=n("P8UN");r(r.S,"Math",{log1p:n("ctAC")})},PD1m:function(t,e,n){var r=n("P8UN"),i=n("+Gmq");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},UOA8:function(t,e,n){var r=n("P8UN");r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},ctAC:function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},hUFJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("E5k/");var r=n("hAA0"),i=n("YiiH"),o=n("1+Ew"),a=n("pNJ/");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var c=Math.PI/180;function l(t){var e=t.height,n=t.fovy,r=t.orbitAxis,i=t.rotationX,a=t.rotationOrbit,s=t.zoom,u=.5/Math.tan(n*c/2),l="Z"===r?[0,0,1]:[0,1,0],h="Z"===r?[0,-u,0]:[0,0,u],p=(new o.a).lookAt({eye:h,up:l});p.rotateX(i*c),"Z"===r?p.rotateZ(a*c):p.rotateY(a*c);var f=Math.pow(2,s)/(e||1);return p.scale(f),p}var h=function(t){function e(e){var n=e.id,r=e.x,i=e.y,o=e.width,a=e.height,s=e.fovy,u=void 0===s?50:s,c=e.near,h=e.far,p=e.orbitAxis,f=void 0===p?"Z":p,g=e.target,v=void 0===g?[0,0,0]:g,d=e.rotationX,m=void 0===d?0:d,y=e.rotationOrbit,x=void 0===y?0:y,w=e.zoom,b=void 0===w?0:w;return t.call(this,{id:n,viewMatrix:l({height:a,fovy:u,orbitAxis:f,rotationX:m,rotationOrbit:x,zoom:b}),fovy:u,near:c,far:h,x:r,y:i,position:v,width:o,height:a,zoom:b})||this}return u(e,t),e}(i.a),p=function(t){function e(e){return t.call(this,Object.assign({},e,{type:h}))||this}var n,r,i;return u(e,t),n=e,(r=[{key:"controller",get:function(){return this._getControllerProps({type:a.b})}}])&&s(n.prototype,r),i&&s(n,i),e}(r.a);p.displayName="OrbitView"},kbo5:function(t,e,n){var r=n("P8UN"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},lAej:function(t,e,n){var r=n("P8UN"),i=n("ctAC"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},"pNJ/":function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return g}));n("QNMc"),n("E5k/"),n("YBKJ"),n("9ZhD");var r=n("1+Ew"),i=n("lKxY"),o=n("rBR8"),a=n("18Jy"),s=n("2bi0"),u=n("kDl2");function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var l={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},h={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new a.a(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:s.a.BREAK},p=function(t){return Math.pow(2,t)},f=function(t){function e(e){var n,r=e.makeViewport,i=e.width,o=e.height,a=e.orbitAxis,s=void 0===a?l.orbitAxis:a,u=e.rotationX,c=void 0===u?l.rotationX:u,h=e.rotationOrbit,p=void 0===h?l.rotationOrbit:h,f=e.target,g=void 0===f?l.target:f,v=e.zoom,d=void 0===v?l.zoom:v,m=e.minRotationX,y=void 0===m?l.minRotationX:m,x=e.maxRotationX,w=void 0===x?l.maxRotationX:x,b=e.minZoom,M=void 0===b?l.minZoom:b,T=e.maxZoom,A=void 0===T?l.maxZoom:T,k=e.startPanPosition,C=e.startTarget,E=e.startRotationX,S=e.startRotationOrbit,O=e.startZoomPosition,N=e.startZoom;return(n=t.call(this,{width:i,height:o,orbitAxis:s,rotationX:c,rotationOrbit:p,target:g,zoom:d,minRotationX:y,maxRotationX:w,minZoom:M,maxZoom:A})||this)._interactiveState={startPanPosition:k,startTarget:C,startRotationX:E,startRotationOrbit:S,startZoomPosition:O,startZoom:N},n.makeViewport=r,n}c(e,t);var n=e.prototype;return n.getViewportProps=function(){return this._viewportProps},n.getInteractiveState=function(){return this._interactiveState},n.panStart=function(t){var e=t.pos,n=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:n})},n.pan=function(t){var e=t.pos,n=(t.startPos,this._interactiveState),i=n.startPanPosition,o=n.startTarget,a=new r.c(e).subtract(i);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:o,pixelOffset:a})})},n.panEnd=function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})},n.rotateStart=function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})},n.rotate=function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=this._interactiveState,i=r.startRotationX,o=r.startRotationOrbit;return Number.isFinite(i)&&Number.isFinite(o)?((i<-90||i>90)&&(e*=-1),this._getUpdatedState({rotationX:i+180*n,rotationOrbit:o+180*e,isRotating:!0})):this},n.rotateEnd=function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})},n.shortestPathFrom=function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n},n.zoomStart=function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})},n.zoom=function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.width,s=i.height,u=i.target,c=this._interactiveState,l=c.startZoom,h=c.startZoomPosition,f=c.startTarget;Number.isFinite(l)||(l=o,f=u,h=n||e);var g=this._calculateNewZoom({scale:r,startZoom:l}),v=p(l),d=p(g),m=(a/2-h[0])*(d/v-1),y=(s/2-h[1])*(d/v-1);return this._getUpdatedState({zoom:g,target:this._calculateNewTarget({startTarget:f,zoom:g,pixelOffset:[m,y]})})},n.zoomEnd=function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})},n.zoomIn=function(t){return void 0===t&&(t=2),this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})},n.zoomOut=function(t){return void 0===t&&(t=2),this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})},n.moveLeft=function(t){void 0===t&&(t=50);var e=[-t,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})},n.moveRight=function(t){void 0===t&&(t=50);var e=[t,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})},n.moveUp=function(t){void 0===t&&(t=50);var e=[0,-t];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})},n.moveDown=function(t){void 0===t&&(t=50);var e=[0,t];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})},n.rotateLeft=function(t){return void 0===t&&(t=15),this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})},n.rotateRight=function(t){return void 0===t&&(t=15),this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})},n.rotateUp=function(t){return void 0===t&&(t=10),this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})},n.rotateDown=function(t){return void 0===t&&(t=10),this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})},n._calculateNewZoom=function(t){var e=t.scale,n=t.startZoom,i=this._viewportProps,o=i.maxZoom,a=i.minZoom;Number.isFinite(n)||(n=this._viewportProps.zoom);var s=n+Math.log2(e);return Object(r.e)(s,a,o)},n._calculateNewTarget=function(t){var e=t.startTarget,n=t.zoom,r=t.pixelOffset,i=Object.assign({},this._viewportProps);Number.isFinite(n)&&(i.zoom=n),e&&(i.target=e);var o=this.makeViewport(i),a=o.project(i.target);return o.unproject([a[0]-r[0],a[1]-r[1],a[2]])},n._getUpdatedState=function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))},n._applyConstraints=function(t){var e=t.maxZoom,n=t.minZoom,i=t.zoom,o=t.maxRotationX,a=t.minRotationX,s=t.rotationOrbit;return t.zoom=Object(r.e)(i,n,e),t.rotationX=Object(r.e)(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=Object(u.e)(s+180,360)-180),t},e}(o.a),g=function(t){function e(e){return t.call(this,f,e)||this}return c(e,t),e.prototype._getTransitionProps=function(){return h},e}(i.a)},xXlm:function(t,e,n){var r=n("P8UN"),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})}}]);