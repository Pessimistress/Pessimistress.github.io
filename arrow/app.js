!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=131)}([function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(59),i=n(22);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.b.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),o=-1!==n.indexOf("Trident/");return r||o}var a=n(3),s={};function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";s[t]=s[t]||1;var e=s[t]++;return"".concat(t,"-").concat(e)}function c(t){return Object(a.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function l(t){var e=!0;for(var n in t){e=!1;break}return e}var f=n(33);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isInteger,r=void 0!==n&&n;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,o=void 0===i?1:i,a="[",s=0;s<t.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=h(t[s],e);var u=t.length>r?"...":"]";return"".concat(a).concat(u)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function d(t,e,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(function(t){o.methodName||(o[t]=function(){throw f.a.removed("Calling removed method ".concat(e,".").concat(t,": "),i),new Error(t)})})}n.d(e,"c",function(){return r.a}),n.d(e,"e",function(){return o}),n.d(e,"i",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"g",function(){return f.a}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return a.a}),n.d(e,"h",function(){return d})},function(t,e,n){"use strict";var r=n(26),i=n(49);function o(t){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function a(t){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var s=35632,u=35633;function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}function l(t,e,n,r){for(var i=t.split(/\r?\n/),o={},a={},l=r||c(e)||"(unnamed)",d="".concat(function(t){switch(t){case s:return"fragment";case u:return"vertex";default:return"unknown type"}}(n)," shader ").concat(l),v=0;v<i.length;v++){var p=i[v];if(!(p.length<=1)){var g=p.split(":"),y=g[0],b=parseInt(g[2],10);if(isNaN(b))throw new Error("GLSL compilation error in ".concat(d,": ").concat(t));"WARNING"!==y?o[b]=p:a[b]=p}}var m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(function(t,r){var o=r+e,a=String(o).length,s=h(o,i-a);return s+n+t})}(e);return{shaderName:d,errors:f(o,m),warnings:f(a,m)}}function f(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var o=t[r+1],a=o.split(":",3),s=a[0],u=parseInt(a[1],10)||0,c=o.substring(a.join(":").length+1).trim();n+=h("^^^ ".concat(s,": ").concat(c,"\n\n"),u)}}return n}function h(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var d=n(32),v=n(27);function p(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var g=n(42),y=n(58),b=n(72),m=n(46),_=n.n(m);function w(t,e){_()(t instanceof g.a||t instanceof y.a||t instanceof b.a);var n=t.constructor,r=t.gl,i=t.width,o=t.height,a=t.format,s=t.type,u=t.dataFormat,c=t.border,l=t.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:u,border:c,mipmaps:l},e))}n.d(e,"c",function(){return r.c}),n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b}),n.d(e,"m",function(){return i.c}),n.d(e,"n",function(){return i.d}),n.d(e,"e",function(){return i.b}),n.d(e,"d",function(){return i.a}),n.d(e,"p",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"o",function(){return l}),n.d(e,"k",function(){return c}),n.d(e,"h",function(){return d.a}),n.d(e,"q",function(){return d.d}),n.d(e,"j",function(){return v.b}),n.d(e,"i",function(){return v.a}),n.d(e,"l",function(){return p}),n.d(e,"g",function(){return w})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(20),i=n(15);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!=typeof e?Object(i.a)(t):e}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(75);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(49),i=n(27),o=n(5),a=n(26),s="Failed to create WebGL context in Node.js, headless gl not available",u="Failed to create WebGL context in Node.js, headless gl returned null";var c,l=n(4),f=l.c&&"undefined"!=typeof document,h=f&&"complete"===document.readyState;function d(){return c||(c=f?new Promise(function(t,e){if(f&&"complete"===document.readyState)return h=!0,void t(document);window.onload=function(){h=!0,t(document)}}):Promise.resolve({})),c}function v(t){var e,n=t.canvas,r=t.width,i=t.height,o=t.onError,a=void 0===o?function(){}:o;return"string"==typeof n?(h||a("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):e=n||function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?600:r,o=t.id,a=void 0===o?"gl-canvas":o,s=t.insert,u=void 0===s||s,c=document.createElement("canvas");if(c.id=a,c.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",c.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",u){var l=document.body;l.insertBefore(c,l.firstChild)}return c}({id:"lumagl-canvas",width:r,height:i,onError:a}),e}var p=n(50),g=n(1),y=n(22);function b(t){return t.luma=t.luma||{},t.luma}function m(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===t?null:void 0===e||e?function(t){if(null===t)return null;if(!y.a.WebGLDebug)return l.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),t;var e=b(t);if(e.realContext)return t;if(e.debugContext)return e.debugContext;var n=y.a.WebGLDebug.makeDebugContext(t,w,O);return Object.assign(function t(){Object(g.a)(this,t)}.prototype,n),e.debugContext=n,n.debug=!0,n.gl=t,l.g.info("debug context actived."),n}(t):function(t){if(null===t)return null;var e=b(t);return e.realContext?e.realContext:t}(t)}function _(t,e){var n=y.a.WebGLDebug.glFunctionArgsToString(t,e);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(t,"(").concat(n,")")}function w(t,e,n){var r=y.a.WebGLDebug.glEnumToString(t),i=y.a.WebGLDebug.glFunctionArgsToString(e,n),o="".concat(r," in gl.").concat(e,"(").concat(i,")");if(l.g.throw)throw new Error(o);l.g.error(o)()}function O(t,e){var n;if(l.g.priority>=4&&(n=_(t,e),l.g.log(4,n)()),l.g.break){n=n||_(t,e);l.g.break&&l.g.break.every(function(t){return-1!==n.indexOf(t)})}var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value){if(n=n||_(t,e),l.g.throw)throw new Error("Undefined argument: ".concat(n));l.g.error("Undefined argument: ".concat(n))}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}var E,S=n(0);E={},Object(S.a)(E,33902,{gl1:new Float32Array([1,1])}),Object(S.a)(E,33901,{gl1:new Float32Array([1,1])}),Object(S.a)(E,3379,{gl1:64,gl2:2048}),Object(S.a)(E,34076,{gl1:16}),Object(S.a)(E,34930,{gl1:8}),Object(S.a)(E,35661,{gl1:8}),Object(S.a)(E,35660,{gl1:0}),Object(S.a)(E,34024,{gl1:1}),Object(S.a)(E,36348,{gl1:8}),Object(S.a)(E,34921,{gl1:8}),Object(S.a)(E,36347,{gl1:128}),Object(S.a)(E,36349,{gl1:16}),Object(S.a)(E,3386,{gl1:new Int32Array([0,0])}),Object(S.a)(E,32883,{gl1:0,gl2:256}),Object(S.a)(E,35071,{gl1:0,gl2:256}),Object(S.a)(E,37447,{gl1:0,gl2:0}),Object(S.a)(E,36063,{gl1:0,gl2:4}),Object(S.a)(E,35379,{gl1:0,gl2:0}),Object(S.a)(E,35374,{gl1:0,gl2:0}),Object(S.a)(E,35377,{gl1:0,gl2:0}),Object(S.a)(E,34852,{gl1:0,gl2:4}),Object(S.a)(E,36203,{gl1:0,gl2:0}),Object(S.a)(E,33001,{gl1:0,gl2:0}),Object(S.a)(E,33e3,{gl1:0,gl2:0}),Object(S.a)(E,37157,{gl1:0,gl2:0}),Object(S.a)(E,35373,{gl1:0,gl2:0}),Object(S.a)(E,35657,{gl1:0,gl2:0}),Object(S.a)(E,36183,{gl1:0,gl2:0}),Object(S.a)(E,37137,{gl1:0,gl2:0}),Object(S.a)(E,34045,{gl1:0,gl2:0}),Object(S.a)(E,35978,{gl1:0,gl2:0}),Object(S.a)(E,35979,{gl1:0,gl2:0}),Object(S.a)(E,35968,{gl1:0,gl2:0}),Object(S.a)(E,35376,{gl1:0,gl2:0}),Object(S.a)(E,35375,{gl1:0,gl2:0}),Object(S.a)(E,35659,{gl1:0,gl2:0}),Object(S.a)(E,37154,{gl1:0,gl2:0}),Object(S.a)(E,35371,{gl1:0,gl2:0}),Object(S.a)(E,35658,{gl1:0,gl2:0}),Object(S.a)(E,35076,{gl1:0,gl2:-8,negative:!0}),Object(S.a)(E,35077,{gl1:0,gl2:7}),Object(S.a)(E,35380,{gl1:0,gl2:0});var A=n(2),T=function(t){return t},j=new(function(){function t(){Object(g.a)(this,t),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(A.a)(t,[{key:"poll",value:function(t){this.cancelInvalidQueries(t);var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(t){var e=t.queryType,n=t.errorMessage,r=t.checkInvalid;this.invalidQueryType=e,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;this.cancelInvalidQueries(t.gl),this.cancelQuery(t);var r={};return t.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),Object.assign(t.promise,r),this.pendingQueries.add(t),t.promise.then(e).catch(n)}},{key:"resolveQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise.resolve(e)}},{key:"rejectQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise&&t.promise.reject(new Error(e))}},{key:"deleteQuery",value:function(t){return this.rejectQuery(t,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(t){return this.rejectQuery(t,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(t){t instanceof this.invalidQueryType&&this.rejectQuery(t,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(t){if(this.checkInvalid(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.invalidateQuery(a)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}}]),t}()),P=n(3),R=32874;function I(t){return Boolean(t&&(t instanceof o.a||t.TEXTURE_BINDING_3D===R))}var k={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function x(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e=Object.assign({},k,e),r=n.canvas,i=n.width,o=n.height,c=n.throwOnError,f=n.manageState,h=n.debug;function d(t){if(c)throw new Error(t);return null}l.c?t=function(t){var e=t.canvas,n=t.opts,r=void 0===n?{}:n,i=t.onError,o=void 0===i?function(t){return null}:i;function a(t){o("WebGL context: ".concat(t.statusMessage||"Unknown error"))}e.addEventListener("webglcontextcreationerror",a,!1);var s=r.webgl1,u=void 0===s||s,c=r.webgl2,l=void 0===c||c,f=null;return l&&(f=(f=f||e.getContext("webgl2",r))||e.getContext("experimental-webgl2",r)),u&&(f=(f=f||e.getContext("webgl",r))||e.getContext("experimental-webgl",r)),e.removeEventListener("webglcontextcreationerror",a,!1),f||o("Failed to create ".concat(l&&!u?"WebGL2":"WebGL"," context"))}({canvas:v({canvas:r,width:i,height:o,onError:d}),opts:e}):t=function(t){var e=t.width,n=t.height,r=t.opts,i=t.onError,o=r.webgl1;if(r.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!a.d)return i(s);var c=Object(a.d)(e,n,r);return c||i(u)}({width:i,height:o,opts:e,onError:d});return t?(f&&Object(p.a)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.g.log.apply(l.g,[1].concat(e))()}}),l.c&&h&&(t=m(t,{debug:h}),l.g.priority=Math.max(l.g.priority,1)),function(t){var e=I(t)?"WebGL2":"WebGL1",n=function(t){return function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t)}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";l.g.once(0,"".concat(e).concat(i," context ").concat(r))()}(t),t):null}var M=n(21),C={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},F={};Object.keys(C).forEach(function(t){F[t]=t});function L(t,e){var n=C[e];Object(P.a)(n,e);var r=Object(o.n)(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Object(P.a)(!1===i||!0===i),i}function N(t,e){return(e=Array.isArray(e)?e:[e]).every(function(e){return L(t,e)})}var D=n(19),B=n(7),U=n(6),V=n(8),z=n(25),G="Shader: GLSL source code must be a JavaScript string",W=35632,H=35633,X=function(t){function e(t,n){var r;Object(g.a)(this,e),Object(o.e)(t),Object(P.a)("string"==typeof n.source,G);var i=Object(o.k)(n.source,null)||n.id||Object(l.i)("unnamed ".concat(e.getTypeName(n.shaderType)));return(r=Object(B.a)(this,Object(U.a)(e).call(this,t,{id:i}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"getTypeName",value:function(t){switch(t){case H:return"vertex-shader";case W:return"fragment-shader";default:return Object(P.a)(!1),"unknown"}}}]),Object(A.a)(e,[{key:"initialize",value:function(t){var e=t.source,n=Object(o.k)(e,null);n&&(this.id=Object(l.i)(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Object(o.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var t=this.gl.getShaderInfoLog(this.handle),e=Object(o.o)(t,this.source,this.shaderType,this.id),n=e.shaderName,r=e.errors,i=e.warnings;throw l.g.error("GLSL compilation errors in ".concat(n,"\n").concat(r))(),l.g.warn("GLSL compilation warnings in ".concat(n,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(n))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),e}(z.a),q=function(t){function e(t,n){return Object(g.a)(this,e),"string"==typeof n&&(l.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{shaderType:H})))}return Object(V.a)(e,t),Object(A.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(H)}}]),e}(X),Y=function(t){function e(t,n){return Object(g.a)(this,e),"string"==typeof n&&(l.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{shaderType:W})))}return Object(V.a)(e,t),Object(A.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(W)}}]),e}(X);function Z(t,e,n){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(U.a)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var K,Q=n(15),J=n(37),$=n(14),tt=n(42),et="EXT_color_buffer_float",nt=(K={},Object(S.a)(K,33189,{}),Object(S.a)(K,33190,{gl2:!0}),Object(S.a)(K,36012,{gl2:!0}),Object(S.a)(K,36168,{}),Object(S.a)(K,34041,{}),Object(S.a)(K,35056,{gl2:!0}),Object(S.a)(K,36013,{gl2:!0}),Object(S.a)(K,32854,{}),Object(S.a)(K,36194,{}),Object(S.a)(K,32855,{}),Object(S.a)(K,33321,{gl2:!0}),Object(S.a)(K,33330,{gl2:!0}),Object(S.a)(K,33329,{gl2:!0}),Object(S.a)(K,33332,{gl2:!0}),Object(S.a)(K,33331,{gl2:!0}),Object(S.a)(K,33334,{gl2:!0}),Object(S.a)(K,33333,{gl2:!0}),Object(S.a)(K,33323,{gl2:!0}),Object(S.a)(K,33336,{gl2:!0}),Object(S.a)(K,33335,{gl2:!0}),Object(S.a)(K,33338,{gl2:!0}),Object(S.a)(K,33337,{gl2:!0}),Object(S.a)(K,33340,{gl2:!0}),Object(S.a)(K,33339,{gl2:!0}),Object(S.a)(K,32849,{gl2:!0}),Object(S.a)(K,32856,{gl2:!0}),Object(S.a)(K,32857,{gl2:!0}),Object(S.a)(K,36220,{gl2:!0}),Object(S.a)(K,36238,{gl2:!0}),Object(S.a)(K,36975,{gl2:!0}),Object(S.a)(K,36214,{gl2:!0}),Object(S.a)(K,36232,{gl2:!0}),Object(S.a)(K,36226,{gl2:!0}),Object(S.a)(K,36208,{gl2:!0}),Object(S.a)(K,33325,{gl2:et}),Object(S.a)(K,33327,{gl2:et}),Object(S.a)(K,34842,{gl2:et}),Object(S.a)(K,33326,{gl2:et}),Object(S.a)(K,33328,{gl2:et}),Object(S.a)(K,34836,{gl2:et}),Object(S.a)(K,35898,{gl2:et}),K);var rt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),(n=Object(B.a)(this,Object(U.a)(e).call(this,t,r))).initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"isSupported",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!e||function(t,e,n){var r=n[e];if(!r)return!1;var i=Object(o.n)(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,nt)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),Object(A.a)(e,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,a=void 0===i?1:i,s=t.samples,u=void 0===s?0:s;return Object(P.a)(e,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==u&&Object(o.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,u,e,r,a):this.gl.renderbufferStorage(36161,e,r,a),this.format=e,this.width=r,this.height=a,this.samples=u,this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),e}(z.a),it=256,ot=1024,at=16384,st=6144,ut=6145,ct=6146,lt=34041,ft="clear: bad arguments";function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.color,o=void 0===i?null:i,a=e.depth,s=void 0===a?null:a,u=e.stencil,c=void 0===u?null:u,l={};r&&(l.framebuffer=r);var f=0;o&&(f|=at,!0!==o&&(l.clearColor=o)),s&&(f|=it,!0!==s&&(l.clearDepth=s)),c&&(f|=ot,!0!==s&&(l.clearStencil=s)),Object(P.a)(0!==f,ft),Object(M.c)(t,l,function(){t.clear(f)})}var dt=n(32);function vt(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(P.a)(!1),0}}var pt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),(n=Object(B.a)(this,Object(U.a)(e).call(this,t,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(A.a)(e,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat;return n&&t.getExtension(Object(o.n)(t)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&t.getExtension(Object(o.n)(t)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),Object(A.a)(e,[{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.attachments,a=void 0===o?null:o,s=t.color,u=void 0===s||s,c=t.depth,l=void 0===c||c,f=t.stencil,h=void 0!==f&&f,d=t.check,v=void 0===d||d,p=t.readBuffer,g=t.drawBuffers;if(Object(P.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var y in a){var b=a[y];(Array.isArray(b)?b[0]:b).resize({width:n,height:i})}else a=this._createDefaultAttachments({color:u,depth:l,stencil:h,width:n,height:i});this.update({clearAttachments:!0,attachments:a,readBuffer:p,drawBuffers:g}),a&&v&&this.checkStatus()}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,o=t.clearAttachments,a=void 0!==o&&o;this.attach(n,{clearAttachments:a});var s=this.gl,u=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,u||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return Object(P.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&l.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n)),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clearAttachments,r={};void 0!==n&&n&&Object.keys(this.attachments).forEach(function(t){r[t]=null}),Object.assign(r,t);var i=this.gl.bindFramebuffer(36160,this.handle);for(var o in r){Object(P.a)(void 0!==o,"Misspelled framebuffer binding point?");var a=Number(o),s=r[a],u=s;if(u)if(u instanceof rt)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(s)){var c=Object($.a)(s,3),l=c[0],f=c[1],h=void 0===f?0:f,d=c[2],v=void 0===d?0:d;u=l,this._attachTexture({attachment:a,texture:l,layer:h,level:v})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});else this._unattach({attachment:a});u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(function(t){return!e.attachments[t]}).forEach(function(t){delete e.attachments[t]})}},{key:"checkStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);if(t.bindFramebuffer(36160,e||null),36053!==n)throw new Error(function(t){return(pt.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.depth,r=t.stencil,i=t.drawBuffers,a=void 0===i?[]:i,s=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&ht(this.gl,{color:e,depth:n,stencil:r}),a.forEach(function(t,e){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.buffer,a=void 0===i?st:i,s=e.drawBuffer,u=void 0===s?0:s,c=e.value,l=void 0===c?[0,0,0,0]:c;Object(o.d)(t),Object(M.c)(t,{framebuffer:r},function(){switch(a){case st:switch(l.constructor){case Int32Array:t.clearBufferiv(a,u,l);break;case Uint32Array:t.clearBufferuiv(a,u,l);break;case Float32Array:default:t.clearBufferfv(a,u,l)}break;case ut:t.clearBufferfv(ut,0,[l]);break;case ct:t.clearBufferiv(ct,0,[l]);break;case lt:var e=Object($.a)(l,2),n=e[0],r=e[1];t.clearBufferfi(lt,0,n,r);break;default:Object(P.a)(!1,ft)}})}({drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?this.width:o,s=t.height,u=void 0===s?this.height:s,c=t.format,l=void 0===c?6408:c,f=t.type,h=t.pixelArray,d=void 0===h?null:h,v=t.attachment,p=void 0===v?36064:v;this.gl;if(36064===p&&null===this.handle&&(p=1028),Object(P.a)(this.attachments[p]),f=f||this.attachments[p].type,!d){f=f||5121;var g=Object(dt.c)(f,{clamped:!1}),y=vt(l);d=d||new g(a*u*y)}f=f||Object(dt.b)(d);var b=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,a,u,l,f,d),this.gl.bindFramebuffer(36160,b||null),d}},{key:"readPixelsToBuffer",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.width,s=void 0===a?this.width:a,u=t.height,c=void 0===u?this.height:u,l=t.format,f=void 0===l?6408:l,h=t.type,d=t.buffer,v=void 0===d?null:d,p=t.byteOffset,g=void 0===p?0:p,y=this.gl;if(Object(o.d)(y),h=h||(v?v.type:5121),!v){var b=vt(f),m=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(P.a)(!1),0}}(h),_=g+s*c*b*m;v=new D.a(y,{bytes:_,type:h,size:b})}return v.bind({target:35051}),Object(M.c)(y,{framebuffer:this},function(){y.readPixels(n,i,s,c,f,h,g)}),v.unbind({target:35051}),v}},{key:"copyToDataUrl",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.attachment,n=void 0===e?36064:e,r=t.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,a=this.readPixels({attachment:n}),s=this.width,u=this.height;u>i;){var c=Object(o.q)({data:a,width:s,height:u});a=c.data,s=c.width,u=c.height}Object(o.h)({data:a,width:s,height:u});var l=document.createElement("canvas");l.width=s,l.height=u;var f=l.getContext("2d"),h=f.createImageData(s,u);return h.data.set(a),f.putImageData(h,0,0),l.toDataURL()}},{key:"copyToImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.image,n=void 0===e?null:e,r=t.attachment,i=void 0===r?36064:r,o=t.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(n=n||new Image).src=a,n}},{key:"copyToTexture",value:function(t){var e=t.texture,n=t.target,r=t.xoffset,i=void 0===r?0:r,o=t.yoffset,a=void 0===o?0:o,s=t.zoffset,u=void 0===s?0:s,c=t.mipmapLevel,l=void 0===c?0:c,f=t.attachment,h=void 0===f?36064:f,d=t.x,v=void 0===d?0:d,p=t.y,g=void 0===p?0:p,y=t.width,b=t.height,m=this.gl,_=m.bindFramebuffer(36160,this.handle),w=m.readBuffer(h);switch(y=Number.isFinite(y)?y:e.width,b=Number.isFinite(b)?b:e.height,e.target){case 3553:case 34067:m.copyTexSubImage2D(n||e.target,l,i,a,v,g,y,b);break;case 35866:case 32879:m.copyTexSubImage3D(n||e.target,l,i,a,u,v,g,y,b)}return m.readBuffer(w),m.bindFramebuffer(36160,_||null),e}},{key:"blit",value:function(t){var e=t.srcFramebuffer,n=t.attachment,r=void 0===n?36064:n,i=t.srcX0,a=void 0===i?0:i,s=t.srcY0,u=void 0===s?0:s,c=t.srcX1,l=t.srcY1,f=t.dstX0,h=void 0===f?0:f,d=t.dstY0,v=void 0===d?0:d,p=t.dstX1,g=t.dstY1,y=t.color,b=void 0===y||y,m=t.depth,_=void 0!==m&&m,w=t.stencil,O=void 0!==w&&w,E=t.mask,S=void 0===E?0:E,A=t.filter,T=void 0===A?9728:A,j=this.gl;Object(o.d)(j),e.handle||36064!==r||(r=1028),b&&(S|=16384),_&&(S|=256),O&&(S|=1024),Object(P.a)(S),c=void 0===c?e.width:c,l=void 0===l?e.height:l,p=void 0===p?this.width:p,g=void 0===g?this.height:g;var R=j.bindFramebuffer(36009,this.handle),I=j.bindFramebuffer(36008,e.handle);return j.readBuffer(r),j.blitFramebuffer(a,u,c,l,h,v,p,g,S,T),j.readBuffer(this.readBuffer),j.bindFramebuffer(36008,I||null),j.bindFramebuffer(36009,R||null),this}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,a=t.y,s=void 0===a?0:a,u=t.width,c=t.height,l=this.gl;Object(o.d)(l);var f=l.bindFramebuffer(36008,this.handle);return 0===i&&0===s&&void 0===u&&void 0===c?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,i,s,u,c),l.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(i.c)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r[e?Object(i.c)(this.gl,l):l]=this.getAttachmentParameter(t,l,e)}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return r}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0;r<e.length;r++){var o=e[r],a=Number(o);n[t?Object(i.c)(this.gl,a):a]=this.getAttachmentParameters(a,t)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>l.g.priority||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return l.g.image({priority:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,e=void 0===t?36160:t;return this.gl.bindFramebuffer(e,this.handle),this}},{key:"unbind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,e=void 0===t?36160:t;return this.gl.bindFramebuffer(e,null),this}},{key:"_createDefaultAttachments",value:function(t){var e,n=t.color,r=t.depth,i=t.stencil,o=t.width,a=t.height,s=null;n&&((s=s||{})[36064]=new tt.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:o,height:a,mipmaps:!1,parameters:(e={},Object(S.a)(e,10241,9728),Object(S.a)(e,10240,9728),Object(S.a)(e,10242,33071),Object(S.a)(e,10243,33071),e)}));return r&&i?(s=s||{})[33306]=new rt(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:o,height:111}):r?(s=s||{})[36096]=new rt(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:o,height:a}):i&&Object(P.a)(!1),s}},{key:"_unattach",value:function(t){var e=t.attachment;this.gl.bindRenderbuffer(36161,this.handle),this.gl.framebufferRenderbuffer(36160,e,36161,null),delete this.attachments[e]}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,o=t.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:Object(P.a)(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t,e){Object(o.n)(t)?t.readBuffer(e):Object(P.a)(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(t,e){if(Object(o.n)(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):Object(P.a)(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(t){var e=function(t){if(t.luma=t.luma||{},!t.luma.caps)for(var e in t.luma.caps={},t.luma.caps.webgl2=Object(o.n)(t),C)t.luma.caps[e]=L(t,e);return t.luma.caps}(this.gl);switch(t){case 36052:return e.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.webgl2?null:8;case 33297:return e.webgl2?null:5125;case 33296:return e.webgl2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),e}(z.a);pt.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var gt,yt=function(t){function e(t,n){var r;return Object(g.a)(this,e),Object(o.d)(t),r=Object(B.a)(this,Object(U.a)(e).call(this,t,n)),Object.seal(Object(Q.a)(Object(Q.a)(r))),r}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(A.a)(e,[{key:"bind",value:function(t){return this.gl.bindSampler(t,this.handle),this}},{key:"unbind",value:function(t){return this.gl.bindSampler(t,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(t){return this.gl.getSamplerParameter(this.handle,t)}},{key:"_setParameter",value:function(t,e){switch(t){case 33082:case 33083:this.gl.samplerParameterf(this.handle,t,e);break;default:this.gl.samplerParameteri(this.handle,t,e)}return this}}]),e}(z.a),bt=(gt={},Object(S.a)(gt,5126,function(t,e,n){return t.uniform1fv(e,St(n,1))}),Object(S.a)(gt,35664,function(t,e,n){return t.uniform2fv(e,St(n,2))}),Object(S.a)(gt,35665,function(t,e,n){return t.uniform3fv(e,St(n,3))}),Object(S.a)(gt,35666,function(t,e,n){return t.uniform4fv(e,St(n,4))}),Object(S.a)(gt,5124,function(t,e,n){return t.uniform1iv(e,At(n,1))}),Object(S.a)(gt,35667,function(t,e,n){return t.uniform2iv(e,At(n,2))}),Object(S.a)(gt,35668,function(t,e,n){return t.uniform3iv(e,At(n,3))}),Object(S.a)(gt,35669,function(t,e,n){return t.uniform4iv(e,At(n,4))}),Object(S.a)(gt,35670,function(t,e,n){return t.uniform1iv(e,At(n,1))}),Object(S.a)(gt,35671,function(t,e,n){return t.uniform2iv(e,At(n,2))}),Object(S.a)(gt,35672,function(t,e,n){return t.uniform3iv(e,At(n,3))}),Object(S.a)(gt,35673,function(t,e,n){return t.uniform4iv(e,At(n,4))}),Object(S.a)(gt,35674,function(t,e,n){return t.uniformMatrix2fv(e,!1,St(n,4))}),Object(S.a)(gt,35675,function(t,e,n){return t.uniformMatrix3fv(e,!1,St(n,9))}),Object(S.a)(gt,35676,function(t,e,n){return t.uniformMatrix4fv(e,!1,St(n,16))}),Object(S.a)(gt,35678,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,35680,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,5125,function(t,e,n){return t.uniform1uiv(e,Tt(n,1))}),Object(S.a)(gt,36294,function(t,e,n){return t.uniform2uiv(e,Tt(n,2))}),Object(S.a)(gt,36295,function(t,e,n){return t.uniform3uiv(e,Tt(n,3))}),Object(S.a)(gt,36296,function(t,e,n){return t.uniform4uiv(e,Tt(n,4))}),Object(S.a)(gt,35685,function(t,e,n){return t.uniformMatrix2x3fv(e,!1,St(n,6))}),Object(S.a)(gt,35686,function(t,e,n){return t.uniformMatrix2x4fv(e,!1,St(n,8))}),Object(S.a)(gt,35687,function(t,e,n){return t.uniformMatrix3x2fv(e,!1,St(n,6))}),Object(S.a)(gt,35688,function(t,e,n){return t.uniformMatrix3x4fv(e,!1,St(n,12))}),Object(S.a)(gt,35689,function(t,e,n){return t.uniformMatrix4x2fv(e,!1,St(n,8))}),Object(S.a)(gt,35690,function(t,e,n){return t.uniformMatrix4x3fv(e,!1,St(n,12))}),Object(S.a)(gt,35679,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,35682,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36289,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36292,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36293,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36298,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36299,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36300,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36303,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36306,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36307,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36308,function(t,e,n){return t.uniform1i(e,n)}),Object(S.a)(gt,36311,function(t,e,n){return t.uniform1i(e,n)}),gt),mt={},_t={},wt={},Ot=[0];function Et(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(Ot[0]=t,t=Ot);var i=t.length;if(i%e&&l.g.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=t[a];return o}function St(t,e){return Et(t,e,Float32Array,mt)}function At(t,e){return Et(t,e,Int32Array,_t)}function Tt(t,e){return Et(t,e,Uint32Array,wt)}function jt(t){var e=t.match(/([^\[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function Pt(t,e,n){var r=bt[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,t,e)}function Rt(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof J.a||t instanceof yt||(t instanceof rt||t instanceof pt&&Boolean(t.texture))))}function It(t,e){if(Array.isArray(t)||ArrayBuffer.isView(t)){if(!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return t===e}var kt,xt=n(38),Mt=5120,Ct=5121,Ft=5122,Lt=5123,Nt=0,Dt=1,Bt=2,Ut=3,Vt=4,zt=5,Gt=6,Wt=5126,Ht=(kt={},Object(S.a)(kt,Wt,[Wt,1,"float"]),Object(S.a)(kt,35664,[Wt,2,"vec2"]),Object(S.a)(kt,35665,[Wt,3,"vec3"]),Object(S.a)(kt,35666,[Wt,4,"vec4"]),Object(S.a)(kt,5124,[5124,1,"int"]),Object(S.a)(kt,35667,[5124,2,"ivec2"]),Object(S.a)(kt,35668,[5124,3,"ivec3"]),Object(S.a)(kt,35669,[5124,4,"ivec4"]),Object(S.a)(kt,5125,[5125,1,"uint"]),Object(S.a)(kt,36294,[5125,2,"uvec2"]),Object(S.a)(kt,36295,[5125,3,"uvec3"]),Object(S.a)(kt,36296,[5125,4,"uvec4"]),Object(S.a)(kt,35670,[Wt,1,"bool"]),Object(S.a)(kt,35671,[Wt,2,"bvec2"]),Object(S.a)(kt,35672,[Wt,3,"bvec3"]),Object(S.a)(kt,35673,[Wt,4,"bvec4"]),Object(S.a)(kt,35674,[Wt,8,"mat2"]),Object(S.a)(kt,35685,[Wt,8,"mat2x3"]),Object(S.a)(kt,35686,[Wt,8,"mat2x4"]),Object(S.a)(kt,35675,[Wt,12,"mat3"]),Object(S.a)(kt,35687,[Wt,12,"mat3x2"]),Object(S.a)(kt,35688,[Wt,12,"mat3x4"]),Object(S.a)(kt,35676,[Wt,16,"mat4"]),Object(S.a)(kt,35689,[Wt,16,"mat4x2"]),Object(S.a)(kt,35690,[Wt,16,"mat4x3"]),kt);function Xt(t){switch(t){case Nt:return Nt;case Dt:case Ut:case Bt:return Dt;case Vt:case zt:case Gt:return Vt;default:return Object(P.a)(!1),0}}function qt(t){var e=Ht[t];if(!e)return null;var n=Object($.a)(e,2);return{type:n[0],components:n[1]}}function Yt(t,e){switch(t){case Mt:case Ct:case Ft:case Lt:t=Wt}for(var n in Ht){var r=Object($.a)(Ht[n],3),i=r[0],o=r[1],a=r[2];if(i===t&&o===e)return{glType:n,name:a}}return null}var Zt=function(){function t(e){Object(g.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(A.a)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfos[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),o=i.name,a=i.type,s=i.size,u=e.getAttribLocation(t.handle,o);u>=0&&this._addAttribute(u,o,a,s)}this.attributeInfos.sort(function(t,e){return t.location-e.location})}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(Object(o.n)(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),a=i.name,s=i.type,u=i.size;this._addVarying(r,a,s,u)}this.varyingInfos.sort(function(t,e){return t.location-e.location})}}},{key:"_addAttribute",value:function(t,e,n,r){var i=qt(n),o={type:i.type,size:r*i.components};this._inferProperties(t,e,o);var a={location:t,name:e,accessor:new xt.a(o)};this.attributeInfos.push(a),this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=qt(n),o=i.type,a=i.components,s={location:t,name:e,accessor:new xt.a({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),Kt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),(n=Object(B.a)(this,Object(U.a)(e).call(this,t,r))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),n._isCached=!1,n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n._setId(r.id),n}return Object(V.a)(e,t),Object(A.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vs,n=t.fs,r=t.varyings,i=t.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof e?new q(this.gl,{id:"".concat(t.id,"-vs"),source:e}):e,this.fs="string"==typeof n?new Y(this.gl,{id:"".concat(t.id,"-fs"),source:n}):n,Object(P.a)(this.vs instanceof q),Object(P.a)(this.fs instanceof Y),this.uniforms={},this.samplers={},r&&(Object(o.d)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Zt(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Z(Object(U.a)(e.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),this}},{key:"draw",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,a=void 0===r?4:r,s=t.vertexCount,u=t.offset,c=void 0===u?0:u,f=t.start,h=t.end,d=t.isIndexed,v=void 0!==d&&d,p=t.indexType,g=void 0===p?5123:p,y=t.isInstanced,b=void 0!==y&&y,m=t.instanceCount,_=void 0===m?0:m,w=t.vertexArray,O=void 0===w?null:w,E=t.transformFeedback,S=t.framebuffer,A=t.parameters,T=void 0===A?{}:A,j=t.uniforms,R=void 0===j?{}:j,I=t.samplers,k=void 0===I?{}:I;if(void 0!==n){var x=S?S.id:"default",C="mode=".concat(Object(i.a)(this.gl,a)," verts=").concat(s," ")+"instances=".concat(_," indexType=").concat(Object(i.a)(this.gl,g)," ")+"isInstanced=".concat(b," isIndexed=").concat(v," ")+"Framebuffer=".concat(x);l.g.log(n,C)()}return this.gl.useProgram(this.handle),Object(P.a)(O),O.bindForDraw(s,_,function(){if(R&&(l.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),e.setUniforms(R,k)),e._bindTextures(),void 0!==S&&(T=Object.assign({},T,{framebuffer:S})),E){var t=Xt(a);E.begin(t)}Object(M.c)(e.gl,T,function(){v&&b?e.gl.drawElementsInstanced(a,s,g,c,_):v&&Object(o.n)(e.gl)&&!isNaN(f)&&!isNaN(h)?e.gl.drawRangeElements(a,f,h,s,g,c):v?e.gl.drawElements(a,s,g,c):b?e.gl.drawArraysInstanced(a,c,s,_):e.gl.drawArrays(a,c,s)}),E&&E.end()}),this}},{key:"setSamplers",value:function(t){Object.assign(this.samplers,t)}},{key:"setUniforms",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o={};for(var a in e)It(this.uniforms[a],e[a])||(i=!0,o[a]=e[a],this.uniforms[a]=(t=e[a],Array.isArray(t)||ArrayBuffer.isView(t)?t.slice():t));return i&&(r(),function(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!Rt(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(o,this.id,this._uniformSetters),Object.assign(this.samplers,n),this._setUniforms(o)),this}},{key:"_bindTextures",value:function(){for(var t in this.uniforms){var e=this._uniformSetters[t];if(e&&void 0!==e.textureIndex){var n=this.uniforms[t],r=this.samplers[t];n instanceof pt&&(n=n.texture),n instanceof J.a&&n.bind(e.textureIndex),r&&r.bind(e.textureIndex)}}}},{key:"_setUniforms",value:function(t){for(var e in this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r)if(n instanceof pt&&(n=n.texture),n instanceof J.a){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,o=r.textureIndex;i.bind(o),r(o)}else r(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e=this.gl.getAttachedShaders(t),n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new q({handle:u});break;case 35632:n.fs=new Y({handle:u})}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=Object(l.i)(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if((t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),l.g.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),l.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||l.g.priority>0)&&(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=jt(n.name),i=r.name,o=(r.isArray,t.getUniformLocation(this.handle,i));this._uniformSetters[i]=Pt(t,o,n)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)}}]),e}(z.a),Qt=(n(58),z.a,function(t){return t}),Jt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,e),n=Object(B.a)(this,Object(U.a)(e).call(this,t,r));var i=r.onComplete,o=void 0===i?Qt:i,a=r.onError,s=void 0===a?Qt:a;return n.target=null,n.onComplete=o,n.onError=s,n.promise=null,Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(o.n)(t),r=N(t,F.TIMER_QUERY),i=n||r,a=!0,s=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){switch(c.value){case"queries":i=i&&n;break;case"timers":i=i&&r;break;case"timestamps":var f=r?t.getQuery(36392,34916):0;i=i&&f>0;break;default:Object(P.a)(!1)}}}catch(t){s=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return i}}]),Object(A.a)(e,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,e=void 0!==t&&t;return this.begin(e?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){j.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(t){j.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(t){j.beginQuery(this,this.onComplete,this.onError),this.target=t;try{this.gl.beginQuery(this.target,this.handle)}catch(t){j.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),j.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var t=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(t)?t/1e6:0}},{key:"_createHandle",value:function(){return e.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){j.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(t){j.poll(t)}}]),e}(z.a);j.setInvalidator({queryType:Jt,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(t){return t.getParameter(36795)}});n(72),J.a;var $t=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),Object(o.d)(t),(n=Object(B.a)(this,Object(U.a)(e).call(this,t,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(A.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(l.d)(this.buffers)||this.bind(function(){return t._unbindBuffers()}),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in e)t.setBuffer(n,e[n])}),this}},{key:"setBuffer",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this._getVaryingIndex(t);return o<0?(this.unused[t]=e,l.g.warn(function(){return"".concat(r.id," unused varying buffer ").concat(t)})(),this):(this.buffers[o]=e,this.bindOnUse||this._bindBuffer(o,e,n,i),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,this.buffers[t])}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),e}(z.a),te=null;function ee(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!te||te.byteLength<n)&&(te=new ArrayBuffer(n)),te),0,e)}var ne=n(35),re=n(73),ie=n(74);var oe=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,e);var i=r.id||r.program&&r.program.id;return(n=Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({},r,{id:i})))).hasVertexArrays=e.isSupported(t),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(A.a)(e,null,[{key:"isSupported",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?Object(o.n)(t)||"Chrome"===function(t){if(!t&&!Object(re.a)())return"Node";if(Object(ie.a)(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":ne.b.chrome?"Chrome":ne.b.safari?"Safari":ne.b.mozInnerScreenX?"Firefox":"Unknown"}():Object(o.n)(t)||t.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(34921),e.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,n,r){switch(r.constructor){case Float32Array:e._setConstantFloatArray(t,n,r);break;case Int32Array:e._setConstantIntArray(t,n,r);break;case Uint32Array:e._setConstantUintArray(t,n,r);break;default:Object(l.a)(!1)}}}]),Object(A.a)(e,[{key:"delete",value:function(){Z(Object(U.a)(e.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(l.a)(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){t.gl.bindBuffer(34963,e?e.handle:null)}),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,a=n.stride,s=n.offset,u=n.normalized,c=n.integer,f=n.divisor,h=this.gl;return t=Number(t),this.bind(function(){h.bindBuffer(34962,e.handle),c?(Object(l.a)(Object(o.n)(h)),h.vertexAttribIPointer(t,r,i,a,s)):h.vertexAttribPointer(t,r,i,u,a,s),h.enableVertexAttribArray(t),h.vertexAttribDivisor(t,f||0)}),this}},{key:"enable",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(function(){return r?n.gl.enableVertexAttribArray(t):n.gl.disableVertexAttribArray(t)})),this}},{key:"getConstantBuffer",value:function(t,e,n){var r=this._normalizeConstantArrayValue(e,n),i=r.byteLength*t,o=r.length*t,a=!this.buffer;if(this.buffer=this.buffer||new D.a(this.gl,i),a=(a=a||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=ee(e.constructor,o);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:r,start:0,count:o}),this.buffer.subData(s),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t,e){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=e.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(t){return this.hasVertexArrays&&this.gl.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.hasVertexArrays&&this.gl.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=this,r=e.location;return Object(l.a)(Number.isFinite(r)),this.bind(function(){switch(t){case 34373:return n.gl.getVertexAttribOffset(r,t);default:return n.gl.getVertexAttrib(r,t)}})}},{key:"MAX_ATTRIBUTES",get:function(){return e.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(l.a)(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(Object(l.a)(Object(o.n)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(l.a)(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(Object(l.a)(Object(o.n)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(l.a)(!1)}}}]),e}(z.a),ae=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=oe.isSupported(e)?new oe(e):oe.getDefaultArray(e),Object(l.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(n),Object.seal(this)}return Object(A.a)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(t){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,t)}},{key:"setAttributes",value:function(t){var e=this;return this.vertexArrayObject.bind(function(){for(var n in t){var r=t[n];if(r instanceof D.a)e.setBuffer(n,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof D.a){var i=r[0],o=r[1];e.setBuffer(n,i,o)}else{if(!ArrayBuffer.isView(r)&&!Array.isArray(r))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");e.setConstant(n,r)}}e.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,e,o)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,n),i=r.location,o=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,o),this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(null),t.buffer=t.buffer||new D.a(t.gl,{size:4});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof D.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof D.a&&t.setBuffer(e,n)}}),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(t,e),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i=this,o=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,l.g.once(3,function(){return"unused value ".concat(t," in ").concat(i.id)})(),this;var a=this._getAttributeInfo(t),s=xt.a.resolve(a.accessor,n,r),u=s.size,c=s.type;return Object(l.a)(Number.isFinite(u)&&Number.isFinite(c)),{location:o,accessor:s}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){if(this.configuration)return this.configuration.getAttributeLocation(t);var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(oe.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){oe.setConstant(this.gl,t,e),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(t,!1)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elements.accessor.type),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof D.a){var o=n;if(i){var a=o.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,a)}else{var s=o.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(t,e)}}]),t}(),se=n(69),ue=n(133),ce=function(){function t(e){var n=e.id;e.display;Object(g.a)(this,t),this.id=n||Object(l.i)(this.constructor.name),this.display=!0,this.position=new se.a,this.rotation=new se.a,this.scale=new se.a(1,1,1),this.matrix=new ue.a,this.userData={}}return Object(A.a)(t,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(t){return Object(P.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(P.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(P.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,o=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(P.a)(t),e=e||this.matrix;var n=new ue.a(t).multiplyRight(e),r=n.invert(),i=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"transform",value:function(){if(this.parent){var t=this.parent;this.endPosition.set(this.position.add(t.endPosition)),this.endRotation.set(this.rotation.add(t.endRotation)),this.endScale.set(this.scale.add(t.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var e=this.children,n=0;n<e.length;++n)e[n].transform();return this}}]),t}(),le=(n(18),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t);var r=n.id,i=void 0===r?Object(l.i)("attribute"):r,o=n.type,a=n.isIndexed,s=void 0!==a&&a;this.gl=e,this.id=i,this.isIndexed=s,this.target=s?34963:34962,this.type=o,this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),Object.seal(this),this._validateAttributeDefinition()}return Object(A.a)(t,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(t){var e=t.value,n=t.buffer,r=t.constant,i=void 0===r?this.constant||!1:r;this.constant=i,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):e&&(this.externalBuffer=null,this.value=e,i||(this.buffer=this.buffer||new D.a(this.gl,Object.assign({},t,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:e}),this.type=this.buffer.accessor.type)),this._setAccessor(t)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var t=this.externalBuffer||this.buffer;return t?[t,this]:null}},{key:"_setAccessor",value:function(t){var e=t.size,n=void 0===e?this.size:e,r=t.offset,i=void 0===r?this.offset||0:r,o=t.stride,a=void 0===o?this.stride||0:o,s=t.normalized,u=void 0===s?this.normalized||!1:s,c=t.integer,f=void 0===c?this.integer||!1:c,h=t.divisor,d=void 0===h?this.divisor||0:h,v=t.instanced,p=t.isInstanced;this.size=n,this.offset=i,this.stride=a,this.normalized=u,this.integer=f,this.divisor=d,void 0!==p&&(l.g.deprecated("Attribute.isInstanced"),this.divisor=p?1:0),void 0!==v&&(l.g.deprecated("Attribute.instanced"),this.divisor=v?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),t}()),fe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function he(t){var e="string"==typeof t?fe[t]||fe.TRIANGLES:t;return Object(P.a)(e>=0&&e<=fe.TRIANGLE_FAN,"Illegal drawMode"),e}var de=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,t);var n=e.id,r=e.drawMode,i=void 0===r?fe.TRIANGLES:r,o=e.vertexCount,a=void 0===o?void 0:o,s=e.attributes;this.id=n||Object(l.i)(this.constructor.name),this.drawMode=he(i),this.vertexCount=a,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),s&&this.setAttributes(s)}return Object(A.a)(t,[{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!e,n}},{key:"setVertexCount",value:function(t){this.vertexCount=t}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(t){return Boolean(this.attributes[t])}},{key:"getAttribute",value:function(t){var e=this.attributes[t];return Object(P.a)(e),e.value}},{key:"getArray",value:function(t){var e=this.attributes[t];return Object(P.a)(e),e.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){for(var e in t){var n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,Object(P.a)(ArrayBuffer.isView(n.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),this._autoDetectAttribute(e,n),this.attributes[e]=n}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(t,e){var n;switch(t){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;case"indices":e.size=e.size||1,e.isIndexed=void 0===e.isIndexed||e.isIndexed,Object(P.a)(e.value instanceof Uint16Array||e.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(P.a)(e.size,"attribute ".concat(t," needs size"))}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}}]),t}(),ve="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",pe="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",ge="vs",ye="fs";function be(t,e,n){switch(e){case 300:return n?function(t){return t.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}(t):function(t){return t.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}(t);case 100:return n?function(t){return t.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(t):function(t){return t.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function me(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var _e=function(){function t(e){var n=e.name,r=e.vs,i=e.fs,o=e.dependencies,a=void 0===o?[]:o,s=e.getUniforms,u=void 0===s?function(){return{}}:s,c=e.deprecations,l=void 0===c?[]:c,f=e.vertexShader,h=e.fragmentShader;Object(g.a)(this,t),me("string"==typeof n),this.name=n,this.vs=r||f,this.fs=i||h,this.getModuleUniforms=u,this.dependencies=a,this.deprecations=this._parseDeprecationDefinitions(l)}return Object(A.a)(t,[{key:"getModuleSource",value:function(t,e){var n;switch(t){case"vs":n=be(this.vs||"",e,!0);break;case"fs":n=be(this.fs||"",e,!1);break;default:me(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms(t,e)}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach(function(n){n.regex.test(t)&&(n.deprecated&&e?e.deprecated(n.old,n.new)():e&&e.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach(function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}}),t}}]),t}(),we=new(function(){function t(){Object(g.a)(this,t),this.shaderModules={},this.defaultShaderModules=[]}return Object(A.a)(t,[{key:"setDefaultShaderModules",value:function(t){this.defaultShaderModules=this.resolveModules(t)}},{key:"registerShaderModules",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==e&&e,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this._registerShaderModule(u,n)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"getShaderModule",value:function(t){if(t instanceof _e)return t;if("string"!=typeof t)return this._registerShaderModule(t,!0);var e=this.shaderModules[t];return e||me(!1,"Unknown shader module ".concat(t)),e}},{key:"resolveModules",value:function(t){var e=this;return t.map(function(t){return e.getShaderModule(t)})}},{key:"_registerShaderModule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof _e)return t;if(me(t.name,"shader module has no name"),this.shaderModules[t.name]&&!e)throw new Error("shader module ".concat(t.name," already registered"));return(t=new _e(t)).dependencies=this.resolveModules(t.dependencies),this.shaderModules[t.name]=t,this.shaderModules[t.name]}}]),t}());function Oe(t){we.setDefaultShaderModules(t)}function Ee(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==e&&e;we.registerShaderModules(t,{ignoreMultipleRegistrations:n})}function Se(t){var e={},n={};return Ae({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(function(t,e){return n[e]-n[t]}).map(function(t){return e[t]})}function Ae(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}var f=!0,h=!1,d=void 0;try{for(var v,p=e[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var g=v.value;g.dependencies&&Ae({modules:g.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(t){h=!0,d=t}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}}var Te=32874,je=7936,Pe=7937,Re=7938,Ie=35724,ke={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},xe={};Object.keys(ke).forEach(function(t){xe[t]=t});var Me={};function Ce(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ke[e];if(me(r,e),!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in Me)return Me[e];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,a),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),Me[e]=u,u}function Fe(t,e){var n=ke[e];me(n,e);var r=function(t){return Boolean(t&&("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||32874===Te))}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return me(!1===i||!0===i),i}function Le(t,e){return(e=Array.isArray(e)?e:[e]).every(function(e){return Fe(t,e)})}function Ne(t){switch(function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||je),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Pe);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(Re),shadingLanguageVersion:t.getParameter(Ie)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var De,Be,Ue=n(46),Ve=n.n(Ue),ze=(De={},Object(S.a)(De,ge,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(S.a)(De,ye,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),De),Ge=/void main\s*\([^\)]*\)\s*\{\n?/,We=/}\n?[^{}]*$/;function He(t){var e={};return Ve()(Array.isArray(t)&&t.length>1),t.forEach(function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]}),e}var Xe=(Be={},Object(S.a)(Be,ge,"vertex"),Object(S.a)(Be,ye,"fragment"),Be),qe="precision highp float;\n\n";function Ye(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.vs,r=e.fs,i=function(t){return t=t.concat(we.defaultShaderModules),Se(t=we.resolveModules(t))}(e.modules||[]);return{gl:t,vs:Ze(t,Object.assign({},e,{source:n,type:ge,modules:i})),fs:Ze(t,Object.assign({},e,{source:r,type:ye,modules:i})),getUniforms:Ke(i),modules:Qe(i)}}function Ze(t,e){var n=e.id,r=e.source,i=e.type,o=e.modules,a=void 0===o?[]:o,s=e.defines,u=void 0===s?{}:s,c=e.inject,l=void 0===c?{}:c,f=e.prologue,h=void 0===f||f,d=e.log;me("string"==typeof r,"shader source must be a string");var v=i===ge,p=r.split("\n"),g=100,y="",b=r;0===p[0].indexOf("#version ")&&(g=300,y=p[0],b=p.slice(1).join("\n"));var m=h?"".concat(y,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Xe[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(Ne(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Le(t,xe.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Le(t,xe.GLSL_DERIVATIVES)&&Ce(t,xe.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Le(t,xe.GLSL_FRAG_DATA)&&Ce(t,xe.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Le(t,xe.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(u),"\n").concat(v?"":qe,"\n"):"".concat(y,"\n"),_=!1,w=!0,O=!1,E=void 0;try{for(var S,A=a[Symbol.iterator]();!(w=(S=A.next()).done);w=!0){var T=S.value;switch(T.name){case"inject":_=!0;break;default:T.checkDeprecations(b,d),m+=T.getModuleSource(i,g)}}}catch(t){O=!0,E=t}finally{try{w||null==A.return||A.return()}finally{if(O)throw E}}return m=function(t,e,n,r){var i=e===ge,o=function(e){var r=n[e];switch(e){case"vs:#decl":i&&(t=t.replace(Ge,function(t){return"".concat(r,"\n").concat(t)}));break;case"vs:#main-start":i&&(t=t.replace(Ge,function(t){return t+r}));break;case"vs:#main-end":i&&(t=t.replace(We,function(t){return r+t}));break;case"fs:#decl":i||(t=t.replace(Ge,function(t){return"".concat(r,"\n").concat(t)}));break;case"fs:#main-start":i||(t=t.replace(Ge,function(t){return t+r}));break;case"fs:#main-end":i||(t=t.replace(We,function(t){return r+t}));break;default:t=t.replace(e,function(t){return t+r})}};for(var a in n)o(a);return r&&(t=t.replace("}s*$",function(t){return t+ze[e]})),t}(m+=b,i,l,_)}function Ke(t){return function(e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value.getUniforms(e,n);Object.assign(n,u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function Qe(t){var e,n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=(e=u,we.getShaderModule(e));n[u]=c}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}var Je={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function $e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}var tn="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",en="".concat(tn,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),nn={ONE:1};var rn={name:"fp64",vs:en,fs:null,fp64ify:$e,fp64LowPart:function(t){return t-Math.fround(t)},fp64ifyMatrix4:function(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var i=4*n+r;$e(t[4*r+n],e,2*i)}return e},getUniforms:function(){return Object.assign({},nn)}},on=("".concat(tn),[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),an={modelMatrix:on,viewMatrix:on,projectionMatrix:on,cameraPositionWorld:[0,0,0]};var sn="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n";"".concat(sn,"\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),"\n".concat(sn);"".concat("  // empty\n","\n").concat("#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("  // empty\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n","\n"),new Float32Array([1,1,2]);var un={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var cn={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive; // true during rendering to offscreen picking buffer\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n  return selected ? (picking_uHighlightColor * COLOR_SCALE) : color;\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,e={};if(void 0!==t.pickingSelectedColor)if(null===t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{var n=[t.pickingSelectedColor[0],t.pickingSelectedColor[1],t.pickingSelectedColor[2]];e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}return void 0!==t.pickingHighlightColor&&(e.picking_uHighlightColor=t.pickingHighlightColor),void 0!==t.pickingThreshold&&(e.picking_uThreshold=t.pickingThreshold),void 0!==t.pickingActive&&(e.picking_uActive=t.pickingActive?1:0),e}};var ln="void main() {}",fn="#version 300 es\n".concat(ln);function hn(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=Object($.a)(n,3),i=r[0],o=r[1],a=r[2];return e.includes(i)&&o&&a?{qualifier:i,type:o,name:a.split(";")[0]}:null}function dn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,o=t.output;if(!r)return 300===n?fn:ln;var a=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ve()(!1),null}}(r,i);return 300===n?"#version 300 es\nin ".concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}var vn={name:"transform",vs:"attribute float transform_elementID;\n\n// returns half of pixel size, used to move the pixel position to center of the pixel.\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\n// returns current elements pixel indeces [x, y],\n// where x ranges in [0 to texSize-1] and y ranges in [0 to texSize-1]\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  // Add safe offset (half of pixel height) before doing floor\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\n\n// returns current elementID's texture co-ordianate\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\n\n// returns current elementID's position\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  // Change from [0 1] range to [-1 1]\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\n\n// returns current elementID's pixel value\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},pn=n(23),gn=n.n(pn),yn={},bn=function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)},mn=new Map;function _n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,n=void 0===e?"Uniforms":e,r=t.program,i=t.uniforms,o=t.undefinedOnly,a=void 0!==o&&o;Object(P.a)(r);var s=r._uniformSetters,u={},c=Object.keys(s).sort(),f=0,h=!0,d=!1,v=void 0;try{for(var p,g=c[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var y=p.value;y.match(".*_.*")||y.match(".*Matrix")||wn({table:u,header:n,uniforms:i,uniformName:y,undefinedOnly:a})&&f++}}catch(t){d=!0,v=t}finally{try{h||null==g.return||g.return()}finally{if(d)throw v}}var b=!0,m=!1,_=void 0;try{for(var w,O=c[Symbol.iterator]();!(b=(w=O.next()).done);b=!0){var E=w.value;E.match(".*Matrix")&&wn({table:u,header:n,uniforms:i,uniformName:E,undefinedOnly:a})&&f++}}catch(t){m=!0,_=t}finally{try{b||null==O.return||O.return()}finally{if(m)throw _}}var A=!0,T=!1,j=void 0;try{for(var R,I=c[Symbol.iterator]();!(A=(R=I.next()).done);A=!0){var k=R.value;u[k]||wn({table:u,header:n,uniforms:i,uniformName:k,undefinedOnly:a})&&f++}}catch(t){T=!0,j=t}finally{try{A||null==I.return||I.return()}finally{if(T)throw j}}var x=0,M={};if(!a)for(var C in i){var F=i[C];u[C]||(x++,M[C]=Object(S.a)({Type:"NOT USED: ".concat(F)},n,Object(l.b)(F)))}return{table:u,count:f,unusedTable:M,unusedCount:x}}function wn(t){var e,n=t.table,r=t.header,i=t.uniforms,o=t.uniformName,a=t.undefinedOnly,s=i[o],u=function(t){return null!=t}(s);return(!a||!u)&&(n[o]=(e={},Object(S.a)(e,r,u?Object(l.b)(s):"N/A"),Object(S.a)(e,"Uniform Type",u?s:"NOT PROVIDED"),e),!0)}function On(t,e,n,r){var o,a,s,u,c=t.gl,f="NOT PROVIDED",h="N/A",d="N/A",v="N/A";if(n&&(f=n.type,h=n.size,a=-1!==(f=String(f).replace("Array","")).indexOf("nt")),e instanceof D.a){var p,g,y=e,b=y.getDebugData(),m=b.data;if(s=b.modified?"*":"",u=m,d=(v=y.byteLength)/m.BYTES_PER_ELEMENT/h,n){var _=n.divisor>0;g="".concat(_?"I ":"P "," ").concat(d," (x").concat(h,"=").concat(v," bytes ").concat(Object(i.c)(c,f),")")}else a=!0,g="".concat(v," bytes");return p={},Object(S.a)(p,r,"".concat(s).concat(Object(l.b)(u,{size:h,isInteger:a}))),Object(S.a)(p,"Format ",g),p}return u=e,h=e.length,a=-1!==(f=String(e.constructor.name).replace("Array","")).indexOf("nt"),o={},Object(S.a)(o,r,"".concat(Object(l.b)(u,{size:h,isInteger:a})," (constant)")),Object(S.a)(o,"Format ","".concat(h,"x").concat(f," (constant)")),o}function En(t,e){var n=Yt(e.type,e.size);return n?"".concat(t," (").concat(n.name,")"):t}function Sn(t){var e=t.accessor,n=Yt(e.type,e.size);return n?"".concat(n.name," ").concat(t.name):t.name}gn.a.listenFor("luma.gl",function(t){var e=yn[t.itemKey];if(e&&"edit"===t.type&&"uniforms"===t.valuePath[0]){var n=t.valuePath.slice(1);!function(t,e,n){y.b.__SEER_INITIALIZED__&&(mn.has(t)||mn.set(t,new Map),mn.get(t).set(e,n))}(t.itemKey,n,t.value);var r=e.getUniforms();bn(r,n,t.value),e.setUniforms(r)}});var An=["renderPickingBuffer","pickingEnabled"],Tn=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),n=Object(B.a)(this,Object(U.a)(e).call(this,r)),Object(P.a)(Object(o.m)(t)),n.gl=t,n.lastLogTime=0,n.initialize(r),n}return Object(V.a)(e,t),Object(A.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(t),this.vertexArray=new ae(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(t),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(t.moduleSettings))),this.isInstanced=t.isInstanced||t.instanced,this.onBeforeRender=t.onBeforeRender||function(){},this.onAfterRender=t.onAfterRender||function(){},Object(P.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){Object.assign(this.props,t),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),"pickable"in t&&(this.pickable=t.pickable),"timerQueryEnabled"in t&&(this.timerQueryEnabled=t.timerQueryEnabled&&Jt.isSupported(this.gl,["timers"]),t.timerQueryEnabled&&!this.timerQueryEnabled&&l.g.warn("GPU timer not supported")()),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers),"_animationProps"in t&&this._setAnimationProps(t._animationProps),"_animationLoop"in t&&(this.animationLoop=t._animationLoop)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();var e;this.program.delete(),this.vertexArray.delete(),e=this.id,delete yn[e],gn.a.deleteItem("luma.gl",e)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!e,this.geometry&&(n=n||this.geometry.getNeedsRedraw({clearRedrawFlags:e})),this.animated&&(n=n||"animated model ".concat(this.id)),n}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"setDrawMode",value:function(t){return this.props.drawMode=he(t),this}},{key:"setVertexCount",value:function(t){return Object(P.a)(Number.isFinite(t)),this.props.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return Object(P.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){this.geometry=t;var e=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(l.d)(t))return this;Object.assign(this.attributes,t);var e=this._createBuffersFromAttributeDescriptors(t);return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},e),function(t,e){if(y.b.__SEER_INITIALIZED__&&t){var n=mn.get(t);n&&n.forEach(function(t,n){bn(e,n,t)})}}(this.id,e),e=this._extractAnimatedUniforms(e),this.program.setUniforms(e,n,function(){t._checkForDeprecatedUniforms(e),t.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function(t){var e=this;if(this.animated){Object(P.a)(t,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(t);this.program.setUniforms(n,{},function(){e._checkForDeprecatedUniforms(n),e.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return ht(this.program.gl,t),this}},{key:"draw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.moduleSettings,r=void 0===n?null:n,i=e.framebuffer,o=e.uniforms,a=void 0===o?{}:o,s=e.attributes,u=void 0===s?{}:s,c=e.samplers,f=void 0===c?{}:c,h=e.transformFeedback,d=void 0===h?this.transformFeedback:h,v=e.parameters,p=void 0===v?{}:v,g=e.vertexArray,y=void 0===g?this.vertexArray:g,b=e.animationProps;yn[(t=this).id]||(yn[t.id]=t,gn.a.listItem("luma.gl",t.id)),this.setAttributes(u),this.updateModuleSettings(r),this.setUniforms(a,f),this._refreshAnimationProps(b);var m=this._logDrawCallStart(2),_=this.vertexArray.getDrawParams(this.props);_.isInstanced&&!this.isInstanced&&l.g.warn("Found instanced attributes on non-instanced model",this.id)();var w=_.isIndexed,O=_.indexType,E=this.isInstanced,S=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},e,{logPriority:m,uniforms:null,framebuffer:i,parameters:p,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:y,transformFeedback:d,isIndexed:w,indexType:O,isInstanced:E,instanceCount:S})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(m,y,i),this}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,r=t.feedbackBuffers,i=t.unbindModels,o=void 0===i?[]:i,a=t.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,Object(S.a)({},35977,n))),o.forEach(function(t){return t.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},t,{parameters:a}))}finally{o.forEach(function(t){return t.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(P.a)(arguments.length<=1),this.draw({uniforms:t})}},{key:"_createProgram",value:function(t){var e=t.vs,n=void 0===e?null:e,r=t.fs,i=void 0===r?null:r,o=t.modules,a=void 0===o?null:o,s=t.defines,u=void 0===s?{}:s,c=t.inject,f=void 0===c?{}:c,h=t.shaderCache,d=void 0===h?null:h,v=t.varyings,p=void 0===v?null:v,g=t.bufferMode,y=void 0===g?35981:g,b=t.program,m=void 0===b?null:b;this.getModuleUniforms=function(t){};var _=this.id;if(!m){n=n||ve,i=i||pe;var w=Ye(this.gl,{vs:n,fs:i,modules:a,inject:f,defines:u,log:l.g});n=w.vs,i=w.fs,m=d?d.getProgram(this.gl,{id:_,vs:n,fs:i}):new Kt(this.gl,{id:_,vs:n,fs:i,varyings:p,bufferMode:y}),this.getModuleUniforms=w.getUniforms||function(t){}}return Object(P.a)(m instanceof Kt,"Model needs a program"),m}},{key:"_checkForDeprecatedUniforms",value:function(t){An.forEach(function(e){e in t&&l.g.deprecated(e,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(t){(t=t||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(t)}},{key:"_evaluateAnimateUniforms",value:function(t){if(!this.animated)return{};var e={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];e[n]=r(t)}return e}},{key:"_extractAnimatedUniforms",value:function(t){var e=!1;for(var n in t){var r=t[n];"function"==typeof r?(this.animatedUniforms[n]=r,e=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(l.d)(this.animatedUniforms),!e)return t;var i={};for(var o in t)this.animatedUniforms[o]||(i[o]=t[o]);return i}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(l.d)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new $t(e,{program:this.program}),this.transformFeedback.setBuffers(t),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new Jt(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var t=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=t,this.stats.accumulatedFrameTime+=t,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,l.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(t){var e=this.program.gl,n={};for(var r in t){var i=t[r],o=this._attributes[r];i instanceof le?o=i:i instanceof D.a?(o=o||new le(e,Object.assign({},i,i.layout,{id:r}))).update({buffer:i}):o?o.update(i):o=new le(e,Object.assign({},i,{id:r})),this._attributes[r]=o,n[r]=o.getValue()}return n}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(l.g.priority<t||Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),l.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:l.g.priority<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,r){if(void 0!==t){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=On(e,e.elements,null,r));var o=e.values;for(var a in o){var s=e._getAttributeInfo(a);if(s){var u="".concat(a,": ").concat(s.name),c=e.accessors[s.location];c&&(u="".concat(a,": ").concat(En(s.name,c))),i[u]=On(e,o[a],c,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=_n({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,u=o.unusedCount,c=_n({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),f=c.table;c.count>0&&l.g.log("MISSING UNIFORMS",Object.keys(f))(),u>0&&l.g.log("UNUSED UNIFORMS",Object.keys(s))();var h=function(t){var e={},n="Accessors for ".concat(t.id),r=!0,i=!1,o=void 0;try{for(var a,s=t.attributeInfos[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u){var c=Sn(u);e["in ".concat(c)]=Object(S.a)({},n,JSON.stringify(u.accessor))}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var l=!0,f=!1,h=void 0;try{for(var d,v=t.varyingInfos[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value;if(p){var g=Sn(p);e["out ".concat(g)]=Object(S.a)({},n,JSON.stringify(p.accessor))}}}catch(t){f=!0,h=t}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}return e}(this.vertexArray.configuration);l.g.table(t,i)(),l.g.table(t,a)(),l.g.table(t+1,h)(),function(t,e){if(gn.a.isReady()&&!gn.a.throttle("luma.gl:".concat(t.id),1e3)){var n=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,r=Object.assign({},t.uniforms,e);gn.a.multiUpdate("luma.gl",t.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}}(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),l.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),e}(ce),jn=n(20),Pn={preserveDrawingBuffer:!0},Rn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return x(t)}:n,i=e.onAddHTML,o=void 0===i?null:i,a=e.onInitialize,s=void 0===a?function(){}:a,u=e.onRender,c=void 0===u?function(){}:u,f=e.onFinalize,h=void 0===f?function(){}:f,d=e.gl,v=void 0===d?null:d,p=e.glOptions,y=void 0===p?{}:p,b=e.debug,m=void 0!==b&&b,_=e.createFramebuffer,w=void 0!==_&&_,O=e.autoResizeViewport,E=void 0===O||O,S=e.autoResizeDrawingBuffer,A=void 0===S||S,T=e.useDevicePixels,j=void 0===T||T;return"useDevicePixelRatio"in e&&(l.g.deprecated("useDevicePixelRatio","useDevicePixels")(),j=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:s,onRender:c,onFinalize:h,gl:v,glOptions:y,debug:m,createFramebuffer:w},this.gl=v,this.needsRedraw=null,this.setProps({autoResizeViewport:E,autoResizeDrawingBuffer:A,useDevicePixels:j}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(A.a)(t,[{key:"setNeedsRedraw",value:function(t){return Object(P.a)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=d().then(function(){return t._stopped?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t.onInitialize(t.animationProps))}).then(function(e){t._stopped||(t._addCallbackData(e||{}),!1===e||t._animationFrameId||(t._animationFrameId=Object(o.p)(t._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),Object(o.f)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return l.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._stopped||(this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit?this.gl.commit().then(this._renderFrame):this._animationFrameId=Object(o.p)(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===Object(jn.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,Pn,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(t),!Object(o.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=m(this.gl)),Object(M.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas,i=r.clientWidth,o=r.clientHeight;return i>=0&&o>=0?n=e>0?i/o:1:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=e.useDevicePixels&&window.devicePixelRatio||1,r="width"in e?e.width:t.canvas.clientWidth,i="height"in e?e.height:t.canvas.clientHeight;return t.canvas.width=r*n,void(t.canvas.height=i*n)}var o=t.getExtension("STACKGL_resize_drawingbuffer");o&&"width"in e&&"height"in e&&o.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new pt(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}();new Uint8Array([0,0,0]);var In,kn="transform_uSampler_",xn="transform_uSize_",Mn="transform_position";function Cn(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,a=null,s={},u={},c=e,l={};if(o>0||r){var f=c.split("\n"),h=f.slice();if(f.forEach(function(t,e,i){if(o>0){var c=function(t,e){var n={},r={},i=function(t){return hn(t,["attribute","in"])}(t);if(!i)return null;var o=i.type,a=i.name;if(a&&e[a]){var s="// ".concat(t," => Replaced by Transform with a sampler"),u=function(t){var e="".concat(kn).concat(t),n="".concat(xn).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(a),c=u.samplerName,l=u.sizeName,f=u.uniformDeclerations,h=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ve()(!1),null}}(o),d="  ".concat(o," ").concat(a," = transform_getInput(").concat(c,", ").concat(l,").").concat(h,";\n"),v=e[a],p=v.width,g=v.height;r[c]=a,n[l]=[p,g];var y={"vs:#decl":f,"vs:#main-start":d};return{updatedLine:s,inject:y,uniforms:n,samplerTextureMap:r}}return null}(t,n);if(c){var f=c.updatedLine,d=c.inject;h[e]=f,l=He([l,d]),Object.assign(s,c.uniforms),Object.assign(u,c.samplerTextureMap),o--}}r&&!a&&(a=function(t,e){var n=hn(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))}),r){Ve()(i);var d="".concat(xn).concat(r),v=i.width,p=i.height;s[d]=[v,p];var g="uniform vec2 ".concat(d,";\n"),y="     vec2 ".concat(Mn," = transform_getPos(").concat(d,");\n     gl_Position = vec4(").concat(Mn,", 0, 1.);\n");l=He([l,{"vs:#decl":g,"vs:#main-start":y}])}c=h.join("\n")}return{vs:c,uniforms:s,targetTextureType:a,inject:l,samplerTextureMap:u}}var Fn=(In={},Object(S.a)(In,10241,9728),Object(S.a)(In,10240,9728),Object(S.a)(In,10242,33071),Object(S.a)(In,10243,33071),In),Ln=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t),Object(o.d)(e),this.gl=e,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(A.a)(t,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(A.a)(t,[{key:"delete",value:function(){for(var t in this._createdBuffers)this._createdBuffers[t].delete();this.model.delete()}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(P.a)(t&&this.feedbackBuffers[this.currentIndex][t]),this.feedbackBuffers[this.currentIndex][t]}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=void 0===e?null:e,r=t.packed,i=void 0!==r&&r;if(n&&this.feedbackBuffers[this.currentIndex][n])return this.feedbackBuffers[this.currentIndex][n].getData();Object(P.a)(!n||n===this.targetTextureVarying);var o=this.framebuffers[this.currentIndex].readPixels();if(!i)return o;for(var a=o.constructor,s=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ve()(!1),null}}(this.targetTextureType),u=new a(o.length*s/4),c=0,l=0;l<o.length;l+=4)for(var f=0;f<s;f++)u[c++]=o[l+f];return u}},{key:"_getInputs",value:function(){var t={},e=this.currentIndex,n=Object.assign({},this.sourceBuffers[e]);if(this.hasSourceTextures||this.targetTextureVarying){for(var r in n.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var i=this.samplerTextureMap[r];t[r]=this.sourceTextures[e][i]}this._setSourceTextureParameters()}return{attributes:n,samplerUniforms:t}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getInputs(),n=e.attributes,r=e.samplerUniforms,i=Object.assign({},r,t.uniforms),o=Object.assign({},t.parameters),a=t.clearRenderTarget,s=void 0===a||a,u=null,c=!0;this.renderingToTexture&&(c=!1,u=this.framebuffers[this.currentIndex],Object(P.a)(u),o.viewport=[0,0,u.width,u.height],s&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(n),this.model.transform(Object.assign({},t,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:i,discard:c,framebuffer:u,parameters:o}))}},{key:"swapBuffers",value:function(){l.g.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function(){Object(P.a)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.elementCount&&this._setElementCount(t.elementCount);var e=t.sourceBuffers,n=void 0===e?null:e,r=t.feedbackBuffers,i=void 0===r?null:r,o=this.currentIndex;if(n||i){for(var a in i)Object(P.a)(i[a]instanceof D.a);Object.assign(this.sourceBuffers[o],n),Object.assign(this.feedbackBuffers[o],i),this._createFeedbackBuffers({feedbackBuffers:i}),this.transformFeedbacks[o]&&this.transformFeedbacks[o].setBuffers(this.feedbackBuffers[o]),this._setupSwapBuffers()}var s=t._sourceTextures,u=t._targetTexture;(s||u)&&(Object.assign(this.sourceTextures[o],s),this._getDestinationTexture(u)&&(this.targetTextures[o]=this._getDestinationTexture(u),this.framebuffers[o].update(Object(S.a)({},36064,this.targetTextures[o]))),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex;for(var e in this.sourceTextures[t])this.sourceTextures[t][e].setParameters(Fn)}},{key:"_setElementCount",value:function(t){this.elementCount!==t&&(this.elementCount<t&&this._updateElementIDBuffer(t),this.model.setVertexCount(t),this.elementCount=t)}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._validateProps(t),n=e.feedbackBuffers,r=e.feedbackMap,i=t.sourceBuffers,o=t.varyings,a=t._targetTexture,s=t._targetTextureVarying,u=t._swapTexture,c=o;r&&!Array.isArray(o)&&(c=Object.values(r)),this.varyingsArray=c,this.feedbackMap=r,this._swapTexture=u,a&&(this.targetTextureVarying=s,this.renderingToTexture=!0,Object(P.a)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:i,feedbackBuffers:n}),this._setupTextures(t),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},t,{id:t.id||"transform-model",drawMode:t.drawMode||0,varyings:c}))}},{key:"_validateProps",value:function(t){var e=t.feedbackBuffers,n=t.feedbackMap,r=t.destinationBuffers,i=t.sourceDestinationMap;r&&(l.g.deprecated("destinationBuffers","feedbackBuffers")(),e=e||r),i&&(l.g.deprecated("sourceDestinationMap","feedbackMap")(),n=n||i);var o=t.vs,a=t.elementCount,s=t.varyings,u=t._sourceTextures,c=t._targetTexture,f=t._targetTextureVarying,h=t._swapTexture;for(var d in Object(P.a)(o&&(s||n||c)&&a),e||{})Object(P.a)(e[d]instanceof D.a);for(var v in u||{})Object(P.a)(u[v]instanceof tt.a);return Object(P.a)(!c||f),Object(P.a)(!h||u[h]),{feedbackBuffers:e,feedbackMap:n}}},{key:"_setupBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?null:e,r=t.feedbackBuffers,i=void 0===r?null:r;this.sourceBuffers[0]=Object.assign({},n),this.feedbackBuffers[0]=Object.assign({},i),this._createFeedbackBuffers({feedbackBuffers:i}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._sourceTextures,n=t._targetTexture;if(this.sourceTextures[0]=Object.assign({},e),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var r=this._getDestinationTexture(n);Object(P.a)(r),this.targetTextures[0]=r,this.targetTextures[1]=null}}},{key:"_getDestinationTexture",value:function(t){var e;if(t instanceof tt.a)return t;var n=this.sourceTextures[0][t];return n?Object(o.g)(n,{parameters:(e={},Object(S.a)(e,10241,9728),Object(S.a)(e,10240,9728),Object(S.a)(e,10242,33071),Object(S.a)(e,10243,33071),e),pixelStore:Object(S.a)({},37440,!1)}):null}},{key:"_createFeedbackBuffers",value:function(t){var e=t.feedbackBuffers;if(this.feedbackMap){var n=this.currentIndex;for(var r in this.feedbackMap){var i=this.feedbackMap[r];if(!(i===this.targetTextureVarying||e&&e[i])){var o=this.sourceBuffers[n][r],a=o.bytes,s=o.type,u=o.usage,c=o.accessor,l=new D.a(this.gl,{bytes:a,type:s,usage:u,accessor:c});this._createdBuffers[i]&&this._createdBuffers[i].delete(),this._createdBuffers[i]=l,this.feedbackBuffers[n][i]=l}}}}},{key:"_createNewBuffer",value:function(t,e){var n=new D.a(this.gl,e);return this._createdBuffers[t]&&(this._createdBuffers[t].delete(),this._createdBuffers[t]=n),n}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var t=this.currentIndex,e=(t+1)%2;for(var n in Object.assign(this.sourceBuffers[e],this.sourceBuffers[t]),Object.assign(this.feedbackBuffers[e],this.feedbackBuffers[t]),this.feedbackMap){var r=this.feedbackMap[n];r!==this.targetTextureVarying&&(this.sourceBuffers[e][n]=this.feedbackBuffers[t][r],this.feedbackBuffers[e][r]=this.sourceBuffers[t][n],Object(P.a)(this.feedbackBuffers[e][r]instanceof D.a))}this.transformFeedbacks[e]&&this.transformFeedbacks[e].setBuffers(this.feedbackBuffers[e])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var t=this.currentIndex,e=(t+1)%2;Object.assign(this.sourceTextures[e],this.sourceTextures[t]),this.sourceTextures[e][this._swapTexture]=this.targetTextures[t],this.targetTextures[e]=this.sourceTextures[t][this._swapTexture],this.framebuffers[e]&&this.framebuffers[e].update(Object(S.a)({},36064,this.targetTextures[e]))}}},{key:"_buildModel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getShaders(t),n=e.vs,r=e.fs,i=e.modules,o=e.uniforms,a=e.inject,s=e.samplerTextureMap;this.model=new Tn(this.gl,Object.assign({},t,{vs:n,fs:r,vertexCount:t.elementCount,modules:i,uniforms:o,inject:a})),this.samplerTextureMap=s,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(t.elementCount)}},{key:"_setupTransformFeedback",value:function(){Object(l.d)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new $t(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new $t(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var t=this.targetTextures[0],e=t.width,n=t.height;if(this.framebuffers[0]=new pt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:e,height:n,attachments:Object(S.a)({},36064,this.targetTextures[0])}),this._swapTexture){var r=this.targetTextures[1];e=r.width,n=r.height,this.framebuffers[1]=new pt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:e,height:n,attachments:Object(S.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(t){if(this.hasSourceTextures||this.targetTextureVarying){var e=new Float32Array(t);e.forEach(function(t,e,n){n[e]=e}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new D.a(this.gl,{data:e,size:1})}}},{key:"_getShaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t.vs),n=e.vs,r=e.uniforms,i=e.targetTextureType,a=e.inject,s=e.samplerTextureMap;return this.targetTextureType=i,{vs:n,fs:dn({version:Object(o.l)(n),input:this.targetTextureVarying,inputType:i,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[vn].concat(t.modules||[]):t.modules,uniforms:r,inject:a,samplerTextureMap:s}}},{key:"_processVertexShader",value:function(t){return Cn({vs:t,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),t}(),Nn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.gl,r=e._cachePrograms,i=void 0!==r&&r;Object(g.a)(this,t),Object(P.a)(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=i}return Object(A.a)(t,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(t,e){Object(P.a)("string"==typeof e),Object(P.a)(this._compareContexts(t,this.gl));var n=this.vertexShaders[e];return n||(n=new q(t,e),this.vertexShaders[e]=n),n}},{key:"getFragmentShader",value:function(t,e){Object(P.a)("string"==typeof e),Object(P.a)(this._compareContexts(t,this.gl));var n=this.fragmentShaders[e];return n||(n=new Y(t,e),this.fragmentShaders[e]=n),n}},{key:"getProgram",value:function(t,e){Object(P.a)(this._compareContexts(t,this.gl)),Object(P.a)("string"==typeof e.vs),Object(P.a)("string"==typeof e.fs),Object(P.a)("string"==typeof e.id);var n=this._getProgramKey(e),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(t,e),this._cachePrograms&&this._checkProgramProp(r)&&(r._isCached=!0,this.programs[n]=r),r)}},{key:"_getProgramKey",value:function(t){return"".concat(t.id,"-").concat(t.vs,"-").concat(t.fs)}},{key:"_checkProgramProp",value:function(t){return!t.varyings}},{key:"_createNewProgram",value:function(t,e){var n=e.vs,r=e.fs,i=this.getVertexShader(t,n),o=this.getFragmentShader(t,r);return new Kt(this.gl,Object.assign({},e,{vs:i,fs:o}))}},{key:"_resetProgram",value:function(t,e){t.reset()}},{key:"_compareContexts",value:function(t,e){return(t.gl||t)===(e.gl||e)}}]),t}(),Dn=function(){function t(e,n){Object(g.a)(this,t);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,n)}return Object(A.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(t,e){var n=this;if(this.props.enabled){var r=this.gl,i={gl:r,outputBuffer:t.writeBuffer,inputBuffer:t.readBuffer,animationProps:e,swapBuffers:function(){return t._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=pt.getDefaultFramebuffer(r)):this.props.swap&&(i.inputBuffer=t.writeBuffer,i.outputBuffer=t.readBuffer),Object(M.c)(r,{framebuffer:i.outputBuffer},function(){return n._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&t._swapFramebuffers()}}},{key:"_renderPass",value:function(t){t.gl,t.inputBuffer,t.outputBuffer,t.animationProps}}]),t}(),Bn=function(t){function e(t,n){return Object(g.a)(this,e),n=Array.isArray(n)?{passes:n}:n,Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"composite-pass"},n)))}return Object(V.a)(e,t),Object(A.a)(e,[{key:"render",value:function(){var t=this.props.passes,e=void 0===t?[]:t,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.render.apply(s,arguments)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}]),e}(Dn),Un=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(g.a)(this,t),this.gl=e,this.framebuffer1=new pt(e,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new pt(e,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(A.a)(t,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}}]),t}(),Vn=function(t){function e(t,n){var r;return Object(g.a)(this,e),n=Array.isArray(n)?{passes:n}:n,(r=Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"multi-pass"},n)))).renderState=new Un(t,n),r}return Object(V.a)(e,t),Object(A.a)(e,[{key:"render",value:function(t){this.renderState.reset();var e=this.props.passes,n=void 0===e?[]:e,r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.render(this.renderState,t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this}}]),e}(Bn),zn=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"clear-pass"},n)))}return Object(V.a)(e,t),Object(A.a)(e,[{key:"_renderPass",value:function(t){var e=t.gl,n=this.props.clearBits,r=void 0===n?16640:n;e.clear(r)}}]),e}(Dn);new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);var Gn="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",Wn=[-1,-1,1,-1,-1,1,1,1],Hn=function(t){function e(t,n){var r;Object(g.a)(this,e);var i=Wn.map(function(t){return-1===t?0:t});return(r=Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{vs:Gn,geometry:new de({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(Wn)},aTexCoord:{size:2,value:new Float32Array(i)},aCoordinate:{size:2,value:new Float32Array(i)}}})})))).setVertexCount(4),r}return Object(V.a)(e,t),e}(Tn),Xn="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",qn=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,e),(n=Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"copy-pass",swap:!0},r)))).clipspace=new Hn(t,{id:"copy-pass",fs:Xn}),n}return Object(V.a)(e,t),Object(A.a)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.opacity,r=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:e,uOpacity:r},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(Dn),Yn="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",Zn=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,e),n=Object(B.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"texture-pass"},r)));var i=r.texture,o=r.opacity,a=void 0===o?1:o;return n.clipspace=new Hn(t,{id:"texture-pass",fs:Yn,uniforms:{uDiffuseSampler:i,uOpacity:a}}),n}return Object(V.a)(e,t),Object(A.a)(e,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(Dn);n(115);n.d(e,"t",function(){return r.d}),n.d(e,"p",function(){return x}),n.d(e,"y",function(){return p.a}),n.d(e,"x",function(){return M.b}),n.d(e,"z",function(){return M.c}),n.d(e,"c",function(){return F}),n.d(e,"s",function(){return N}),n.d(e,"b",function(){return D.a}),n.d(e,"d",function(){return pt}),n.d(e,"g",function(){return tt.a}),n.d(e,"o",function(){return ht}),n.d(e,"f",function(){return Tn}),n.d(e,"a",function(){return Rn}),n.d(e,"h",function(){return Ln}),n.d(e,"i",function(){return le}),n.d(e,"m",function(){return Nn}),n.d(e,"l",function(){return Vn}),n.d(e,"j",function(){return zn}),n.d(e,"k",function(){return qn}),n.d(e,"n",function(){return Zn}),n.d(e,"e",function(){return de}),n.d(e,"w",function(){return Oe}),n.d(e,"v",function(){return Ee}),n.d(e,"q",function(){return Je}),n.d(e,"r",function(){return rn}),n.d(e,"u",function(){return cn}),n(78)},function(t,e,n){t.exports=n(121)},function(t,e,n){"use strict";var r=n(104);e.a=new r.a({id:"deck"}).enable()},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={LNGLAT:1,LNGLAT_EXPERIMENTAL:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},i={panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"f",function(){return a}),n.d(e,"h",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return f}),n.d(e,"g",function(){return h}),n.d(e,"e",function(){return d});var r={};function i(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function o(t){return Math.round(t/r.EPSILON)*r.EPSILON}function a(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===e?r.precision||4:e;return t=o(t),parseFloat(t.toPrecision(n))}function s(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function u(t,e){if(s(t)){for(var n=(i=t).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}var i;return e(t)}function c(t){return u(t,function(t){return t/180*Math.PI})}function l(t){return u(t,function(t){return 180*t/Math.PI})}function f(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function h(t,e,n){return s(t)?t.map(function(t,r){return h(t,e[r],n)}):n*e+(1-n)*t}function d(t,e){if(s(t)&&s(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!d(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(15),c=n(25),l=n(38),f=n(5),h=n(32),d=n(4),v=n(3),p=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n._initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(t))}},{key:"initialize",value:function(t){return this._initialize(t)}},{key:"setProps",value:function(t){return"data"in t&&this.setData(t),this}},{key:"setAccessor",value:function(t){return this.accessor=t,this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,o=e.srcOffset,a=void 0===o?0:o,s=t.byteLength||t.length;Object(v.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==a||void 0!==s?(Object(f.d)(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(h.b)(n)})),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,o=void 0===i?0:i,a=t.size,s=this.gl;return Object(f.d)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,o=t.dstOffset,a=void 0===o?0:o,s=t.length,u=void 0===s?0:s;Object(f.d)(this.gl);var c,l,d=Object(h.c)(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i),g=a;n?c=(l=n.length)-g:l=g+(c=Math.min(p,u||p));var y=Math.min(p,c);return u=u||y,Object(v.a)(u<=y),n=n||new d(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,a=void 0===o?0:o,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(Object(v.a)(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r;return 35345===n||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t.bytes&&d.g.deprecated("bytes","byteLength");var e=t.byteLength||t.bytes||0;return this.usage=t.usage||35044,this.setAccessor(new l.a(t,t.accessor)),t.data?this._setData(t.data):this._setByteLength(e)}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(ArrayBuffer.isView(t));var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=t.slice(0,10),this.byteLength=t.byteLength,this.bytesUsed=t.byteLength;var r=Object(h.b)(t);return Object(v.a)(r),this.setAccessor(new l.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(t>=0);var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.byteLength=t,this.bytesUsed=t,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"updateAccessor",value:function(t){return d.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new l.a(this.accessor,t),this}},{key:"setByteLength",value:function(t){return d.g.deprecated("setByteLength","reallocate"),this.reallocate(t)}},{key:"data",get:function(){d.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return d.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),e}(c.a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"c",function(){return h});var r=n(14),i=n(18),o=n(50),a=n(43);n.d(e,"a",function(){return a.c});var s=n(4),u=n(3),c={framebuffer:function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:function(t,e){return e?t.enable(3042):t.disable(3042)},blendColor:function(t,e){return t.blendColor.apply(t,Object(i.a)(e))},blendEquation:function(t,e){e=l(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(i.a)(e))},blendFunc:function(t,e){e=l(e)&&2===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,t.blendFuncSeparate.apply(t,Object(i.a)(e))},clearColor:function(t,e){return t.clearColor.apply(t,Object(i.a)(e))},clearDepth:function(t,e){return t.clearDepth(e)},clearStencil:function(t,e){return t.clearStencil(e)},colorMask:function(t,e){return t.colorMask.apply(t,Object(i.a)(e))},cull:function(t,e){return e?t.enable(2884):t.disable(2884)},cullFace:function(t,e){return t.cullFace(e)},depthTest:function(t,e){return e?t.enable(2929):t.disable(2929)},depthFunc:function(t,e){return t.depthFunc(e)},depthMask:function(t,e){return t.depthMask(e)},depthRange:function(t,e){return t.depthRange.apply(t,Object(i.a)(e))},dither:function(t,e){return e?t.enable(3024):t.disable(3024)},derivativeHint:function(t,e){t.hint(35723,e)},frontFace:function(t,e){return t.frontFace(e)},mipmapHint:function(t,e){return t.hint(33170,e)},lineWidth:function(t,e){return t.lineWidth(e)},polygonOffsetFill:function(t,e){return e?t.enable(32823):t.disable(32823)},polygonOffset:function(t,e){return t.polygonOffset.apply(t,Object(i.a)(e))},sampleCoverage:function(t,e){return t.sampleCoverage.apply(t,Object(i.a)(e))},scissorTest:function(t,e){return e?t.enable(3089):t.disable(3089)},scissor:function(t,e){return t.scissor.apply(t,Object(i.a)(e))},stencilTest:function(t,e){return e?t.enable(2960):t.disable(2960)},stencilMask:function(t,e){var n=e=l(e)?e:[e,e],i=Object(r.a)(n,2),o=i[0],a=i[1];t.stencilMaskSeparate(1028,o),t.stencilMaskSeparate(1029,a)},stencilFunc:function(t,e){var n=e=l(e)&&3===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,o=Object(r.a)(n,6),a=o[0],s=o[1],u=o[2],c=o[3],f=o[4],h=o[5];t.stencilFuncSeparate(1028,a,s,u),t.stencilFuncSeparate(1029,c,f,h)},stencilOp:function(t,e){var n=e=l(e)&&3===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,o=Object(r.a)(n,6),a=o[0],s=o[1],u=o[2],c=o[3],f=o[4],h=o[5];t.stencilOpSeparate(1028,a,s,u),t.stencilOpSeparate(1029,c,f,h)},viewport:function(t,e){return t.viewport.apply(t,Object(i.a)(e))}};function l(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function f(t,e){for(var n in Object(a.d)(t,e),e){var r=c[n];r&&r(t,e[n],n)}}function h(t,e,n){if(Object(s.d)(e))return n(t);var r,i=e.nocatch,a=void 0===i||i;if(Object(u.a)(!e.frameBuffer),Object(o.c)(t),f(t,e),a)r=n(t),Object(o.b)(t);else try{r=n(t)}finally{Object(o.b)(t)}return r}},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,o=r.global||r.self||r.window}).call(this,n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="undefined"!=typeof window&&window.addEventListener,o=new Map,a=function(){return i&&window.__SEER_INITIALIZED__},s=function(t,e){var n=o.get(t),r=Date.now();return!!(n&&r-n<e)||(o.set(t,r),!1)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&a()){var n=new Set,o=JSON.stringify(e,function(t){return function(e,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!t.has(n))return t.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}(n));try{window.postMessage({type:t,payload:o,source:"seer-agent"},"*")}catch(t){if(s("seer-log",2e3))return;console.log(t)}}},c=new Map,l=function(t){if(t&&t.data&&"seer-core"===t.data.source){var e=t.data,n=e.type,r=e.payload,i=c.get(n);i&&i.forEach(function(t){return t(r)})}},f=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",l),window.__SEER_LISTENER__=!0)};e.default={send:u,throttle:s,isReady:a,list:function(t,e){return u("LIST",{key:t,data:e})},listItem:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:t,itemKey:e,data:n})},updateItem:function(t,e,n,r){return u("UPDATE_ITEM",{key:t,itemKey:e,path:n,data:r})},multiUpdate:function(t,e,n){return u("MULTI_UPDATE_ITEM",{key:t,itemKey:e,array:n})},deleteItem:function(t,e){return u("DELETE_ITEM",{key:t,itemKey:e})},addLog:function(t,e,n){return u("ADD_LOG",{key:t,itemKey:e,msg:n})},listeners:c,listenFor:function(t,e){if(i){if(!t||!e)throw new Error("Please provide a type and callback");c.has(t)||c.set(t,[]),window.__SEER_LISTENER__||f(),c.get(t).push(e)}},removeListener:function(t){c.forEach(function(e,n){c.set(n,e.filter(function(e){return e!==t}))})},init:f,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",l),delete window.__SEER_LISTENER__)}}},function(t,e,n){"use strict";var r=n(14),i=n(34),o=n(31),a=n(41),s=n(13);u=new s.a(3),s.a!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),c=u;var u,c,l=n(54);n.d(e,"l",function(){return b}),n.d(e,"i",function(){return m}),n.d(e,"g",function(){return _}),n.d(e,"j",function(){return w}),n.d(e,"c",function(){return O}),n.d(e,"b",function(){return E}),n.d(e,"a",function(){return S}),n.d(e,"f",function(){return A}),n.d(e,"e",function(){return T}),n.d(e,"d",function(){return j}),n.d(e,"k",function(){return P}),n.d(e,"h",function(){return R});var f=Math.PI,h=f/4,d=f/180,v=180/f,p=512,g=4003e4,y=1.5;function b(t){return Math.pow(2,t)}function m(t){return Math.log2(t)}function _(t,e){var n=Object(r.a)(t,2),i=n[0],o=n[1]*d;return[(e*=p)*(i*d+f)/(2*f),e*(f-Math.log(Math.tan(h+.5*o)))/(2*f)]}function w(t,e){var n=Object(r.a)(t,2),i=n[0],o=n[1],a=i/(e*=p)*(2*f)-f,s=2*(Math.atan(Math.exp(f-o/e*(2*f)))-h);return[a*v,s*v]}function O(t){var e=t.latitude;Object(l.a)(Number.isFinite(e));var n=Math.cos(e*d);return m(g*n)-9}function E(t){var e=t.latitude,n=t.longitude,r=t.zoom,i=t.scale,o=t.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:b(r),Object(l.a)(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=p*i,c=Math.cos(e*d),f=u/360,h=f/c,v=u/g/c;if(s.pixelsPerMeter=[v,-v,v],s.metersPerPixel=[1/v,-1/v,1/v],s.pixelsPerDegree=[f,-h,v],s.degreesPerPixel=[1/f,-1/h,1/v],a){var y=d*Math.tan(e*d)/c,m=f*y/2,_=u/g*y,w=_/h*v;s.pixelsPerDegree2=[0,-m,_],s.pixelsPerMeter2=[w,0,w]}return s}function S(t,e){var n=Object(r.a)(t,3),i=n[0],o=n[1],a=n[2],s=Object(r.a)(e,3),u=s[0],c=s[1],l=s[2],f=E({longitude:i,latitude:o,scale:1,highPrecision:!0}),h=f.pixelsPerMeter,d=f.pixelsPerMeter2,v=_(t,1);v[0]+=u*(h[0]+d[0]*c),v[1]+=c*(h[1]+d[1]*c);var p=w(v,1),g=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[p[0],p[1],g]:p}function A(t){var e,n,r=t.height,a=t.pitch,s=t.bearing,u=t.altitude,c=t.center,l=void 0===c?null:c,f=t.flipY,h=void 0!==f&&f,v=Object(i.a)();return o.h(v,v,[0,0,-u]),o.g(v,v,[1,1,1/r]),o.e(v,v,-a*d),o.f(v,v,s*d),h&&o.g(v,v,[1,-1,1]),l&&o.h(v,v,((e=[])[0]=-(n=l)[0],e[1]=-n[1],e[2]=-n[2],e)),v}function T(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?y:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,f=a*d,h=Math.atan(.5/i),v=Math.sin(h)*i/Math.sin(Math.PI/2-f-h),p=Math.cos(Math.PI/2-f)*v+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:p*l}}function j(t){var e=t.width,n=t.height,r=t.pitch,i=T({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),a=i.fov,s=i.aspect,u=i.near,c=i.far;return o.d([],a,s,u,c)}function P(t,e){var n=Object(r.a)(t,3),o=n[0],a=n[1],s=n[2],u=void 0===s?0:s;return Object(l.a)(Number.isFinite(o)&&Number.isFinite(a)&&Number.isFinite(u)),Object(i.d)(e,[o,a,u,1])}function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(r.a)(t,3),s=o[0],u=o[1],c=o[2];if(Object(l.a)(Number.isFinite(s)&&Number.isFinite(u)),Number.isFinite(c))return Object(i.d)(e,[s,u,c,1]);var f=Object(i.d)(e,[s,u,0,1]),h=Object(i.d)(e,[s,u,1,1]),d=f[2],v=h[2],p=d===v?0:((n||0)-d)/(v-d);return a.c([],f,h,p)}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(1),i=n(2),o=n(78),a=n(5),s=n(4),u=n(3),c="Resource subclass must define virtual methods",l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(a.e)(e);var i=n.id,o=n.userData,u=void 0===o?{}:o;this.gl=e,this.id=i||Object(s.i)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,e=void 0!==t&&t,n=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),n&&e&&n.filter(Boolean).forEach(function(t){t.delete()}),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(a.j)(this.gl,t),Object(u.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){var i=n.webgl1,o="webgl2"in n?n.webgl2:n.webgl1;return r?o:i}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},o=Object(a.n)(this.gl),s={},u=n||Object.keys(i),c=!0,l=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value,p=i[v];if(p&&(!("webgl2"in p)||o)&&(!("extension"in p)||this.gl.getExtension(p.extension))){var g=r?Object(a.i)(this.gl,v):v;s[g]=this.getParameter(v,t),r&&"GLenum"===p.type&&(s[g]=Object(a.i)(this.gl,s[g]))}}}catch(t){l=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return s}},{key:"setParameter",value:function(t,e){t=Object(a.j)(this.gl,t),Object(u.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Object(a.j)(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return Object(s.h)(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(c)}},{key:"_deleteHandle",value:function(){throw new Error(c)}},{key:"_bindHandle",value:function(){throw new Error(c)}},{key:"_getOptsFromHandle",value:function(){throw new Error(c)}},{key:"_getParameter",value:function(t,e){throw new Error(c)}},{key:"_setParameter",value:function(t,e){throw new Error(c)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=o.default.stats;e.resourceCount=e.resourceCount||0,e.resourceMap=e.resourceMap||{},e.resourceCount++,e.resourceMap[t]=e.resourceMap[t]||{created:0,active:0},e.resourceMap[t].created++,e.resourceMap[t].active++}},{key:"_removeStats",value:function(){var t=this.constructor.name;o.default.stats.resourceMap[t].active--}},{key:"handle",get:function(){return this._handle}}]),t}()},function(t,e,n){"use strict";n.d(e,"d",function(){return s}),n.d(e,"c",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return v});var r=n(1),i=n(22),o=n(59),a=null,s=function(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!o.a)try{s=n(106),a=n(107)}catch(t){}var u=function t(){Object(r.a)(this,t)},c=a||i.a,l=c.WebGLRenderingContext,f=void 0===l?u:l,h=(c.WebGLProgram,c.WebGLShader,c.WebGLBuffer),d=void 0===h?u:h;c.WebGLFramebuffer,c.WebGLRenderbuffer,c.WebGLTexture,c.WebGLUniformLocation,c.WebGLActiveInfo,c.WebGLShaderPrecisionFormat;var v=i.a.WebGL2RenderingContext||function t(){Object(r.a)(this,t)};i.a.Image},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s});var r=n(3),i=n(33);function o(t,e){if("string"!=typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var i=t[e=e.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function a(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}function s(t,e){return void 0===e&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),a(t,e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],g=e[13],y=e[14],b=e[15],m=n[0],_=n[1],w=n[2],O=n[3];return t[0]=m*r+_*s+w*f+O*p,t[1]=m*i+_*u+w*h+O*g,t[2]=m*o+_*c+w*d+O*y,t[3]=m*a+_*l+w*v+O*b,m=n[4],_=n[5],w=n[6],O=n[7],t[4]=m*r+_*s+w*f+O*p,t[5]=m*i+_*u+w*h+O*g,t[6]=m*o+_*c+w*d+O*y,t[7]=m*a+_*l+w*v+O*b,m=n[8],_=n[9],w=n[10],O=n[11],t[8]=m*r+_*s+w*f+O*p,t[9]=m*i+_*u+w*h+O*g,t[10]=m*o+_*c+w*d+O*y,t[11]=m*a+_*l+w*v+O*b,m=n[12],_=n[13],w=n[14],O=n[15],t[12]=m*r+_*s+w*f+O*p,t[13]=m*i+_*u+w*h+O*g,t[14]=m*o+_*c+w*d+O*y,t[15]=m*a+_*l+w*v+O*b,t}},,function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return f});var r=n(13);function i(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],y=e[15],b=n*s-r*a,m=n*u-i*a,_=n*c-o*a,w=r*u-i*s,O=r*c-o*s,E=i*c-o*u,S=l*p-f*v,A=l*g-h*v,T=l*y-d*v,j=f*g-h*p,P=f*y-d*p,R=h*y-d*g,I=b*R-m*P+_*j+w*T-O*A+E*S;return I?(I=1/I,t[0]=(s*R-u*P+c*j)*I,t[1]=(i*P-r*R-o*j)*I,t[2]=(p*E-g*O+y*w)*I,t[3]=(h*O-f*E-d*w)*I,t[4]=(u*T-a*R-c*A)*I,t[5]=(n*R-i*T+o*A)*I,t[6]=(g*_-v*E-y*m)*I,t[7]=(l*E-h*_+d*m)*I,t[8]=(a*P-s*T+c*S)*I,t[9]=(r*T-n*P-o*S)*I,t[10]=(v*O-p*_+y*b)*I,t[11]=(f*_-l*O-d*b)*I,t[12]=(s*A-a*j-u*S)*I,t[13]=(n*j-r*A+i*S)*I,t[14]=(p*m-v*w-g*b)*I,t[15]=(l*w-f*m+h*b)*I,t):null}function o(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],g=e[13],y=e[14],b=e[15],m=n[0],_=n[1],w=n[2],O=n[3];return t[0]=m*r+_*s+w*f+O*p,t[1]=m*i+_*u+w*h+O*g,t[2]=m*o+_*c+w*d+O*y,t[3]=m*a+_*l+w*v+O*b,m=n[4],_=n[5],w=n[6],O=n[7],t[4]=m*r+_*s+w*f+O*p,t[5]=m*i+_*u+w*h+O*g,t[6]=m*o+_*c+w*d+O*y,t[7]=m*a+_*l+w*v+O*b,m=n[8],_=n[9],w=n[10],O=n[11],t[8]=m*r+_*s+w*f+O*p,t[9]=m*i+_*u+w*h+O*g,t[10]=m*o+_*c+w*d+O*y,t[11]=m*a+_*l+w*v+O*b,m=n[12],_=n[13],w=n[14],O=n[15],t[12]=m*r+_*s+w*f+O*p,t[13]=m*i+_*u+w*h+O*g,t[14]=m*o+_*c+w*d+O*y,t[15]=m*a+_*l+w*v+O*b,t}function a(t,e,n){var r,i,o,a,s,u,c,l,f,h,d,v,p=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*p+e[4]*g+e[8]*y+e[12],t[13]=e[1]*p+e[5]*g+e[9]*y+e[13],t[14]=e[2]*p+e[6]*g+e[10]*y+e[14],t[15]=e[3]*p+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=v,t[12]=r*p+s*g+f*y+e[12],t[13]=i*p+u*g+h*y+e[13],t[14]=o*p+c*g+d*y+e[14],t[15]=a*p+l*g+v*y+e[15]),t}function s(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function c(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function l(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function f(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],p=t[12],g=t[13],y=t[14],b=t[15],m=e[0],_=e[1],w=e[2],O=e[3],E=e[4],S=e[5],A=e[6],T=e[7],j=e[8],P=e[9],R=e[10],I=e[11],k=e[12],x=e[13],M=e[14],C=e[15];return Math.abs(n-m)<=r.b*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-_)<=r.b*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-w)<=r.b*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-O)<=r.b*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(s-E)<=r.b*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=r.b*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-A)<=r.b*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-T)<=r.b*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-j)<=r.b*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(h-P)<=r.b*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(d-R)<=r.b*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-I)<=r.b*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(p-k)<=r.b*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(g-x)<=r.b*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(y-M)<=r.b*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(b-C)<=r.b*Math.max(1,Math.abs(b),Math.abs(C))}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return s});var r="Failed to deduce GL constant from typed array";function i(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function o(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===e||e;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,o=void 0===i?4:i,a=t.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var c=u*s,l=(r-u-1)*s;a.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(a,l)}}function s(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)a[4*(s*i+u)+c]=e[4*(2*s*n+2*u)+c];return{data:a,width:i,height:o}}},function(t,e,n){"use strict";var r=n(104);e.a=new r.a({id:"luma"}).enable()},function(t,e,n){"use strict";var r=n(13);var i,o;i=new r.a(4),r.a!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),o=i;function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function s(t,e){var n,r,i,o,a,s,u,c=(n=[],i=t,o=(r=e)[0],a=r[1],s=r[2],u=r[3],n[0]=i[0]*o+i[4]*a+i[8]*s+i[12]*u,n[1]=i[1]*o+i[5]*a+i[9]*s+i[13]*u,n[2]=i[2]*o+i[6]*a+i[10]*s+i[14]*u,n[3]=i[3]*o+i[7]*a+i[11]*s+i[15]*u,n);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(c,c,1/c[3]),c}function u(t,e){var n=t%e;return n<0?e+n:n}function c(t,e,n){return n*e+(1-n)*t}n.d(e,"a",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return c})},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(20),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(39),n(55))},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(45),i=n(35);function o(){if(!r.b){var t=i.a.hrtime();return t[0]+t[1]/1e6}return i.b.performance?i.b.performance.now():Date.now()}o()},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i=n(1),o=n(7),a=n(6),s=n(2),u=n(8),c=n(0),l=n(25),f=n(19),h=n(21),d=n(5),v=n(4),p=n(3),g=[9729,9728],y=(r={},Object(c.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(c.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(c.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(c.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(c.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(c.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(c.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(c.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(c.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r);var b=function(t){function e(t,n){var r;Object(i.a)(this,e);var s=n.id,u=void 0===s?Object(v.i)("texture"):s,c=n.handle,l=n.target;return(r=Object(o.a)(this,Object(a.a)(e).call(this,t,{id:u,handle:c}))).target=l,r.hasFloatTexture=t.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&function(t,e){var n=y[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(d.n)(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}(t,n))&&(!r||function(t,e){var n=y[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}}]),Object(s.a)(e,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.pixels,r=void 0===n?null:n,i=t.format,o=void 0===i?6408:i,a=t.type,s=void 0===a?5121:a,u=t.border,l=void 0===u?0:u,f=t.recreate,h=void 0!==f&&f,d=t.parameters,p=void 0===d?{}:d,g=t.pixelStore,y=void 0===g?{}:g,b=t.textureUnit,m=void 0===b?void 0:b,_=t.unpackFlipY,w=void 0===_||_,O=t.mipmaps,E=void 0===O||O;e||(e=r);var S=t.width,A=t.height,T=t.dataFormat,j=this._deduceParameters({format:o,type:s,dataFormat:T,compressed:!1,data:e,width:S,height:A});S=j.width,A=j.height,T=j.dataFormat,this.width=S,this.height=A,this.format=o,this.type=s,this.dataFormat=T,this.border=l,this.textureUnit=m,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var P=Object(c.a)({},37440,w),R=Object.assign({},P,y);this._isNPOT()&&E&&(v.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(p)),this.mipmaps=E,this.setImageData({data:e,width:S,height:A,format:o,type:s,dataFormat:T,border:l,mipmaps:E,parameters:R}),E&&this.generateMipmap(),this.setParameters(p),h&&(this.data=e)}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,e,function(){t.gl.generateMipmap(t.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(t){var e=t.target,n=void 0===e?this.target:e,r=t.pixels,i=void 0===r?null:r,o=t.data,a=void 0===o?null:o,s=t.width,u=void 0===s?this.width:s,c=t.height,l=void 0===c?this.height:c,f=t.level,v=void 0===f?0:f,g=t.format,y=void 0===g?this.format:g,b=t.type,m=void 0===b?this.type:b,_=t.dataFormat,w=void 0===_?this.dataFormat:_,O=t.offset,E=void 0===O?0:O,S=t.border,A=void 0===S?this.border:S,T=t.compressed,j=void 0!==T&&T,P=t.parameters,R=void 0===P?{}:P;a||(a=i);var I=this._deduceParameters({format:y,type:m,dataFormat:w,compressed:j,data:a,width:u,height:l});m=I.type,w=I.dataFormat,j=I.compressed,u=I.width,l=I.height;var k=this.gl;k.bindTexture(this.target,this.handle);var x,M=this._getDataType({data:a,compressed:j});a=M.data,x=M.dataType,Object(h.c)(this.gl,R,function(){switch(x){case"null":k.texImage2D(n,v,y,u,l,A,w,m,a);break;case"typed-array":k.texImage2D(n,v,y,u,l,A,w,m,a,E);break;case"buffer":Object(d.d)(k),k.bindBuffer(35052,a.handle||a),k.texImage2D(n,v,y,u,l,A,w,m,E),k.bindBuffer(35052,null);break;case"browser-object":Object(d.n)(k)?k.texImage2D(n,v,y,u,l,A,w,m,a):k.texImage2D(n,v,y,w,m,a);break;case"compressed":k.compressedTexImage2D(n,v,y,u,l,A,a);break;default:Object(p.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,u=t.x,c=void 0===u?0:u,l=t.y,v=void 0===l?0:l,p=t.width,g=void 0===p?this.width:p,y=t.height,b=void 0===y?this.height:y,m=t.level,_=void 0===m?0:m,w=t.format,O=void 0===w?this.format:w,E=t.type,S=void 0===E?this.type:E,A=t.dataFormat,T=void 0===A?this.dataFormat:A,j=t.compressed,P=void 0!==j&&j,R=t.offset,I=void 0===R?0:R,k=t.border,x=(void 0===k&&this.border,t.parameters),M=void 0===x?{}:x,C=this._deduceParameters({format:O,type:S,dataFormat:T,compressed:P,data:s,width:g,height:b});if(S=C.type,T=C.dataFormat,P=C.compressed,g=C.width,b=C.height,s||(s=o),s&&s.data){var F=s;s=F.data,g=F.shape[0],b=F.shape[1]}s instanceof f.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,M,function(){P?e.gl.compressedTexSubImage2D(r,_,c,v,g,b,O,s):null===s?e.gl.texSubImage2D(r,_,c,v,g,b,T,S,null):ArrayBuffer.isView(s)?e.gl.texSubImage2D(r,_,c,v,g,b,T,S,s,I):s instanceof d.b?(Object(d.d)(e.gl),e.gl.bindBuffer(35052,s),e.gl.texSubImage2D(r,_,c,v,g,b,T,S,I),e.gl.bindBuffer(35052,null)):Object(d.n)(e.gl)?e.gl.texSubImage2D(r,_,c,v,g,b,T,S,s):e.gl.texSubImage2D(r,_,c,v,T,S,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(t){var e=t.target,n=(void 0===e&&this.target,t.framebuffer),r=(t.offset,t.x),i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.width,u=t.height,c=t.level,l=void 0===c?0:c,f=t.internalFormat,h=void 0===f?6408:f,d=t.border,v=void 0===d?0:d;n&&n.bind(),this.bind(),this.gl.copyTexImage2D(this.target,l,h,i,a,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,this.gl.activeTexture(33984+t),this.gl.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof f.a?{data:e.handle,dataType:"buffer"}:e instanceof d.b?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,r=t.internalformat,i=void 0===r?6408:r,o=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,c=t.border,l=void 0===c?0:c,h=t.format,d=t.type,v=void 0===d?5121:d,p=t.offset,g=void 0===p?0:p,y=t.pixels;return ArrayBuffer.isView(y)?(this.gl.texImage3D(this.target,n,i,o,a,u,l,h,v,y),this):(y instanceof f.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,n,i,o,a,u,l,h,v,g)),this)}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,o=t.dataFormat,a=t.type,s=t.compressed,u=y[e];o=o||u&&u.dataFormat,a=a||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize({data:n,width:r,height:i});return{dataFormat:o,type:a,compressed:s,width:r=c.width,height:i=c.height,format:e,data:n}}},{key:"_deduceImageSize",value:function(t){var e,n=t.data,r=t.width,i=t.height;return e="undefined"!=typeof ImageData&&n instanceof ImageData?{width:n.width,height:n.height}:"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement?{width:n.width,height:n.height}:"undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight}:n?{width:r,height:i}:{width:r>=0?r:1,height:i>=0?i:1},Object(p.a)(e,"Could not deduced texture size"),Object(p.a)(void 0===r||e.width===r,"Deduced texture width does not match supplied width"),Object(p.a)(void 0===i||e.height===i,"Deduced texture height does not match supplied height"),e}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(p.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(Object(d.n)(this.gl)||Object(v.f)(this.width)&&Object(v.f)(this.height))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===g.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),e}(l.a)},function(t,e,n){"use strict";var r=n(75);function i(t,e,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}var o=n(1),a=n(2),s=n(32),u=n(33),c=n(3);n.d(e,"a",function(){return f});var l={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},f=function(){function t(){var e=this;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return Object(a.a)(t,null,[{key:"getBytesPerElement",value:function(t){return Object(s.c)(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return Object(c.a)(t.size),Object(s.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i(t,[l].concat(n))}}]),Object(a.a)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==t.type&&(this.type!==t.type&&u.a.warn("accessor type mismatch"),this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size!==t.size&&u.a.warn("accessor size mismatch"),this.size=t.size),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.instanced&&(u.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(u.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=t.isInstanced?1:0),void 0!==t.index&&(this.index=t.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(10),i=n(28),o=Object.keys(i.a).map(function(t){return"const float COORDINATE_SYSTEM_".concat(t," = ").concat(i.a[t],".;")}).join(""),a="".concat(o,'\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_coordinate_origin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * dy;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    float X = position.x - project_coordinate_origin.x;\n    float Y = position.y - project_coordinate_origin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'),s=n(77),u={};e.a={name:"project",dependencies:[r.q],vs:a,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return t.viewport?Object(s.b)(t):{}},deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale"},{type:"function",old:"preproject",new:"project_position"},{type:"function",old:"project",new:"project_to_clipspace"}]}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return f});var r=n(13);function i(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function o(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function a(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function s(t,e){return t[0]=-e[0],t[1]=-e[1],t}function u(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var c,l,f=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};c=new r.a(2),r.a!=Float32Array&&(c[0]=0,c[1]=0),l=c},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(1),i=n(7),o=n(6),a=n(2),s=n(8),u=n(15),c=n(37),l=n(5),f=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(l.e)(t),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},a,{target:3553})))).initialize(a),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(a.a)(e,null,[{key:"isSupported",value:function(t,e){return c.a.isSupported(t,e)}}]),Object(a.a)(e,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return t.activeTexture(33984+this.textureUnit),t.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"d",function(){return y}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return _});var r,i,o,a=n(18),s=n(0),u=n(5),c=(n(3),r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(t,e,n){return e?t.enable(n):t.disable(n)},f=function(t,e,n){return t.hint(n,e)},h=function(t,e,n){return t.pixelStorei(n,e)},d=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,function(t,e){return t.blendColor.apply(t,Object(a.a)(e))}),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,function(t,e){return t.clearColor.apply(t,Object(a.a)(e))}),Object(s.a)(i,3107,function(t,e){return t.colorMask.apply(t,Object(a.a)(e))}),Object(s.a)(i,2884,l),Object(s.a)(i,2885,function(t,e){return t.cullFace(e)}),Object(s.a)(i,2929,l),Object(s.a)(i,2931,function(t,e){return t.clearDepth(e)}),Object(s.a)(i,2932,function(t,e){return t.depthFunc(e)}),Object(s.a)(i,2928,function(t,e){return t.depthRange.apply(t,Object(a.a)(e))}),Object(s.a)(i,2930,function(t,e){return t.depthMask(e)}),Object(s.a)(i,3024,l),Object(s.a)(i,35723,f),Object(s.a)(i,36006,function(t,e){var n=Object(u.n)(t)?36009:36160;return t.bindFramebuffer(n,e)}),Object(s.a)(i,2886,function(t,e){return t.frontFace(e)}),Object(s.a)(i,33170,f),Object(s.a)(i,2849,function(t,e){return t.lineWidth(e)}),Object(s.a)(i,32823,l),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,function(t,e){return t.scissor.apply(t,Object(a.a)(e))}),Object(s.a)(i,2960,l),Object(s.a)(i,2961,function(t,e){return t.clearStencil(e)}),Object(s.a)(i,2968,function(t,e){return t.stencilMaskSeparate(1028,e)}),Object(s.a)(i,36005,function(t,e){return t.stencilMaskSeparate(1029,e)}),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,function(t,e){return t.viewport.apply(t,Object(a.a)(e))}),Object(s.a)(i,3333,h),Object(s.a)(i,3317,h),Object(s.a)(i,37440,h),Object(s.a)(i,37441,h),Object(s.a)(i,37443,h),Object(s.a)(i,3330,h),Object(s.a)(i,3332,h),Object(s.a)(i,3331,h),Object(s.a)(i,36010,function(t,e){return t.bindFramebuffer(36008,e)}),Object(s.a)(i,3314,h),Object(s.a)(i,32878,h),Object(s.a)(i,3316,h),Object(s.a)(i,3315,h),Object(s.a)(i,32877,h),i),v={blendEquation:function(t,e){return t.blendEquationSeparate(e[32777],e[34877])},blendFunc:function(t,e){return t.blendFuncSeparate(e[32969],e[32968],e[32971],e[32970])},polygonOffset:function(t,e){return t.polygonOffset(e[32824],e[10752])},sampleCoverage:function(t,e){return t.sampleCoverage(e[32938],e[32939])},stencilFuncFront:function(t,e){return t.stencilFuncSeparate(1028,e[2962],e[2967],e[2963])},stencilFuncBack:function(t,e){return t.stencilFuncSeparate(1029,e[34816],e[36003],e[36004])},stencilOpFront:function(t,e){return t.stencilOpSeparate(1028,e[2964],e[2965],e[2966])},stencilOpBack:function(t,e){return t.stencilOpSeparate(1029,e[34817],e[34818],e[34819])}},p=function(t,e){return t.isEnabled(e)},g=(o={},Object(s.a)(o,3042,p),Object(s.a)(o,2884,p),Object(s.a)(o,2929,p),Object(s.a)(o,3024,p),Object(s.a)(o,32823,p),Object(s.a)(o,32926,p),Object(s.a)(o,32928,p),Object(s.a)(o,3089,p),Object(s.a)(o,2960,p),Object(s.a)(o,35977,p),o);function y(t,e){var n={};for(var r in e){var i=Number(r),o=d[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],i))}var a=t.state&&t.state.cache;if(a){var s=Object.assign({},a,e);for(var u in n){(0,v[u])(t,s)}}}function b(t,e){var n=g[e];return n?n(t,Number(e)):t.getParameter(Number(e))}function m(t,e){e=e||c;var n=Array.isArray(e)?e:Object.keys(e),r={},i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=b(t,l)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}function _(t){y(t,Object.assign({},c,{}))}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(73),i="2.0.1",o=Object(r.a)()},function(t,e,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(108),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=y,h=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(o.isFunction(t)){if(u)return t.name;var e=t.toString().match(h);return e&&e[1]}}function v(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function p(t){if(u||!o.isFunction(t))return o.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function y(t,e){t||g(t,!0,e,"==",f.ok)}function b(t,e,n,a){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=m(t),a=m(e);if(i&&!a||!i&&a)return!1;if(i)return t=s.call(t),e=s.call(e),b(t,e,n);var u,c,l=O(t),f=O(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!b(t[u],e[u],n,r))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&g(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!t&&i&&!n;if((!t&&o.isError(i)&&a&&_(i,n)||s)&&g(i,n,"Got unwanted exception"+r),t&&i&&n&&!_(i,n)||!t&&i)throw i}f.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=v(p((e=this).actual),128)+" "+e.operator+" "+v(p(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=d(n),a=i.indexOf("\n"+o);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},o.inherits(f.AssertionError,Error),f.fail=g,f.ok=y,f.equal=function(t,e,n){t!=e&&g(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){b(t,e,!1)||g(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){b(t,e,!0)||g(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){b(t,e,!1)&&g(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){b(e,n,!0)&&g(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){w(!0,t,e,n)},f.doesNotThrow=function(t,e,n){w(!1,t,e,n)},f.ifError=function(t){if(t)throw t};var O=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(39))},function(t,e,n){"use strict";function r(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function o(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},function(t,e){t.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return h});var r=n(26),i=n(3),o=34962,a=32874,s="Invalid WebGLRenderingContext",u="Requires WebGL2";function c(t){return Boolean(t&&(t instanceof r.c||t.ARRAY_BUFFER===o))}function l(t){return Boolean(t&&(t instanceof r.a||t.TEXTURE_BINDING_3D===a))}function f(t){Object(i.a)(c(t),s)}function h(t){Object(i.a)(l(t),u)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return d}),n.d(e,"c",function(){return v}),n.d(e,"b",function(){return p});var r=n(1),i=n(2),o=n(0),a=n(43),s=n(3),u=function(t,e){var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return t===e},c={enable:function(t,e){return t(Object(o.a)({},e,!0))},disable:function(t,e){return t(Object(o.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(o.a)({},e,n))},hint:function(t,e,n){return t(Object(o.a)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},Object(o.a)(r,36006,n),Object(o.a)(r,36010,n),r));case 36009:return t(Object(o.a)({},36006,n));case 36008:return t(Object(o.a)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(Object(o.a)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},Object(o.a)(n,32777,e),Object(o.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},Object(o.a)(r,32777,e),Object(o.a)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},Object(o.a)(r,32969,e),Object(o.a)(r,32968,n),Object(o.a)(r,32971,e),Object(o.a)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,32969,e),Object(o.a)(a,32968,n),Object(o.a)(a,32971,r),Object(o.a)(a,32970,i),a))},clearColor:function(t,e,n,r,i){return t(Object(o.a)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(Object(o.a)({},2931,e))},clearStencil:function(t,e){return t(Object(o.a)({},2961,e))},colorMask:function(t,e,n,r,i){return t(Object(o.a)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(Object(o.a)({},2885,e))},depthFunc:function(t,e){return t(Object(o.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(o.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(o.a)({},2930,e))},frontFace:function(t,e){return t(Object(o.a)({},2886,e))},lineWidth:function(t,e){return t(Object(o.a)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},Object(o.a)(r,32824,e),Object(o.a)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},Object(o.a)(r,32938,e),Object(o.a)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(Object(o.a)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},Object(o.a)(n,2968,e),Object(o.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(o.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},Object(o.a)(i,2962,e),Object(o.a)(i,2967,n),Object(o.a)(i,2963,r),Object(o.a)(i,34816,e),Object(o.a)(i,36003,n),Object(o.a)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,1028===e?2962:34816,n),Object(o.a)(a,1028===e?2967:36003,r),Object(o.a)(a,1028===e?2963:36004,i),a))},stencilOp:function(t,e,n,r){var i;return t((i={},Object(o.a)(i,2964,e),Object(o.a)(i,2965,n),Object(o.a)(i,2966,r),Object(o.a)(i,34817,e),Object(o.a)(i,34818,n),Object(o.a)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,1028===e?2964:34817,n),Object(o.a)(a,1028===e?2965:34818,r),Object(o.a)(a,1028===e?2966:34819,i),a))},viewport:function(t,e,n,r,i){return t(Object(o.a)({},2978,new Int32Array([e,n,r,i])))}};function l(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function f(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s,u=n.apply(void 0,[t.state._updateCache].concat(o)),c=u.valueChanged,l=u.oldValue;c&&((s=t.state).log.apply(s,["gl.".concat(e)].concat(o)),r.apply(void 0,o));return l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,o=void 0!==i&&i,s=n.log,u=void 0===s?function(){}:s;Object(r.a)(this,t),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=o?Object(a.b)(e):Object.assign({},a.a),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(a.d)(this.gl,t,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t)Object(s.a)(void 0!==i),u(t[i],this.cache[i])||(n=!0,e=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=t[i]);return{valueChanged:n,oldValue:e}}}]),t}();function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(s.a)(void 0!==o),!e.state){var a=void 0!==t?t:window;for(var u in a.polyfillContext&&a.polyfillContext(e),e.state=new h(e,{copyState:o,enable:i}),c){f(e,u,c[u])}l(e,"getParameter"),l(e,"isEnabled")}return e.state.enable=i,e}function v(t){t.state||d(t,{copyState:!1}),t.state.push()}function p(t){Object(s.a)(t.state),t.state.pop()}}).call(this,n(39))},function(t,e,n){var r=n(114);t.exports=function(t,e,n,i){var o,a,s,u,c,l,f,h,d,v,p=e[0],g=e[1],y=e[2],b=i[0],m=i[1],_=i[2],w=n[0],O=n[1],E=n[2];if(Math.abs(p-w)<1e-6&&Math.abs(g-O)<1e-6&&Math.abs(y-E)<1e-6)return r(t);f=p-w,h=g-O,d=y-E,v=1/Math.sqrt(f*f+h*h+d*d),o=m*(d*=v)-_*(h*=v),a=_*(f*=v)-b*d,s=b*h-m*f,(v=Math.sqrt(o*o+a*a+s*s))?(o*=v=1/v,a*=v,s*=v):(o=0,a=0,s=0);u=h*s-d*a,c=d*o-f*s,l=f*a-h*o,(v=Math.sqrt(u*u+c*c+l*l))?(u*=v=1/v,c*=v,l*=v):(u=0,c=0,l=0);return t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(o*p+a*g+s*y),t[13]=-(u*p+c*g+l*y),t[14]=-(f*p+h*g+d*y),t[15]=1,t}},function(t,e){t.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},function(t,e){t.exports=function(t,e,n){var r,i,o,a,s,u,c,l,f,h,d,v,p=n[0],g=n[1],y=n[2];e===t?(t[12]=e[0]*p+e[4]*g+e[8]*y+e[12],t[13]=e[1]*p+e[5]*g+e[9]*y+e[13],t[14]=e[2]*p+e[6]*g+e[10]*y+e[14],t[15]=e[3]*p+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=v,t[12]=r*p+s*g+f*y+e[12],t[13]=i*p+u*g+h*y+e[13],t[14]=o*p+c*g+d*y+e[14],t[15]=a*p+l*g+v*y+e[15]);return t}},function(t,e,n){"use strict";function r(t){if(!t)throw new Error("viewport-mercator-project: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new v(t,e)),1!==c.length||l||s(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i="object"!==(void 0===e?"undefined":r(e))||"[object process]"!==String(e)||e.browser;t.exports={window:"undefined"!=typeof window?window:n,global:void 0!==n?n:window,document:"undefined"!=typeof document?document:{},isBrowser:i}}).call(this,n(55),n(39))},,function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(15),c=n(37),l=n(3),f=[34069,34070,34071,34072,34073,34074],h=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,Object.assign({},i,{target:34067})))).initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.format,n=void 0===e?6408:e,r=t.mipmaps,i=void 0===r||r,o=t.width,a=void 0===o?1:o,s=t.height,u=void 0===s?1:s,c=t.type,f=void 0===c?5121:c,h=t.dataFormat,d=this._deduceParameters({format:n,type:f,dataFormat:h});f=d.type,h=d.dataFormat;var v=this._deduceImageSize({data:t[34069],width:a,height:u});a=v.width,u=v.height,Object(l.a)(a===u),this.setCubeMapImageData(t),i&&this.generateMipmap(t),this.opts=t}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(t){var e=t.width,n=t.height,r=t.pixels,i=t.data,o=t.border,a=void 0===o?0:o,s=t.format,u=void 0===s?6408:s,c=t.type,l=void 0===c?5121:c,h=(t.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height)for(var d=0;d<f.length;d++){var v=f[d];h.texImage2D(v,0,u,e,n,a,u,l,r[v])}else for(var p=0;p<f.length;p++){var g=f[p];h.texImage2D(g,0,u,u,l,r[g])}}},{key:"bind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==t&&this.gl.activeTexture(33984+t),this.gl.bindTexture(34067,this.handle),t}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),e}(c.a);h.FACES=f},function(t,e,n){"use strict";(function(t){var r=n(20),i=n(83),o=!("object"===(void 0===t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||i.a;e.a=o}).call(this,n(55))},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(76),c=n(17),l=function(t,e){if(!t)throw new Error(e)},f=function(t){function e(){return Object(r.a)(this,e),Object(o.a)(this,Object(a.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return l(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return l(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(c.a)(t)}}]),e}(u.a)},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function i(t){var e,n={};return function(i){for(var o in i)if(!r(i[o],n[o])){e=t(i),n=i;break}return e}}n.d(e,"a",function(){return i})},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],y=e[15],b=n*s-r*a,m=n*u-i*a,_=n*c-o*a,w=r*u-i*s,O=r*c-o*s,E=i*c-o*u,S=l*p-f*v,A=l*g-h*v,T=l*y-d*v,j=f*g-h*p,P=f*y-d*p,R=h*y-d*g,I=b*R-m*P+_*j+w*T-O*A+E*S;if(!I)return null;return I=1/I,t[0]=(s*R-u*P+c*j)*I,t[1]=(i*P-r*R-o*j)*I,t[2]=(p*E-g*O+y*w)*I,t[3]=(h*O-f*E-d*w)*I,t[4]=(u*T-a*R-c*A)*I,t[5]=(n*R-i*T+o*A)*I,t[6]=(g*_-v*E-y*m)*I,t[7]=(l*E-h*_+d*m)*I,t[8]=(a*P-s*T+c*S)*I,t[9]=(r*T-n*P-o*S)*I,t[10]=(v*O-p*_+y*b)*I,t[11]=(f*_-l*O-d*b)*I,t[12]=(s*A-a*j-u*S)*I,t[13]=(n*j-r*A+i*S)*I,t[14]=(p*m-v*w-g*b)*I,t[15]=(l*w-f*m+h*b)*I,t}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:t;void 0!==t||window,"undefined"!=typeof document&&document}).call(this,n(39))},function(t,e,n){"use strict";var r=n(40),i=n(70),o=n(64),a=(e.a={name:"lighting",dependencies:[r.a],vs:"#define MAX_NUM_OF_LIGHTS 5\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform vec2 lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n    if (i >= lighting_numberOfLights) {\n      break;\n    }\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;if(!t.lightSettings)return{};var e=t.coordinateSystem,n=t.coordinateOrigin,r=t.lightSettings,i=r.numberOfLights,o=void 0===i?1:i,d=r.lightsPosition,v=void 0===d?s:d,p=r.lightsStrength,g=void 0===p?u:p,y=r.coordinateSystem,b=r.coordinateOrigin,m=r.modelMatrix,_=void 0===m?null:m,w=r.ambientRatio,O=void 0===w?c:w,E=r.diffuseRatio,S=void 0===E?l:E,A=r.specularRatio,T=void 0===A?f:A;return{lighting_lightPositions:h({lightsPosition:v,numberOfLights:o,viewport:t.viewport,modelMatrix:_,coordinateSystem:e,coordinateOrigin:n,fromCoordinateSystem:y,fromCoordinateOrigin:b}),lighting_lightStrengths:g,lighting_ambientRatio:O,lighting_diffuseRatio:S,lighting_specularRatio:T,lighting_numberOfLights:o}},deprecations:[{type:"function",old:"getLightWeight",new:"lighting_getLightWeight",deprecated:!0}]},{}),s=[-122.45,37.75,8e3],u=[2,0],c=.4,l=.6,f=.8,h=Object(o.a)(function(t){for(var e=t.lightsPosition,n=t.numberOfLights,r=t.viewport,o=t.modelMatrix,a=t.coordinateSystem,s=t.coordinateOrigin,u=t.fromCoordinateSystem,c=t.fromCoordinateOrigin,l={viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,fromCoordinateSystem:u,fromCoordinateOrigin:c},f=[],h=0;h<n;h++){var d=Object(i.b)(e.slice(3*h,3*h+3),l);f[3*h]=d[0],f[3*h+1]=d[1],f[3*h+2]=d[2]}return f})},function(t,e,n){"use strict";var r=n(10),i=n(40),o=n(64),a=r.r.fp64ify,s=r.r.fp64ifyMatrix4,u=(e.a={name:"project64",dependencies:[i.a,r.r],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  // This is the local offset to the instance position\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_scale(position.z);\n\n  // Apply web mercator projection (depends on coordinate system imn use)\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 worldPosition64[4];\n  worldPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  worldPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  worldPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  worldPosition64[3] = vec2(1.0, 0.0);\n\n  worldPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_to_clipspace_fp64(worldPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, worldPosition\n  );\n}\n",getUniforms:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.project_uViewProjectionMatrix,n=t.project_uScale;if(e&&n)return u({project_uViewProjectionMatrix:e,project_uScale:n});return{}},deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]},Object(o.a)(function(t){var e=t.project_uViewProjectionMatrix,n=t.project_uScale,r=s(e),i=a(n);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:i}}))},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(60),c=n(17),l=n(85),f=n.n(l),h=n(86),d=n.n(h),v=n(87),p=n.n(v),g=n(88),y=n.n(g),b=n(89),m=n.n(b),_=[0,0,0],w=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,e),t=Object(o.a)(this,Object(a.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i,s),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"angle",value:function(t){return f()(this,t)}},{key:"cross",value:function(t){return d()(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return p()(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return y()(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return m()(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var r=n(16),i=n(77),o=n(44),a=n.n(o),s=n(99),u=n.n(s),c=n(24);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=l(t,3),i=r[0],o=r[1],a=r[2],s=void 0===a?0:a,u=l(e.projectFlat(t),2);return[u[0],u[1],s*(n?Object(c.b)({longitude:i,latitude:o,scale:e.scale}):e.getDistanceScales()).pixelsPerMeter[2]]}function h(t,e){var n=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,s=e.coordinateOrigin,u=e.offsetMode,h=l(t,3),d=h[0],v=h[1],p=h[2];if(i){var g=l(a()([],[d,v,p,1],i),3);d=g[0],v=g[1],p=g[2]}switch(o){case r.a.LNGLAT:case r.a.LNGLAT_DEPRECATED:return f([d,v,p],n,u);case r.a.LNGLAT_OFFSETS:return f([d+s[0],v+s[1],p+(s[2]||0)],n,u);case r.a.METER_OFFSETS:return f(Object(c.a)(s,[d,v,p]),n,u);case r.a.IDENTITY:default:return[d,v,p]}}function d(t,e){var n=function(t){var e=Object.assign({},t),n=t.viewport,o=t.coordinateSystem,a=t.coordinateOrigin,s=t.fromCoordinateSystem,u=t.fromCoordinateOrigin;return void 0===s&&(e.fromCoordinateSystem=o),void 0===u&&(e.fromCoordinateOrigin=a),o===r.a.LNGLAT&&n.zoom>=i.a&&(e.coordinateSystem=r.a.LNGLAT_OFFSETS,e.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),e}(e),o=n.viewport,a=n.coordinateSystem,s=n.coordinateOrigin,c=n.modelMatrix,l=n.fromCoordinateSystem,d=n.fromCoordinateOrigin;switch(a){case r.a.LNGLAT_OFFSETS:case r.a.METER_OFFSETS:var v=h(t,{viewport:o,modelMatrix:c,coordinateSystem:l,coordinateOrigin:d,offsetMode:!0}),p=f(s,o,!0);return u()(v,v,p),v;case r.a.LNGLAT:case r.a.LNGLAT_DEPRECATED:case r.a.IDENTITY:default:return h(t,{viewport:o,modelMatrix:c,coordinateSystem:l,coordinateOrigin:d,offsetMode:!1})}}},,function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(1),i=n(7),o=n(6),a=n(2),s=n(8),u=n(15),c=n(5),l=n(21),f=n(37),h=n(19),d=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(c.d)(t),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},a,{target:a.target||32879})))).width=null,n.height=null,n.depth=null,Object.seal(Object(u.a)(Object(u.a)(n))),n.setImageData(a),a.generateMipmap&&n.generateMipmap(),n}return Object(s.a)(e,t),Object(a.a)(e,null,[{key:"isSupported",value:function(t){return Object(c.n)(t)}}]),Object(a.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,e);var n=this.opts,r=n.pixels,i=n.settings;i&&(Object(l.c)(i,function(){r&&t.setImage3D(t.opts)}),this.setParameters(e))}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,r=t.internalformat,i=void 0===r?6408:r,o=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,c=t.border,l=void 0===c?0:c,f=t.format,d=t.type,v=void 0===d?5121:d,p=t.offset,g=void 0===p?0:p,y=t.pixels;ArrayBuffer.isView(y)?this.gl.texImage3D(this.target,n,i,o,a,u,l,f,v,y):y instanceof h.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,n,i,o,a,u,l,f,v,g),this.gl.bindBuffer(35052,y.handle))}}]),e}(f.a)},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r=n(20),i=n(74);function o(){return!("object"===(void 0===t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||Object(i.a)()}}).call(this,n(55))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var r=n(20);function i(e){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===Object(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=e||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(55))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(17);var c=function(t){function e(){return Object(r.a)(this,e),Object(o.a)(this,Object(a.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(u.c)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(u.f)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(u.e)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.c.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e,n){"use strict";n.d(e,"a",function(){return y}),n.d(e,"b",function(){return m});var r=n(29),i=n.n(r),o=n(44),a=n.n(o),s=n(16),u=n(64),c=n(12),l=n(9),f=n(28),h=[0,0,0,0],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[0,0,0],g=[0,0,0],y=12,b=Object(u.a)(function(t){var e=t.viewport,n=t.devicePixelRatio,r=t.coordinateSystem,o=t.coordinateOrigin,u=t.wrapLongitude,c=e.zoom;Object(l.a)(c>=0);var v=function(t){var e,n=t.viewport,r=t.coordinateSystem,o=t.coordinateOrigin,u=t.coordinateZoom,c=n.viewMatrixUncentered,l=n.viewMatrix,v=n.projectionMatrix,p=n.viewProjectionMatrix,g=function(t){switch(t){case s.a.LNGLAT:case s.a.LNGLAT_EXPERIMENTAL:default:return f.a.LNGLAT_AUTO_OFFSET;case s.a.LNGLAT_DEPRECATED:return f.a.LNG_LAT;case s.a.METER_OFFSETS:case s.a.METERS:return f.a.METER_OFFSETS;case s.a.LNGLAT_OFFSETS:return f.a.LNGLAT_OFFSETS;case s.a.IDENTITY:return f.a.IDENTITY}}(r),b=o;if(g===f.a.LNGLAT_AUTO_OFFSET)if(u<y)g=f.a.LNG_LAT;else{var m=Math.fround(n.longitude),_=Math.fround(n.latitude);b=[m,_]}switch(g){case f.a.IDENTITY:case f.a.LNG_LAT:e=h;break;case f.a.LNGLAT_OFFSETS:case f.a.METER_OFFSETS:case f.a.LNGLAT_AUTO_OFFSET:var w=n.projectFlat(b,Math.pow(2,u));e=a()([],[w[0],w[1],0,1],p),l=c||l,p=i()([],v,l),p=i()([],p,d);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:l,viewProjectionMatrix:p,projectionCenter:e,cameraPos:n.cameraPosition,shaderCoordinateSystem:g,shaderCoordinateOrigin:b}}({coordinateSystem:r,coordinateOrigin:o,coordinateZoom:c,viewport:e}),g=v.projectionCenter,b=v.viewProjectionMatrix,m=v.cameraPos,_=v.shaderCoordinateSystem,w=v.shaderCoordinateOrigin;Object(l.a)(b,"Viewport missing modelViewProjectionMatrix");var O=e.getDistanceScales(),E=[e.width*n,e.height*n],S={project_uCoordinateSystem:_,project_uCenter:g,project_uWrapLongitude:u,project_uAntimeridian:(e.longitude||0)-180,project_uViewportSize:E,project_uDevicePixelRatio:n,project_uFocalDistance:e.focalDistance||1,project_uPixelsPerMeter:O.pixelsPerMeter,project_uPixelsPerDegree:O.pixelsPerDegree,project_uPixelsPerUnit:O.pixelsPerMeter,project_uPixelsPerUnit2:p,project_uScale:e.scale,project_uViewProjectionMatrix:b,project_uCameraPosition:m},A=e.getDistanceScales(w);switch(_){case f.a.METER_OFFSETS:S.project_uPixelsPerUnit=A.pixelsPerMeter,S.project_uPixelsPerUnit2=A.pixelsPerMeter2;break;case f.a.LNGLAT_AUTO_OFFSET:S.project_coordinate_origin=w;case f.a.LNGLAT_OFFSETS:S.project_uPixelsPerUnit=A.pixelsPerDegree,S.project_uPixelsPerUnit2=A.pixelsPerDegree2}return S});function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,a=t.coordinateSystem,u=void 0===a?s.a.LNGLAT:a,f=t.coordinateOrigin,h=void 0===f?g:f,d=t.wrapLongitude,p=void 0!==d&&d,y=t.projectionMode,m=t.positionOrigin;return Object(l.a)(e),void 0!==y&&c.a.removed("projectionMode","coordinateSystem")(),void 0!==m&&c.a.removed("positionOrigin","coordinateOrigin")(),Object.assign({project_uModelMatrix:o||v},b({viewport:e,devicePixelRatio:r,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:p}))}},function(t,e,n){"use strict";n.r(e);var r=n(59),i=n(22),o=n(33);n(81);n.d(e,"global",function(){return i.a});if(i.a.luma&&"6.3.2"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat("6.3.2"));i.a.luma||(r.a&&o.a.log(0,"luma.gl ".concat("6.3.2"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:"6.3.2",version:"6.3.2",log:o.a,stats:{},globals:{modules:{},nodeIO:{}}});e.default=i.a.luma},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(1),i=n(2),o=n(7),a=n(6),s=n(8),u=n(60),c=n(98),l=n.n(c),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,e),t=Object(o.a)(this,Object(a.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"cross",value:function(t){return l()(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),e}(u.a)},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e,n){"use strict";(function(t){var e,r=n(0),i=n(84);function o(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function a(t){return t&&!0}var s=(e={},Object(r.a)(e,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){o(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(r.a)(e,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){o(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(r.a)(e,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){o(!1)}}),Object(r.a)(e,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){o(!1)},deleteQuery:function(){o(!1)},beginQuery:function(){o(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},queryCounter:function(){},getQueryObject:function(){}}),Object(r.a)(e,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(r.a)(e,"OVERRIDES",{readBuffer:function(t,e,n){a(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,o=function(t,e){return{webgl2:a(t),ext:t.getExtension(e)}}(t,"ANGLE_instanced_arrays"),s=o.webgl2,u=o.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!a(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!a(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:i.a,hint:function(t,e,n,r){return e(n,r)}}),e);function u(t,e){var n=e.extension,r=e.target,i=e.target2,a=s[n];o(a);var u=a.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?"":c,f=t.getExtension(n);Object.keys(a).forEach(function(e){var n="".concat(e).concat(l),o=null;"meta"===e||"function"==typeof t[e]||(f&&"function"==typeof f[n]?o=function(){return f[n].apply(f,arguments)}:"function"==typeof a[e]&&(o=a[e].bind(r))),o&&(r[e]=o,i[e]=o)})}(void 0!==t?t:window).polyfillContext=function(t){if(t.luma=t.luma||{},function(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.luma[s]=t.getExtension(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t),!t.luma.polyfilled){for(var e in s)"overrides"!==e&&u(t,{extension:e,target:t.luma,target2:t});!function(t,e){var n=e.target,r=e.target2,i=s.OVERRIDES;Object.keys(i).forEach(function(e){if("function"==typeof i[e]){var o=t[e]?t[e].bind(t):function(){},a=i[e].bind(null,t,o);n[e]=a,r[e]=a}})}(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0}return t}}).call(this,n(39))},function(t,e,n){"use strict";n.r(e);var r=n(10),i=n(40),o={name:"project32",dependencies:[i.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  worldPosition = vec4(projectedPosition + offset, 1.0);\n  return project_to_clipspace(worldPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, worldPosition);\n}\n"},a=n(68),s=n(67);function u(){Object(r.v)([r.q,r.r,i.a,o,a.a,s.a,r.u]),Object(r.w)([i.a])}n.d(e,"initializeShaderModules",function(){return u}),n.d(e,"fp32",function(){return r.q}),n.d(e,"fp64",function(){return r.r}),n.d(e,"picking",function(){return r.u}),n.d(e,"project",function(){return i.a}),n.d(e,"project64",function(){return a.a}),n.d(e,"lighting",function(){return s.a}),u()},function(t,e,n){"use strict";(function(t){var r=n(20);e.a="undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===t||"object"!==Object(r.a)(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n(55))},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,i=n(0),o=function(t){return s(t)?void 0:0},a=(r={},Object(i.a)(r,3074,function(t){return s(t)?void 0:36064}),Object(i.a)(r,35723,function(t){return s(t)?void 0:4352}),Object(i.a)(r,35977,o),Object(i.a)(r,32937,o),Object(i.a)(r,36795,function(t,e){var n=s(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0}),Object(i.a)(r,37445,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),Object(i.a)(r,37446,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),Object(i.a)(r,34047,function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(i.a)(r,32883,o),Object(i.a)(r,35071,o),Object(i.a)(r,37447,o),Object(i.a)(r,36063,function(t,e){if(!s(t)){var n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(i.a)(r,35379,o),Object(i.a)(r,35374,o),Object(i.a)(r,35377,o),Object(i.a)(r,34852,function(t){if(!s(t)){var e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(i.a)(r,36203,function(t){return t.getExtension("OES_element_index")?2147483647:65535}),Object(i.a)(r,33001,function(t){return t.getExtension("OES_element_index")?16777216:65535}),Object(i.a)(r,33e3,function(t){return 16777216}),Object(i.a)(r,37157,o),Object(i.a)(r,35373,o),Object(i.a)(r,35657,o),Object(i.a)(r,36183,o),Object(i.a)(r,37137,o),Object(i.a)(r,34045,o),Object(i.a)(r,35978,o),Object(i.a)(r,35979,o),Object(i.a)(r,35968,o),Object(i.a)(r,35376,o),Object(i.a)(r,35375,o),Object(i.a)(r,35659,o),Object(i.a)(r,37154,o),Object(i.a)(r,35371,o),Object(i.a)(r,35658,o),Object(i.a)(r,35076,o),Object(i.a)(r,35077,o),Object(i.a)(r,35380,o),r);function s(t){return t&&!0}function u(t,e,n){var r=a[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)}},function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(111),i=n(112),o=n(113)},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=e[0],t[1]=i+a*c-s*u,t[2]=o+a*u+s*c,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+s*u+a*c,t[1]=e[1],t[2]=o+s*c-a*u,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+a*c-s*u,t[1]=o+a*u+s*c,t[2]=e[2],t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],g=t[15];return(e*a-n*o)*(f*g-h*p)-(e*s-r*o)*(l*g-h*v)+(e*u-i*o)*(l*p-f*v)+(n*s-r*a)*(c*g-h*d)-(n*u-i*a)*(c*p-f*d)+(r*u-i*s)*(c*v-l*d)}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,v=i*u,p=o*a,g=o*s,y=o*u;return t[0]=1-f-v,t[1]=l+y,t[2]=h-g,t[3]=0,t[4]=l-y,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+g,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}},function(t,e){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},function(t,e){t.exports=function(t,e,n,r){var i,o,a,s,u,c,l,f,h,d,v,p,g,y,b,m,_,w,O,E,S,A,T,j,P=r[0],R=r[1],I=r[2],k=Math.sqrt(P*P+R*R+I*I);if(Math.abs(k)<1e-6)return null;P*=k=1/k,R*=k,I*=k,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],d=e[6],v=e[7],p=e[8],g=e[9],y=e[10],b=e[11],m=P*P*a+o,_=R*P*a+I*i,w=I*P*a-R*i,O=P*R*a-I*i,E=R*R*a+o,S=I*R*a+P*i,A=P*I*a+R*i,T=R*I*a-P*i,j=I*I*a+o,t[0]=s*m+f*_+p*w,t[1]=u*m+h*_+g*w,t[2]=c*m+d*_+y*w,t[3]=l*m+v*_+b*w,t[4]=s*O+f*E+p*S,t[5]=u*O+h*E+g*S,t[6]=c*O+d*E+y*S,t[7]=l*O+v*E+b*S,t[8]=s*A+f*T+p*j,t[9]=u*A+h*T+g*j,t[10]=c*A+d*T+y*j,t[11]=l*A+v*T+b*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},function(t,e,n){(function(t){(function(e){var n,r,i=i||{};function o(){this.ib=!1,this.ga=null,this.l=void 0,this.i=1,this.ja=this.ya=0,this.Uc=this.$=null}function a(t){if(t.ib)throw new TypeError("Generator is already running");t.ib=!0}function s(t,e,n){return t.i=n,{value:e}}function u(t,e,n){var r=(e=i.F(e)).next();if(i.H.Sc(r),!r.done)return t.ga=e,s(t,r.value,n);t.l=r.value,t.i=n}function c(t,e,n){t.ya=e,null!=n&&(t.ja=n)}function l(t){t.ya=0;var e=t.$.Tc;return t.$=null,e}function f(t){t.Uc=[t.$],t.ya=0,t.ja=0}function h(t){var e=t.Uc.splice(0)[0];(e=t.$=t.$||e)?e.Yc?t.i=t.ya||t.ja:null!=e.j&&t.ja<e.j?(t.i=e.j,t.$=null):t.i=t.ja:t.i=0}function d(t){this.G=new o,this.qf=t}function v(t,e,n,r){try{var o=e.call(t.G.ga,n);if(i.H.Sc(o),!o.done)return t.G.ib=!1,o;var a=o.value}catch(e){return t.G.ga=null,t.G.ob(e),p(t)}return t.G.ga=null,r.call(t.G,a),p(t)}function p(t){for(;t.G.i;)try{var e=t.qf(t.G);if(e)return t.G.ib=!1,{value:e.value,done:!1}}catch(e){t.G.l=void 0,t.G.ob(e)}if(t.G.ib=!1,t.G.$){if(e=t.G.$,t.G.$=null,e.Yc)throw e.Tc;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function g(t){this.next=function(e){return t.kb(e)},this.throw=function(e){return t.ob(e)},this.return=function(e){return function(t,e){a(t.G);var n=t.G.ga;return n?v(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.G.return):(t.G.return(e),p(t))}(t,e)},i.D(),this[Symbol.iterator]=function(){return this}}function y(t){this[Symbol.asyncIterator]=function(){return this},this[Symbol.iterator]=function(){return t},this.next=function(e){return Promise.resolve(t.next(e))},void 0!==t.throw&&(this.throw=function(e){return Promise.resolve(t.throw(e))}),void 0!==t.return&&(this.return=function(e){return Promise.resolve(t.return(e))})}function b(t,e){this.action=t,this.value=e}function m(t,e,n,r){this.method=t,this.sa=e,this.resolve=n,this.reject=r}function _(t){this.frame=t,this.next=null}function w(){this.Jb=this.ba=null}function O(t){t.ba&&(t.ba=t.ba.next,t.ba||(t.Jb=null))}function E(t){this.Wc=t,this.W=null,this.O=new w,i.M(),this[Symbol.asyncIterator]=function(){return this};var e=this;this.te=function(t){var n=e.O.first();!0===t.done?(e.W=null,n.method="next",n.sa=t.value):(n.resolve({value:t.value,done:!1}),O(e.O)),A(e)},this.se=function(t){T(e,t)},this.ec=function(t){j(e,t)}}function S(t,e,n){return new Promise(function(r,i){var o=null===t.O.ba;t.O.enqueue(new m(e,n,r,i)),o&&A(t)})}function A(t){if(null!==t.O.ba)try{if(t.W){if(!t.W)throw Error("no delegate to perform execution");var e=t.O.first();if(e.method in t.W)try{t.W[e.method](e.sa).then(t.te,t.se).catch(t.ec)}catch(e){T(t,e)}else t.W=null,A(t)}else!function(t){var e=t.O.first();try{var n=t.Wc[e.method](e.sa);if(n.value instanceof b)switch(n.value.action){case 0:Promise.resolve(n.value.value).then(function(r){e.resolve({value:r,done:n.done}),O(t.O),A(t)},function(n){e.reject(n),O(t.O),A(t)}).catch(t.ec);break;case 1:t.W=i.jb(n.value.value),e.method="next",e.sa=void 0,A(t);break;case 2:Promise.resolve(n.value.value).then(function(n){e.method="next",e.sa=n,A(t)},function(n){e.method="throw",e.sa=n,A(t)}).catch(t.ec);break;default:throw Error("Unrecognized AsyncGeneratorWrapper$ActionEnum")}else e.resolve(n),O(t.O),A(t)}catch(n){e.reject(n),O(t.O),A(t)}}(t)}catch(e){j(t,e)}}function T(t,e){var n=t.O.first();t.W=null,n.method="throw",n.sa=e,A(t)}function j(t,e){null!==t.O.ba&&(t.O.first().reject(e),O(t.O)),t.W&&"return"in t.W&&(t.W.return(void 0),t.W=null),t.Wc.return(void 0),A(t)}i.scope={},i.Kc=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},i.oe=function(t){return{next:i.Kc(t)}},i.sc=!1,i.cg=!1,i.dg=!1,i.fg=!1,i.defineProperty=i.sc||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i.ff=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==t&&null!=t?t:e},i.global=i.ff(this),i.kd="jscomp_symbol_",i.m=function(){i.m=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.Symbol=(r=0,function(t){return i.kd+(t||"")+r++}),i.D=function(){i.m();var t=i.global.Symbol.iterator;t||(t=i.global.Symbol.iterator=i.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&i.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return i.jf(i.Kc(this))}}),i.D=function(){}},i.M=function(){i.m();var t=i.global.Symbol.asyncIterator;t||(t=i.global.Symbol.asyncIterator=i.global.Symbol("asyncIterator")),i.M=function(){}},i.jf=function(t){return i.D(),(t={next:t})[i.global.Symbol.iterator]=function(){return this},t},i.F=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):i.oe(t)},i.me=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n},i.A=function(t){return t instanceof Array?t:i.me(i.F(t))},i.pf=i.sc||"function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e},i.bg=function(){var t={};try{return t.__proto__={Id:!0},t.Id}catch(t){}return!1},i.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:i.bg()?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null,i.h=function(t,e){if(t.prototype=i.pf(e.prototype),t.prototype.constructor=t,i.setPrototypeOf){var n=i.setPrototypeOf;n(t,e)}else for(n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.Og=e.prototype},i.H={},i.H.Sc=function(t){if(!(t instanceof Object))throw new TypeError("Iterator result "+t+" is not an object")},o.prototype.kb=function(t){this.l=t},o.prototype.ob=function(t){this.$={Tc:t,Yc:!0},this.i=this.ya||this.ja},o.prototype.return=function(t){this.$={return:t},this.i=this.ja},o.prototype.j=function(t){this.i=t},d.prototype.kb=function(t){return a(this.G),this.G.ga?v(this,this.G.ga.next,t,this.G.kb):(this.G.kb(t),p(this))},d.prototype.ob=function(t){return a(this.G),this.G.ga?v(this,this.G.ga.throw,t,this.G.kb):(this.G.ob(t),p(this))},i.H.I=function(t,e){return e=new g(new d(e)),i.setPrototypeOf&&i.setPrototypeOf(e,t.prototype),e},i.$c=function(t,e){if(e){var n=i.global;t=t.split(".");for(var r=0;r<t.length-1;r++){var o=t[r];o in n||(n[o]={}),n=n[o]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&i.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},i.gd=!1,i.$c("Promise",function(t){function e(t){this.nb=0,this.qc=void 0,this.Ca=[];var e=this.hc();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.ia=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t&&!i.gd)return t;n.prototype.Mc=function(t){null==this.ia&&(this.ia=[],this.pe()),this.ia.push(t)},n.prototype.pe=function(){var t=this;this.Nc(function(){t.af()})};var o=i.global.setTimeout;n.prototype.Nc=function(t){o(t,0)},n.prototype.af=function(){for(;this.ia&&this.ia.length;){var t=this.ia;this.ia=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.qe(t)}}}this.ia=null},n.prototype.qe=function(t){this.Nc(function(){throw t})},e.prototype.hc=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.tf),reject:t(this.pc)}},e.prototype.tf=function(t){if(t===this)this.pc(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.uf(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.sf(t):this.Vc(t)}},e.prototype.sf=function(t){var e=void 0;try{e=t.then}catch(t){return void this.pc(t)}"function"==typeof e?this.vf(e,t):this.Vc(t)},e.prototype.pc=function(t){this.bd(2,t)},e.prototype.Vc=function(t){this.bd(1,t)},e.prototype.bd=function(t,e){if(0!=this.nb)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.nb);this.nb=t,this.qc=e,this.bf()},e.prototype.bf=function(){if(null!=this.Ca){for(var t=0;t<this.Ca.length;++t)a.Mc(this.Ca[t]);this.Ca=null}};var a=new n;return e.prototype.uf=function(t){var e=this.hc();t.Bb(e.resolve,e.reject)},e.prototype.vf=function(t,e){var n=this.hc();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.Bb(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Bb=function(t,e){function n(){switch(r.nb){case 1:t(r.qc);break;case 2:e(r.qc);break;default:throw Error("Unexpected state: "+r.nb)}}var r=this;null==this.Ca?a.Mc(n):this.Ca.push(n)},e.resolve=r,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var o=i.F(t),a=o.next();!a.done;a=o.next())r(a.value).Bb(e,n)})},e.all=function(t){var n=i.F(t),o=n.next();return o.done?r([]):new e(function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(o.value).Bb(i(a.length-1),e),o=n.next()}while(!o.done)})},e}),i.$c("Promise.prototype.finally",function(t){return t||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}}),i.Oc=function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise(function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())})},i.ig=function(t){return i.Oc(t())},i.o=function(t){return i.Oc(new g(new d(t)))},i.jb=function(t){i.M();var e=t[Symbol.asyncIterator];return void 0!==e?e.call(t):new y(i.F(t))},w.prototype.first=function(){if(this.ba)return this.ba.frame;throw Error("no frames in executionQueue")},w.prototype.enqueue=function(t){t=new _(t),this.Jb?this.Jb.next=t:this.ba=t,this.Jb=t},E.prototype.next=function(t){return S(this,"next",t)},E.prototype.return=function(t){return S(this,"return",new b(0,t))},E.prototype.throw=function(t){return S(this,"throw",t)};var P=new Int32Array(2);function R(t,e){this.low=0|t,this.high=0|e}new Float32Array(P.buffer),new Float64Array(P.buffer),new Uint16Array(new Uint8Array([1,0]).buffer),R.prototype.equals=function(t){return this.low==t.low&&this.high==t.high};var I=new R(0,0);function k(){this.a=new Y(new Uint8Array(1024)),this.K=1024,this.Gb=1,this.oa=null,this.fd=0,this.Fb=!1,this.Zc=0,this.Kb=[],this.ed=0,this.gb=!1}function x(t){return t.a.ca().subarray(t.a.position(),t.a.position()+t.offset())}function M(t,e,n){e>t.Gb&&(t.Gb=e);for(var r=1+~(t.a.C.length-t.K+n)&e-1;t.K<r+e+n;){var i=t.a.C.length,o=t,a=t.a,s=a.C.length;if(3221225472&s)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var u=s<<1,c=new Y(new Uint8Array(u));c.setPosition(u-s),c.ca().set(a.ca(),u-s),o.a=c,t.K+=t.a.C.length-i}C(t,r)}function C(t,e){for(var n=0;n<e;n++)t.a.bb(--t.K,0)}function F(t,e){M(t,2,0),t.rc(e)}function L(t,e,n,r){(t.gb||n!=r)&&(M(t,1,0),t.bb(n),t.slot(e))}function N(t,e,n,r){(t.gb||n!=r)&&(F(t,n),t.slot(e))}function D(t,e,n,r){(t.gb||n!=r)&&(M(t,4,0),t.Y(n),t.slot(e))}function B(t,e,n,r){!t.gb&&n.equals(r)||(M(t,8,0),t.fa(n),t.slot(e))}function U(t,e,n){(t.gb||0!=n)&&(z(t,n),t.slot(e))}function V(t){if(t.Fb)throw Error("FlatBuffers: object serialization must not be nested.")}function z(t,e){M(t,4,0),t.Y(t.offset()-e+4)}function G(t,e){V(t),null==t.oa&&(t.oa=[]),t.fd=e;for(var n=0;n<e;n++)t.oa[n]=0;t.Fb=!0,t.Zc=t.offset()}function W(t){if(null==t.oa||!t.Fb)throw Error("FlatBuffers: endObject called without startObject");M(t,4,0),t.Y(0);for(var e=t.offset(),n=t.fd-1;0<=n&&0==t.oa[n];n--);for(var r=n+1;0<=n;n--)F(t,0!=t.oa[n]?e-t.oa[n]:0);F(t,e-t.Zc),F(t,r=2*(r+2));var i=0,o=t.K;n=0;t:for(;n<t.Kb.length;n++){var a=t.a.C.length-t.Kb[n];if(r==K(t.a,a)){for(var s=2;s<r;s+=2)if(K(t.a,o+s)!=K(t.a,a+s))continue t;i=t.Kb[n];break}}return i?(t.K=t.a.C.length-e,t.a.Y(t.K,i-e)):(t.Kb.push(t.offset()),t.a.Y(t.a.C.length-e,t.offset()-e)),t.Fb=!1,e}function H(t,e,n,r){V(t),t.ed=n,M(t,4,e*n),M(t,r,e*n)}function X(t){return t.Y(t.ed),t.offset()}function q(t,e){if(e instanceof Uint8Array)var n=e;else{n=[];for(var r=0;r<e.length;){var i=e.charCodeAt(r++);if(!(55296>i||56320<=i))i=(i<<10)+e.charCodeAt(r++)+-56613888;128>i?n.push(i):(2048>i?n.push(i>>6&31|192):(65536>i?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(63&i|128))}}for(M(t,1,0),t.bb(0),H(t,1,n.length,1),t.a.setPosition(t.K-=n.length),r=0,e=t.K,i=t.a.ca();r<n.length;r++)i[e++]=n[r];return X(t)}function Y(t){this.C=t,this.ad=0}function Z(t,e){return t.C[e]}function K(t,e){return(t.C[e]|t.C[e+1]<<8)<<16>>16}function Q(t,e){return new R(t.v(e),t.v(e+4))}function J(t,e,n){return e-=t.v(e),n<K(t,e)?K(t,e+n):0}function $(t,e,n){return e.b=n+t.v(n),e.a=t,e}function tt(t,e,n){e+=t.v(e);var r=t.v(e),i="",o=0;if(e+=4,1===n)return t.C.subarray(e,e+r);for(;o<r;){if(!(192>(n=Z(t,e+o++)))){var a=Z(t,e+o++);if(224>n)n=(31&n)<<6|63&a;else{var s=Z(t,e+o++);if(240>n)n=(15&n)<<12|(63&a)<<6|63&s;else n=(7&n)<<18|(63&a)<<12|(63&s)<<6|63&Z(t,e+o++)}}65536>n?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return i}function et(t,e){return e+t.v(e)}function nt(t,e){return e+t.v(e)+4}function rt(t,e){return t.v(e+t.v(e))}(n=k.prototype).bb=function(t){this.a.bb(--this.K,t)},n.rc=function(t){this.a.rc(this.K-=2,t)},n.Y=function(t){this.a.Y(this.K-=4,t)},n.fa=function(t){this.a.fa(this.K-=8,t)},n.slot=function(t){this.oa[t]=this.offset()},n.offset=function(){return this.a.C.length-this.K},n.finish=function(t,e){if(e){if(M(this,this.Gb,8),4!=e.length)throw Error("FlatBuffers: file identifier must be length 4");for(var n=3;0<=n;n--)this.bb(e.charCodeAt(n))}M(this,this.Gb,4),z(this,t),this.a.setPosition(this.K)},n.ea=function(t,e){return 0==t&&0==e?I:new R(t,e)},(n=Y.prototype).ca=function(){return this.C},n.position=function(){return this.ad},n.setPosition=function(t){this.ad=t},n.v=function(t){return this.C[t]|this.C[t+1]<<8|this.C[t+2]<<16|this.C[t+3]<<24},n.bb=function(t,e){this.C[t]=e},n.rc=function(t,e){this.C[t]=e,this.C[t+1]=e>>8},n.Y=function(t,e){this.C[t]=e,this.C[t+1]=e>>8,this.C[t+2]=e>>16,this.C[t+3]=e>>24},n.fa=function(t,e){this.Y(t,e.low),this.Y(t+4,e.high)},n.ea=function(t,e){return 0==t&&0==e?I:new R(t,e)};var it=Object.freeze({done:!0,value:void 0});function ot(t){this.ha=t}function at(){}function st(t){return t.Dd||(t.Dd=t.toReadableDOMStream())}function ut(){var t=this;this.values=[],this.Ea=[],this.Sb=new Promise(function(e){return t.R=e})}function ct(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];return lt.apply(null,[t].concat(i.A(n.map(function(t){return[t,"function"]}))))}function lt(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];return null!=t&&Object(t)===t&&n.every(function(e){var n=i.F(e);return e=n.next().value,(n=n.next().value)?null!=t[e]&&typeof t[e]===n:e in t})}function ft(t){return ct(t,"stat")&&lt(t,["fd","number"])}function ht(t){return lt(t,["body"],["bodyUsed","boolean"],["ok","boolean"])}function dt(t){return!(t instanceof at)&&ct(t,"tee","cancel","pipeTo","getReader")}function vt(t){return!(t instanceof at)&&ct(t,"read","pipe","unpipe","pause","resume","wrap")}i.global.Object.defineProperties(ot.prototype,{schema:{configurable:!0,enumerable:!0,get:function(){return this.ha.schema}},batches:{configurable:!0,enumerable:!0,get:function(){return this.ha.batches||[]}},dictionaries:{configurable:!0,enumerable:!0,get:function(){return this.ha.dictionaries||[]}}}),Object.defineProperty(ot.prototype,"schema",{get:function(){return this.ha.schema}}),Object.defineProperty(ot.prototype,"batches",{get:function(){return this.ha.batches||[]}}),Object.defineProperty(ot.prototype,"dictionaries",{get:function(){return this.ha.dictionaries||[]}}),at.prototype.tee=function(){return st(this).tee()},at.prototype.pipeTo=function(t,e){return st(this).pipeTo(t,e)},at.prototype.pipeThrough=function(t,e){return st(this).pipeThrough(t,e)},i.m(),i.M(),i.h(ut,at),ut.prototype.cancel=function(t){var e=this;return i.o(function(n){return s(n,e.return(t),0)})},ut.prototype.write=function(t){if(!this.R)throw Error(this.constructor.name+" is closed");0>=this.Ea.length?this.values.push(t):this.Ea.shift().resolve({done:!1,value:t})},ut.prototype.abort=function(t){this.R&&(0>=this.Ea.length?this.Bc={error:t}:this.Ea.shift().reject({done:!0,value:t}))},ut.prototype.close=function(){if(this.R){for(var t=this.Ea;0<t.length;)t.shift().resolve(it);this.R(),this.R=void 0}},ut.prototype[Symbol.asyncIterator]=function(){return this},(n=ut.prototype).toReadableDOMStream=function(t){return Ot(this,t)},n.toReadableNodeStream=function(){return Et()},n.throw=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.abort(t),2):n.return(it)})},n.return=function(){var t=this;return i.o(function(e){return 1==e.i?s(e,t.close(),2):e.return(it)})},n.read=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.next(t,"read"),2):n.return(n.l.value)})},n.peek=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.next(t,"peek"),2):n.return(n.l.value)})},n.next=function(t){for(var e=0;e<arguments.length;++e);var n=this;return 0<this.values.length?Promise.resolve({done:!1,value:this.values.shift()}):this.Bc?Promise.reject({done:!0,value:this.Bc.error}):this.R?new Promise(function(t,e){n.Ea.push({resolve:t,reject:e})}):Promise.resolve(it)},i.global.Object.defineProperties(ut.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.Sb}}}),i.m(),i.D(),i.m(),i.M();var pt="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function gt(t,e,n,r){n=void 0===n?0:n,r=void 0===r?e.byteLength:r;var i=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,i);return e=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i)),o.set(e,n),t}function yt(t,e){if(!(e=lt(e,["done"],["value"])?e.value:e))return new t(0);if("string"==typeof e){for(var n=new Uint8Array(e.length),r=-1,i=e.length;++r<i;)n[r]=e.charCodeAt(r);e=n}return e instanceof t?e:e instanceof ArrayBuffer||e instanceof pt?new t(e):e instanceof Y?yt(t,e.ca()):ArrayBuffer.isView(e)?0>=e.byteLength?new t(0):new t(e.buffer,e.byteOffset,e.byteLength/t.BYTES_PER_ELEMENT):t.from(e)}function bt(t){return t.next(),t}function mt(t,e){var n,r;return i.H.I(mt,function(o){return n=function t(e){return i.H.I(t,function(t){return s(t,e,0)})},r="string"==typeof e?n(e):ArrayBuffer.isView(e)?n(e):e instanceof ArrayBuffer?n(e):e instanceof pt?n(e):ct(e,Symbol.iterator)?e:n(e),i.m(),i.D(),u(o,bt(function e(n){var r,o,a;return i.H.I(e,function(e){return 1==e.i&&(r=null),5!=e.i?(a=(o=n).next,s(e,yt(t,r),5)):(r=a.call(o,e.l)).done?void(e.i=0):e.j(2)})}(r[Symbol.iterator]())),0)})}function _t(t,e){return new E(function n(){var r,o,a,u,c,l,f;return i.H.I(n,function(n){switch(n.i){case 1:if(!ct(e,"then")){n.j(2);break}return r=b,o=1,a=_t,u=t,s(n,new b(2,e),4);case 4:return s(n,new r(o,a(u,n.l)),3);case 3:return n.return(n.l);case 2:return c=function(t){return new E(function e(){var n,r;return i.H.I(e,function(e){return 1==e.i?(n=b,r=0,s(e,new b(2,t),3)):s(e,new n(r,e.l),0)})}())},l=function(t){return new E(function e(){return i.H.I(e,function(e){return i.m(),i.D(),s(e,new b(1,bt(function t(e){var n,r,o;return i.H.I(t,function(t){return 1==t.i&&(n=null),5!=t.i?(o=(r=e).next,s(t,n&&n.value,5)):(n=o.call(r,t.l)).done?void(t.i=0):t.j(2)})}(t[Symbol.iterator]()))),0)})}())},f="string"==typeof e?c(e):ArrayBuffer.isView(e)?c(e):e instanceof ArrayBuffer?c(e):e instanceof pt?c(e):ct(e,Symbol.iterator)?l(e):ct(e,Symbol.asyncIterator)?e:c(e),i.m(),i.M(),s(n,new b(1,bt(function(e){return new E(function n(){var r,o,a,u,c;return i.H.I(n,function(n){switch(n.i){case 1:r=null;case 2:return o=b,a=2,c=(u=e).next,s(n,new b(0,yt(t,r)),6);case 6:return s(n,new o(a,c.call(u,n.l)),5);case 5:(r=n.l).done?n.i=0:n.j(2)}})}())}(f[Symbol.asyncIterator]()))),0)}})}())}var wt={};function Ot(){throw Error('"toReadableDOMStream" not available in this environment')}function Et(){throw Error('"toReadableNodeStream" not available in this environment')}function St(t){return t.next(),t}function At(t){var e,n,r,o,a,u,d,v,p,g,y,b;return i.H.I(At,function(m){switch(m.i){case 1:return n=!1,r=[],d=0,s(m,null,2);case 2:v=m.l,a=v.da,u=v.size,i.m(),i.D(),p=wt.toUint8ArrayIterator(t)[Symbol.iterator](),c(m,3,4);case 6:if(g=isNaN(u-d)?p.next(void 0):p.next(u-d),e=g.done,o=g.value,!e&&0<o.byteLength&&(r.push(o),d+=o.byteLength),!(e||u<=d)){m.j(8);break}case 10:if("peek"===a)var _=wt.joinUint8Arrays(r.slice(),u)[0];else _=i.F(wt.joinUint8Arrays(r,u)),o=_.next().value,r=_.next().value,d-=o.byteLength,_=o;return s(m,_,13);case 13:if(y=m.l,a=y.da,(u=y.size)<d){m.j(10);break}case 8:if(!e){m.j(6);break}case 4:f(m),!1===n&&"function"==typeof p.return&&p.return(),h(m);break;case 3:b=l(m),n=!0,"function"==typeof p.throw&&p.throw(b),m.j(4)}})}function Tt(t){return new E(function e(){var n,r,o,a,u,d,v,p,g,y,m,_,w;return i.H.I(e,function(e){switch(e.i){case 1:return r=!1,o=[],v=0,s(e,new b(0,null),2);case 2:p=e.l,u=p.da,d=p.size,i.m(),i.M(),g=wt.toUint8ArrayAsyncIterator(t)[Symbol.asyncIterator](),c(e,3,4);case 6:return isNaN(d-v)?s(e,new b(2,g.next(void 0)),12):s(e,new b(2,g.next(d-v)),11);case 11:y=e.l,e.j(10);break;case 12:y=e.l;case 10:if(n=(m=y).done,a=m.value,!n&&0<a.byteLength&&(o.push(a),v+=a.byteLength),!(n||d<=v)){e.j(8);break}case 14:if("peek"===u)var O=wt.joinUint8Arrays(o.slice(),d)[0];else O=i.F(wt.joinUint8Arrays(o,d)),a=O.next().value,o=O.next().value,v-=a.byteLength,O=a;return s(e,new b(0,O),17);case 17:if(_=e.l,u=_.da,(d=_.size)<v){e.j(14);break}case 8:if(!n){e.j(6);break}case 4:if(f(e),!1!==r||"function"!=typeof g.return){e.j(18);break}return s(e,new b(2,g.return()),19);case 19:case 18:h(e);break;case 3:if(w=l(e),r=!0,"function"!=typeof g.throw){e.j(20);break}return s(e,new b(2,g.throw(w)),21);case 21:case 20:e.j(4)}})}())}function jt(t){return new E(function e(){var n,r,o,a,u,d,v,p,g,y,m,_,w;return i.H.I(e,function(e){switch(e.i){case 1:return r=n=!1,o=[],v=0,s(e,new b(0,null),2);case 2:p=e.l,u=p.da,d=p.size,g=new Pt(t),c(e,3,4);case 6:return isNaN(d-v)?s(e,new b(2,g.read(void 0)),12):s(e,new b(2,g.read(d-v)),11);case 11:y=e.l,e.j(10);break;case 12:y=e.l;case 10:if(n=(m=y).done,a=m.value,!n&&0<a.byteLength&&(o.push(wt.toUint8Array(a)),v+=a.byteLength),!(n||d<=v)){e.j(8);break}case 14:if("peek"===u)var O=wt.joinUint8Arrays(o.slice(),d)[0];else O=i.F(wt.joinUint8Arrays(o,d)),a=O.next().value,o=O.next().value,v-=a.byteLength,O=a;return s(e,new b(0,O),17);case 17:if(_=e.l,u=_.da,(d=_.size)<v){e.j(14);break}case 8:if(!n){e.j(6);break}case 4:if(f(e),t.locked&&g.releaseLock(),!1!==r){e.j(18);break}return s(e,new b(2,g.cancel()),19);case 19:case 18:h(e);break;case 3:return w=l(e),r=!0,s(e,new b(2,g.cancel(w)),21);case 21:case 20:e.j(4)}})}())}function Pt(t){this.source=t,this.za=this.xa=null;try{this.dd=!!(this.B=It(this))}catch(t){this.dd=!(this.B=Rt(this))}}function Rt(t){return t.xa&&t.releaseLock(),t.za||(t.za=t.source.getReader(),t.za.closed.catch(function(){})),t.B=t.za}function It(t){return t.za&&t.releaseLock(),t.xa||(t.xa=t.source.getReader({mode:"byob"}),t.xa.closed.catch(function(){})),t.B=t.xa}function kt(t,e){function n(t){return r([e,t])}var r;return[e,n,new Promise(function(i){return(r=i)&&t.once(e,n)})]}function xt(t){return new E(function e(){var n,r,o,a,u,d,v,p,g,y,m,_,w,O;return i.H.I(e,function(e){switch(e.i){case 1:return n=[],r="error",o=!1,a=null,v=0,p=[],s(e,new b(0,null),2);case 2:if(y=e.l,u=y.da,d=y.size,!t.isTTY){e.j(3);break}return s(e,new b(0,new Uint8Array(0)),4);case 4:return e.return(e.l);case 3:(function(t){t.ya=0,t.ja=5})(e),n[0]=kt(t,"end"),n[1]=kt(t,"error");case 7:return n[2]=kt(t,"readable"),_=(m=i).F,s(e,new b(2,Promise.race(n.map(function(t){return t[2]}))),10);case 10:if(w=_.call(m,e.l),r=w.next().value,a=w.next().value,"error"===r){e.j(5);break}if((o="end"===r)||(isFinite(d-v)?(g=wt.toUint8Array(t.read(d-v))).byteLength<d-v&&(g=wt.toUint8Array(t.read(void 0))):g=wt.toUint8Array(t.read(void 0)),0<g.byteLength&&(p.push(g),v+=g.byteLength)),!(o||d<=v)){e.j(9);break}case 12:return s(e,new b(0,function(){if("peek"===u)return wt.joinUint8Arrays(p.slice(),d)[0];var t=i.F(wt.joinUint8Arrays(p,d));return g=t.next().value,p=t.next().value,v-=g.byteLength,g}()),15);case 15:if(O=e.l,u=O.da,(d=O.size)<v){e.j(12);break}case 9:if(!o){e.j(7);break}case 5:return f(e),s(e,new b(2,function(e,n){return g=p=null,new Promise(function(r,o){var a,u,d,v,p,g,y,b,m,_,w;return i.o(function(O){switch(O.i){case 1:for(a=i.F(e),u=a.next();!u.done;u=a.next())d=u.value,v=i.F(d),p=v.next().value,g=v.next().value,t.off(p,g);return y=i.F(kt(t,"close")),b=y.next().value,m=y.next().value,_=y.next().value,w=new Promise(function(e,r){(t.destroy||function(t,e){return e(t)}).call(t,n,function(t){return null!=t?r(t):e()})}),c(O,2,3),s(O,Promise.race([_,w]),5);case 5:n=void 0;case 3:f(O),t.off(b,m),null!=n?o(n):r(),h(O);break;case 2:n=l(O)||n,O.j(3)}})})}(n,"error"===r?a:null)),16);case 16:h(e)}})}())}function Mt(){}wt.memcpy=gt,wt.joinUint8Arrays=function(t,e){t=function(t){for(var e,n,r=0;++r<t.length;)if(e=t[r-1],n=t[r-0],e&&n&&e.buffer===n.buffer){var i=e,o=i.byteOffset,a=n;n=a.byteOffset,a=a.byteLength,o+i.byteLength<n||n+a<o||t.splice(--r,2,new Uint8Array(e.buffer,o,n-o+a))}return t}(t);for(var n,r,i=0,o=-1,a=t.length,s="number"==typeof e?e:t.reduce(function(t,e){return t+e.length},0);++o<a;){if(s<=i+(n=(e=t[o]).subarray(0,Math.min(e.length,s-i))).length){n.length<e.length?t[o]=e.subarray(n.length):n.length===e.length&&o++,r?gt(r,n,i):r=n;break}(r||(r=new Uint8Array(s))).set(n,i),i+=n.length}return[r||new Uint8Array(0),t.slice(o)]},wt.toArrayBufferView=yt,wt.toInt8Array=function(t){return yt(Int8Array,t)},wt.toInt16Array=function(t){return yt(Int16Array,t)},wt.toInt32Array=function(t){return yt(Int32Array,t)},wt.toUint8Array=function(t){return yt(Uint8Array,t)},wt.toUint16Array=function(t){return yt(Uint16Array,t)},wt.toUint32Array=function(t){return yt(Uint32Array,t)},wt.toFloat32Array=function(t){return yt(Float32Array,t)},wt.toFloat64Array=function(t){return yt(Float64Array,t)},wt.toUint8ClampedArray=function(t){return yt(Uint8ClampedArray,t)},wt.toArrayBufferViewIterator=mt,wt.toInt8ArrayIterator=function(t){return mt(Int8Array,t)},wt.toInt16ArrayIterator=function(t){return mt(Int16Array,t)},wt.toInt32ArrayIterator=function(t){return mt(Int32Array,t)},wt.toUint8ArrayIterator=function(t){return mt(Uint8Array,t)},wt.toUint16ArrayIterator=function(t){return mt(Uint16Array,t)},wt.toUint32ArrayIterator=function(t){return mt(Uint32Array,t)},wt.toFloat32ArrayIterator=function(t){return mt(Float32Array,t)},wt.toFloat64ArrayIterator=function(t){return mt(Float64Array,t)},wt.toUint8ClampedArrayIterator=function(t){return mt(Uint8ClampedArray,t)},wt.toArrayBufferViewAsyncIterator=_t,wt.toInt8ArrayAsyncIterator=function(t){return _t(Int8Array,t)},wt.toInt16ArrayAsyncIterator=function(t){return _t(Int16Array,t)},wt.toInt32ArrayAsyncIterator=function(t){return _t(Int32Array,t)},wt.toUint8ArrayAsyncIterator=function(t){return _t(Uint8Array,t)},wt.toUint16ArrayAsyncIterator=function(t){return _t(Uint16Array,t)},wt.toUint32ArrayAsyncIterator=function(t){return _t(Uint32Array,t)},wt.toFloat32ArrayAsyncIterator=function(t){return _t(Float32Array,t)},wt.toFloat64ArrayAsyncIterator=function(t){return _t(Float64Array,t)},wt.toUint8ClampedArrayAsyncIterator=function(t){return _t(Uint8ClampedArray,t)},wt.rebaseValueOffsets=function(t,e,n){if(0!==t){n=n.slice(0,e+1);for(var r=-1;++r<=e;)n[r]+=t}return n},Pt.prototype.releaseLock=function(){this.B&&this.B.releaseLock(),this.B=this.xa=this.za=null},Pt.prototype.cancel=function(t){var e,n=this;return i.o(function(r){return e=n.B,n.B=null,n.releaseLock(),e?s(r,e.cancel(t),0):r.j(0)})},Pt.prototype.read=function(t){var e,n,r=this;return i.o(function(o){switch(o.i){case 1:return 0===t?o.return({done:null==r.B,value:new Uint8Array(0)}):r.dd&&"number"==typeof t?s(o,function(t,e){return i.o(function(n){return 1==n.i?s(n,function t(e,n,r,o){var a,u,c;return i.o(function(i){switch(i.i){case 1:return r>=o?i.return({done:!1,value:new Uint8Array(n,0,o)}):s(i,e.read(new Uint8Array(n,r,o-r)),2);case 2:if(a=i.l,u=a.done,c=a.value,!((r+=c.byteLength)<o)||u){i.j(3);break}return s(i,t(e,c.buffer,r,o),4);case 4:return i.return(i.l);case 3:return i.return({done:u,value:new Uint8Array(c.buffer,0,r)})}})}(It(t),new ArrayBuffer(e),0,e),2):n.return(n.l)})}(r,t),4):s(o,Rt(r).read(),5);case 4:e=o.l,o.j(3);break;case 5:e=o.l;case 3:return!(n=e).done&&(n.value=wt.toUint8Array(n)),o.return(n)}})},i.global.Object.defineProperties(Pt.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.B?this.B.closed.catch(function(){}):Promise.resolve()}}});var Ct,Ft=Ct||(Ct={}),Lt=Ft.c||(Ft.c={}),Nt=Lt.f||(Lt.f={}),Dt=Nt.g||(Nt.g={}),Bt=Dt.MetadataVersion||(Dt.MetadataVersion={});Bt[Bt.V1=0]="V1",Bt[Bt.V2=1]="V2",Bt[Bt.V3=2]="V3",Bt[Bt.V4=3]="V4";var Ut=Ct||(Ct={}),Vt=Ut.c||(Ut.c={}),zt=Vt.f||(Vt.f={}),Gt=zt.g||(zt.g={}),Wt=Gt.UnionMode||(Gt.UnionMode={});Wt[Wt.Sparse=0]="Sparse",Wt[Wt.Dense=1]="Dense";var Ht=Ct||(Ct={}),Xt=Ht.c||(Ht.c={}),qt=Xt.f||(Xt.f={}),Yt=qt.g||(qt.g={}),Zt=Yt.Precision||(Yt.Precision={});Zt[Zt.HALF=0]="HALF",Zt[Zt.SINGLE=1]="SINGLE",Zt[Zt.DOUBLE=2]="DOUBLE";var Kt=Ct||(Ct={}),Qt=Kt.c||(Kt.c={}),Jt=Qt.f||(Qt.f={}),$t=Jt.g||(Jt.g={}),te=$t.DateUnit||($t.DateUnit={});te[te.DAY=0]="DAY",te[te.MILLISECOND=1]="MILLISECOND";var ee=Ct||(Ct={}),ne=ee.c||(ee.c={}),re=ne.f||(ne.f={}),ie=re.g||(re.g={}),oe=ie.TimeUnit||(ie.TimeUnit={});oe[oe.SECOND=0]="SECOND",oe[oe.MILLISECOND=1]="MILLISECOND",oe[oe.MICROSECOND=2]="MICROSECOND",oe[oe.NANOSECOND=3]="NANOSECOND";var ae=Ct||(Ct={}),se=ae.c||(ae.c={}),ue=se.f||(se.f={}),ce=ue.g||(ue.g={}),le=ce.IntervalUnit||(ce.IntervalUnit={});le[le.YEAR_MONTH=0]="YEAR_MONTH",le[le.DAY_TIME=1]="DAY_TIME";var fe=Ct||(Ct={}),he=fe.c||(fe.c={}),de=he.f||(he.f={}),ve=de.g||(de.g={}),pe=ve.Type||(ve.Type={});pe[pe.NONE=0]="NONE",pe[pe.Null=1]="Null",pe[pe.Int=2]="Int",pe[pe.FloatingPoint=3]="FloatingPoint",pe[pe.Binary=4]="Binary",pe[pe.Utf8=5]="Utf8",pe[pe.Bool=6]="Bool",pe[pe.Decimal=7]="Decimal",pe[pe.Date=8]="Date",pe[pe.Time=9]="Time",pe[pe.Timestamp=10]="Timestamp",pe[pe.Interval=11]="Interval",pe[pe.List=12]="List",pe[pe.Struct_=13]="Struct_",pe[pe.Union=14]="Union",pe[pe.FixedSizeBinary=15]="FixedSizeBinary",pe[pe.FixedSizeList=16]="FixedSizeList",pe[pe.Map=17]="Map";var ge=Ct||(Ct={}),ye=ge.c||(ge.c={}),be=ye.f||(ye.f={}),me=be.g||(be.g={}),_e=me.VectorType||(me.VectorType={});_e[_e.OFFSET=0]="OFFSET",_e[_e.DATA=1]="DATA",_e[_e.VALIDITY=2]="VALIDITY",_e[_e.TYPE=3]="TYPE";var we=Ct||(Ct={}),Oe=we.c||(we.c={}),Ee=Oe.f||(Oe.f={}),Se=Ee.g||(Ee.g={}),Ae=Se.Mb||(Se.Mb={});Ae[Ae.Little=0]="Little",Ae[Ae.Big=1]="Big",function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.Cg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.Rf=function(t){G(t,0)},e.Ue=function(t){return W(t)},t.Null=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.Fg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.Vf=function(t){G(t,0)},e.Xe=function(t){return W(t)},t.Struct_=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.Ag=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.Nf=function(t){G(t,0)},e.Re=function(t){return W(t)},t.List=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.vg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.listSize=function(){var t=J(this.a,this.b,4);return t?this.a.v(this.b+t):0},e.If=function(t){G(t,1)},e.$d=function(t,e){D(t,0,e,0)},e.Me=function(t){return W(t)},t.FixedSizeList=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.Bg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.keysSorted=function(){var t=J(this.a,this.b,4);return!!t&&!!(this.a.C[this.b+t]<<24>>24)},e.Of=function(t){G(t,1)},e.Yd=function(t,e){L(t,0,+e,0)},e.Se=function(t){return W(t)},t.Map=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Ig=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.mode=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.UnionMode.Sparse},n.prototype.typeIds=function(t){var e=J(this.a,this.b,6);return e?this.a.v(nt(this.a,this.b+e)+4*t):0},n.prototype.$f=function(){var t=J(this.a,this.b,6);return t?new Int32Array(this.a.ca().buffer,this.a.ca().byteOffset+nt(this.a,this.b+t),rt(this.a,this.b+t)):null},n.Yf=function(t){G(t,2)},n.ae=function(e,n){N(e,0,n,t.c.f.g.UnionMode.Sparse)},n.je=function(t,e){U(t,1,e)},n.Ce=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--){var r=t,i=e[n];M(r,4,0),r.Y(i)}return X(t)},n.Xf=function(t,e){H(t,4,e,4)},n.Ze=function(t){return W(t)},e.Union=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.xg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.bitWidth=function(){var t=J(this.a,this.b,4);return t?this.a.v(this.b+t):0},e.prototype.isSigned=function(){var t=J(this.a,this.b,6);return!!t&&!!(this.a.C[this.b+t]<<24>>24)},e.Lf=function(t){G(t,2)},e.Ab=function(t,e){D(t,0,e,0)},e.Xd=function(t,e){L(t,1,+e,0)},e.Pe=function(t){return W(t)},t.Int=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.wg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.precision=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.Precision.HALF},n.Jf=function(t){G(t,1)},n.cc=function(e,n){N(e,0,n,t.c.f.g.Precision.HALF)},n.Ne=function(t){return W(t)},e.FloatingPoint=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.Jg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.Zf=function(t){G(t,0)},e.$e=function(t){return W(t)},t.Utf8=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.ng=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.wf=function(t){G(t,0)},e.Ee=function(t){return W(t)},t.Binary=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.ug=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.byteWidth=function(){var t=J(this.a,this.b,4);return t?this.a.v(this.b+t):0},e.Hf=function(t){G(t,1)},e.Ld=function(t,e){D(t,0,e,0)},e.Le=function(t){return W(t)},t.FixedSizeBinary=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.og=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.xf=function(t){G(t,0)},e.Fe=function(t){return W(t)},t.Bool=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.qg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.precision=function(){var t=J(this.a,this.b,4);return t?this.a.v(this.b+t):0},e.prototype.scale=function(){var t=J(this.a,this.b,6);return t?this.a.v(this.b+t):0},e.Bf=function(t){G(t,2)},e.cc=function(t,e){D(t,0,e,0)},e.fe=function(t,e){D(t,1,e,0)},e.He=function(t){return W(t)},t.Decimal=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.pg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.unit=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.DateUnit.MILLISECOND},n.Af=function(t){G(t,1)},n.ra=function(e,n){N(e,0,n,t.c.f.g.DateUnit.MILLISECOND)},n.Ge=function(t){return W(t)},e.Date=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Gg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.unit=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.TimeUnit.MILLISECOND},n.prototype.bitWidth=function(){var t=J(this.a,this.b,6);return t?this.a.v(this.b+t):32},n.startTime=function(t){G(t,2)},n.ra=function(e,n){N(e,0,n,t.c.f.g.TimeUnit.MILLISECOND)},n.Ab=function(t,e){D(t,1,e,32)},n.endTime=function(t){return W(t)},e.Time=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Hg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.unit=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.TimeUnit.SECOND},n.prototype.timezone=function(t){var e=J(this.a,this.b,6);return e?tt(this.a,this.b+e,t):null},n.Wf=function(t){G(t,2)},n.ra=function(e,n){N(e,0,n,t.c.f.g.TimeUnit.SECOND)},n.ie=function(t,e){U(t,1,e)},n.Ye=function(t){return W(t)},e.Timestamp=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.yg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.unit=function(){var e=J(this.a,this.b,4);return e?K(this.a,this.b+e):t.c.f.g.IntervalUnit.YEAR_MONTH},n.Mf=function(t){G(t,1)},n.ra=function(e,n){N(e,0,n,t.c.f.g.IntervalUnit.YEAR_MONTH)},n.Qe=function(t){return W(t)},e.Interval=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Kg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.bitWidth=function(){var t=J(this.a,this.b,4);return t?K(this.a,this.b+t):0},n.prototype.type=function(){var e=J(this.a,this.b,6);return e?K(this.a,this.b+e):t.c.f.g.VectorType.OFFSET},n.Ng=function(t){G(t,2)},n.Ab=function(t,e){N(t,0,e,0)},n.Ic=function(e,n){N(e,1,n,t.c.f.g.VectorType.OFFSET)},n.lg=function(t){return W(t)},e.gg=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.zg=function(t,n){return(n||new e).s(t.v(t.position())+t.position(),t)},e.prototype.key=function(t){var e=J(this.a,this.b,4);return e?tt(this.a,this.b+e,t):null},e.prototype.value=function(t){var e=J(this.a,this.b,6);return e?tt(this.a,this.b+e,t):null},e.cd=function(t){G(t,2)},e.Hc=function(t,e){U(t,0,e)},e.Jc=function(t,e){U(t,1,e)},e.Rc=function(t){return W(t)},t.Nb=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.sg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.id=function(){var t=J(this.a,this.b,4);return t?Q(this.a,this.b+t):this.a.ea(0,0)},n.prototype.Xc=function(){var e=J(this.a,this.b,6);return e?(new t.c.f.g.Int).s(et(this.a,this.b+e),this.a):null},n.prototype.isOrdered=function(){var t=J(this.a,this.b,8);return!!t&&!!(this.a.C[this.b+t]<<24>>24)},n.Ef=function(t){G(t,3)},n.bc=function(t,e){B(t,0,e,t.ea(0,0))},n.Ud=function(t,e){U(t,1,e)},n.Wd=function(t,e){L(t,2,+e,0)},n.Je=function(t){return W(t)},e.uc=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.tg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.name=function(t){var e=J(this.a,this.b,4);return e?tt(this.a,this.b+e,t):null},n.prototype.nullable=function(){var t=J(this.a,this.b,6);return!!t&&!!(this.a.C[this.b+t]<<24>>24)},n.prototype.ag=function(){var e=J(this.a,this.b,8);return e?this.a.C[this.b+e]:t.c.f.g.Type.NONE},n.prototype.type=function(t){var e=J(this.a,this.b,10);return e?$(this.a,t,this.b+e):null},n.prototype.dictionary=function(e){var n=J(this.a,this.b,12);return n?(e||new t.c.f.g.uc).s(et(this.a,this.b+n),this.a):null},n.prototype.children=function(e,n){var r=J(this.a,this.b,14);return r?(n||new t.c.f.g.Field).s(et(this.a,nt(this.a,this.b+r)+4*e),this.a):null},n.prototype.xe=function(){var t=J(this.a,this.b,14);return t?rt(this.a,this.b+t):0},n.prototype.Pc=function(e){var n=J(this.a,this.b,18);return n?(new t.c.f.g.Nb).s(et(this.a,nt(this.a,this.b+n)+4*e),this.a):null},n.prototype.Qc=function(){var t=J(this.a,this.b,18);return t?rt(this.a,this.b+t):0},n.Ff=function(t){G(t,8)},n.be=function(t,e){U(t,0,e)},n.de=function(t,e){L(t,1,+e,0)},n.ke=function(e,n){L(e,2,n,t.c.f.g.Type.NONE)},n.Ic=function(t,e){U(t,3,e)},n.Pd=function(t,e){U(t,4,e)},n.Md=function(t,e){U(t,5,e)},n.ze=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--)z(t,e[n]);return X(t)},n.Lg=function(t,e){H(t,4,e,4)},n.hg=function(t,e){U(t,6,e)},n.kg=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--)z(t,e[n]);return X(t)},n.Mg=function(t,e){H(t,4,e,4)},n.ac=function(t,e){U(t,7,e)},n.gc=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--)z(t,e[n]);return X(t)},n.zf=function(t,e){H(t,4,e,4)},n.Ke=function(t){return W(t)},e.Field=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.prototype.offset=function(){return Q(this.a,this.b)},e.prototype.length=function(){return Q(this.a,this.b+8)},e.createBuffer=function(t,e,n){return M(t,8,16),t.fa(n),t.fa(e),t.offset()},t.tc=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ct||(Ct={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Eg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.fields=function(e,n){var r=J(this.a,this.b,6);return r?(n||new t.c.f.g.Field).s(et(this.a,nt(this.a,this.b+r)+4*e),this.a):null},n.prototype.cf=function(){var t=J(this.a,this.b,6);return t?rt(this.a,this.b+t):0},n.prototype.Pc=function(e){var n=J(this.a,this.b,8);return n?(new t.c.f.g.Nb).s(et(this.a,nt(this.a,this.b+n)+4*e),this.a):null},n.prototype.Qc=function(){var t=J(this.a,this.b,8);return t?rt(this.a,this.b+t):0},n.Uf=function(t){G(t,3)},n.Qd=function(e){N(e,0,Ko?No.jd:No.eg,t.c.f.g.Mb.jd)},n.Rd=function(t,e){U(t,1,e)},n.Be=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--)z(t,e[n]);return X(t)},n.Gf=function(t,e){H(t,4,e,4)},n.ac=function(t,e){U(t,2,e)},n.gc=function(t,e){H(t,4,e.length,4);for(var n=e.length-1;0<=n;n--)z(t,e[n]);return X(t)},n.zf=function(t,e){H(t,4,e,4)},n.We=function(t){return W(t)},n.mg=function(t,e){t.finish(e)},e.Schema=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ct||(Ct={}));var Te,je=Ct,Pe=Te||(Te={}),Re=Pe.c||(Pe.c={}),Ie=Re.f||(Re.f={});(Ie.g||(Ie.g={})).Schema=je.c.f.g.Schema;var ke=Te||(Te={}),xe=ke.c||(ke.c={}),Me=xe.f||(xe.f={}),Ce=Me.g||(Me.g={}),Fe=Ce.MessageHeader||(Ce.MessageHeader={});Fe[Fe.NONE=0]="NONE",Fe[Fe.Schema=1]="Schema",Fe[Fe.DictionaryBatch=2]="DictionaryBatch",Fe[Fe.RecordBatch=3]="RecordBatch",Fe[Fe.Tensor=4]="Tensor",function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.prototype.length=function(){return Q(this.a,this.b)},e.prototype.nullCount=function(){return Q(this.a,this.b+8)},e.Ae=function(t,e,n){return M(t,8,16),t.fa(n),t.fa(e),t.offset()},t.vc=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Te||(Te={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.Dg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.length=function(){var t=J(this.a,this.b,4);return t?Q(this.a,this.b+t):this.a.ea(0,0)},n.prototype.T=function(e,n){var r=J(this.a,this.b,6);return r?(n||new t.c.f.g.vc).s(nt(this.a,this.b+r)+16*e,this.a):null},n.prototype.nf=function(){var t=J(this.a,this.b,6);return t?rt(this.a,this.b+t):0},n.prototype.S=function(t,e){var n=J(this.a,this.b,8);return n?(e||new je.c.f.g.tc).s(nt(this.a,this.b+n)+16*t,this.a):null},n.prototype.ve=function(){var t=J(this.a,this.b,8);return t?rt(this.a,this.b+t):0},n.Sf=function(t){G(t,3)},n.Zd=function(t,e){B(t,0,e,t.ea(0,0))},n.ce=function(t,e){U(t,1,e)},n.Qf=function(t,e){H(t,16,e,8)},n.Kd=function(t,e){U(t,2,e)},n.yf=function(t,e){H(t,16,e,8)},n.Ve=function(t){return W(t)},e.RecordBatch=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Te||(Te={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.rg=function(t,e){return(e||new n).s(t.v(t.position())+t.position(),t)},n.prototype.id=function(){var t=J(this.a,this.b,4);return t?Q(this.a,this.b+t):this.a.ea(0,0)},n.prototype.data=function(e){var n=J(this.a,this.b,6);return n?(e||new t.c.f.g.RecordBatch).s(et(this.a,this.b+n),this.a):null},n.prototype.Eb=function(){var t=J(this.a,this.b,8);return!!t&&!!(this.a.C[this.b+t]<<24>>24)},n.Df=function(t){G(t,3)},n.bc=function(t,e){B(t,0,e,t.ea(0,0))},n.Nd=function(t,e){U(t,1,e)},n.Vd=function(t,e){L(t,2,+e,0)},n.Ie=function(t){return W(t)},e.DictionaryBatch=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Te||(Te={})),function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.hf=function(t){return(new n).s(t.v(t.position())+t.position(),t)},n.prototype.version=function(){var t=J(this.a,this.b,4);return t?K(this.a,this.b+t):je.c.f.g.MetadataVersion.V1},n.prototype.headerType=function(){var e=J(this.a,this.b,6);return e?this.a.C[this.b+e]:t.c.f.g.MessageHeader.NONE},n.prototype.header=function(t){var e=J(this.a,this.b,8);return e?$(this.a,t,this.b+e):null},n.prototype.bodyLength=function(){var t=J(this.a,this.b,10);return t?Q(this.a,this.b+t):this.a.ea(0,0)},n.Pf=function(t){G(t,4)},n.dc=function(t,e){N(t,0,e,je.c.f.g.MetadataVersion.V1)},n.Td=function(e,n){L(e,1,n,t.c.f.g.MessageHeader.NONE)},n.Sd=function(t,e){U(t,2,e)},n.Jd=function(t,e){B(t,3,e,t.ea(0,0))},n.Te=function(t){return W(t)},n.ef=function(t,e){t.finish(e)},e.Message=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Te||(Te={}));var Le,Ne=Te,De=je.c.f.g.Type,Be=je.c.f.g.DateUnit,Ue=je.c.f.g.TimeUnit,Ve=je.c.f.g.Precision,ze=je.c.f.g.UnionMode,Ge=je.c.f.g.VectorType,We=je.c.f.g.IntervalUnit,He=Ne.c.f.g.MessageHeader,Xe=je.c.f.g.MetadataVersion,qe=Le||(Le={});qe[qe.NONE=0]="NONE",qe[qe.Null=1]="Null",qe[qe.Int=2]="Int",qe[qe.Float=3]="Float",qe[qe.Binary=4]="Binary",qe[qe.Utf8=5]="Utf8",qe[qe.Bool=6]="Bool",qe[qe.Decimal=7]="Decimal",qe[qe.Date=8]="Date",qe[qe.Time=9]="Time",qe[qe.Timestamp=10]="Timestamp",qe[qe.Interval=11]="Interval",qe[qe.List=12]="List",qe[qe.Struct=13]="Struct",qe[qe.Union=14]="Union",qe[qe.FixedSizeBinary=15]="FixedSizeBinary",qe[qe.FixedSizeList=16]="FixedSizeList",qe[qe.Map=17]="Map",qe[qe.Dictionary=-1]="Dictionary",qe[qe.Int8=-2]="Int8",qe[qe.Int16=-3]="Int16",qe[qe.Int32=-4]="Int32",qe[qe.Int64=-5]="Int64",qe[qe.Uint8=-6]="Uint8",qe[qe.Uint16=-7]="Uint16",qe[qe.Uint32=-8]="Uint32",qe[qe.Uint64=-9]="Uint64",qe[qe.Float16=-10]="Float16",qe[qe.Float32=-11]="Float32",qe[qe.Float64=-12]="Float64",qe[qe.DateDay=-13]="DateDay",qe[qe.DateMillisecond=-14]="DateMillisecond",qe[qe.TimestampSecond=-15]="TimestampSecond",qe[qe.TimestampMillisecond=-16]="TimestampMillisecond",qe[qe.TimestampMicrosecond=-17]="TimestampMicrosecond",qe[qe.TimestampNanosecond=-18]="TimestampNanosecond",qe[qe.TimeSecond=-19]="TimeSecond",qe[qe.TimeMillisecond=-20]="TimeMillisecond",qe[qe.TimeMicrosecond=-21]="TimeMicrosecond",qe[qe.TimeNanosecond=-22]="TimeNanosecond",qe[qe.DenseUnion=-23]="DenseUnion",qe[qe.SparseUnion=-24]="SparseUnion",qe[qe.IntervalDayTime=-25]="IntervalDayTime",qe[qe.IntervalYearMonth=-26]="IntervalYearMonth";var Ye,Ze=Le;!function(t){var e;(function(e){!function(e){function n(){this.b=0}n.prototype.s=function(t,e){return this.b=t,this.a=e,this},n.gf=function(t){return(new n).s(t.v(t.position())+t.position(),t)},n.prototype.version=function(){var t=J(this.a,this.b,4);return t?K(this.a,this.b+t):je.c.f.g.MetadataVersion.V1},n.prototype.schema=function(t){var e=J(this.a,this.b,6);return e?(t||new je.c.f.g.Schema).s(et(this.a,this.b+e),this.a):null},n.prototype.dictionaries=function(e,n){var r=J(this.a,this.b,8);return r?(n||new t.c.f.g.Lb).s(nt(this.a,this.b+r)+24*e,this.a):null},n.prototype.De=function(){var t=J(this.a,this.b,8);return t?rt(this.a,this.b+t):0},n.prototype.oc=function(e,n){var r=J(this.a,this.b,10);return r?(n||new t.c.f.g.Lb).s(nt(this.a,this.b+r)+24*e,this.a):null},n.prototype.rf=function(){var t=J(this.a,this.b,10);return t?rt(this.a,this.b+t):0},n.Kf=function(t){G(t,4)},n.dc=function(t,e){N(t,0,e,je.c.f.g.MetadataVersion.V1)},n.he=function(t,e){U(t,1,e)},n.Od=function(t,e){U(t,2,e)},n.Cf=function(t,e){H(t,24,e,8)},n.ee=function(t,e){U(t,3,e)},n.Tf=function(t,e){H(t,24,e,8)},n.Oe=function(t){return W(t)},n.df=function(t,e){t.finish(e)},e.hd=n}(e.g||(e.g={}))})((e=t.c||(t.c={})).f||(e.f={}))}(Ye||(Ye={})),function(t){!function(t){!function(t){!function(t){function e(){this.b=0}e.prototype.s=function(t,e){return this.b=t,this.a=e,this},e.prototype.offset=function(){return Q(this.a,this.b)},e.prototype.jc=function(){return this.a.v(this.b+8)},e.prototype.bodyLength=function(){return Q(this.a,this.b+16)},e.ye=function(t,e,n,r){return M(t,8,24),t.fa(r),C(t,4),t.Y(n),t.fa(e),t.offset()},t.Lb=e}(t.g||(t.g={}))}(t.f||(t.f={}))}(t.c||(t.c={}))}(Ye||(Ye={}));var Ke=Ye;function Qe(t){this.w=t}Qe.isNull=function(t){return t&&t.typeId===Ze.Null},Qe.isInt=function(t){return t&&t.typeId===Ze.Int},Qe.isFloat=function(t){return t&&t.typeId===Ze.Float},Qe.isBinary=function(t){return t&&t.typeId===Ze.Binary},Qe.isUtf8=function(t){return t&&t.typeId===Ze.Utf8},Qe.isBool=function(t){return t&&t.typeId===Ze.Bool},Qe.isDecimal=function(t){return t&&t.typeId===Ze.Decimal},Qe.isDate=function(t){return t&&t.typeId===Ze.Date},Qe.isTime=function(t){return t&&t.typeId===Ze.Time},Qe.isTimestamp=function(t){return t&&t.typeId===Ze.Timestamp},Qe.isInterval=function(t){return t&&t.typeId===Ze.Interval},Qe.isList=function(t){return t&&t.typeId===Ze.List},Qe.isStruct=function(t){return t&&t.typeId===Ze.Struct},Qe.isUnion=function(t){return t&&t.typeId===Ze.Union},Qe.isFixedSizeBinary=function(t){return t&&t.typeId===Ze.FixedSizeBinary},Qe.isFixedSizeList=function(t){return t&&t.typeId===Ze.FixedSizeList},Qe.isMap=function(t){return t&&t.typeId===Ze.Map},Qe.isDictionary=function(t){return t&&t.typeId===Ze.Dictionary},i.global.Object.defineProperties(Qe.prototype,{children:{configurable:!0,enumerable:!0,get:function(){return this.w}},typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.NONE}}}),i.m();var Je,$e=Symbol.toStringTag,tn=Qe.prototype;function en(t){Qe.apply(this,arguments)}tn.ArrayType=Array,i.m(),Je=tn[Symbol.toStringTag]="DataType",Qe[$e]=Je,i.h(en,Qe),en.prototype.toString=function(){return"Null"},i.global.Object.defineProperties(en.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Null}}}),i.m();var nn,rn=Symbol.toStringTag,on=en.prototype;function an(t,e){this.w=void 0,this.va=t,this.ua=e}i.m(),nn=on[Symbol.toStringTag]="Null",en[rn]=nn,i.h(an,Qe),an.prototype.toString=function(){return(this.va?"I":"Ui")+"nt"+this.ua},i.global.Object.defineProperties(an.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Int}},isSigned:{configurable:!0,enumerable:!0,get:function(){return this.va}},bitWidth:{configurable:!0,enumerable:!0,get:function(){return this.ua}},ArrayType:{configurable:!0,enumerable:!0,get:function(){switch(this.ua){case 8:return this.va?Int8Array:Uint8Array;case 16:return this.va?Int16Array:Uint16Array;case 32:case 64:return this.va?Int32Array:Uint32Array}throw i.m(),Error("Unrecognized "+this[Symbol.toStringTag]+" type")}}}),i.m();var sn,un=Symbol.toStringTag,cn=an.prototype;function ln(){an.call(this,!0,8)}function fn(){an.call(this,!0,16)}function hn(){an.call(this,!0,32)}function dn(){an.call(this,!0,64)}function vn(){an.call(this,!1,8)}function pn(){an.call(this,!1,16)}function gn(){an.call(this,!1,32)}function yn(){an.call(this,!1,64)}function bn(t){this.w=void 0,this.zb=t}i.m(),sn=cn[Symbol.toStringTag]="Int",an[un]=sn,i.h(ln,an),i.h(fn,an),i.h(hn,an),i.h(dn,an),i.h(vn,an),i.h(pn,an),i.h(gn,an),i.h(yn,an),i.h(bn,Qe),bn.prototype.toString=function(){return"Float"+(this.precision<<5||16)},i.global.Object.defineProperties(bn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Float}},precision:{configurable:!0,enumerable:!0,get:function(){return this.zb}},ArrayType:{configurable:!0,enumerable:!0,get:function(){switch(this.precision){case Ve.HALF:return Uint16Array;case Ve.SINGLE:return Float32Array;case Ve.DOUBLE:return Float64Array}throw i.m(),Error("Unrecognized "+this[Symbol.toStringTag]+" type")}}}),i.m();var mn,_n=Symbol.toStringTag,wn=bn.prototype;function On(){bn.call(this,Ve.HALF)}function En(){bn.call(this,Ve.SINGLE)}function Sn(){bn.call(this,Ve.DOUBLE)}function An(){this.w=void 0}i.m(),mn=wn[Symbol.toStringTag]="Float",bn[_n]=mn,i.h(On,bn),i.h(En,bn),i.h(Sn,bn),i.h(An,Qe),An.prototype.toString=function(){return"Binary"},i.global.Object.defineProperties(An.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Binary}}}),i.m();var Tn,jn=Symbol.toStringTag,Pn=An.prototype;function Rn(){this.w=void 0}Pn.ArrayType=Uint8Array,i.m(),Tn=Pn[Symbol.toStringTag]="Binary",An[jn]=Tn,i.h(Rn,Qe),Rn.prototype.toString=function(){return"Utf8"},i.global.Object.defineProperties(Rn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Utf8}}}),i.m();var In,kn=Symbol.toStringTag,xn=Rn.prototype;function Mn(){this.w=void 0}xn.ArrayType=Uint8Array,i.m(),In=xn[Symbol.toStringTag]="Utf8",Rn[kn]=In,i.h(Mn,Qe),Mn.prototype.toString=function(){return"Bool"},i.global.Object.defineProperties(Mn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Bool}}}),i.m();var Cn,Fn=Symbol.toStringTag,Ln=Mn.prototype;function Nn(t,e){this.w=void 0,this.Yb=t,this.zb=e}Ln.ArrayType=Uint8Array,i.m(),Cn=Ln[Symbol.toStringTag]="Bool",Mn[Fn]=Cn,i.h(Nn,Qe),Nn.prototype.toString=function(){return"Decimal["+this.zb+"e"+(0<this.Yb?"+":"")+this.Yb+"]"},i.global.Object.defineProperties(Nn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Decimal}},scale:{configurable:!0,enumerable:!0,get:function(){return this.Yb}},precision:{configurable:!0,enumerable:!0,get:function(){return this.zb}}}),i.m();var Dn,Bn=Symbol.toStringTag,Un=Nn.prototype;function Vn(t){this.w=void 0,this.V=t}Un.ArrayType=Uint32Array,i.m(),Dn=Un[Symbol.toStringTag]="Decimal",Nn[Bn]=Dn,i.h(Vn,Qe),Vn.prototype.toString=function(){return"Date"+32*(this.V+1)+"<"+Be[this.V]+">"},i.global.Object.defineProperties(Vn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Date}},unit:{configurable:!0,enumerable:!0,get:function(){return this.V}}}),i.m();var zn,Gn=Symbol.toStringTag,Wn=Vn.prototype;function Hn(){Vn.call(this,Be.DAY)}function Xn(){Vn.call(this,Be.MILLISECOND)}function qn(t,e){this.w=void 0,this.V=t,this.ua=e}Wn.ArrayType=Int32Array,i.m(),zn=Wn[Symbol.toStringTag]="Date",Vn[Gn]=zn,i.h(Hn,Vn),i.h(Xn,Vn),i.h(qn,Qe),qn.prototype.toString=function(){return"Time"+this.ua+"<"+Ue[this.V]+">"},i.global.Object.defineProperties(qn.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Time}},unit:{configurable:!0,enumerable:!0,get:function(){return this.V}},bitWidth:{configurable:!0,enumerable:!0,get:function(){return this.ua}}}),i.m();var Yn,Zn=Symbol.toStringTag,Kn=qn.prototype;function Qn(){qn.call(this,Ue.SECOND,32)}function Jn(){qn.call(this,Ue.MILLISECOND,32)}function $n(){qn.call(this,Ue.MICROSECOND,64)}function tr(){qn.call(this,Ue.NANOSECOND,64)}function er(t,e){this.w=void 0,this.V=t,this.Zb=e}Kn.ArrayType=Uint32Array,i.m(),Yn=Kn[Symbol.toStringTag]="Time",qn[Zn]=Yn,i.h(Qn,qn),i.h(Jn,qn),i.h($n,qn),i.h(tr,qn),i.h(er,Qe),er.prototype.toString=function(){return"Timestamp<"+Ue[this.V]+(this.Zb?", "+this.Zb:"")+">"},i.global.Object.defineProperties(er.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Timestamp}},unit:{configurable:!0,enumerable:!0,get:function(){return this.V}},timezone:{configurable:!0,enumerable:!0,get:function(){return this.Zb}}}),i.m();var nr,rr=Symbol.toStringTag,ir=er.prototype;function or(t){er.call(this,Ue.SECOND,t)}function ar(t){er.call(this,Ue.MILLISECOND,t)}function sr(t){er.call(this,Ue.MICROSECOND,t)}function ur(t){er.call(this,Ue.NANOSECOND,t)}function cr(t){this.w=void 0,this.V=t}ir.ArrayType=Int32Array,i.m(),nr=ir[Symbol.toStringTag]="Timestamp",er[rr]=nr,i.h(or,er),i.h(ar,er),i.h(sr,er),i.h(ur,er),i.h(cr,Qe),cr.prototype.toString=function(){return"Interval<"+We[this.V]+">"},i.global.Object.defineProperties(cr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Interval}},unit:{configurable:!0,enumerable:!0,get:function(){return this.V}}}),i.m();var lr,fr=Symbol.toStringTag,hr=cr.prototype;function dr(){cr.call(this,We.DAY_TIME)}function vr(){cr.call(this,We.YEAR_MONTH)}function pr(t){this.w=[t]}hr.ArrayType=Int32Array,i.m(),lr=hr[Symbol.toStringTag]="Interval",cr[fr]=lr,i.h(dr,cr),i.h(vr,cr),i.h(pr,Qe),pr.prototype.toString=function(){return"List<"+this.valueType+">"},i.global.Object.defineProperties(pr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.List}},children:{configurable:!0,enumerable:!0,get:function(){return this.w}},valueType:{configurable:!0,enumerable:!0,get:function(){return this.w[0].type}},valueField:{configurable:!0,enumerable:!0,get:function(){return this.w[0]}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.valueType.ArrayType}}}),i.m();var gr,yr=Symbol.toStringTag,br=pr.prototype;function mr(t){this.w=this.w=t}i.m(),gr=br[Symbol.toStringTag]="List",pr[yr]=gr,i.h(mr,Qe),mr.prototype.toString=function(){return"Struct<"+this.w.map(function(t){return t.type}).join(", ")+">"},i.global.Object.defineProperties(mr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Struct}},children:{configurable:!0,enumerable:!0,get:function(){return this.w}}}),i.m();var _r,wr=Symbol.toStringTag,Or=mr.prototype;function Er(t,e,n){this.w=n,this.zd=t,this.w=n,this.Gd=e=Int32Array.from(e),this.Fd=e.reduce(function(t,e,n){return(t[e]=n)&&t||t},Object.create(null))}i.m(),_r=Or[Symbol.toStringTag]="Struct",mr[wr]=_r,i.h(Er,Qe),Er.prototype.toString=function(){return i.m(),this[Symbol.toStringTag]+"<"+this.w.map(function(t){return""+t.type}).join(" | ")+">"},i.global.Object.defineProperties(Er.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Union}},mode:{configurable:!0,enumerable:!0,get:function(){return this.zd}},typeIds:{configurable:!0,enumerable:!0,get:function(){return this.Gd}},children:{configurable:!0,enumerable:!0,get:function(){return this.w}},typeIdToChildIndex:{configurable:!0,enumerable:!0,get:function(){return this.Fd}}}),i.m();var Sr,Ar=Symbol.toStringTag,Tr=Er.prototype;function jr(t,e){Er.call(this,ze.Dense,t,e)}function Pr(t,e){Er.call(this,ze.Sparse,t,e)}function Rr(t){this.w=void 0,this.pd=t}Tr.ArrayType=Int32Array,i.m(),Sr=Tr[Symbol.toStringTag]="Union",Er[Ar]=Sr,i.h(jr,Er),i.h(Pr,Er),i.h(Rr,Qe),Rr.prototype.toString=function(){return"FixedSizeBinary["+this.byteWidth+"]"},i.global.Object.defineProperties(Rr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.FixedSizeBinary}},byteWidth:{configurable:!0,enumerable:!0,get:function(){return this.pd}}}),i.m();var Ir,kr=Symbol.toStringTag,xr=Rr.prototype;function Mr(t,e){this.w=[e],this.Ec=t}xr.ArrayType=Uint8Array,i.m(),Ir=xr[Symbol.toStringTag]="FixedSizeBinary",Rr[kr]=Ir,i.h(Mr,Qe),Mr.prototype.toString=function(){return"FixedSizeList["+this.Ec+"]<"+this.valueType+">"},i.global.Object.defineProperties(Mr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.FixedSizeList}},listSize:{configurable:!0,enumerable:!0,get:function(){return this.Ec}},children:{configurable:!0,enumerable:!0,get:function(){return this.w}},valueType:{configurable:!0,enumerable:!0,get:function(){return this.children[0].type}},valueField:{configurable:!0,enumerable:!0,get:function(){return this.children[0]}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.valueType.ArrayType}}}),i.m();var Cr,Fr=Symbol.toStringTag,Lr=Mr.prototype;function Nr(t,e){this.w=this.w=t,this.yd=void 0!==e&&e}i.m(),Cr=Lr[Symbol.toStringTag]="FixedSizeList",Mr[Fr]=Cr,i.h(Nr,Qe),Nr.prototype.toString=function(){return"Map<"+this.children.join(", ")+">"},i.global.Object.defineProperties(Nr.prototype,{typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Map}},children:{configurable:!0,enumerable:!0,get:function(){return this.w}},keysSorted:{configurable:!0,enumerable:!0,get:function(){return this.yd}}}),i.m();var Dr,Br=Symbol.toStringTag,Ur=Nr.prototype;i.m(),Dr=Ur[Symbol.toStringTag]="Map_",Nr[Br]=Dr;var Vr=function(t){return function(){return++t}}(-1);function zr(t,e,n,r,i){this.w=void 0,this.Wb=e,this.rd=t,this.xd=r||!1,this.Ac=i,this.Vb=null==n?Vr():"number"==typeof n?n:n.low}i.h(zr,Qe),zr.prototype.toString=function(){return"Dictionary<"+this.indices+", "+this.dictionary+">"},i.global.Object.defineProperties(zr.prototype,{dictionaryVector:{configurable:!0,enumerable:!0,set:function(t){this.Ac=t},get:function(){return this.Ac}},typeId:{configurable:!0,enumerable:!0,get:function(){return Ze.Dictionary}},id:{configurable:!0,enumerable:!0,get:function(){return this.Vb}},indices:{configurable:!0,enumerable:!0,get:function(){return this.Wb}},dictionary:{configurable:!0,enumerable:!0,get:function(){return this.rd}},isOrdered:{configurable:!0,enumerable:!0,get:function(){return this.xd}},children:{configurable:!0,enumerable:!0,set:function(){},get:function(){return this.dictionary.children}},valueType:{configurable:!0,enumerable:!0,get:function(){return this.dictionary}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.dictionary.ArrayType}}}),i.m();var Gr,Wr=Symbol.toStringTag,Hr=zr.prototype;function Xr(t,e,n,r){this.ud=t,this.cb=e||Xr.prototype.cb,n&&r||(t=function t(e,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=a.type;if(Qe.isDictionary(s))if(r.get(s.id)||r.set(s.id,[]),n.has(s.id)){if(n.get(s.id)!==s.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else n.set(s.id,s.dictionary),r.get(s.id).push(a);s.children&&t(s.children,n,r)}return{dictionaries:n,dictionaryFields:r}}(t,n||new Map,r||new Map),n=t.dictionaries,r=t.dictionaryFields),this.qd=n,this.sd=r}i.m(),Gr=Hr[Symbol.toStringTag]="Dictionary",zr[Wr]=Gr,Xr.from=function(t,e){return e=void 0===e?[]:e,new Xr(t.map(function(t,n){return new Zr(""+(e[n]||n),t.type)}))},Xr.prototype.select=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];var r=e.reduce(function(t,e){return t[e]=!0,t},Object.create(null));return new Xr(this.fields.filter(function(t){return r[t.name]}),this.metadata)},i.global.Object.defineProperties(Xr.prototype,{fields:{configurable:!0,enumerable:!0,get:function(){return this.ud}},metadata:{configurable:!0,enumerable:!0,get:function(){return this.cb}},dictionaries:{configurable:!0,enumerable:!0,get:function(){return this.qd}},dictionaryFields:{configurable:!0,enumerable:!0,get:function(){return this.sd}}}),i.m();var qr=Xr,Yr=Symbol.toStringTag;function Zr(t,e,n,r){this.Ad=t,this.L=e,this.Bd=void 0!==n&&n,this.cb=r}Xr.prototype.cb=Object.freeze(new Map),qr[Yr]="Schema",i.m(),Zr.prototype.toString=function(){return this.name+": "+this.type};var Kr={};i.global.Object.defineProperties(Zr.prototype,(Kr.type={configurable:!0,enumerable:!0,get:function(){return this.L}},Kr.name={configurable:!0,enumerable:!0,get:function(){return this.Ad}},Kr.nullable={configurable:!0,enumerable:!0,get:function(){return this.Bd}},Kr.metadata={configurable:!0,enumerable:!0,get:function(){return this.cb}},Kr.typeId={configurable:!0,enumerable:!0,get:function(){return this.L.typeId}},Kr[Symbol.toStringTag]={configurable:!0,enumerable:!0,get:function(){return"Field"}},Kr.indices={configurable:!0,enumerable:!0,get:function(){return Qe.isDictionary(this.L)?this.L.indices:this.L}},Kr));var Qr=Ke.c.f.g.Lb,Jr=Ke.c.f.g.hd;function $r(t,e,n,r){e=void 0===e?Xe.V4:e,this.schema=t,this.version=e,n&&(this.Fc=n),r&&(this.yc=r)}$r.decode=function(t){return t=new Y(wt.toUint8Array(t)),t=Jr.gf(t),new ei(Xr.decode(t.schema()),t)},$r.encode=function(t){var e=new k,n=Xr.encode(e,t.schema);Jr.Tf(e,t.numRecordBatches),[].concat(i.A(t.oc())).slice().reverse().forEach(function(t){return ni.encode(e,t)});var r=X(e);return Jr.Cf(e,t.numDictionaries),[].concat(i.A(ti(t))).slice().reverse().forEach(function(t){return ni.encode(e,t)}),t=X(e),Jr.Kf(e),Jr.he(e,n),Jr.dc(e,Xe.V4),Jr.ee(e,r),Jr.Od(e,t),Jr.df(e,Jr.Oe(e)),x(e)},$r.prototype.oc=function t(){var e,n,r,o=this;return i.H.I(t,function(t){return 1==t.i&&(e=void 0,n=-1,r=o.numRecordBatches),++n<r?(e=o.Ba(n))?s(t,e,2):t.j(2):t.j(0)})};var ti=function t(e){var n,r,o;return i.H.I(t,function(t){return 1==t.i&&(n=void 0,r=-1,o=e.numDictionaries),++r<o?(n=e.Db(r))?s(t,n,2):t.j(2):t.j(0)})};function ei(t,e){$r.call(this,t,e.version()),this.xb=e}function ni(t,e,n){this.jc=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}function ri(t,e,n,r){return 0!=(n&1<<r)}function ii(t,e,n,r){return(n&1<<r)>>r}function oi(t){for(var e=0,n=0,r=[],o=0,a=0,s=(t=i.F(t)).next();!s.done;s=t.next())s.value&&(a|=1<<o),8==++o&&(r[n++]=a,a=o=0);if((0===n||0<o)&&(r[n++]=a),n%8&&(e=n+8-n%8))do{r[n]=0}while(++n<e);return new Uint8Array(r)}function ai(t,e,n,r,o){var a,u,c,l,f;return i.H.I(ai,function(i){switch(i.i){case 1:a=e%8,u=e>>3,c=0,l=n;case 2:if(!(0<l)){i.j(0);break}f=t[u++];case 5:return s(i,o(r,c++,f,a),7);case 7:0<--l&&8>++a?i.j(5):(a=0,i.j(2))}})}function si(t,e,n){var r=0;e|=0;var i=new DataView(t.buffer,t.byteOffset,t.byteLength);for(t=void 0===n?t.byteLength:e+n;4<=t-e;)r+=ui(i.getUint32(e)),e+=4;for(;2<=t-e;)r+=ui(i.getUint16(e)),e+=2;for(;1<=t-e;)r+=ui(i.getUint8(e)),e+=1;return r}function ui(t){return t|=0,16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}$r.prototype.Ba=function(t){return 0<=t&&t<this.numRecordBatches&&this.Fc[t]||null},$r.prototype.Db=function(t){return 0<=t&&t<this.numDictionaries&&this.yc[t]||null},i.global.Object.defineProperties($r.prototype,{numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.Fc.length}},numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.yc.length}}}),i.h(ei,$r),ei.prototype.Ba=function(t){return 0<=t&&t<this.numRecordBatches&&(t=this.xb.oc(t))?ni.decode(t):null},ei.prototype.Db=function(t){return 0<=t&&t<this.numDictionaries&&(t=this.xb.dictionaries(t))?ni.decode(t):null},i.global.Object.defineProperties(ei.prototype,{numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.xb.rf()}},numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.xb.De()}}}),ni.decode=function(t){return new ni(t.jc(),t.bodyLength(),t.offset())},ni.encode=function(t,e){return Qr.ye(t,new R(e.offset,0),e.jc,new R(e.bodyLength,0))};var ci={};function li(t,e,n,r,i,o){this.P=[],this.L=t,this.fb=Math.floor(Math.max(e||0,0)),this.aa=Math.floor(Math.max(n||0,0)),this.P=Object.assign([],i),this.pa=Math.floor(Math.max(r||0,-1)),this.ub=(o||[]).map(function(t){return t instanceof li?t:t.data})}function fi(t){return"string"==typeof t?'"'+t+'"':ArrayBuffer.isView(t)?"["+t+"]":JSON.stringify(t)}ci.getBool=ri,ci.getBit=ii,ci.setBool=function(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1},ci.truncateBitmap=function(t,e,n){var r=n.byteLength+7&-8;return 0<t||n.byteLength<r?((r=new Uint8Array(r)).set(0==t%8?n.subarray(t>>3):oi(ai(n,t,e,null,ri))),r):n},ci.packBools=oi,ci.iterateBits=ai,ci.popcnt_bit_range=function t(e,n,r){if(0>=r-n)return 0;if(8>r-n){var o=0;for(n=(e=i.F(ai(e,n,r-n,e,ii))).next();!n.done;n=e.next())o+=n.value;return o}o=r>>3<<3;var a=n+(0==n%8?0:8-n%8);return t(e,n,a)+t(e,o,r)+si(e,a>>3,o-a>>3)},ci.popcnt_array=si,ci.popcnt_uint32=ui,(n=li.prototype).clone=function(t,e,n,r,i,o){return new li(t,e=void 0===e?this.fb:e,n=void 0===n?this.aa:n,r=void 0===r?this.pa:r,i=void 0===i?this.P:i,o=void 0===o?this.ub:o)},n.slice=function(t,e){var n=+(0===this.pa)-1,r=this.sliceBuffers(t,e),i=this.sliceChildren(t,e);return this.clone(this.L,this.fb+t,e,n,r,i)},n.sliceBuffers=function(t,e){var n,r=Object.assign([],this.P);return(n=r[Ge.TYPE])&&(r[Ge.TYPE]=this.sliceData(n,t,e)),(n=r[Ge.OFFSET])&&(r[Ge.OFFSET]=this.sliceOffsets(n,t,e))||(n=r[Ge.DATA])&&(r[Ge.DATA]=this.sliceData(n,t,e)),r},n.sliceChildren=function(t,e){return this.P[Ge.OFFSET]?this.ub:this.ub.map(function(n){return n.slice(t,e)})},n.sliceData=function(t,e,n){return 6===this.L.typeId?t:t.subarray(e,e+n)},n.sliceOffsets=function(t,e,n){return t.subarray(e,e+n+1)},li.Null=function(t,e,n,r,i){var o={};return new li(t,e,n,r,(o[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),o))},li.Int=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Dictionary=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.indices.ArrayType,o),a))},li.Float=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Bool=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Decimal=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Date=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Time=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Timestamp=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Interval=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.FixedSizeBinary=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a[Ge.DATA]=wt.toArrayBufferView(t.ArrayType,o),a))},li.Binary=function(t,e,n,r,i,o,a){var s={};return new li(t,e,n,r,(s[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),s[Ge.OFFSET]=wt.toArrayBufferView(Int32Array,o),s[Ge.DATA]=wt.toArrayBufferView(Uint8Array,a),s))},li.Utf8=function(t,e,n,r,i,o,a){var s={};return new li(t,e,n,r,(s[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),s[Ge.OFFSET]=wt.toArrayBufferView(Int32Array,o),s[Ge.DATA]=wt.toArrayBufferView(Uint8Array,a),s))},li.List=function(t,e,n,r,i,o,a){var s={};return new li(t,e,n,r,(s[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),s[Ge.OFFSET]=wt.toArrayBufferView(Int32Array,o),s),[a])},li.FixedSizeList=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a),[o])},li.Struct=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a),o)},li.Map=function(t,e,n,r,i,o){var a={};return new li(t,e,n,r,(a[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),a),o)},li.Union=function(t,e,n,r,i,o,a,s){var u={};return u[Ge.VALIDITY]=wt.toArrayBufferView(Uint8Array,i),u[Ge.TYPE]=wt.toArrayBufferView(t.ArrayType,o),i=u,t.mode===ze.Sparse?new li(t,e,n,r,i,a):(i[Ge.OFFSET]=wt.toArrayBufferView(Int32Array,a),new li(t,e,n,r,i,s))},i.global.Object.defineProperties(li.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return this.L}},length:{configurable:!0,enumerable:!0,get:function(){return this.aa}},offset:{configurable:!0,enumerable:!0,get:function(){return this.fb}},typeId:{configurable:!0,enumerable:!0,get:function(){return this.L.typeId}},childData:{configurable:!0,enumerable:!0,get:function(){return this.ub}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.L.ArrayType}},values:{configurable:!0,enumerable:!0,get:function(){return this.P[Ge.DATA]}},typeIds:{configurable:!0,enumerable:!0,get:function(){return this.P[Ge.TYPE]}},nullBitmap:{configurable:!0,enumerable:!0,get:function(){return this.P[Ge.VALIDITY]}},valueOffsets:{configurable:!0,enumerable:!0,get:function(){return this.P[Ge.OFFSET]}},nullCount:{configurable:!0,enumerable:!0,get:function(){var t,e=this.pa;return-1===e&&(t=this.P[Ge.VALIDITY])&&(this.pa=e=this.aa-ci.popcnt_bit_range(t,this.fb,this.fb+this.aa)),e}}});var hi,di={enumerable:!0,configurable:!1,get:function(){}},vi={writable:!1,enumerable:!1,configurable:!1,value:-1},pi={writable:!1,enumerable:!1,configurable:!0,value:null},gi={writable:!1,enumerable:!1,configurable:!1,value:null},yi={parent:gi,rowIndex:pi};function bi(t,e){var n=this;vi.value=t.length,Object.defineProperty(this,"length",vi),t.forEach(function(t,r){di.get=function(t){return function(){var e=this.parent.getChildAt(t);return e?e.get(this.rowIndex):null}}(r),di.configurable=!0,di.enumerable=e,Object.defineProperty(n,t.name,di),di.configurable=!1,di.enumerable=!e,Object.defineProperty(n,r,di),di.get=null})}i.m(),i.D(),bi.new=function(t,e){if(e=void 0!==e&&e,Array.isArray(t))var n=t;else e=!0,n=Object.keys(t).map(function(e){return new Zr(e,t[e])});return new bi(n,e)},bi.prototype[Symbol.iterator]=function t(){var e,n,r=this;return i.H.I(t,function(t){return 1==t.i&&(e=-1,n=r.length),++e<n?s(t,r[e],2):t.j(0)})},bi.prototype.get=function(t){return this[t]},bi.prototype.bind=function(t,e){return pi.value=e,gi.value=t,t=Object.create(this,yi),pi.value=null,gi.value=null,t},bi.prototype.toJSON=function(){var t=this;return Qe.isStruct(this.parent.type)?[].concat(i.A(this)):Object.getOwnPropertyNames(this).reduce(function(e,n){return(e[n]=t[n])&&e||e},{})},bi.prototype.toString=function(){var t=this;return Qe.isStruct(this.parent.type)?[].concat(i.A(this)).map(function(t){return fi(t)}).join(", "):Object.getOwnPropertyNames(this).reduce(function(e,n){return(e[n]=fi(t[n]))&&e||e},{})};var mi={clampIndex:function(t,e,n){var r=t.length;return e=-1<e?e:r+e%r,n?n(t,e):e},clampRange:function(t,e,n,r){var i=void 0===t.length?0:t.length;return 0>(e="number"!=typeof e?0:e)&&(e=(e%i+i)%i),0>(n="number"!=typeof n?i:n)&&(n=(n%i+i)%i),n<e&&(hi=e,e=n,n=hi),n>i&&(n=i),r?r(t,e,n):[e,n]}};function _i(t,e,n){if(e=void 0===e?[]:e,void 0===n){n=e;for(var r=new Uint32Array((n||[]).length+1),i=r[0]=0,o=r.length,a=0;++a<o;)r[a]=i+=n[a-1].length;n=r}this.pa=-1,this.L=t,this.Z=e,this.xc=n,this.aa=n[n.length-1],this.eb=(this.L.children||[]).length}function wi(t,e,n){return e.set(t,n),n+t.length}function Oi(t,e,n){--n;for(var r=-1,i=t.length;++r<i;)e[++n]=t[r];return n}function Ei(t,e,n){this.Gc=1,this.eb=0,this.w=e,this.eb=t.childData.length,this.Pb(this.Ub=t),this.Gc=Math.floor(Math.max(n||1,1))}mi.createElementComparator=function t(e){if(null==e||"object"!=typeof e)return function(t){return t===e};if(e instanceof Date)return e=e.valueOf(),function(t){return t&&t.valueOf()===e||!1};if(Array.isArray(e)||ArrayBuffer.isView(e)){for(var n=e.length,r=[],i=-1;++i<n;)r[i]=t(e[i]);return function(t){if(!t||t.length!==n)return!1;if(t instanceof bi||t instanceof Mt){for(var e=-1,i=t.length;++e<i;)if(!r[e](t.get(e)))return!1;return!0}for(e=-1,i=t.length;++e<i;)if(!r[e](t[e]))return!1;return!0}}if(e instanceof bi||e instanceof Mt){var o=e.length,a=e.constructor,s=[];for(i=-1;++i<o;)s[i]=t(e.get(i));return function(t){if(!(t instanceof a)||t.length!==o)return!1;for(var e=-1;++e<o;)if(!s[e](t.get(e)))return!1;return!0}}var u=Object.keys(e);if(0<u.length){var c=u.length,l=[];for(i=-1;++i<c;)l[i]=t(e[u[i]]);return function(t){if(!t||"object"!=typeof t)return!1;for(var e=-1;++e<c;)if(!l[e](t[u[e]]))return!1;return!0}}return function(){return!1}},i.m(),i.D(),i.h(_i,Mt),_i.flatten=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return e.reduce(function t(e,n){return n instanceof _i?n.chunks.reduce(t,e):[].concat(i.A(e),[n])},[]).filter(function(t){return t instanceof Mt})},_i.concat=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new _i(e[0].type,_i.flatten.apply(_i,i.A(e)))},_i.prototype[Symbol.iterator]=function t(){var e,n,r=this;return i.H.I(t,function(t){return 1==t.i&&(e=i.F(r.Z),n=e.next()),3!=t.i?n.done?t.j(0):u(t,n.value,3):(n=e.next(),t.j(2))})},(n=_i.prototype).concat=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return _i.concat.apply(_i,[this].concat(i.A(e)))},n.getChildAt=function(t){if(0>t||t>=this.eb)return null;var e,n=this.w||(this.w=[]);if(e=n[t])return e;if(e=(this.L.children||[])[t]){var r=this.Z.map(function(e){return e.getChildAt(t)}).filter(function(t){return null!=t});if(0<r.length)return n[t]=new _i(e.type,r)}return null},n.search=function(t,e){var n=this.xc,r=n.length-1;if(0>t||t>=n[r])return null;if(1>=r)return e?e(this,0,t):[0,t];var i=0,o=0;do{if(i+1===r)return e?e(this,i,t-o):[i,t-o];var a=i+(r-i)/2|0;t>=n[a]?i=a:r=a}while(t<n[r]&&t>=(o=n[i]));return null},n.isValid=function(t){return!!this.search(t,this.isValidInternal)},n.get=function(t){return this.search(t,this.getInternal)},n.set=function(t,e){this.search(t,function(t,n,r){return t.chunks[n].set(r,e)})},n.indexOf=function(t,e){var n=this;return e&&"number"==typeof e?this.search(e,function(e,r,i){return n.indexOfInternal(e,r,i,t)}):this.indexOfInternal(this,0,Math.max(0,e||0),t)},n.toArray=function(){var t=this.chunks,e=t.length,n=this.L.ArrayType;if(0>=e)return new n(0);if(1>=e)return t[0].toArray();for(var r=0,i=Array(e),o=-1;++o<e;)r+=(i[o]=t[o].toArray()).length;for(n!==i[0].constructor&&(n=i[0].constructor),t=new n(r),n=n===Array?Oi:wi,r=-1,o=0;++r<e;)o=n(i[r],t,o);return t},n.slice=function(t,e){return mi.clampRange(this,t,e,this.sliceInternal)},n.getInternal=function(t,e,n){return t.Z[e].get(n)},n.isValidInternal=function(t,e,n){return t.Z[e].isValid(n)},n.indexOfInternal=function(t,e,n,r){--e;var i=(t=t.Z).length,o=n;for(n=0;++e<i;){if(~(o=t[e].indexOf(r,o)))return n+o;o=0,n+=t[e].length}return-1},n.sliceInternal=function(t,e,n){var r=[],i=t.type,o=t.chunks;t=t.xc;for(var a=-1,s=o.length;++a<s;){var u=o[a],c=u.length,l=t[a];if(!(l>=e+n||e>=l+c))if(l>=e&&l+c<=e+n)r.push(u);else{var f=Math.max(0,e-l);r.push(u.slice(f,f+Math.min(c-f,e+n-l)))}}return new _i(i,r)},i.global.Object.defineProperties(_i.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return this.L}},length:{configurable:!0,enumerable:!0,get:function(){return this.aa}},chunks:{configurable:!0,enumerable:!0,get:function(){return this.Z}},typeId:{configurable:!0,enumerable:!0,get:function(){return this.L.typeId}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.L.ArrayType}},numChildren:{configurable:!0,enumerable:!0,get:function(){return this.eb}},data:{configurable:!0,enumerable:!0,get:function(){return this.Z[0]?this.Z[0].data:null}},stride:{configurable:!0,enumerable:!0,get:function(){return this.Z[0]?this.Z[0].stride:1}},nullCount:{configurable:!0,enumerable:!0,get:function(){var t=this.pa;return 0>t&&(this.pa=t=this.Z.reduce(function(t,e){return t+e.nullCount},0)),t}}}),i.m(),i.h(Ei,Mt),(n=Ei.prototype).clone=function(t,e,n){return e=void 0===e?this.w:e,n=void 0===n?this.stride:n,Mt.new(t,e,n)},n.concat=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return _i.concat.apply(_i,[this].concat(i.A(e)))},n.isValid=function(t){return!(0<this.nullCount)||(t=this.offset+t,0!=(this.nullBitmap[t>>3]&1<<t%8))},n.getChildAt=function(t){return 0>t||t>=this.numChildren?null:(this.w||(this.w=[]))[t]||(this.w[t]=Mt.new(this.data.childData[t]))},n.toJSON=function(){},n.slice=function(t,e){return mi.clampRange(this,t,e,this.sliceInternal)},n.sliceInternal=function(t,e,n){var r=t.stride;return t.clone(t.data.slice(e*r,(n-e)*r))},n.Pb=function(){};var Si={};function Ai(){Ei.apply(this,arguments),this.rowProxy=bi.new(this.type.children||[],!1)}function Ti(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];if(this.wa=e[0],"number"==typeof e[1]){n=this.schema.fields;var r=i.F(e);r.next(),e=r.next().value,r=r.next().value,n=li.Struct(new mr(n),0,e,0,null,r)}else{var o=i.F(e);o.next(),n=o.next().value,o=o.next().value}this.u=new Ai(n,o)}function ji(t){ut.apply(this,arguments)}function Pi(t){t&&(this.source=new Ii(St(At(t))))}function Ri(t){t instanceof Ri?this.source=t.source:t instanceof ji?this.source=new ki(St(Tt(t))):vt(t)?this.source=new ki(St(xt(t))):ht(t)?this.source=new ki(St(jt(t.body))):ct(t,Symbol.iterator)?this.source=new ki(St(At(t))):ct(t,"then")?this.source=new ki(St(Tt(t))):ct(t,Symbol.asyncIterator)?this.source=new ki(St(Tt(t))):dt(t)&&(this.source=new ki(St(jt(t))))}function Ii(t){this.source=t}function ki(t){var e=this;this.source=t,this.Sb=new Promise(function(t){return e.R=t})}function xi(t,e){e=void 0===e?t.byteLength:e,Pi.call(this),this.position=0,this.buffer=t,this.size=e}function Mi(t,e){Ri.call(this);var n=this;this.position=0,this.file=t,this.size=e,"number"!=typeof e&&function(){var e;i.o(function(r){return 1==r.i?(e=n,s(r,t.stat(),2)):r.return(e.size=r.l.size)})}()}function Ci(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Fi(t){this.ta=[].slice.call(t)}function Li(t){if(t)throw TypeError("Decoder error");return 65533}function Ni(t,e){if(!(this instanceof Ni))return new Ni(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");e=Ci(e),this.qb=this.qa=!1,this.vb=null,this.Cc=!!e.fatal,this.Dc=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this.Cc}),Object.defineProperty(this,"ignoreBOM",{value:this.Dc})}function Di(t,e){if(!(this instanceof Di))return new Di(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");Ci(e),this.qa=!1,this.wb=null,Object.defineProperty(this,"encoding",{value:"utf-8"})}function Bi(t){var e=t.fatal,n=0,r=0,i=0,o=128,a=191;this.hb=function(t,s){if(-1===s&&0!==i)return i=0,Li(e);if(-1===s)return-1;if(0===i){if(0<=s&&127>=s)return s;if(194<=s&&223>=s)i=1,n=s-192;else if(224<=s&&239>=s)224===s&&(o=160),237===s&&(a=159),i=2,n=s-224;else{if(!(240<=s&&244>=s))return Li(e);240===s&&(o=144),244===s&&(a=143),i=3,n=s-240}return n<<=6*i,null}return o<=s&&s<=a?(o=128,a=191,n+=s-128<<6*(i-(r+=1)),r!==i?null:(t=n,n=i=r=0,t)):(n=i=r=0,o=128,a=191,t.prepend(s),Li(e))}}function Ui(){this.hb=function(t,e){if(-1===e)return-1;if(0<=e&&127>=e)return e;if(128<=e&&2047>=e)var n=1,r=192;else 2048<=e&&65535>=e?(n=2,r=224):65536<=e&&1114111>=e&&(n=3,r=240);for(t=[(e>>6*n)+r];0<n;)t.push(128|e>>6*(n-1)&63),--n;return t}}function Vi(){}function zi(t){switch(t.typeId){case Ze.Null:return Ze.Null;case Ze.Int:var e=t.isSigned;switch(t.bitWidth){case 8:return e?Ze.Int8:Ze.Uint8;case 16:return e?Ze.Int16:Ze.Uint16;case 32:return e?Ze.Int32:Ze.Uint32;case 64:return e?Ze.Int64:Ze.Uint64}return Ze.Int;case Ze.Float:switch(t.precision){case Ve.HALF:return Ze.Float16;case Ve.SINGLE:return Ze.Float32;case Ve.DOUBLE:return Ze.Float64}return Ze.Float;case Ze.Binary:return Ze.Binary;case Ze.Utf8:return Ze.Utf8;case Ze.Bool:return Ze.Bool;case Ze.Decimal:return Ze.Decimal;case Ze.Time:switch(t.unit){case Ue.SECOND:return Ze.TimeSecond;case Ue.MILLISECOND:return Ze.TimeMillisecond;case Ue.MICROSECOND:return Ze.TimeMicrosecond;case Ue.NANOSECOND:return Ze.TimeNanosecond}return Ze.Time;case Ze.Timestamp:switch(t.unit){case Ue.SECOND:return Ze.TimestampSecond;case Ue.MILLISECOND:return Ze.TimestampMillisecond;case Ue.MICROSECOND:return Ze.TimestampMicrosecond;case Ue.NANOSECOND:return Ze.TimestampNanosecond}return Ze.Timestamp;case Ze.Date:switch(t.unit){case Be.DAY:return Ze.DateDay;case Be.MILLISECOND:return Ze.DateMillisecond}return Ze.Date;case Ze.Interval:switch(t.unit){case We.DAY_TIME:return Ze.IntervalDayTime;case We.YEAR_MONTH:return Ze.IntervalYearMonth}return Ze.Interval;case Ze.Map:return Ze.Map;case Ze.List:return Ze.List;case Ze.Struct:return Ze.Struct;case Ze.Union:switch(t.mode){case ze.Dense:return Ze.DenseUnion;case ze.Sparse:return Ze.SparseUnion}return Ze.Union;case Ze.FixedSizeBinary:return Ze.FixedSizeBinary;case Ze.FixedSizeList:return Ze.FixedSizeList;case Ze.Dictionary:return Ze.Dictionary}throw Error("Unrecognized type '"+Ze[t.typeId]+"'")}function Gi(t){return 0>t&&(t=4294967295+t+1),"0x"+t.toString(16)}i.global.Object.defineProperties(Ei.prototype,(Si.data={configurable:!0,enumerable:!0,get:function(){return this.Ub}},Si.stride={configurable:!0,enumerable:!0,get:function(){return this.Gc}},Si.numChildren={configurable:!0,enumerable:!0,get:function(){return this.eb}},Si.type={configurable:!0,enumerable:!0,get:function(){return this.data.type}},Si.typeId={configurable:!0,enumerable:!0,get:function(){return this.data.typeId}},Si.length={configurable:!0,enumerable:!0,get:function(){return this.data.length}},Si.offset={configurable:!0,enumerable:!0,get:function(){return this.data.offset}},Si.nullCount={configurable:!0,enumerable:!0,get:function(){return this.data.nullCount}},Si.VectorName={configurable:!0,enumerable:!0,get:function(){return this.constructor.name}},Si.ArrayType={configurable:!0,enumerable:!0,get:function(){return this.data.ArrayType}},Si.values={configurable:!0,enumerable:!0,get:function(){return this.data.values}},Si.typeIds={configurable:!0,enumerable:!0,get:function(){return this.data.typeIds}},Si.nullBitmap={configurable:!0,enumerable:!0,get:function(){return this.data.nullBitmap}},Si.valueOffsets={configurable:!0,enumerable:!0,get:function(){return this.data.valueOffsets}},Si[Symbol.toStringTag]={configurable:!0,enumerable:!0,get:function(){return i.m(),this.VectorName+"<"+this.type[Symbol.toStringTag]+">"}},Si)),i.h(Ai,Ei),Ai.prototype.asMap=function(t){return Mt.new(this.data.clone(new Nr(this.type.children,void 0!==t&&t)))},i.m(),i.D(),i.h(Ti,Mt),Ti.from=function(t,e){return e=void 0===e?[]:e,new Ti(Xr.from(t,e),t.reduce(function(t,e){return Math.max(t,e.length)},0),t)},(n=Ti.prototype).clone=function(t,e){return e=void 0===e?this.u.children:e,new Ti(this.schema,t,e)},n.get=function(t){return this.u.get(t)},n.set=function(t,e){this.u.set(t,e)},n.isValid=function(t){return this.u.isValid(t)},n.indexOf=function(t,e){return this.u.indexOf(t,e)},n.toArray=function(){return this.u.toArray()},Ti.prototype[Symbol.iterator]=function(){return i.m(),i.D(),this.u[Symbol.iterator]()},Ti.prototype.slice=function(t,e){return t=this.u.slice(t,e).data,new Ti(this.schema,t.length,t.childData)},Ti.prototype.concat=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return this.u.concat.apply(this.u,i.A(e.map(function(t){return t instanceof Ti?t.u:t})))},Ti.prototype.getChildAt=function(t){return this.u.getChildAt(t)},Ti.prototype.select=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];var r=this.schema.fields;n=this.schema.select.apply(this.schema,i.A(e));var o=e.reduce(function(t,e){return t[e]=!0,t},{});return e=this.data.childData.filter(function(t,e){return o[r[e].name]}),new Ti(n,e=li.Struct(new mr(n.fields),0,this.length,0,null,e))},i.global.Object.defineProperties(Ti.prototype,{schema:{configurable:!0,enumerable:!0,get:function(){return this.wa}},data:{configurable:!0,enumerable:!0,get:function(){return this.u.data}},type:{configurable:!0,enumerable:!0,get:function(){return this.u.type}},typeId:{configurable:!0,enumerable:!0,get:function(){return this.u.typeId}},length:{configurable:!0,enumerable:!0,get:function(){return this.u.length}},stride:{configurable:!0,enumerable:!0,get:function(){return this.u.stride}},numCols:{configurable:!0,enumerable:!0,get:function(){return this.schema.fields.length}},rowProxy:{configurable:!0,enumerable:!0,get:function(){return this.u.rowProxy}},nullCount:{configurable:!0,enumerable:!0,get:function(){return this.u.nullCount}},numChildren:{configurable:!0,enumerable:!0,get:function(){return this.u.numChildren}},ArrayType:{configurable:!0,enumerable:!0,get:function(){return this.u.ArrayType}}}),i.h(ji,ut),ji.prototype.write=function(t){if(0<(t=wt.toUint8Array(t)).byteLength)return ut.prototype.write.call(this,t)},ji.prototype.toUint8Array=function(t){var e=this;return void 0!==t&&t?wt.joinUint8Arrays(this.values.slice())[0]:function(){var t,n,r,o,a;return i.o(function(u){switch(u.i){case 1:t=[],n=0,r=i.jb(e);case 2:return s(u,r.next(),5);case 5:if((o=u.l).done){u.j(4);break}a=o.value,t.push(a),n+=a.byteLength,u.j(2);break;case 4:return u.return(wt.joinUint8Arrays(t,n)[0])}})}()},Pi.prototype.throw=function(t){return this.source.throw(t)},Pi.prototype.return=function(t){return this.source.return(t)},Pi.prototype.peek=function(t){return this.source.peek(t)},Pi.prototype.read=function(t){return this.source.read(t)},(n=Ri.prototype).next=function(t){return this.source.next(t)},n.throw=function(t){return this.source.throw(t)},n.return=function(t){return this.source.return(t)},n.cancel=function(t){return this.source.cancel(t)},n.peek=function(t){return this.source.peek(t)},n.read=function(t){return this.source.read(t)},i.global.Object.defineProperties(Ri.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.source.closed}}}),(n=Ii.prototype).cancel=function(t){this.return(t)},n.peek=function(t){return this.next(t,"peek").value},n.read=function(t){return this.next(t,"read").value},n.next=function(t,e){return this.source.next({da:void 0===e?"read":e,size:t})},n.throw=function(t){return Object.create(this.source.throw&&this.source.throw(t)||it)},n.return=function(t){return Object.create(this.source.return&&this.source.return(t)||it)},(n=ki.prototype).cancel=function(t){var e=this;return i.o(function(n){return s(n,e.return(t),0)})},n.read=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.next(t,"read"),2):n.return(n.l.value)})},n.peek=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.next(t,"peek"),2):n.return(n.l.value)})},n.next=function(t,e){e=void 0===e?"read":e;var n=this;return i.o(function(r){return 1==r.i?s(r,n.source.next({da:e,size:t}),2):r.return(r.l)})},n.throw=function(t){var e,n,r=this;return i.o(function(i){return 1==i.i?(e=r.source.throw)?s(i,r.source.throw(t),3):i.j(2):(2!=i.i&&(e=i.l),n=e||it,r.R&&r.R(),r.R=void 0,i.return(Object.create(n)))})},n.return=function(t){var e,n,r=this;return i.o(function(i){return 1==i.i?(e=r.source.return)?s(i,r.source.return(t),3):i.j(2):(2!=i.i&&(e=i.l),n=e||it,r.R&&r.R(),r.R=void 0,i.return(Object.create(n)))})},i.global.Object.defineProperties(ki.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.Sb}}}),i.h(xi,Pi),(n=xi.prototype).v=function(t){return t=this.Da(t,4),new DataView(t.buffer,t.byteOffset).getInt32(0,!0)},n.seek=function(t){return this.position=Math.min(t,this.size),t<this.size},n.read=function(t){var e=this.buffer,n=this.size,r=this.position;return e&&r<n?("number"!=typeof t&&(t=1/0),this.position=Math.min(n,r+Math.min(n-r,t)),e.subarray(r,this.position)):null},n.Da=function(t,e){var n=this.buffer,r=Math.min(this.size,t+e);return n?n.subarray(t,r):new Uint8Array(e)},n.close=function(){this.buffer&&(this.buffer=null)},n.throw=function(t){return this.close(),{done:!0,value:t}},n.return=function(t){return this.close(),{done:!0,value:t}},i.h(Mi,Ri),(n=Mi.prototype).v=function(t){var e,n,r,o=this;return i.o(function(i){return 1==i.i?s(i,o.Da(t,4),2):(e=i.l,n=e.buffer,r=e.byteOffset,i.return(new DataView(n,r).getInt32(0,!0)))})},n.seek=function(t){var e=this;return i.o(function(n){return e.position=Math.min(t,e.size),n.return(t<e.size)})},n.read=function(t){var e,n,r,o,a,u,c,l,f,h,d=this;return i.o(function(i){switch(i.i){case 1:if(n=(e=d).file,r=e.size,o=e.position,!(n&&o<r)){i.j(2);break}"number"!=typeof t&&(t=1/0),a=o,c=u=0,l=Math.min(r,a+Math.min(r-a,t)),f=new Uint8Array(Math.max(0,(d.position=l)-a));case 3:if(!((a+=c)<l&&(u+=c)<f.byteLength)){i.j(4);break}return s(i,n.read(f,u,f.byteLength-u,a),5);case 5:h=i.l,c=h.jg,i.j(3);break;case 4:return i.return(f);case 2:return i.return(null)}})},n.Da=function(t,e){var n,r,o,a,u,c=this;return i.o(function(i){return 1==i.i?(r=(n=c).file,o=n.size,r&&t+e<o?(a=Math.min(o,t+e),u=new Uint8Array(a-t),s(i,r.read(u,0,e,t),3)):i.j(2)):2!=i.i?i.return(i.l.buffer):i.return(new Uint8Array(e))})},n.close=function(){var t,e=this;return i.o(function(n){if(1==n.i)return t=e.file,e.file=null,t?s(n,t.close(),3):n.j(2);n.i=0})},n.throw=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.close(),2):n.return({done:!0,value:t})})},n.return=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.close(),2):n.return({done:!0,value:t})})},Fi.prototype={endOfStream:function(){return!this.ta.length},read:function(){return this.ta.length?this.ta.shift():-1},prepend:function(t){if(Array.isArray(t))for(;t.length;)this.ta.unshift(t.pop());else this.ta.unshift(t)},push:function(t){if(Array.isArray(t))for(;t.length;)this.ta.push(t.shift());else this.ta.push(t)}},Ni.prototype={decode:function(t,e){t="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=Ci(e),this.qa||(this.vb=new Bi({fatal:this.Cc}),this.qb=!1),this.qa=!!e.stream,t=new Fi(t),e=[];for(var n;!t.endOfStream()&&-1!==(n=this.vb.hb(t,t.read()));)null!==n&&(Array.isArray(n)?e.push.apply(e,n):e.push(n));if(!this.qa){do{if(-1===(n=this.vb.hb(t,t.read())))break;null!==n&&(Array.isArray(n)?e.push.apply(e,n):e.push(n))}while(!t.endOfStream());this.vb=null}for(!e.length||-1===["utf-8"].indexOf(this.encoding)||this.Dc||this.qb||(65279===e[0]?(this.qb=!0,e.shift()):this.qb=!0),t="",n=0;n<e.length;++n){var r=e[n];65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}},Di.prototype={encode:function(t,e){t=t?String(t):"",e=Ci(e),this.qa||(this.wb=new Ui),this.qa=!!e.stream,e=[];for(var n=String(t),r=n.length,i=0,o=[];i<r;){var a=n.charCodeAt(i);if(55296>a||57343<a)o.push(a);else if(56320<=a&&57343>=a)o.push(65533);else if(55296<=a&&56319>=a)if(i===r-1)o.push(65533);else{var s=t.charCodeAt(i+1);56320<=s&&57343>=s?(o.push(65536+((1023&a)<<10)+(1023&s)),i+=1):o.push(65533)}i+=1}for(t=new Fi(o);!t.endOfStream()&&-1!==(n=this.wb.hb(t,t.read()));)Array.isArray(n)?e.push.apply(e,n):e.push(n);if(!this.qa){for(;-1!==(n=this.wb.hb(t,t.read()));)Array.isArray(n)?e.push.apply(e,n):e.push(n);this.wb=null}return new Uint8Array(e)}},(n=Vi.prototype).visitMany=function(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];var o=this;return t.map(function(t,e){return o.visit.apply(o,[t].concat(i.A(n.map(function(t){return t[e]}))))})},n.visit=function(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];var o;return(o=this.getVisitFn(t,!1)).call.apply(o,[this,t].concat(i.A(n)))},n.getVisitFn=function(t,e){return function(t,e,n){n=void 0===n||n;var r=null,i=Ze.NONE;switch(e instanceof li?i=zi(e.type):e instanceof Mt?i=zi(e.type):e instanceof Qe?i=zi(e):"number"!=typeof(i=e)&&(i=Ze[e]),i){case Ze.Null:r=t.visitNull;break;case Ze.Bool:r=t.visitBool;break;case Ze.Int:r=t.visitInt;break;case Ze.Int8:r=t.Na||t.visitInt;break;case Ze.Int16:r=t.Ka||t.visitInt;break;case Ze.Int32:r=t.La||t.visitInt;break;case Ze.Int64:r=t.Ma||t.visitInt;break;case Ze.Uint8:r=t.ab||t.visitInt;break;case Ze.Uint16:r=t.Ya||t.visitInt;break;case Ze.Uint32:r=t.Za||t.visitInt;break;case Ze.Uint64:r=t.$a||t.visitInt;break;case Ze.Float:r=t.visitFloat;break;case Ze.Float16:r=t.Ha||t.visitFloat;break;case Ze.Float32:r=t.Ia||t.visitFloat;break;case Ze.Float64:r=t.Ja||t.visitFloat;break;case Ze.Utf8:r=t.visitUtf8;break;case Ze.Binary:r=t.visitBinary;break;case Ze.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case Ze.Date:r=t.visitDate;break;case Ze.DateDay:r=t.Fa||t.visitDate;break;case Ze.DateMillisecond:r=t.Ga||t.visitDate;break;case Ze.Timestamp:r=t.visitTimestamp;break;case Ze.TimestampSecond:r=t.Xa||t.visitTimestamp;break;case Ze.TimestampMillisecond:r=t.Va||t.visitTimestamp;break;case Ze.TimestampMicrosecond:r=t.Ua||t.visitTimestamp;break;case Ze.TimestampNanosecond:r=t.Wa||t.visitTimestamp;break;case Ze.Time:r=t.visitTime;break;case Ze.TimeSecond:r=t.Ta||t.visitTime;break;case Ze.TimeMillisecond:r=t.Ra||t.visitTime;break;case Ze.TimeMicrosecond:r=t.Qa||t.visitTime;break;case Ze.TimeNanosecond:r=t.Sa||t.visitTime;break;case Ze.Decimal:r=t.visitDecimal;break;case Ze.List:r=t.visitList;break;case Ze.Struct:r=t.visitStruct;break;case Ze.Union:r=t.visitUnion;break;case Ze.DenseUnion:r=t.ma||t.visitUnion;break;case Ze.SparseUnion:r=t.na||t.visitUnion;break;case Ze.Dictionary:r=t.visitDictionary;break;case Ze.Interval:r=t.visitInterval;break;case Ze.IntervalDayTime:r=t.Oa||t.visitInterval;break;case Ze.IntervalYearMonth:r=t.Pa||t.visitInterval;break;case Ze.FixedSizeList:r=t.visitFixedSizeList;break;case Ze.Map:r=t.visitMap}if("function"==typeof r)return r;if(!n)return function(){return null};throw Error("Unrecognized type '"+Ze[i]+"'")}(this,t,void 0===e||e)},n.visitNull=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitBool=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitInt=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitFloat=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitUtf8=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitBinary=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitFixedSizeBinary=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitDate=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitTimestamp=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitTime=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitDecimal=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitList=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitStruct=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitUnion=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitDictionary=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitInterval=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitFixedSizeList=function(t,e){for(var n=1;n<arguments.length;++n);return null},n.visitMap=function(t,e){for(var n=1;n<arguments.length;++n);return null};var Wi=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];function Hi(t){this.buffer=t}function Xi(t,e){var n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);e=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);var r=n[3]*e[3];t.buffer[0]=65535&r;var i=r>>>16;i+=r=n[2]*e[3],i+=r=n[3]*e[2]>>>0,t.buffer[0]+=i<<16,t.buffer[1]=i>>>0<r?65536:0,t.buffer[1]+=i>>>16,t.buffer[1]+=n[1]*e[3]+n[2]*e[2]+n[3]*e[1],t.buffer[1]+=n[0]*e[3]+n[1]*e[2]+n[2]*e[1]+n[3]*e[0]<<16}function qi(t,e){var n=t.buffer[0]+e.buffer[0]>>>0;t.buffer[1]+=e.buffer[1],n<t.buffer[0]>>>0&&++t.buffer[1],t.buffer[0]=n}function Yi(t){Hi.apply(this,arguments)}function Zi(t){Hi.apply(this,arguments)}function Ki(t){this.buffer=t}(n=Hi.prototype).high=function(){return this.buffer[1]},n.low=function(){return this.buffer[0]},n.lessThan=function(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]},n.equals=function(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]},n.greaterThan=function(t){return t.lessThan(this)},n.hex=function(){return Gi(this.buffer[1])+" "+Gi(this.buffer[0])},i.h(Yi,Hi),Yi.prototype.times=function(t){return Xi(this,t),this},Yi.prototype.plus=function(t){return qi(this,t),this},Yi.from=function(t,e){return e=void 0===e?new Uint32Array(2):e,Yi.fromString("string"==typeof t?t:t.toString(),e)},Yi.fromNumber=function(t,e){return e=void 0===e?new Uint32Array(2):e,Yi.fromString(t.toString(),e)},Yi.fromString=function(t,e){e=void 0===e?new Uint32Array(2):e;var n=t.length;e=new Yi(e);for(var r=0;r<n;){var i=8<n-r?8:n-r,o=new Yi(new Uint32Array([parseInt(t.substr(r,i),10),0]));e.times(new Yi(new Uint32Array([Wi[i],0]))),e.plus(o),r+=i}return e},Yi.convertArray=function(t){for(var e=new Uint32Array(2*t.length),n=-1,r=t.length;++n<r;)Yi.from(t[n],new Uint32Array(e.buffer,e.byteOffset+8*n,2));return e},Yi.multiply=function(t,e){return new Yi(new Uint32Array(t.buffer)).times(e)},Yi.add=function(t,e){return new Yi(new Uint32Array(t.buffer)).plus(e)},i.h(Zi,Hi),Zi.prototype.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this},Zi.prototype.times=function(t){return Xi(this,t),this},Zi.prototype.plus=function(t){return qi(this,t),this},Zi.prototype.lessThan=function(t){var e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]},Zi.from=function(t,e){return e=void 0===e?new Uint32Array(2):e,Zi.fromString("string"==typeof t?t:t.toString(),e)},Zi.fromNumber=function(t,e){return e=void 0===e?new Uint32Array(2):e,Zi.fromString(t.toString(),e)},Zi.fromString=function(t,e){e=void 0===e?new Uint32Array(2):e;var n=t.startsWith("-"),r=t.length;e=new Zi(e);for(var i=n?1:0;i<r;){var o=8<r-i?8:r-i,a=new Zi(new Uint32Array([parseInt(t.substr(i,o),10),0]));e.times(new Zi(new Uint32Array([Wi[o],0]))),e.plus(a),i+=o}return n?e.negate():e},Zi.convertArray=function(t){for(var e=new Uint32Array(2*t.length),n=-1,r=t.length;++n<r;)Zi.from(t[n],new Uint32Array(e.buffer,e.byteOffset+8*n,2));return e},Zi.multiply=function(t,e){return new Zi(new Uint32Array(t.buffer)).times(e)},Zi.add=function(t,e){return new Zi(new Uint32Array(t.buffer)).plus(e)},(n=Ki.prototype).high=function(){return new Zi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))},n.low=function(){return new Zi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))},n.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this},n.times=function(t){var e=new Yi(new Uint32Array([this.buffer[3],0])),n=new Yi(new Uint32Array([this.buffer[2],0])),r=new Yi(new Uint32Array([this.buffer[1],0])),i=new Yi(new Uint32Array([this.buffer[0],0])),o=new Yi(new Uint32Array([t.buffer[3],0])),a=new Yi(new Uint32Array([t.buffer[2],0])),s=new Yi(new Uint32Array([t.buffer[1],0]));t=new Yi(new Uint32Array([t.buffer[0],0]));var u=Yi.multiply(i,t);this.buffer[0]=u.low();var c=new Yi(new Uint32Array([u.high(),0]));return u=Yi.multiply(r,t),c.plus(u),u=Yi.multiply(i,s),c.plus(u),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(u)?1:0,this.buffer[2]=c.high(),new Yi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Yi.multiply(n,t)).plus(Yi.multiply(r,s)).plus(Yi.multiply(i,a)),this.buffer[3]+=Yi.multiply(e,t).plus(Yi.multiply(n,s)).plus(Yi.multiply(r,a)).plus(Yi.multiply(i,o)).low(),this},n.plus=function(t){var e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this},n.hex=function(){return Gi(this.buffer[3])+" "+Gi(this.buffer[2])+" "+Gi(this.buffer[1])+" "+Gi(this.buffer[0])},Ki.multiply=function(t,e){return new Ki(new Uint32Array(t.buffer)).times(e)},Ki.add=function(t,e){return new Ki(new Uint32Array(t.buffer)).plus(e)},Ki.from=function(t,e){return e=void 0===e?new Uint32Array(4):e,Ki.fromString("string"==typeof t?t:t.toString(),e)},Ki.fromNumber=function(t,e){return e=void 0===e?new Uint32Array(4):e,Ki.fromString(t.toString(),e)},Ki.fromString=function(t,e){e=void 0===e?new Uint32Array(4):e;var n=t.startsWith("-"),r=t.length;e=new Ki(e);for(var i=n?1:0;i<r;){var o=8<r-i?8:r-i,a=new Ki(new Uint32Array([parseInt(t.substr(i,o),10),0,0,0]));e.times(new Ki(new Uint32Array([Wi[o],0,0,0]))),e.plus(a),i+=o}return n?e.negate():e},Ki.convertArray=function(t){for(var e=new Uint32Array(4*t.length),n=-1,r=t.length;++n<r;)Ki.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e};var Qi={};Qi.BaseInt64=Hi,Qi.Uint64=Yi,Qi.Int64=Zi,Qi.Int128=Ki;var Ji=new Di("utf-8");function $i(t,e,n){this.ue=this.mf=-1,this.ca=t,this.T=e,this.S=n}function to(t){return t.T[++t.mf]}function eo(t){return t.S[++t.ue]}function no(t,e,n){$i.call(this,new Uint8Array(0),e,n),this.Hb=t}i.h($i,Vi),(n=$i.prototype).visit=function(t){return Vi.prototype.visit.call(this,t instanceof Zr?t.type:t)},n.visitNull=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Null(t,0,e.length,n,this.J(t,n))},n.visitBool=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Bool(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitInt=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Int(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitFloat=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Float(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitUtf8=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Utf8(t,0,e.length,n,this.J(t,n),this.mb(t),this.N(t))},n.visitBinary=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Binary(t,0,e.length,n,this.J(t,n),this.mb(t),this.N(t))},n.visitFixedSizeBinary=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.FixedSizeBinary(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitDate=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Date(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitTimestamp=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Timestamp(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitTime=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Time(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitDecimal=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Decimal(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitList=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.List(t,0,e.length,n,this.J(t,n),this.mb(t),this.visit(t.children[0]))},n.visitStruct=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Struct(t,0,e.length,n,this.J(t,n),this.visitMany(t.children))},n.visitUnion=function(t){return t.mode===ze.Sparse?this.na(t):this.ma(t)},n.ma=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Union(t,0,e.length,n,this.J(t,n),this.mc(t),this.mb(t),this.visitMany(t.children))},n.na=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Union(t,0,e.length,n,this.J(t,n),this.mc(t),this.visitMany(t.children))},n.visitDictionary=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Dictionary(t,0,e.length,n,this.J(t,n),this.N(t.indices))},n.visitInterval=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Interval(t,0,e.length,n,this.J(t,n),this.N(t))},n.visitFixedSizeList=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.FixedSizeList(t,0,e.length,n,this.J(t,n),this.visit(t.children[0]))},n.visitMap=function(t,e){var n=(e=void 0===e?to(this):e).nullCount;return li.Map(t,0,e.length,n,this.J(t,n),this.visitMany(t.children))},n.J=function(t,e){var n=void 0===n?eo(this):n;return 0<e&&this.N(t,n)||new Uint8Array(0)},n.mb=function(t){return this.N(t,void 0)},n.mc=function(t){return this.N(t,void 0)},n.N=function(t,e){return e=(t=void 0===e?eo(this):e).offset,this.ca.subarray(e,e+t.length)},i.h(no,$i),no.prototype.J=function(t,e){return t=eo(this).offset,0>=e?new Uint8Array(0):ci.packBools(this.Hb[t])},no.prototype.mb=function(){var t=eo(this).offset;return wt.toArrayBufferView(Uint8Array,wt.toArrayBufferView(Int32Array,this.Hb[t]))},no.prototype.mc=function(){var t=eo(this).offset;return wt.toArrayBufferView(Uint8Array,wt.toArrayBufferView(Int8Array,this.Hb[t]))},no.prototype.N=function(t,e){e=(void 0===e?eo(this):e).offset;var n=this.Hb;return Qe.isTimestamp(t)||(Qe.isInt(t)||Qe.isTime(t))&&64===t.bitWidth||Qe.isDate(t)&&t.unit===Be.MILLISECOND?wt.toArrayBufferView(Uint8Array,Qi.Int64.convertArray(n[e])):Qe.isDecimal(t)?wt.toArrayBufferView(Uint8Array,Qi.Int128.convertArray(n[e])):Qe.isBinary(t)||Qe.isFixedSizeBinary(t)?function(t){t=t.join("");for(var e=new Uint8Array(t.length/2),n=0;n<t.length;n+=2)e[n>>1]=parseInt(t.substr(n,2),16);return e}(n[e]):Qe.isBool(t)?ci.packBools(n[e]):Qe.isUtf8(t)?Ji.encode(n[e].join("")):wt.toArrayBufferView(Uint8Array,wt.toArrayBufferView(t.ArrayType,n[e].map(function(t){return+t})))};var ro=je.c.f.g.Null,io=je.c.f.g.Int,oo=je.c.f.g.FloatingPoint,ao=je.c.f.g.Binary,so=je.c.f.g.Bool,uo=je.c.f.g.Utf8,co=je.c.f.g.Decimal,lo=je.c.f.g.Date,fo=je.c.f.g.Time,ho=je.c.f.g.Timestamp,vo=je.c.f.g.Interval,po=je.c.f.g.List,go=je.c.f.g.Struct_,yo=je.c.f.g.Union,bo=je.c.f.g.uc,mo=je.c.f.g.FixedSizeBinary,_o=je.c.f.g.FixedSizeList,wo=je.c.f.g.Map;function Oo(){}i.h(Oo,Vi),(n=Oo.prototype).visit=function(t,e){return null==t||null==e?void 0:Vi.prototype.visit.call(this,t,e)},n.visitNull=function(t,e){return ro.Rf(e),ro.Ue(e)},n.visitInt=function(t,e){return io.Lf(e),io.Ab(e,t.bitWidth),io.Xd(e,t.isSigned),io.Pe(e)},n.visitFloat=function(t,e){return oo.Jf(e),oo.cc(e,t.precision),oo.Ne(e)},n.visitBinary=function(t,e){return ao.wf(e),ao.Ee(e)},n.visitBool=function(t,e){return so.xf(e),so.Fe(e)},n.visitUtf8=function(t,e){return uo.Zf(e),uo.$e(e)},n.visitDecimal=function(t,e){return co.Bf(e),co.fe(e,t.scale),co.cc(e,t.precision),co.He(e)},n.visitDate=function(t,e){return lo.Af(e),lo.ra(e,t.unit),lo.Ge(e)},n.visitTime=function(t,e){return fo.startTime(e),fo.ra(e,t.unit),fo.Ab(e,t.bitWidth),fo.endTime(e)},n.visitTimestamp=function(t,e){var n=t.timezone&&q(e,t.timezone)||void 0;return ho.Wf(e),ho.ra(e,t.unit),void 0!==n&&ho.ie(e,n),ho.Ye(e)},n.visitInterval=function(t,e){return vo.Mf(e),vo.ra(e,t.unit),vo.Qe(e)},n.visitList=function(t,e){return po.Nf(e),po.Re(e)},n.visitStruct=function(t,e){return go.Vf(e),go.Xe(e)},n.visitUnion=function(t,e){yo.Xf(e,t.typeIds.length);var n=yo.Ce(e,t.typeIds);return yo.Yf(e),yo.ae(e,t.mode),yo.je(e,n),yo.Ze(e)},n.visitDictionary=function(t,e){var n=this.visit(t.indices,e);return bo.Ef(e),bo.bc(e,new R(t.id,0)),bo.Wd(e,t.isOrdered),void 0!==n&&bo.Ud(e,n),bo.Je(e)},n.visitFixedSizeBinary=function(t,e){return mo.Hf(e),mo.Ld(e,t.byteWidth),mo.Le(e)},n.visitFixedSizeList=function(t,e){return _o.If(e),_o.$d(e,t.listSize),_o.Me(e)},n.visitMap=function(t,e){return wo.Of(e),wo.Yd(e,t.keysSorted),wo.Se(e)};var Eo=new Oo;function So(t){return new Vo(t.count,function t(e){return(e||[]).reduce(function(e,n){return[].concat(i.A(e),[new Wo(n.count,To(n.VALIDITY))],i.A(t(n.children)))},[])}(t.columns),function t(e,n){n=void 0===n?[]:n;for(var r=-1,i=(e||[]).length;++r<i;){var o=e[r];o.VALIDITY&&n.push(new Go(n.length,o.VALIDITY.length)),o.OFFSET&&n.push(new Go(n.length,o.OFFSET.length)),o.TYPE&&n.push(new Go(n.length,o.TYPE.length)),o.DATA&&n.push(new Go(n.length,o.DATA.length)),n=t(o.children,n)}return n}(t.columns))}function Ao(t,e,n){return(t.children||[]).filter(Boolean).map(function(t){return Zr.fromJSON(t,e,n)})}function To(t){return(t||[]).reduce(function(t,e){return t+ +(0===e)},0)}function jo(t){return new Map(Object.entries(t||{}))}function Po(t){return new an(t.isSigned,t.bitWidth)}function Ro(t,e){var n=t.type.name;switch(n){case"NONE":return new Qe;case"null":return new en;case"binary":return new An;case"utf8":return new Rn;case"bool":return new Mn;case"list":return new pr((e||[])[0]);case"struct":return new mr(e||[])}switch(n){case"int":return new an((e=t.type).isSigned,e.bitWidth);case"floatingpoint":return new bn(Ve[t.type.precision]);case"decimal":return new Nn((e=t.type).scale,e.precision);case"date":return new Vn(Be[t.type.unit]);case"time":return e=t.type,new qn(Ue[e.unit],e.bitWidth);case"timestamp":return e=t.type,new er(Ue[e.unit],e.timezone);case"interval":return new cr(We[t.type.unit]);case"union":return t=t.type,new Er(ze[t.mode],t.typeIds||[],e||[]);case"fixedsizebinary":return new Rr(t.type.byteWidth);case"fixedsizelist":return new Mr(t.type.listSize,(e||[])[0]);case"map":return new Nr(e||[],t.type.keysSorted)}throw Error('Unrecognized type: "'+n+'"')}var Io=je.c.f.g.Type,ko=je.c.f.g.Field,xo=je.c.f.g.Schema,Mo=je.c.f.g.tc,Co=Ne.c.f.g.Message,Fo=je.c.f.g.Nb,Lo=Ne.c.f.g.vc,No=je.c.f.g.Mb,Do=Ne.c.f.g.RecordBatch,Bo=Ne.c.f.g.DictionaryBatch;function Uo(t,e,n,r){this.Hd=e,this.vd=n,this.body=new Uint8Array(0),r&&(this.Tb=function(){return r}),this.nd="number"==typeof t?t:t.low}function Vo(t,e,n){this.Xb=e,this.P=n,this.aa="number"==typeof t?t:t.low}function zo(t,e,n){this.Ub=t,this.wd=void 0!==n&&n,this.Vb="number"==typeof e?e:e.low}function Go(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}function Wo(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}function Ho(t,e,n){return Array.from({length:t.xe()},function(e,n){return t.children(n)}).filter(Boolean).map(function(t){return Zr.decode(t,e,n)})}function Xo(t){var e=new Map;if(t)for(var n=void 0,r=void 0,i=-1,o=0|t.Qc();++i<o;)(n=t.Pc(i))&&null!=(r=n.key())&&e.set(r,n.value());return e}function qo(t){return new an(t.isSigned(),t.bitWidth())}function Yo(t,e){var n=t.ag();switch(n){case Io.NONE:return new Qe;case Io.Null:return new en;case Io.Binary:return new An;case Io.Utf8:return new Rn;case Io.Bool:return new Mn;case Io.List:return new pr((e||[])[0]);case Io.Struct_:return new mr(e||[])}switch(n){case Io.Int:return new an((e=t.type(new je.c.f.g.Int)).isSigned(),e.bitWidth());case Io.FloatingPoint:return new bn((e=t.type(new je.c.f.g.FloatingPoint)).precision());case Io.Decimal:return new Nn((e=t.type(new je.c.f.g.Decimal)).scale(),e.precision());case Io.Date:return new Vn((e=t.type(new je.c.f.g.Date)).unit());case Io.Time:return new qn((e=t.type(new je.c.f.g.Time)).unit(),e.bitWidth());case Io.Timestamp:return new er((e=t.type(new je.c.f.g.Timestamp)).unit(),e.timezone());case Io.Interval:return new cr((e=t.type(new je.c.f.g.Interval)).unit());case Io.Union:return new Er((t=t.type(new je.c.f.g.Union)).mode(),t.$f()||[],e||[]);case Io.FixedSizeBinary:return new Rr((e=t.type(new je.c.f.g.FixedSizeBinary)).byteWidth());case Io.FixedSizeList:return new Mr((t=t.type(new je.c.f.g.FixedSizeList)).listSize(),(e||[])[0]);case Io.Map:return new Nr(e||[],(t=t.type(new je.c.f.g.Map)).keysSorted())}throw Error('Unrecognized type: "'+Io[n]+'" ('+n+")")}Uo.fromJSON=function(t,e){var n=new Uo(0,Xe.V4,e);return n.Tb=function(t,e){return function(){switch(e){case He.Schema:return Xr.fromJSON(t);case He.RecordBatch:return Vo.fromJSON(t);case He.DictionaryBatch:return zo.fromJSON(t)}throw Error("Unrecognized Message type: { name: "+He[e]+", type: "+e+" }")}}(t,e),n},Uo.decode=function(t){t=new Y(wt.toUint8Array(t));var e=(t=Co.hf(t)).bodyLength(),n=t.version(),r=t.headerType();return(e=new Uo(e,n,r)).Tb=function(t,e){return function(){switch(e){case He.Schema:return Xr.decode(t.header(new xo));case He.RecordBatch:return Vo.decode(t.header(new Do),t.version());case He.DictionaryBatch:return zo.decode(t.header(new Bo),t.version())}throw Error("Unrecognized Message type: { name: "+He[e]+", type: "+e+" }")}}(t,r),e},Uo.encode=function(t){var e=new k,n=-1;return t.isSchema()?n=Xr.encode(e,t.header()):t.isRecordBatch()?n=Vo.encode(e,t.header()):t.isDictionaryBatch()&&(n=zo.encode(e,t.header())),Co.Pf(e),Co.dc(e,Xe.V4),Co.Sd(e,n),Co.Td(e,t.headerType),Co.Jd(e,new R(t.bodyLength,0)),Co.ef(e,Co.Te(e)),x(e)},Uo.from=function(t,e){if(e=void 0===e?0:e,t instanceof Xr)return new Uo(0,Xe.V4,He.Schema,t);if(t instanceof Vo)return new Uo(e,Xe.V4,He.RecordBatch,t);if(t instanceof zo)return new Uo(e,Xe.V4,He.DictionaryBatch,t);throw Error("Unrecognized Message header: "+t)},Uo.prototype.header=function(){return this.Tb()},Uo.prototype.isSchema=function(){return this.headerType===He.Schema},Uo.prototype.isRecordBatch=function(){return this.headerType===He.RecordBatch},Uo.prototype.isDictionaryBatch=function(){return this.headerType===He.DictionaryBatch},i.global.Object.defineProperties(Uo.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return this.headerType}},version:{configurable:!0,enumerable:!0,get:function(){return this.Hd}},headerType:{configurable:!0,enumerable:!0,get:function(){return this.vd}},bodyLength:{configurable:!0,enumerable:!0,get:function(){return this.nd}}}),i.global.Object.defineProperties(Vo.prototype,{T:{configurable:!0,enumerable:!0,get:function(){return this.Xb}},length:{configurable:!0,enumerable:!0,get:function(){return this.aa}},S:{configurable:!0,enumerable:!0,get:function(){return this.P}}}),i.global.Object.defineProperties(zo.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this.Vb}},data:{configurable:!0,enumerable:!0,get:function(){return this.Ub}},Eb:{configurable:!0,enumerable:!0,get:function(){return this.wd}},length:{configurable:!0,enumerable:!0,get:function(){return this.data.length}},T:{configurable:!0,enumerable:!0,get:function(){return this.data.T}},S:{configurable:!0,enumerable:!0,get:function(){return this.data.S}}}),Zr.encode=function(t,e){var n=-1,r=-1,o=-1,a=e.type,s=e.typeId;Qe.isDictionary(a)?(s=a.dictionary.typeId,o=Eo.visit(a,t),r=Eo.visit(a.dictionary,t)):r=Eo.visit(a,t),a=(a.children||[]).map(function(e){return Zr.encode(t,e)}),a=ko.ze(t,a);var u=e.metadata&&0<e.metadata.size?ko.gc(t,[].concat(i.A(e.metadata)).map(function(e){var n=i.F(e);return e=n.next().value,n=n.next().value,e=q(t,""+e),n=q(t,""+n),Fo.cd(t),Fo.Hc(t,e),Fo.Jc(t,n),Fo.Rc(t)})):-1;return e.name&&(n=q(t,e.name)),ko.Ff(t),ko.Ic(t,r),ko.ke(t,s),ko.Md(t,a),ko.de(t,!!e.nullable),-1!==n&&ko.be(t,n),-1!==o&&ko.Pd(t,o),-1!==u&&ko.ac(t,u),ko.Ke(t)},Zr.decode=function(t,e,n){var r,i;if(e&&n&&(i=t.dictionary()))if(e.has(r=i.id().low)){var o=(o=i.Xc())?qo(o):new hn;o=new zr(e.get(r),o,r,i.isOrdered()),t=new Zr(t.name(),o,t.nullable(),Xo(t)),n.get(r).push(n=t)}else o=(o=i.Xc())?qo(o):new hn,e.set(r,e=Yo(t,Ho(t))),o=new zr(e,o,r,i.isOrdered()),t=new Zr(t.name(),o,t.nullable(),Xo(t)),n.set(r,[n=t]);else e=Yo(t,Ho(t,e,n)),n=new Zr(t.name(),e,t.nullable(),Xo(t));return n||null},Zr.fromJSON=function(t,e,n){var r,i;if(e&&n&&(i=t.dictionary))if(e.has(r=i.id)){var o=(o=i.indexType)?Po(o):new hn;o=new zr(e.get(r),o,r,i.isOrdered),t=new Zr(t.name,o,t.nullable,jo(t.customMetadata)),n.get(r).push(n=t)}else o=(o=i.indexType)?Po(o):new hn,e.set(r,e=Ro(t,Ao(t))),o=new zr(e,o,r,i.isOrdered),t=new Zr(t.name,o,t.nullable,jo(t.customMetadata)),n.set(r,[n=t]);else e=Ro(t,Ao(t,e,n)),n=new Zr(t.name,e,t.nullable,jo(t.customMetadata));return n||null},Xr.encode=function(t,e){var n=e.fields.map(function(e){return Zr.encode(t,e)});return xo.Gf(t,n.length),n=xo.Be(t,n),e=e.metadata&&0<e.metadata.size?xo.gc(t,[].concat(i.A(e.metadata)).map(function(e){var n=i.F(e);return e=n.next().value,n=n.next().value,e=q(t,""+e),n=q(t,""+n),Fo.cd(t),Fo.Hc(t,e),Fo.Jc(t,n),Fo.Rc(t)})):-1,xo.Uf(t),xo.Rd(t,n),xo.Qd(t),-1!==e&&xo.ac(t,e),xo.We(t)},Xr.decode=function(t,e,n){return e=void 0===e?new Map:e,n=void 0===n?new Map:n,new Xr(function(t,e,n){return Array.from({length:t.cf()},function(e,n){return t.fields(n)}).filter(Boolean).map(function(t){return Zr.decode(t,e,n)})}(t,e,n),Xo(t),e,n)},Xr.fromJSON=function(t,e,n){return new Xr(function(t,e,n){return(t.fields||[]).filter(Boolean).map(function(t){return Zr.fromJSON(t,e,n)})}(t,e=void 0===e?new Map:e,n=void 0===n?new Map:n),jo(t.customMetadata),e,n)},Vo.encode=function(t,e){var n=e.T||[],r=e.S||[];return Do.Qf(t,n.length),n.slice().reverse().forEach(function(e){return Wo.encode(t,e)}),n=X(t),Do.yf(t,r.length),r.slice().reverse().forEach(function(e){return Go.encode(t,e)}),r=X(t),Do.Sf(t),Do.Zd(t,new R(e.length,0)),Do.ce(t,n),Do.Kd(t,r),Do.Ve(t)},Vo.decode=function(t,e){return e=void 0===e?Xe.V4:e,new Vo(t.length(),function(t){return Array.from({length:t.nf()},function(e,n){return t.T(n)}).filter(Boolean).map(Wo.decode)}(t),function(t,e){return Array.from({length:t.ve()},function(e,n){return t.S(n)}).filter(Boolean).map(function(t){var e=Go.decode;return function(n,r){return t<Xe.V4&&(n.b+=8*(r+1)),e(n)}}(e))}(t,e))},Vo.fromJSON=So,zo.encode=function(t,e){var n=Vo.encode(t,e.data);return Bo.Df(t),Bo.bc(t,new R(e.id,0)),Bo.Vd(t,e.Eb),Bo.Nd(t,n),Bo.Ie(t)},zo.decode=function(t,e){return e=void 0===e?Xe.V4:e,new zo(Vo.decode(t.data(),e),t.id(),t.Eb())},zo.fromJSON=function(t){return new zo(So(t.data),t.id,t.isDelta)},Wo.encode=function(t,e){return Lo.Ae(t,new R(e.length,0),new R(e.nullCount,0))},Wo.decode=function(t){return new Wo(t.length(),t.nullCount())},Go.encode=function(t,e){return Mo.createBuffer(t,new R(e.offset,0),new R(e.length,0))},Go.decode=function(t){return new Go(t.offset(),t.length())};var Zo=new ArrayBuffer(2);new DataView(Zo).setInt16(0,256,!0);var Ko=256===new Int16Array(Zo)[0];function Qo(t){return"Expected "+He[t]+" Message in stream, but was null or length 0."}function Jo(t){return"Header pointer of flatbuffer-encoded "+He[t]+" Message is null or length 0."}function $o(t,e){return"Expected to read "+t+" metadata bytes, but only read "+e+"."}function ta(t,e){return"Expected to read "+t+" bytes for message body, but only read "+e+"."}function ea(t){this.source=t instanceof Pi?t:new Pi(t)}function na(t,e){this.source=t instanceof Ri?t:ft(t)&&"number"==typeof e?new Mi(t,e):new Ri(t)}function ra(t){ea.call(this,new Uint8Array(0)),this.wa=!1,this.sb=[],this.zc=this.wc=0,this.ha=t instanceof ot?t:new ot(t)}i.m(),i.D(),ea.prototype[Symbol.iterator]=function(){return this},(n=ea.prototype).next=function(){var t;return(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?it:t},n.throw=function(t){return this.source.throw(t)},n.return=function(t){return this.source.return(t)},n.readMessage=function(t){var e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw Error(Qo(t));return e.value},n.readMessageBody=function(t){if(0>=t)return new Uint8Array(0);var e=wt.toUint8Array(this.source.read(t));if(e.byteLength<t)throw Error(ta(t,e.byteLength));return 0==e.byteOffset%8?e:e.slice()},n.readSchema=function(t){t=void 0!==t&&t;var e=He.Schema,n=this.readMessage(e);if(n=n&&n.header(),t&&!n)throw Error(Jo(e));return n},n.readMetadataLength=function(){var t=this.source.read(4);return{done:0>=(t=+((t=t&&new Y(t))&&t.v(0))),value:t}},n.readMetadata=function(t){var e=this.source.read(t);if(!e)return it;if(e.byteLength<t)throw Error($o(t,e.byteLength));return{done:!1,value:Uo.decode(e)}},i.m(),i.M(),na.prototype[Symbol.asyncIterator]=function(){return this},(n=na.prototype).next=function(){var t,e=this;return i.o(function(n){return 1==n.i?s(n,e.readMetadataLength(),2):3!=n.i?(t=n.l).done?n.return(it):s(n,e.readMetadata(t.value),3):(t=n.l).done?n.return(it):n.return(t)})},n.throw=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.source.throw(t),2):n.return(n.l)})},n.return=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.source.return(t),2):n.return(n.l)})},n.readMessage=function(t){var e,n=this;return i.o(function(r){if(1==r.i)return s(r,n.next(),2);if((e=r.l).done)return r.return(null);if(null!=t&&e.value.headerType!==t)throw Error(Qo(t));return r.return(e.value)})},n.readMessageBody=function(t){var e,n,r,o=this;return i.o(function(i){if(1==i.i)return 0>=t?i.return(new Uint8Array(0)):(n=(e=wt).toUint8Array,s(i,o.source.read(t),2));if((r=n.call(e,i.l)).byteLength<t)throw Error(ta(t,r.byteLength));return i.return(0==r.byteOffset%8?r:r.slice())})},n.readSchema=function(t){t=void 0!==t&&t;var e,n,r,o=this;return i.o(function(i){if(1==i.i)return e=He.Schema,s(i,o.readMessage(e),2);if(r=(n=i.l)&&n.header(),t&&!r)throw Error(Jo(e));return i.return(r)})},n.readMetadataLength=function(){var t,e,n,r=this;return i.o(function(i){return 1==i.i?s(i,r.source.read(4),2):(e=(t=i.l)&&new Y(t),n=+(e&&e.v(0)),i.return({done:0>=n,value:n}))})},n.readMetadata=function(t){var e,n=this;return i.o(function(r){if(1==r.i)return s(r,n.source.read(t),2);if(!(e=r.l))return r.return(it);if(e.byteLength<t)throw Error($o(t,e.byteLength));return r.return({done:!1,value:Uo.decode(e)})})},i.h(ra,ea),ra.prototype.next=function(){var t=this.ha,e=this.wc,n=this.zc,r=t.batches.length,i=t.dictionaries.length;return this.wa?n<i?(t=t.dictionaries[this.zc++],this.sb=t.data.columns,{done:!1,value:Uo.fromJSON(t,He.DictionaryBatch)}):e<r?(t=t.batches[this.wc++],this.sb=t.columns,{done:!1,value:Uo.fromJSON(t,He.RecordBatch)}):(this.sb=[],it):(this.wa=!0,{value:Uo.fromJSON(t.schema,He.Schema),done:e>=r&&n>=i})},ra.prototype.readMessageBody=function(){return function t(e){return(e||[]).reduce(function(e,n){return[].concat(i.A(e),i.A(n.VALIDITY&&[n.VALIDITY]||[]),i.A(n.OFFSET&&[n.OFFSET]||[]),i.A(n.TYPE&&[n.TYPE]||[]),i.A(n.DATA&&[n.DATA]||[]),i.A(t(n.children)))},[])}(this.sb)},ra.prototype.readMessage=function(t){var e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw Error(Qo(t));return e.value},ra.prototype.readSchema=function(){var t=He.Schema,e=this.readMessage(t),n=e&&e.header();if(!e||!n)throw Error(Jo(t));return n};for(var ia=new Uint8Array(6),oa=0;6>oa;oa+=1)ia[oa]="ARROW1".charCodeAt(oa);function aa(t,e){e=void 0===e?0:e;for(var n=-1,r=ia.length;++n<r;)if(ia[n]!==t[e+n])return!1;return!0}var sa=ia.length,ua=sa+4,ca=2*sa+4;function la(t){this.u=t}function fa(t,e){this.u=t instanceof wa?t:new _a(t instanceof xi?t:new xi(wt.toUint8Array(t)),e)}function ha(t,e){this.u=lt(t,["schema","object"])?new Oa(new ra(t),e):new ba(new ea(t),e)}function da(t,e){this.u=new ma(new na(t,e))}function va(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];n=(r=i.F(n)).next().value,r=r.next().value,n&&"number"!=typeof n&&(r=n),n=t instanceof Mi?t:new Mi(t,n),this.u=new wa(n,r)}function pa(t){t=void 0===t?new Map:t,this.closed=!1,this.autoClose=!0,this.ka=this.Aa=0,this.dictionaries=t}function ga(t,e,n){return new Ti(t.schema,e.length,t.yb(e,n,t.schema.fields))}function ya(t,e,n){var r=e.id,i=e.Eb;e=e.data;var o=t.dictionaries,a=t.schema;if(i||!o.get(r)){var s=a.dictionaries.get(r),u=i?o.get(r).concat(Mt.new(t.yb(e,n,[s])[0])):Mt.new(t.yb(e,n,[s])[0]);return(a.dictionaryFields.get(r)||[]).forEach(function(t){return t.type.dictionaryVector=u}),u}return o.get(r)}function ba(t,e){e=void 0===e?new Map:e,pa.call(this,e),this.B=t}function ma(t,e){e=void 0===e?new Map:e,pa.call(this,e),this.B=t}function _a(t,e){e=void 0===e?new Map:e,ba.call(this,new ea(t),e),this.file=t}function wa(t,e){e=void 0===e?new Map:e,ma.call(this,new na(t),e),this.file=t}function Oa(t,e){e=void 0===e?new Map:e,ba.call(this,t,e),this.B=t}function Ea(){this.tb=0,this.Xb=[],this.P=[],this.od=[]}function Sa(t){var e=t.byteLength+7&-8;return this.S.push(t),this.fc.push(new Go(this.tb,e)),this.tb+=e,this}function Aa(t){return Sa.call(this,t.values.subarray(0,t.length*t.stride))}function Ta(t){var e=t.length,n=t.values,r=(t=t.valueOffsets)[0],i=Math.min(t[e]-r,n.byteLength-r);return Sa.call(this,wt.rebaseValueOffsets(-t[0],e,t)),Sa.call(this,n.subarray(r,r+i)),this}function ja(t){var e=t.length,n=t.valueOffsets;return n&&Sa.call(this,wt.rebaseValueOffsets(n[0],e,n)),this.visit(t.getChildAt(0))}function Pa(t){return this.visitMany(t.type.children.map(function(e,n){return t.getChildAt(n)}).filter(Boolean))[0]}i.h(la,at),(n=la.prototype).next=function(t){return this.u.next(t)},n.throw=function(t){return this.u.throw(t)},n.return=function(t){return this.u.return(t)},n.reset=function(t){return this.u.reset(t),this},n.toReadableDOMStream=function(){return Ot(this)},n.toReadableNodeStream=function(){return Et()},n.isSync=function(){return this instanceof fa||this instanceof ha},n.isAsync=function(){return this instanceof va||this instanceof da},n.isFile=function(){return this instanceof fa||this instanceof va},n.isStream=function(){return this instanceof ha||this instanceof da},la.throughNode=function(){throw Error('"asNodeStream" not available in this environment')},la.throughDOM=function(){throw Error('"asDOMStream" not available in this environment')},la.from=function(t){return t instanceof la?t:lt(t,["schema","object"])?new ha(new ot(t)):ft(t)?function(t){var e,n,r,o;return i.o(function(i){switch(i.i){case 1:return s(i,t.stat(),2);case 2:if(e=i.l,n=e.size,r=new Mi(t,n),!(n>=ca)){i.j(3);break}return o=aa,s(i,r.Da(0,sa+7&-8),4);case 4:if(o(i.l))return i.return(new va(r));case 3:return i.return(new da(r))}})}(t):ct(t,"then")?i.o(function(r){return 1==r.i?(e=la,n=la.from,s(r,t,3)):2!=r.i?s(r,n.call(e,r.l),2):r.return(r.l)}):ct(t,"then")?function(){var e,n;return i.o(function(r){return 1==r.i?(e=la,n=la.from,s(r,t,3)):2!=r.i?s(r,n.call(e,r.l),2):r.return(r.l)})}():ht(t)||dt(t)||vt(t)||ct(t,Symbol.asyncIterator)?function(t){var e,n,r,o;return i.o(function(a){switch(a.i){case 1:return s(a,t.peek(sa+7&-8),2);case 2:if(!((e=a.l)&&4<=e.byteLength)){n=new da(new E(function t(){return i.H.I(t,function(t){t.i=0})}())),a.j(3);break}if(!aa(e)){r=new da(t),a.j(4);break}return o=fa,s(a,t.read(),5);case 5:r=new o(a.l);case 4:n=r;case 3:return a.return(n)}})}(new Ri(t)):function(t){var e=t.peek(sa+7&-8);return e&&4<=e.byteLength?aa(e)?new fa(t.read()):new ha(t):new ha(function t(){return i.H.I(t,function(t){t.i=0})}())}(new Pi(t));var e,n},i.global.Object.defineProperties(la.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.u.closed}},schema:{configurable:!0,enumerable:!0,get:function(){return this.u.schema}},autoClose:{configurable:!0,enumerable:!0,get:function(){return this.u.autoClose}},dictionaries:{configurable:!0,enumerable:!0,get:function(){return this.u.dictionaries}},numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.u.numDictionaries}},numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.u.numRecordBatches}}}),i.m(),i.D(),i.m(),i.M(),i.h(fa,la),fa.prototype.cancel=function(){this.u.close()},fa.prototype.open=function(t){return this.u.open(t),this},fa.prototype.readRecordBatch=function(t){return this.u.readRecordBatch(t)},fa.prototype[Symbol.iterator]=function(){return i.m(),i.D(),this.u[Symbol.iterator]()},fa.prototype[Symbol.asyncIterator]=function(){var t=this;return new E(function e(){return i.H.I(e,function(e){return i.m(),i.D(),s(e,new b(1,t[Symbol.iterator]()),0)})}())},i.global.Object.defineProperties(fa.prototype,{footer:{configurable:!0,enumerable:!0,get:function(){return this.u.footer}}}),i.m(),i.D(),i.m(),i.M(),i.h(ha,la),ha.prototype.cancel=function(){this.u.close()},ha.prototype.open=function(t){return this.u.open(t),this},ha.prototype[Symbol.iterator]=function(){return i.m(),i.D(),this.u[Symbol.iterator]()},ha.prototype[Symbol.asyncIterator]=function(){var t=this;return new E(function e(){return i.H.I(e,function(e){return i.m(),i.D(),s(e,new b(1,t[Symbol.iterator]()),0)})}())},i.m(),i.M(),i.m(),i.D(),i.h(da,la),da.prototype.cancel=function(){var t=this;return i.o(function(e){return s(e,t.u.close(),0)})},da.prototype.open=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.u.open(t),2):n.return(e)})},da.prototype[Symbol.asyncIterator]=function(){return i.m(),i.M(),this.u[Symbol.asyncIterator]()},da.prototype[Symbol.iterator]=function(){throw Error("AsyncRecordBatchStreamReader is not Iterable")},i.m(),i.M(),i.m(),i.D(),i.h(va,la),va.prototype.cancel=function(){var t=this;return i.o(function(e){return s(e,t.u.close(),0)})},va.prototype.open=function(t){var e=this;return i.o(function(n){return 1==n.i?s(n,e.u.open(t),2):n.return(e)})},va.prototype.readRecordBatch=function(t){return this.u.readRecordBatch(t)},va.prototype[Symbol.asyncIterator]=function(){return i.m(),i.M(),this.u[Symbol.asyncIterator]()},va.prototype[Symbol.iterator]=function(){throw Error("AsyncRecordBatchFileReader is not Iterable")},i.global.Object.defineProperties(va.prototype,{footer:{configurable:!0,enumerable:!0,get:function(){return this.u.footer}}}),pa.prototype.reset=function(t){return this.ka=this.Aa=0,this.schema=t,this.dictionaries=new Map,this},pa.prototype.yb=function(t,e,n){return new $i(e,t.T,t.S).visitMany(n)},i.global.Object.defineProperties(pa.prototype,{numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.Aa}},numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.ka}}}),i.m(),i.D(),i.h(ba,pa),ba.prototype[Symbol.iterator]=function(){return this},(n=ba.prototype).close=function(){return!this.closed&&(this.closed=!0)&&(this.reset().B.return(),this.dictionaries=this.B=null),this},n.open=function(t){return t=void 0===t?this.autoClose:t,this.closed||(this.autoClose=t,this.schema||(this.schema=this.B.readSchema()))?this:this.close()},n.throw=function(t){return!this.closed&&this.autoClose&&(this.closed=!0)?this.reset().B.throw(t):it},n.return=function(t){return!this.closed&&this.autoClose&&(this.closed=!0)?this.reset().B.return(t):it},n.next=function(){if(this.closed)return it;for(var t,e=this.B;t=this.lb();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this.ka++;var n=t.header();return{done:!1,value:ga(this,n,e=e.readMessageBody(t.bodyLength))}}t.isDictionaryBatch()&&(this.Aa++,n=t.header(),t=ya(this,n,t=e.readMessageBody(t.bodyLength)),this.dictionaries.set(n.id,t))}return this.return()},n.lb=function(){return this.B.readMessage(void 0)},i.m(),i.M(),i.h(ma,pa),ma.prototype[Symbol.asyncIterator]=function(){return this},(n=ma.prototype).close=function(){var t=this;return i.o(function(e){return 1==e.i?t.closed||!(t.closed=!0)?e.j(2):s(e,t.reset().B.return(),3):(2!=e.i&&(t.B=null,t.dictionaries=null),e.return(t))})},n.open=function(t){var e,n,r=this;return i.o(function(i){switch(i.i){case 1:if(void 0!==t||(t=r.autoClose),r.closed){i.j(2);break}if(r.autoClose=t,e=r.schema){i.j(3);break}return n=r,s(i,r.B.readSchema(),4);case 4:e=n.schema=i.l;case 3:if(!e)return i.return(r.close());case 2:return i.return(r)}})},n.throw=function(t){var e=this;return i.o(function(n){return 1==n.i?!e.closed&&e.autoClose&&(e.closed=!0)?s(n,e.reset().B.throw(t),3):n.j(2):2!=n.i?n.return(n.l):n.return(it)})},n.return=function(t){var e=this;return i.o(function(n){return 1==n.i?!e.closed&&e.autoClose&&(e.closed=!0)?s(n,e.reset().B.return(t),3):n.j(2):2!=n.i?n.return(n.l):n.return(it)})},n.next=function(){var t,e,n,r,o,a,u,c,l=this;return i.o(function(i){switch(i.i){case 1:if(l.closed)return i.return(it);e=l.B;case 2:return s(i,l.lb(),4);case 4:if(!(t=i.l))return s(i,l.return(),13);if(t.isSchema())return s(i,l.reset(t.header()),2);if(t.isRecordBatch())return l.ka++,a=t.header(),s(i,e.readMessageBody(t.bodyLength),11);if(!t.isDictionaryBatch()){i.j(2);break}return l.Aa++,n=t.header(),s(i,e.readMessageBody(t.bodyLength),10);case 10:r=i.l,o=ya(l,n,r),l.dictionaries.set(n.id,o),i.j(2);break;case 11:return u=i.l,c=ga(l,a,u),i.return({done:!1,value:c});case 13:return i.return(i.l)}})},n.lb=function(){var t=this;return i.o(function(e){return 1==e.i?s(e,t.B.readMessage(void 0),2):e.return(e.l)})},i.h(_a,ba),(n=_a.prototype).open=function(t){if(t=void 0===t?this.autoClose:t,!this.closed&&!this.footer){this.schema=(this.footer=this.lc()).schema;for(var e=i.F(ti(this.footer)),n=e.next();!n.done;n=e.next())n.value&&this.kc(this.Aa++)}return ba.prototype.open.call(this,t)},n.readRecordBatch=function(t){if(this.closed)return null;if(this.footer||this.open(),(t=this.footer.Ba(t))&&this.file.seek(t.offset)){var e=this.B.readMessage(He.RecordBatch);if(e&&e.isRecordBatch())return ga(this,t=e.header(),e=this.B.readMessageBody(e.bodyLength))}return null},n.kc=function(t){if((t=this.footer.Db(t))&&this.file.seek(t.offset)){var e=this.B.readMessage(He.DictionaryBatch);e&&e.isDictionaryBatch()&&(t=e.header(),e=ya(this,t,e=this.B.readMessageBody(e.bodyLength)),this.dictionaries.set(t.id,e))}},n.lc=function(){var t=this.file,e=t.size-ua,n=t.v(e);return t=t.Da(e-n,n),$r.decode(t)},n.lb=function(){if(this.footer||this.open(),this.ka<this.numRecordBatches){var t=this.footer.Ba(this.ka);if(t&&this.file.seek(t.offset))return this.B.readMessage(void 0)}return null},i.global.Object.defineProperties(_a.prototype,{numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.footer.numDictionaries}},numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.footer.numRecordBatches}}}),i.h(wa,ma),(n=wa.prototype).open=function(t){var e,n,r,o,a=this;return i.o(function(u){switch(u.i){case 1:if(void 0!==t||(t=a.autoClose),a.closed||a.footer){u.j(2);break}return n=e=a,s(u,a.lc(),3);case 3:for(e.schema=(n.footer=u.l).schema,r=i.F(ti(a.footer)),o=r.next();!o.done;o=r.next())o.value&&a.kc(a.Aa++);case 2:return s(u,ma.prototype.open.call(a,t),4);case 4:return u.return(u.l)}})},n.readRecordBatch=function(t){var e,n,r,o,a,u,c=this;return i.o(function(i){switch(i.i){case 1:if(c.closed)return i.return(null);if(c.footer){i.j(2);break}return s(i,c.open(),2);case 2:if(e=c.footer.Ba(t),!(n=e)){i.j(4);break}return s(i,c.file.seek(e.offset),5);case 5:n=i.l;case 4:if(!n){i.j(6);break}return s(i,c.B.readMessage(He.RecordBatch),7);case 7:if(!(r=i.l)||!r.isRecordBatch()){i.j(6);break}return o=r.header(),s(i,c.B.readMessageBody(r.bodyLength),9);case 9:return a=i.l,u=ga(c,o,a),i.return(u);case 6:return i.return(null)}})},n.kc=function(t){var e,n,r,o,a,u,c=this;i.o(function(i){switch(i.i){case 1:if(e=c.footer.Db(t),!(n=e)){i.j(2);break}return s(i,c.file.seek(e.offset),3);case 3:n=i.l;case 2:if(!n){i.j(0);break}return s(i,c.B.readMessage(He.DictionaryBatch),5);case 5:if(!(r=i.l)||!r.isDictionaryBatch()){i.j(0);break}return o=r.header(),s(i,c.B.readMessageBody(r.bodyLength),7);case 7:a=i.l,u=ya(c,o,a),c.dictionaries.set(o.id,u),i.i=0}})},n.lc=function(){var t,e,n,r,o=this;return i.o(function(i){return 1==i.i?(t=o.file,e=t.size-ua,s(i,t.v(e),2)):3!=i.i?(n=i.l,s(i,t.Da(e-n,n),3)):(r=i.l,i.return($r.decode(r)))})},n.lb=function(){var t,e,n=this;return i.o(function(r){switch(r.i){case 1:if(n.footer){r.j(2);break}return s(r,n.open(),2);case 2:if(!(n.ka<n.numRecordBatches)){r.j(4);break}if(t=n.footer.Ba(n.ka),!(e=t)){r.j(5);break}return s(r,n.file.seek(t.offset),6);case 6:e=r.l;case 5:if(!e){r.j(4);break}return s(r,n.B.readMessage(void 0),8);case 8:return r.return(r.l);case 4:return r.return(null)}})},i.global.Object.defineProperties(wa.prototype,{numDictionaries:{configurable:!0,enumerable:!0,get:function(){return this.footer.numDictionaries}},numRecordBatches:{configurable:!0,enumerable:!0,get:function(){return this.footer.numRecordBatches}}}),i.h(Oa,ba),Oa.prototype.yb=function(t,e,n){return new no(e,t.T,t.S).visitMany(n)},i.h(Ea,Vi),Ea.Lc=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return e=e.reduce(function t(e,n){return Array.isArray(n)?n.reduce(t,e):[].concat(i.A(e),n instanceof Ti?i.A(n.schema.fields.map(function(t,e){return n.getChildAt(e)})):[n])},[]).filter(function(t){return t instanceof Mt}),(new Ea).visitMany(e)[0]},Ea.prototype.visit=function(t){if(!Qe.isDictionary(t.type)){var e=t.data,n=t.length,r=t.nullCount;if(2147483647<n)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Sa.call(this,0>=r?new Uint8Array(0):ci.truncateBitmap(e.offset,n,e.nullBitmap)).T.push(new Wo(n,r))}return Vi.prototype.visit.call(this,t)},Ea.prototype.visitNull=function(){return this},Ea.prototype.visitDictionary=function(t){return this.visit(t.indices)},i.global.Object.defineProperties(Ea.prototype,{T:{configurable:!0,enumerable:!0,get:function(){return this.Xb}},S:{configurable:!0,enumerable:!0,get:function(){return this.P}},byteLength:{configurable:!0,enumerable:!0,get:function(){return this.tb}},fc:{configurable:!0,enumerable:!0,get:function(){return this.od}}}),(n=Ea.prototype).visitBool=function(t){var e;return t.nullCount>=t.length?Sa.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Sa.call(this,ci.truncateBitmap(t.offset,t.length,e)):Sa.call(this,ci.packBools(t))},n.visitInt=Aa,n.visitFloat=Aa,n.visitUtf8=Ta,n.visitBinary=Ta,n.visitFixedSizeBinary=Aa,n.visitDate=Aa,n.visitTimestamp=Aa,n.visitTime=Aa,n.visitDecimal=Aa,n.visitList=ja,n.visitStruct=Pa,n.visitUnion=function(t){var e=t.type,n=t.length,r=t.typeIds,i=t.valueOffsets;if(Sa.call(this,r),e.mode===ze.Sparse)return Pa.call(this,t);if(e.mode===ze.Dense){if(0>=t.offset)return Sa.call(this,i),Pa.call(this,t);var o=r.reduce(function(t,e){return Math.max(t,e)},r[0]),a=new Int32Array(o+1);o=new Int32Array(o+1).fill(-1);var s=new Int32Array(n);i=wt.rebaseValueOffsets(-i[0],n,i);for(var u=void 0,c=void 0,l=-1;++l<n;)-1===(c=o[u=r[l]])&&(c=o[u]=i[u]),s[l]=i[l]-c,++a[u];for(Sa.call(this,s),r=void 0,s=-1,i=e.children.length;++s<i;)(r=t.getChildAt(s))&&(u=e.typeIds[s],this.visit(r.slice(o[u],Math.min(n,a[u]))))}return this},n.visitInterval=Aa,n.visitFixedSizeList=ja,n.visitMap=Pa;var Ra=new Uint8Array(64).fill(0);function Ia(){this.position=0,this.Ib=!1,this.U=new ji,this.schema=null,this.ic=[],this.nc=[]}function ka(t,e){var n=Uo.encode(e),r=n.byteLength,i=r+4+7&-8,o=i-r-4;return e.headerType===He.RecordBatch?t.nc.push(new ni(i,e.bodyLength,t.position)):e.headerType===He.DictionaryBatch&&t.ic.push(new ni(i,e.bodyLength,t.position)),xa(t,Int32Array.of(i-4)),0<r&&xa(t,n),Ma(t,o)}function xa(t,e){return e&&0<e.byteLength&&(t.U.write(e),t.position+=e.byteLength),t}function Ma(t,e){return 0<e?xa(t,Ra.subarray(0,e)):t}function Ca(t,e,n,r){r=void 0!==r&&r;var i=Ea.Lc(e),o=i.S;Fa(ka(t,e=Uo.from(new zo(new Vo(e.length,i.T,i.fc),n,r),i.byteLength)),o)}function Fa(t,e){for(var n,r,i,o=-1,a=e.length;++o<a;)(n=e[o])&&0<(r=n.byteLength)&&(xa(t,n),0<(i=(r+7&-8)-r)&&Ma(t,i))}function La(t,e){for(var n=(e=i.F(e)).next();!n.done;n=e.next()){var r=i.F(n.value);if(n=r.next().value,(r=r.next().value[0].type.dictionaryVector)instanceof _i)for(var o=-1,a=(r=r.chunks).length;++o<a;)Ca(t,r[o],n,0<o);else Ca(t,r,n,!1)}}function Na(t){Ia.apply(this,arguments)}function Da(t){Ia.apply(this,arguments)}function Ba(t,e,n){e=void 0===e?[]:e,_i.call(this,t.type,_i.flatten.apply(_i,i.A(e)),n),this.td=t}function Ua(t){Ei.apply(this,arguments)}function Va(t){Ei.apply(this,arguments)}function za(t){Ei.call(this,t,void 0,t.type.unit+1)}function Ga(t){za.apply(this,arguments)}function Wa(t){za.apply(this,arguments)}function Ha(t){Ei.call(this,t,void 0,4)}function Xa(t){Ei.call(this,t,void 0,1),this.Wb=Mt.new(t.clone(this.type.indices))}function qa(t){Ei.call(this,t,void 0,t.type.byteWidth)}function Ya(t){Ei.call(this,t,void 0,t.type.listSize)}function Za(t){Ei.apply(this,arguments)}function Ka(t){Za.apply(this,arguments)}function Qa(t){Za.apply(this,arguments)}function Ja(t){Za.apply(this,arguments)}function $a(t){Ei.call(this,t,void 0,t.type.unit+1)}function ts(t){$a.apply(this,arguments)}function es(t){$a.apply(this,arguments)}function ns(t){Ei.call(this,t,void 0,1+Number(32<t.type.bitWidth))}function rs(t){ns.apply(this,arguments)}function is(t){ns.apply(this,arguments)}function os(t){ns.apply(this,arguments)}function as(t){ns.apply(this,arguments)}function ss(t){ns.apply(this,arguments)}function us(t){ns.apply(this,arguments)}function cs(t){ns.apply(this,arguments)}function ls(t){ns.apply(this,arguments)}function fs(t){Ei.apply(this,arguments)}function hs(){Ei.apply(this,arguments),this.rowProxy=bi.new(this.type.children||[],!0)}function ds(t){Ei.apply(this,arguments)}function vs(t){Ei.call(this,t,void 0,2)}function ps(t){vs.apply(this,arguments)}function gs(t){vs.apply(this,arguments)}function ys(t){vs.apply(this,arguments)}function bs(t){vs.apply(this,arguments)}function ms(t){Ei.call(this,t,void 0,1+Number(32<t.type.bitWidth))}function _s(t){ms.apply(this,arguments)}function ws(t){ms.apply(this,arguments)}function Os(t){ms.apply(this,arguments)}function Es(t){ms.apply(this,arguments)}function Ss(t){Ei.apply(this,arguments)}function As(t){Ss.apply(this,arguments)}function Ts(t){Ss.apply(this,arguments)}i.m(),i.M(),i.h(Ia,at),Ia.throughNode=function(){throw Error('"throughNode" not available in this environment')},Ia.throughDOM=function(){throw Error('"throughDOM" not available in this environment')},Ia.prototype.toUint8Array=function(t){return this.U.toUint8Array(void 0!==t&&t)},Ia.prototype[Symbol.asyncIterator]=function(){return i.m(),i.M(),this.U[Symbol.asyncIterator]()},(n=Ia.prototype).toReadableDOMStream=function(t){return this.U.toReadableDOMStream(t)},n.toReadableNodeStream=function(t){return this.U.toReadableNodeStream(t)},n.close=function(){return this.reset().U.close()},n.abort=function(t){return this.reset().U.abort(t)},n.reset=function(t,e){return(t=void 0===t?this.U:t)===this.U||t instanceof ji?this.U=t:(this.U=new ji,!t||t instanceof at||!ct(t,"abort","getWriter")?t&&!(t instanceof at)&&ct(t,"write","cork","uncork","end")&&function t(e,n,r){return t(e.Ed||(e.Ed=e.toReadableNodeStream()),n,r)}(this.toReadableNodeStream(),t):this.toReadableDOMStream().pipeTo(t)),this.position=0,this.schema=null,this.Ib=!1,this.ic=[],this.nc=[],e instanceof Xr&&(this.Ib=!0,this.schema=e,this.$b(e)),this},n.write=function(t){if(!this.U)throw Error("RecordBatchWriter is closed");if(!this.Ib&&(this.Ib=!0)&&this.$b(this.schema=t.schema),t.schema!==this.schema)throw Error("Schemas unequal");var e=Ea.Lc(t),n=e.S;Fa(ka(this,t=Uo.from(new Vo(t.length,e.T,e.fc),e.byteLength)),n)},n.$b=function(t){La(ka(this,Uo.from(t)),t.dictionaryFields)},i.global.Object.defineProperties(Ia.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){return this.U.closed}}}),i.h(Na,Ia),Na.writeAll=function(t){var e=new Na;if(!ct(t,Symbol.asyncIterator)){for(var n=i.F(t),r=n.next();!r.done;r=n.next())e.write(r.value);return e.close(),e}return function(){var n,r,o;return i.o(function(a){switch(a.i){case 1:n=i.jb(t);case 2:return s(a,n.next(),5);case 5:if((r=a.l).done){a.j(4);break}o=r.value,e.write(o),a.j(2);break;case 4:return e.close(),a.return(e)}})}()},Na.prototype.close=function(){var t=$r.encode(new $r(this.schema,Xe.V4,this.nc,this.ic));return xa(xa(xa(this,t),Int32Array.of(t.byteLength)),ia),Ia.prototype.close.call(this)},Na.prototype.$b=function(t){La(Ma(xa(this,ia),2),t.dictionaryFields)},i.h(Da,Ia),Da.writeAll=function(t){var e=new Da;if(!ct(t,Symbol.asyncIterator)){for(var n=i.F(t),r=n.next();!r.done;r=n.next())e.write(r.value);return e.close(),e}return function(){var n,r,o;return i.o(function(a){switch(a.i){case 1:n=i.jb(t);case 2:return s(a,n.next(),5);case 5:if((r=a.l).done){a.j(4);break}o=r.value,e.write(o),a.j(2);break;case 4:return e.close(),a.return(e)}})}()},Da.prototype.close=function(){return Ma(this,4),Ia.prototype.close.call(this)},i.h(Ba,_i),Ba.prototype.slice=function(t,e){return new Ba(this.field,_i.prototype.slice.call(this,t,e).chunks)},Ba.prototype.getChildAt=function(t){if(0>t||t>=this.numChildren)return null;var e,n=this.w||(this.w=[]);if(e=n[t])return e;if(e=(this.type.children||[])[t]){var r=this.chunks.map(function(e){return e.getChildAt(t)}).filter(function(t){return null!=t});if(0<r.length)return n[t]=new Ba(e,r)}return null},i.global.Object.defineProperties(Ba.prototype,{field:{configurable:!0,enumerable:!0,get:function(){return this.td}},name:{configurable:!0,enumerable:!0,get:function(){return this.field.name}}}),i.h(Ua,Ei),Ua.prototype.asUtf8=function(){return Mt.new(this.data.clone(new Rn))},i.h(Va,Ei),Va.from=function(t){var e=0,n=ci.packBools(function n(){var r,o,a;return i.H.I(n,function(n){return 1==n.i&&(r=i.F(t),o=r.next()),3!=n.i?o.done?n.j(0):(a=o.value,e++,s(n,a,3)):(o=r.next(),n.j(2))})}());return Mt.new(li.Bool(new Mn,0,e,0,null,n))},i.h(za,Ei),za.from=function(t,e){switch(e=void 0===e?Be.MILLISECOND:e){case Be.DAY:return e=Int32Array.from(t.map(function(t){return t.valueOf()/864e5})),Mt.new(li.Date(new Hn,0,t.length,0,null,e));case Be.MILLISECOND:return e=Qi.Int64.convertArray(t.map(function(t){return t.valueOf()})),Mt.new(li.Date(new Xn,0,t.length,0,null,e))}throw new TypeError('Unrecognized date unit "'+Be[e]+'"')},i.h(Ga,za),i.h(Wa,za),i.h(Ha,Ei),i.h(Xa,Ei),Xa.from=function(t,e,n){return t=new zr(t.type,e,null,null,t),Mt.new(li.Dictionary(t,0,n.length,0,null,n))},(n=Xa.prototype).Pb=function(){},n.getKey=function(t){return this.indices.get(t)},n.getValue=function(t){return this.dictionary.get(t)},n.isValid=function(t){return this.indices.isValid(t)},n.reverseLookup=function(t){return this.dictionary.indexOf(t)},i.global.Object.defineProperties(Xa.prototype,{indices:{configurable:!0,enumerable:!0,get:function(){return this.Wb}},dictionary:{configurable:!0,enumerable:!0,get:function(){return this.type.dictionaryVector}}}),i.h(qa,Ei),i.h(Ya,Ei),i.h(Za,Ei),Za.from=function(t){switch(t.constructor){case Uint16Array:return Mt.new(li.Float(new On,0,t.length,0,null,t));case Float32Array:return Mt.new(li.Float(new En,0,t.length,0,null,t));case Float64Array:return Mt.new(li.Float(new Sn,0,t.length,0,null,t))}throw new TypeError("Unrecognized Float data")},i.h(Ka,Za),i.h(Qa,Za),i.h(Ja,Za),i.h($a,Ei),i.h(ts,$a),i.h(es,$a),i.h(ns,Ei),ns.from=function(t,e){if(!0===e)return t instanceof Int32Array?Mt.new(li.Int(new dn,0,t.length,0,null,t)):Mt.new(li.Int(new yn,0,t.length,0,null,t));switch(t.constructor){case Int8Array:return Mt.new(li.Int(new ln,0,t.length,0,null,t));case Int16Array:return Mt.new(li.Int(new fn,0,t.length,0,null,t));case Int32Array:return Mt.new(li.Int(new hn,0,t.length,0,null,t));case Uint8Array:return Mt.new(li.Int(new vn,0,t.length,0,null,t));case Uint16Array:return Mt.new(li.Int(new pn,0,t.length,0,null,t));case Uint32Array:return Mt.new(li.Int(new gn,0,t.length,0,null,t))}throw new TypeError("Unrecognized Int data")},i.h(rs,ns),i.h(is,ns),i.h(os,ns),i.h(as,ns),i.h(ss,ns),i.h(us,ns),i.h(cs,ns),i.h(ls,ns),i.h(fs,Ei),i.h(hs,Ei),hs.prototype.asStruct=function(){return Mt.new(this.data.clone(new mr(this.type.children)))},i.h(ds,Ei),i.h(vs,Ei),i.h(ps,vs),i.h(gs,vs),i.h(ys,vs),i.h(bs,vs),i.h(ms,Ei),i.h(_s,ms),i.h(ws,ms),i.h(Os,ms),i.h(Es,ms),i.h(Ss,Ei),i.global.Object.defineProperties(Ss.prototype,{typeIdToChildIndex:{configurable:!0,enumerable:!0,get:function(){return this.type.typeIdToChildIndex}}}),i.h(As,Ss),i.global.Object.defineProperties(As.prototype,{valueOffsets:{configurable:!0,enumerable:!0,get:function(){return this.data.valueOffsets}}}),i.h(Ts,Ss);var js,Ps=new Di("utf-8");function Rs(){}function Is(t,e,n,r){var i=e[n];e=e[n+1],null!=i&&null!=e&&t.set(r.subarray(0,e-i),i)}function ks(t,e,n){t.values[e]=n.valueOf()/864e5|0}function xs(t,e,n){t=t.values,e*=2,n=n.valueOf(),t[e]=n%4294967296|0,t[e+1]=n/4294967296|0}function Ms(t,e,n){t.values[t.stride*e]=n}function Cs(t,e,n){t.values[t.stride*e]=32767*n+32767}function Fs(t,e,n){var r=t.stride;t.values.set(n.subarray(0,r),r*e)}function Ls(t,e,n){n/=1e3,(t=t.values)[e*=2]=n%4294967296|0,t[e+1]=n/4294967296|0}function Ns(t,e,n){(t=t.values)[e*=2]=n%4294967296|0,t[e+1]=n/4294967296|0}function Ds(t,e,n){(t=t.values)[e*=2]=n/1e3%4294967296|0,t[e+1]=n/1e3/4294967296|0}function Bs(t,e,n){(t=t.values)[e*=2]=n/1e6%4294967296|0,t[e+1]=n/1e6/4294967296|0}function Us(t,e,n){t.values[t.stride*e]=n}function Vs(t,e,n){t.values[t.stride*e]=n}function zs(t,e,n){t.values.set(n.subarray(0,2),2*e)}function Gs(t,e,n){t.values.set(n.subarray(0,2),2*e)}function Ws(t,e,n){t.type.children.forEach(function(r,i){r=r.name,(i=t.getChildAt(i))&&i.set(e,n[r])})}function Hs(t,e,n){var r=t.getChildAt(t.type.typeIdToChildIndex[t.typeIds[e]]);r&&r.set(t.valueOffsets[e],n)}function Xs(t,e,n){(t=t.getChildAt(t.type.typeIdToChildIndex[t.typeIds[e]]))&&t.set(e,n)}function qs(t,e,n){t.values.set(n.subarray(0,2),2*e)}function Ys(t,e,n){t.values[e]=12*n[0]+n[1]%12}js=Ps.encode.bind(Ps),i.h(Rs,Vi),(n=Rs.prototype).visitBool=function(t,e,n){var r=t.values;t=t.offset+e,n?r[t>>3]|=1<<t%8:r[t>>3]&=~(1<<t%8)},n.visitInt=function(t,e,n){64>t.type.bitWidth?Ms(t,e,n):Fs(t,e,n)},n.Na=Ms,n.Ka=Ms,n.La=Ms,n.Ma=Fs,n.ab=Ms,n.Ya=Ms,n.Za=Ms,n.$a=Fs,n.visitFloat=function(t,e,n){t.type.precision!==Ve.HALF?Ms(t,e,n):Cs(t,e,n)},n.Ha=Cs,n.Ia=Ms,n.Ja=Ms,n.visitUtf8=function(t,e,n){Is(t.values,t.valueOffsets,e,js(n))},n.visitBinary=function(t,e,n){return Is(t.values,t.valueOffsets,e,n)},n.visitFixedSizeBinary=function(t,e,n){var r=t.stride;t.values.set(n.subarray(0,r),r*e)},n.visitDate=function(t,e,n){t.type.unit===Be.DAY?ks(t,e,n):xs(t,e,n)},n.Fa=ks,n.Ga=xs,n.visitTimestamp=function(t,e,n){switch(t.type.unit){case Ue.SECOND:return Ls(t,e,n);case Ue.MILLISECOND:return Ns(t,e,n);case Ue.MICROSECOND:return Ds(t,e,n);case Ue.NANOSECOND:return Bs(t,e,n)}},n.Xa=Ls,n.Va=Ns,n.Ua=Ds,n.Wa=Bs,n.visitTime=function(t,e,n){switch(t.type.unit){case Ue.SECOND:return Us(t,e,n);case Ue.MILLISECOND:return Vs(t,e,n);case Ue.MICROSECOND:return zs(t,e,n);case Ue.NANOSECOND:return Gs(t,e,n)}},n.Ta=Us,n.Ra=Vs,n.Qa=zs,n.Sa=Gs,n.visitDecimal=function(t,e,n){t.values.set(n.subarray(0,4),4*e)},n.visitList=function(t,e,n){var r=t.getChildAt(0),i=t.valueOffsets,o=t.stride;t=-1;var a=i[e*o];for(e=Math.min(n.length,i[e*o+1]-a);a<e;)r.set(a++,n.get(++t))},n.visitStruct=Ws,n.visitUnion=function(t,e,n){t.type.mode===ze.Dense?Hs(t,e,n):Xs(t,e,n)},n.ma=Hs,n.na=Xs,n.visitDictionary=function(t,e,n){return t.dictionary.set(t.indices.get(e),n)},n.visitInterval=function(t,e,n){t.type.unit===We.DAY_TIME?qs(t,e,n):Ys(t,e,n)},n.Oa=qs,n.Pa=Ys,n.visitFixedSizeList=function(t,e,n){var r=t.getChildAt(0),i=-1;for(e*=t=t.stride;++i<t;)r.set(e+i,n.get(++i))},n.visitMap=Ws;var Zs=new Rs;function Ks(t){Ei.apply(this,arguments)}i.h(Ks,Ei),Ks.from=function(t){var e=t.length,n=js(t.join(""));return t=t.reduce(function(t,e,n){return t[n+1]=t[n]+e.length,t},new Uint32Array(t.length+1)),Mt.new(li.Utf8(new Rn,0,e,0,null,t,n))},Ks.prototype.asBinary=function(){return Mt.new(this.data.clone(new An))};var Qs,Js={get pb(){return bi},get Vector(){return Mt},get BaseVector(){return Ei},get BinaryVector(){return Ua},get BoolVector(){return Va},get ChunkedVector(){return _i},get DateVector(){return za},get DateDayVector(){return Ga},get DateMillisecondVector(){return Wa},get DecimalVector(){return Ha},get DictionaryVector(){return Xa},get FixedSizeBinaryVector(){return qa},get FixedSizeListVector(){return Ya},get FloatVector(){return Za},get Float16Vector(){return Ka},get Float32Vector(){return Qa},get Float64Vector(){return Ja},get IntervalVector(){return $a},get IntervalDayTimeVector(){return ts},get IntervalYearMonthVector(){return es},get IntVector(){return ns},get Int8Vector(){return rs},get Int16Vector(){return is},get Int32Vector(){return os},get Int64Vector(){return as},get Uint8Vector(){return ss},get Uint16Vector(){return us},get Uint32Vector(){return cs},get Uint64Vector(){return ls},get ListVector(){return fs},get MapVector(){return hs},get NullVector(){return ds},get StructVector(){return Ai},get TimestampVector(){return vs},get TimestampSecondVector(){return ps},get TimestampMillisecondVector(){return gs},get TimestampMicrosecondVector(){return ys},get TimestampNanosecondVector(){return bs},get TimeVector(){return ms},get TimeSecondVector(){return _s},get TimeMillisecondVector(){return ws},get TimeMicrosecondVector(){return Os},get TimeNanosecondVector(){return Es},get UnionVector(){return Ss},get DenseUnionVector(){return As},get SparseUnionVector(){return Ts},get Utf8Vector(){return Ks}},$s=new Ni("utf-8");function tu(){}function eu(t,e){return 4294967296*t[e+1]+(t[e]>>>0)}function nu(t,e,n){var r=e[n];return e=e[n+1],null!=r&&null!=e?t.subarray(r,e):null}function ru(t,e){return new Date(864e5*t.values[e])}function iu(t,e){return new Date(eu(t.values,2*e))}function ou(t,e){return t.values[t.stride*e]}function au(t,e){return(t.values[t.stride*e]-32767)/32767}function su(t,e){var n=t.stride;return t.values.subarray(n*e,n*(e+1))}function uu(t,e){return 1e3*eu(t.values,2*e)}function cu(t,e){return eu(t.values,2*e)}function lu(t,e){return(t=t.values)[(e*=2)+1]/1e3*4294967296+(t[e]>>>0)/1e3}function fu(t,e){return(t=t.values)[(e*=2)+1]/1e6*4294967296+(t[e]>>>0)/1e6}function hu(t,e){return t.values[t.stride*e]}function du(t,e){return t.values[t.stride*e]}function vu(t,e){return t.values.subarray(2*e,2*(e+1))}function pu(t,e){return t.values.subarray(2*e,2*(e+1))}function gu(t,e){return t.rowProxy.bind(t,e)}function yu(t,e){var n=t.getChildAt(t.type.typeIdToChildIndex[t.typeIds[e]]);return n?n.get(t.valueOffsets[e]):null}function bu(t,e){return(t=t.getChildAt(t.type.typeIdToChildIndex[t.typeIds[e]]))?t.get(e):null}function mu(t,e){return t.values.subarray(2*e,2*(e+1))}function _u(t,e){return t=t.values[e],(e=new Int32Array(2))[0]=t/12|0,e[1]=t%12|0,e}Qs=$s.decode.bind($s),i.h(tu,Vi),(n=tu.prototype).visitNull=function(){return null},n.visitBool=function(t,e){return e=t.offset+e,0!=(t.values[e>>3]&1<<e%8)},n.visitInt=function(t,e){return 64>t.type.bitWidth?ou(t,e):su(t,e)},n.Na=ou,n.Ka=ou,n.La=ou,n.Ma=su,n.ab=ou,n.Ya=ou,n.Za=ou,n.$a=su,n.visitFloat=function(t,e){return t.type.precision!==Ve.HALF?ou(t,e):au(t,e)},n.Ha=au,n.Ia=ou,n.Ja=ou,n.visitUtf8=function(t,e){return null!==(t=nu(t.values,t.valueOffsets,e))?Qs(t):null},n.visitBinary=function(t,e){return nu(t.values,t.valueOffsets,e)},n.visitFixedSizeBinary=function(t,e){var n=t.stride;return t.values.subarray(n*e,n*(e+1))},n.visitDate=function(t,e){return t.type.unit===Be.DAY?ru(t,e):iu(t,e)},n.Fa=ru,n.Ga=iu,n.visitTimestamp=function(t,e){switch(t.type.unit){case Ue.SECOND:return uu(t,e);case Ue.MILLISECOND:return cu(t,e);case Ue.MICROSECOND:return lu(t,e);case Ue.NANOSECOND:return fu(t,e)}},n.Xa=uu,n.Va=cu,n.Ua=lu,n.Wa=fu,n.visitTime=function(t,e){switch(t.type.unit){case Ue.SECOND:return hu(t,e);case Ue.MILLISECOND:return du(t,e);case Ue.MICROSECOND:return vu(t,e);case Ue.NANOSECOND:return pu(t,e)}},n.Ta=hu,n.Ra=du,n.Qa=vu,n.Sa=pu,n.visitDecimal=function(t,e){return t.values.subarray(4*e,4*(e+1))},n.visitList=function(t,e){var n=t.getChildAt(0),r=t.valueOffsets;return t=t.stride,n.slice(r[e*t],r[e*t+1])},n.visitStruct=gu,n.visitUnion=function(t,e){return t.type.mode===ze.Dense?yu(t,e):bu(t,e)},n.ma=yu,n.na=bu,n.visitDictionary=function(t,e){return t.dictionary.get(t.indices.get(e))},n.visitInterval=function(t,e){return t.type.unit===We.DAY_TIME?mu(t,e):_u(t,e)},n.Oa=mu,n.Pa=_u,n.visitFixedSizeList=function(t,e){var n=t.getChildAt(0);return t=t.stride,n.slice(e*t,(e+1)*t)},n.visitMap=gu;var wu=new tu;function Ou(){}function Eu(t,e,n){if(void 0===e)return-1;if(null===e){t:{var r=t.nullBitmap;if(r&&!(0>=t.nullCount))for(e=0,n=(t=i.F(ci.iterateBits(r,t.data.offset+(n||0),t.length,r,ci.getBool))).next();!n.done;n=t.next()){if(!n.value){t=e;break t}++e}t=-1}return t}for(e=mi.createElementComparator(e),n=(n||0)-1,r=t.length;++n<r;)if(e(t.get(n)))return n;return-1}function Su(t,e,n){e=mi.createElementComparator(e),n=(n||0)-1;for(var r=t.length;++n<r;)if(e(t.get(n)))return n;return-1}i.h(Ou,Vi),(n=Ou.prototype).visitNull=function(t,e){return null===e&&0<t.length?0:-1},n.visitBool=Eu,n.visitInt=Eu,n.Na=Eu,n.Ka=Eu,n.La=Eu,n.Ma=Eu,n.ab=Eu,n.Ya=Eu,n.Za=Eu,n.$a=Eu,n.visitFloat=Eu,n.Ha=Eu,n.Ia=Eu,n.Ja=Eu,n.visitUtf8=Eu,n.visitBinary=Eu,n.visitFixedSizeBinary=Eu,n.visitDate=Eu,n.Fa=Eu,n.Ga=Eu,n.visitTimestamp=Eu,n.Xa=Eu,n.Va=Eu,n.Ua=Eu,n.Wa=Eu,n.visitTime=Eu,n.Ta=Eu,n.Ra=Eu,n.Qa=Eu,n.Sa=Eu,n.visitDecimal=Eu,n.visitList=Eu,n.visitStruct=Eu,n.visitUnion=Eu,n.ma=Su,n.na=Su,n.visitDictionary=Eu,n.visitInterval=Eu,n.Oa=Eu,n.Pa=Eu,n.visitFixedSizeList=Eu,n.visitMap=Eu;var Au=new Ou;function Tu(){}function ju(t){if(0<t.nullCount)return function(t){var e=wu.getVisitFn(t);return ci.iterateBits(t.nullBitmap,t.offset,t.length,t,function(t,n,r,i){return 0!=(r&1<<i)?e(t,n):null})}(t);var e=t.type,n=t.typeId,r=t.length;return 1===t.stride&&(n===Ze.Timestamp||n===Ze.Int&&64!==e.bitWidth||n===Ze.Time&&64!==e.bitWidth||n===Ze.Float&&0<e.precision)?(i.m(),i.D(),t.values.subarray(0,r)[Symbol.iterator]()):function e(n){var o;return i.H.I(e,function(e){return 1==e.i&&(o=-1),++o<r?s(e,n(t,o),2):e.j(0)})}(wu.getVisitFn(t))}i.h(Tu,Vi),(n=Tu.prototype).visitNull=ju,n.visitBool=ju,n.visitInt=ju,n.Na=ju,n.Ka=ju,n.La=ju,n.Ma=ju,n.ab=ju,n.Ya=ju,n.Za=ju,n.$a=ju,n.visitFloat=ju,n.Ha=ju,n.Ia=ju,n.Ja=ju,n.visitUtf8=ju,n.visitBinary=ju,n.visitFixedSizeBinary=ju,n.visitDate=ju,n.Fa=ju,n.Ga=ju,n.visitTimestamp=ju,n.Xa=ju,n.Va=ju,n.Ua=ju,n.Wa=ju,n.visitTime=ju,n.Ta=ju,n.Ra=ju,n.Qa=ju,n.Sa=ju,n.visitDecimal=ju,n.visitList=ju,n.visitStruct=ju,n.visitUnion=ju,n.ma=ju,n.na=ju,n.visitDictionary=ju,n.visitInterval=ju,n.Oa=ju,n.Pa=ju,n.visitFixedSizeList=ju,n.visitMap=ju;var Pu=new Tu;function Ru(){}function Iu(t){var e=t.type,n=t.length,r=t.stride;switch(e.typeId){case Ze.Int:case Ze.Decimal:case Ze.Time:case Ze.Timestamp:return t.values.subarray(0,n*r);case Ze.Float:return i.m(),i.D(),e.precision===Ve.HALF?new Float32Array(t[Symbol.iterator]()):t.values.subarray(0,n*r)}return[].concat(i.A(Pu.visit(t)))}i.h(Ru,Vi),(n=Ru.prototype).visitNull=Iu,n.visitBool=Iu,n.visitInt=Iu,n.Na=Iu,n.Ka=Iu,n.La=Iu,n.Ma=Iu,n.ab=Iu,n.Ya=Iu,n.Za=Iu,n.$a=Iu,n.visitFloat=Iu,n.Ha=Iu,n.Ia=Iu,n.Ja=Iu,n.visitUtf8=Iu,n.visitBinary=Iu,n.visitFixedSizeBinary=Iu,n.visitDate=Iu,n.Fa=Iu,n.Ga=Iu,n.visitTimestamp=Iu,n.Xa=Iu,n.Va=Iu,n.Ua=Iu,n.Wa=Iu,n.visitTime=Iu,n.Ta=Iu,n.Ra=Iu,n.Qa=Iu,n.Sa=Iu,n.visitDecimal=Iu,n.visitList=Iu,n.visitStruct=Iu,n.visitUnion=Iu,n.ma=Iu,n.na=Iu,n.visitDictionary=Iu,n.visitInterval=Iu,n.Oa=Iu,n.Pa=Iu,n.visitFixedSizeList=Iu,n.visitMap=Iu;var ku=new Ru;function xu(t,e){return t+e}function Mu(t){return"Cannot compute the byte width of variable-width column "+t}function Cu(){}function Fu(t,e){return(e||[]).map(function(e){return t.visit(e.type)})}i.h(Cu,Vi),(n=Cu.prototype).visitNull=function(){return 0},n.visitInt=function(t){return t.bitWidth/8},n.visitFloat=function(t){return t.ArrayType.BYTES_PER_ELEMENT},n.visitBinary=function(t){throw Error(Mu(t))},n.visitUtf8=function(t){throw Error(Mu(t))},n.visitBool=function(){return.125},n.visitDecimal=function(){return 16},n.visitDate=function(t){return 4*(t.unit+1)},n.visitTime=function(t){return t.bitWidth/8},n.visitTimestamp=function(t){return t.unit===Ue.SECOND?4:8},n.visitInterval=function(t){return 4*(t.unit+1)},n.visitList=function(t){throw Error(Mu(t))},n.visitStruct=function(t){return Fu(this,t.children).reduce(xu,0)},n.visitUnion=function(t){return Fu(this,t.children).reduce(xu,0)},n.visitFixedSizeBinary=function(t){return t.byteWidth},n.visitFixedSizeList=function(t){return t.listSize*Fu(this,t.children).reduce(xu,0)},n.visitMap=function(t){return Fu(this,t.children).reduce(xu,0)},n.visitDictionary=function(t){return this.visit(t.indices)};var Lu=new Cu;function Nu(){}i.h(Nu,Vi),(n=Nu.prototype).visitNull=function(){return Js.NullVector},n.visitBool=function(){return Js.BoolVector},n.visitInt=function(){return Js.IntVector},n.Na=function(){return Js.Int8Vector},n.Ka=function(){return Js.Int16Vector},n.La=function(){return Js.Int32Vector},n.Ma=function(){return Js.Int64Vector},n.ab=function(){return Js.Uint8Vector},n.Ya=function(){return Js.Uint16Vector},n.Za=function(){return Js.Uint32Vector},n.$a=function(){return Js.Uint64Vector},n.visitFloat=function(){return Js.FloatVector},n.Ha=function(){return Js.Float16Vector},n.Ia=function(){return Js.Float32Vector},n.Ja=function(){return Js.Float64Vector},n.visitUtf8=function(){return Js.Utf8Vector},n.visitBinary=function(){return Js.BinaryVector},n.visitFixedSizeBinary=function(){return Js.FixedSizeBinaryVector},n.visitDate=function(){return Js.DateVector},n.Fa=function(){return Js.DateDayVector},n.Ga=function(){return Js.DateMillisecondVector},n.visitTimestamp=function(){return Js.TimestampVector},n.Xa=function(){return Js.TimestampSecondVector},n.Va=function(){return Js.TimestampMillisecondVector},n.Ua=function(){return Js.TimestampMicrosecondVector},n.Wa=function(){return Js.TimestampNanosecondVector},n.visitTime=function(){return Js.TimeVector},n.Ta=function(){return Js.TimeSecondVector},n.Ra=function(){return Js.TimeMillisecondVector},n.Qa=function(){return Js.TimeMicrosecondVector},n.Sa=function(){return Js.TimeNanosecondVector},n.visitDecimal=function(){return Js.DecimalVector},n.visitList=function(){return Js.ListVector},n.visitStruct=function(){return Js.StructVector},n.visitUnion=function(){return Js.UnionVector},n.ma=function(){return Js.DenseUnionVector},n.na=function(){return Js.SparseUnionVector},n.visitDictionary=function(){return Js.DictionaryVector},n.visitInterval=function(){return Js.IntervalVector},n.Oa=function(){return Js.IntervalDayTimeVector},n.Pa=function(){return Js.IntervalYearMonthVector},n.visitFixedSizeList=function(){return Js.FixedSizeListVector},n.visitMap=function(){return Js.MapVector};var Du=new Nu;function Bu(t){return function(){return t(this)}}function Uu(t){return function(e,n){return t(this,e,n)}}Mt.new=function(t,e){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];return new(Function.prototype.bind.apply(Du.getVisitFn(t.type)(),[null,t].concat(i.A(n))))},(n=Ei.prototype).get=function(t){return wu.visit(this,t)},n.set=function(t,e){return Zs.visit(this,t,e)},n.indexOf=function(t,e){return Au.visit(this,t,e)},n.toArray=function(){return ku.visit(this)},n.getByteWidth=function(){return Lu.visit(this.type)},i.m(),i.D(),Ei.prototype[Symbol.iterator]=function(){return Pu.visit(this)},Ei.prototype.Pb=function(){var t=this.type;this.get=wu.getVisitFn(t).bind(this,this),this.set=Zs.getVisitFn(t).bind(this,this),this.indexOf=Au.getVisitFn(t).bind(this,this),this.toArray=ku.getVisitFn(t).bind(this,this),i.m(),i.D(),this[Symbol.iterator]=Pu.getVisitFn(t).bind(this,this),0<this.nullCount&&(this.get=function(t){return function(e){return this.isValid(e)?t.call(this,e):null}}(this.get),this.set=function(t){return function(e,n){ci.setBool(this.nullBitmap,this.offset+e,null!=n)&&t.call(this,e,n)}}(this.set))},Object.keys(Ze).filter(function(t){return t!==Ze.NONE&&t!==Ze[Ze.NONE]}).map(function(t){return Ze[t]}).filter(function(t){return"number"==typeof t}).forEach(function(t){switch(t){case Ze.Int:t=[Ze.Int8,Ze.Int16,Ze.Int32,Ze.Int64,Ze.Uint8,Ze.Uint16,Ze.Uint32,Ze.Uint64];break;case Ze.Float:t=[Ze.Float16,Ze.Float32,Ze.Float64];break;case Ze.Date:t=[Ze.DateDay,Ze.DateMillisecond];break;case Ze.Time:t=[Ze.TimeSecond,Ze.TimeMillisecond,Ze.TimeMicrosecond,Ze.TimeNanosecond];break;case Ze.Timestamp:t=[Ze.TimestampSecond,Ze.TimestampMillisecond,Ze.TimestampMicrosecond,Ze.TimestampNanosecond];break;case Ze.Interval:t=[Ze.IntervalDayTime,Ze.IntervalYearMonth];break;case Ze.Union:t=[Ze.DenseUnion,Ze.SparseUnion];break;default:t=[t]}t.forEach(function(t){var e=Du.visit(t);e.prototype.get=function(t){return function(e){return t(this,e)}}(wu.getVisitFn(t)),e.prototype.set=Uu(Zs.getVisitFn(t)),e.prototype.indexOf=Uu(Au.getVisitFn(t)),e.prototype.toArray=Bu(ku.getVisitFn(t)),e.prototype.getByteWidth=Bu(Lu.getVisitFn(t)),i.m(),i.D(),e.prototype[Symbol.iterator]=Bu(Pu.getVisitFn(t))})});var Vu={get pb(){return Js.pb},get Vector(){return Js.Vector},get BaseVector(){return Js.BaseVector},get BinaryVector(){return Js.BinaryVector},get BoolVector(){return Js.BoolVector},get ChunkedVector(){return Js.ChunkedVector},get DateVector(){return Js.DateVector},get DateDayVector(){return Js.DateDayVector},get DateMillisecondVector(){return Js.DateMillisecondVector},get DecimalVector(){return Js.DecimalVector},get DictionaryVector(){return Js.DictionaryVector},get FixedSizeBinaryVector(){return Js.FixedSizeBinaryVector},get FixedSizeListVector(){return Js.FixedSizeListVector},get FloatVector(){return Js.FloatVector},get Float16Vector(){return Js.Float16Vector},get Float32Vector(){return Js.Float32Vector},get Float64Vector(){return Js.Float64Vector},get IntervalVector(){return Js.IntervalVector},get IntervalDayTimeVector(){return Js.IntervalDayTimeVector},get IntervalYearMonthVector(){return Js.IntervalYearMonthVector},get IntVector(){return Js.IntVector},get Int8Vector(){return Js.Int8Vector},get Int16Vector(){return Js.Int16Vector},get Int32Vector(){return Js.Int32Vector},get Int64Vector(){return Js.Int64Vector},get Uint8Vector(){return Js.Uint8Vector},get Uint16Vector(){return Js.Uint16Vector},get Uint32Vector(){return Js.Uint32Vector},get Uint64Vector(){return Js.Uint64Vector},get ListVector(){return Js.ListVector},get MapVector(){return Js.MapVector},get NullVector(){return Js.NullVector},get StructVector(){return Js.StructVector},get TimestampVector(){return Js.TimestampVector},get TimestampSecondVector(){return Js.TimestampSecondVector},get TimestampMillisecondVector(){return Js.TimestampMillisecondVector},get TimestampMicrosecondVector(){return Js.TimestampMicrosecondVector},get TimestampNanosecondVector(){return Js.TimestampNanosecondVector},get TimeVector(){return Js.TimeVector},get TimeSecondVector(){return Js.TimeSecondVector},get TimeMillisecondVector(){return Js.TimeMillisecondVector},get TimeMicrosecondVector(){return Js.TimeMicrosecondVector},get TimeNanosecondVector(){return Js.TimeNanosecondVector},get UnionVector(){return Js.UnionVector},get DenseUnionVector(){return Js.DenseUnionVector},get SparseUnionVector(){return Js.SparseUnionVector},get Utf8Vector(){return Js.Utf8Vector}};function zu(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];if(n=null,e[0]instanceof Xr&&(n=e.shift()),e=e.reduce(function t(e,n){return Array.isArray(n)?n.reduce(t,e):[].concat(i.A(e),[n])},[]).filter(function(t){return t instanceof Ti}),!n&&!(n=e[0]&&e[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch with a Schema");this.wa=n,this.ld=e,this.md=0==e.length?new Ti(n,0,[]):1===e.length?e[0]:Vu.ChunkedVector.concat.apply(Vu.ChunkedVector,i.A(e)),this.aa=this.batchesUnion.length,this.Cd=this.schema.fields.length}function Gu(){}function Wu(t){this.X=t}function Hu(t){this.name=t}function Xu(){}function qu(t,e){this.left=t,this.right=e}function Yu(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];this.children=e}function Zu(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];e=e.reduce(function(t,e){return t.concat(e instanceof Zu?e.children:e)},[]),Yu.apply(this,i.A(e))}function Ku(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];e=e.reduce(function(t,e){return t.concat(e instanceof Ku?e.children:e)},[]),Yu.apply(this,i.A(e))}function Qu(t){qu.apply(this,arguments)}function Ju(t){qu.apply(this,arguments)}function $u(t){qu.apply(this,arguments)}function tc(t){this.we=t}function ec(t,e){this.next=t,this.re=e}i.m(),i.D(),zu.empty=function(){return new zu(new Xr([]),[])},zu.from=function(t){if(!t)return zu.empty();var e=la.from(t);return ct(e,"then")?function(){var t,n;return i.o(function(r){return 1==r.i?(t=zu,n=zu.from,s(r,e,3)):2!=r.i?s(r,n.call(t,r.l),2):r.return(r.l)})}():e.isSync()&&(e=e.open())?e.schema?new zu(e.schema,[].concat(i.A(e))):zu.empty():function(t){var e,n,r,o,a,u;return i.o(function(c){switch(c.i){case 1:return s(c,t,2);case 2:if(e=c.l,n=e.schema,r=[],!n){c.j(3);break}o=i.jb(e);case 4:return s(c,o.next(),7);case 7:if((a=c.l).done){c.j(6);break}u=a.value,r.push(u),c.j(4);break;case 6:return c.return(new zu(n,r));case 3:return c.return(zu.empty())}})}(e.open())},zu.fromAsync=function(t){return i.o(function(e){return 1==e.i?s(e,zu.from(t),2):e.return(e.l)})},zu.fromVectors=function(t,e){return new zu(Ti.from(t,e))},zu.fromStruct=function(t){var e=new Xr(t.type.children);return new zu(e,(t instanceof Vu.ChunkedVector?t.chunks:[t]).map(function(t){return new Ti(e,t.data)}))},zu.prototype.get=function(t){return this.batchesUnion.get(t)},zu.prototype.getColumn=function(t){return this.getColumnAt(this.getColumnIndex(t))},zu.prototype.getColumnAt=function(t){return 0>t||t>=this.numCols?null:1===this.batches.length?this.batches[0].getChildAt(t):new Ba(this.schema.fields[t],this.batches.map(function(e){return e.getChildAt(t)}))},zu.prototype.getColumnIndex=function(t){return this.schema.fields.findIndex(function(e){return e.name===t})},zu.prototype[Symbol.iterator]=function(){return i.m(),i.D(),this.batchesUnion[Symbol.iterator]()},zu.prototype.serialize=function(t,e){return(void 0===e||e?Da:Na).writeAll(this.batches).toUint8Array(!0)},zu.prototype.count=function(){return this.length},zu.prototype.select=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new zu(this.batches.map(function(t){return t.select.apply(t,i.A(e))}))},i.global.Object.defineProperties(zu.prototype,{schema:{configurable:!0,enumerable:!0,get:function(){return this.wa}},length:{configurable:!0,enumerable:!0,get:function(){return this.aa}},numCols:{configurable:!0,enumerable:!0,get:function(){return this.Cd}},batches:{configurable:!0,enumerable:!0,get:function(){return this.ld}},batchesUnion:{configurable:!0,enumerable:!0,get:function(){return this.md}}}),(n=Gu.prototype).eq=function(t){return t instanceof Gu||(t=new Wu(t)),new Qu(this,t)},n.le=function(t){return t instanceof Gu||(t=new Wu(t)),new Ju(this,t)},n.ge=function(t){return t instanceof Gu||(t=new Wu(t)),new $u(this,t)},n.lt=function(t){return new tc(this.ge(t))},n.gt=function(t){return new tc(this.le(t))},n.ne=function(t){return new tc(this.eq(t))},i.h(Wu,Gu),i.h(Hu,Gu),Hu.prototype.bind=function(t){if(!this.Cb){this.Cb=-1;for(var e=t.schema.fields,n=-1;++n<e.length;)if(e[n].name===this.name){this.Cb=n;break}if(0>this.Cb)throw Error('Failed to bind Col "'+this.name+'"')}return this.la=t.getChildAt(this.Cb),this.la.get.bind(this.la)},Xu.prototype.and=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new(Function.prototype.bind.apply(Zu,[null,this].concat(i.A(e))))},Xu.prototype.or=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new(Function.prototype.bind.apply(Ku,[null,this].concat(i.A(e))))},Xu.prototype.not=function(){return new tc(this)},i.h(qu,Xu),qu.prototype.bind=function(t){return this.left instanceof Wu?this.right instanceof Wu?this.Rb(this.left,this.right):this.Qb(t,this.left,this.right):this.right instanceof Wu?this.rb(t,this.left,this.right):this.Ob(t,this.left,this.right)},i.h(Yu,Xu),Yu.prototype.children=Object.freeze([]),i.h(Zu,Yu),Zu.prototype.bind=function(t){var e=this.children.map(function(e){return e.bind(t)});return function(t,n){return e.every(function(e){return e(t,n)})}},i.h(Ku,Yu),Ku.prototype.bind=function(t){var e=this.children.map(function(e){return e.bind(t)});return function(t,n){return e.some(function(e){return e(t,n)})}},i.h(Qu,qu),Qu.prototype.Rb=function(t,e){var n=t.X==e.X;return function(){return n}},Qu.prototype.Ob=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)==i(t,e)}},Qu.prototype.rb=function(t,e,n){var r=e.bind(t);if(e.la instanceof Xa){var i=e.la;if(i.dictionary!==this.kf){var o=i.reverseLookup(n.X);this.kf=i.dictionary,this.lf=o}else o=this.lf;return-1===o?function(){return!1}:function(t){return i.getKey(t)===o}}return function(t,e){return r(t,e)==n.X}},Qu.prototype.Qb=function(t,e,n){return this.rb(t,n,e)},i.h(Ju,qu),Ju.prototype.Rb=function(t,e){var n=t.X<=e.X;return function(){return n}},Ju.prototype.Ob=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)<=i(t,e)}},Ju.prototype.rb=function(t,e,n){var r=e.bind(t);return function(t,e){return r(t,e)<=n.X}},Ju.prototype.Qb=function(t,e,n){var r=n.bind(t);return function(t,n){return e.X<=r(t,n)}},i.h($u,qu),$u.prototype.Rb=function(t,e){var n=t.X>=e.X;return function(){return n}},$u.prototype.Ob=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)>=i(t,e)}},$u.prototype.rb=function(t,e,n){var r=e.bind(t);return function(t,e){return r(t,e)>=n.X}},$u.prototype.Qb=function(t,e,n){var r=n.bind(t);return function(t,n){return e.X>=r(t,n)}},i.h(tc,Xu),tc.prototype.bind=function(t){var e=this.we.bind(t);return function(t,n){return!e(t,n)}},i.h(ec,Xu),ec.prototype.bind=function(t){return this.re(t),this.next};var nc={};function rc(t){zu.apply(this,arguments)}function ic(t,e){var n=new Xr([new Zr("values",t.type),new Zr("counts",e.type)]);zu.call(this,new Ti(n,e.length,[t,e]))}function oc(t,e){this.batches=t,this.predicate=e}nc.Value=Gu,nc.Literal=Wu,nc.Col=Hu,nc.Predicate=Xu,nc.ComparisonPredicate=qu,nc.CombinationPredicate=Yu,nc.And=Zu,nc.Or=Ku,nc.Equals=Qu,nc.LTeq=Ju,nc.GTeq=$u,nc.Not=tc,nc.CustomPredicate=ec,nc.lit=function(t){return new Wu(t)},nc.col=function(t){return new Hu(t)},nc.and=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new(Function.prototype.bind.apply(Zu,[null].concat(i.A(e))))},nc.or=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return new(Function.prototype.bind.apply(Ku,[null].concat(i.A(e))))},nc.custom=function(t,e){return new ec(t,e)},zu.prototype.scan=function(t,e){return new rc(this.batches).scan(t,e)},zu.prototype.filter=function(t){return new rc(this.batches).filter(t)},zu.prototype.countBy=function(t){return new rc(this.batches).countBy(t)},i.h(rc,zu),rc.prototype.filter=function(t){return new oc(this.batches,t)},rc.prototype.scan=function(t,e){for(var n=this.batches,r=n.length,i=-1;++i<r;){var o=n[i];e&&e(o);for(var a=-1,s=o.length;++a<s;)t(a,o)}},rc.prototype.countBy=function(t){var e=this.batches,n=e.length;(t="string"==typeof t?new nc.Col(t):t).bind(e[n-1]);var r=t.la;if(!Qe.isDictionary(r.type))throw Error("countBy currently only supports dictionary-encoded columns");var i=Math.ceil(Math.log(r.dictionary.length)/Math.log(256));i=new(4==i?Uint32Array:2<=i?Uint16Array:Uint8Array)(r.dictionary.length);for(var o=-1;++o<n;){var a=e[o];t.bind(a);var s=t.la.indices,u=-1;for(a=a.length;++u<a;){var c=s.get(u);null!==c&&i[c]++}}return new ic(r.dictionary,ns.from(i))},i.h(ic,zu),ic.prototype.toJSON=function(){for(var t=this.getColumnAt(0),e=this.getColumnAt(1),n={},r=-1;++r<this.length;)n[t.get(r)]=e.get(r);return n},i.m(),i.D(),oc.prototype.scan=function(t,e){for(var n=this.batches,r=n.length,i=-1;++i<r;){var o=n[i];e&&e(o);for(var a=this.predicate.bind(o),s=-1,u=o.length;++s<u;)a(s,o)&&t(s,o)}},oc.prototype.count=function(){for(var t=0,e=this.batches,n=e.length,r=-1;++r<n;)for(var i=e[r],o=this.predicate.bind(i),a=-1,s=i.length;++a<s;)o(a,i)&&++t;return t},oc.prototype[Symbol.iterator]=function t(){var e,n,r,o,a,u,c,l=this;return i.H.I(t,function(t){if(1==t.i&&(e=l.batches,n=e.length,r=-1),5!=t.i){if(!(++r<n))return t.j(0);o=e[r],a=l.predicate.bind(o),u=-1,c=o.length}return++u<c?a(u,o)?s(t,o.get(u),5):t.j(5):t.j(2)})},oc.prototype.filter=function(t){return new oc(this.batches,this.predicate.and(t))},oc.prototype.countBy=function(t){var e=this.batches,n=e.length;(t="string"==typeof t?new nc.Col(t):t).bind(e[n-1]);var r=t.la;if(!Qe.isDictionary(r.type))throw Error("countBy currently only supports dictionary-encoded columns");var i=Math.ceil(Math.log(r.dictionary.length)/Math.log(256));i=new(4==i?Uint32Array:2<=i?Uint16Array:Uint8Array)(r.dictionary.length);for(var o=-1;++o<n;){var a=e[o],s=this.predicate.bind(a);t.bind(a);for(var u=t.la.indices,c=-1,l=a.length;++c<l;){var f=u.get(c);null!==f&&s(c,a)&&i[f]++}}return new ic(r.dictionary,ns.from(i))};var ac=Object.assign({},Qi,ci,wt,mi),sc={get ArrowType(){return De},get DateUnit(){return Be},get IntervalUnit(){return We},get MessageHeader(){return He},get MetadataVersion(){return Xe},get Precision(){return Ve},get TimeUnit(){return Ue},get Type(){return Ze},get UnionMode(){return ze},get VectorType(){return Ge},get Data(){return li},get DataType(){return Qe},get Null(){return en},get Bool(){return Mn},get Int(){return an},get Int8(){return ln},get Int16(){return fn},get Int32(){return hn},get Int64(){return dn},get Uint8(){return vn},get Uint16(){return pn},get Uint32(){return gn},get Uint64(){return yn},get Float(){return bn},get Float16(){return On},get Float32(){return En},get Float64(){return Sn},get Utf8(){return Rn},get Binary(){return An},get FixedSizeBinary(){return Rr},get Date_(){return Vn},get DateDay(){return Hn},get DateMillisecond(){return Xn},get Timestamp(){return er},get TimestampSecond(){return or},get TimestampMillisecond(){return ar},get TimestampMicrosecond(){return sr},get TimestampNanosecond(){return ur},get Time(){return qn},get TimeSecond(){return Qn},get TimeMillisecond(){return Jn},get TimeMicrosecond(){return $n},get TimeNanosecond(){return tr},get Decimal(){return Nn},get List(){return pr},get Struct(){return mr},get Union(){return Er},get DenseUnion(){return jr},get SparseUnion(){return Pr},get Dictionary(){return zr},get Interval(){return cr},get IntervalDayTime(){return dr},get IntervalYearMonth(){return vr},get FixedSizeList(){return Mr},get Map_(){return Nr},get Table(){return zu},get Column(){return Ba},get Schema(){return Xr},get Field(){return Zr},get Visitor(){return Vi},get pb(){return Vu.pb},get Vector(){return Vu.Vector},get BaseVector(){return Vu.BaseVector},get BinaryVector(){return Vu.BinaryVector},get BoolVector(){return Vu.BoolVector},get ChunkedVector(){return Vu.ChunkedVector},get DateVector(){return Vu.DateVector},get DateDayVector(){return Vu.DateDayVector},get DateMillisecondVector(){return Vu.DateMillisecondVector},get DecimalVector(){return Vu.DecimalVector},get DictionaryVector(){return Vu.DictionaryVector},get FixedSizeBinaryVector(){return Vu.FixedSizeBinaryVector},get FixedSizeListVector(){return Vu.FixedSizeListVector},get FloatVector(){return Vu.FloatVector},get Float16Vector(){return Vu.Float16Vector},get Float32Vector(){return Vu.Float32Vector},get Float64Vector(){return Vu.Float64Vector},get IntervalVector(){return Vu.IntervalVector},get IntervalDayTimeVector(){return Vu.IntervalDayTimeVector},get IntervalYearMonthVector(){return Vu.IntervalYearMonthVector},get IntVector(){return Vu.IntVector},get Int8Vector(){return Vu.Int8Vector},get Int16Vector(){return Vu.Int16Vector},get Int32Vector(){return Vu.Int32Vector},get Int64Vector(){return Vu.Int64Vector},get Uint8Vector(){return Vu.Uint8Vector},get Uint16Vector(){return Vu.Uint16Vector},get Uint32Vector(){return Vu.Uint32Vector},get Uint64Vector(){return Vu.Uint64Vector},get ListVector(){return Vu.ListVector},get MapVector(){return Vu.MapVector},get NullVector(){return Vu.NullVector},get StructVector(){return Vu.StructVector},get TimestampVector(){return Vu.TimestampVector},get TimestampSecondVector(){return Vu.TimestampSecondVector},get TimestampMillisecondVector(){return Vu.TimestampMillisecondVector},get TimestampMicrosecondVector(){return Vu.TimestampMicrosecondVector},get TimestampNanosecondVector(){return Vu.TimestampNanosecondVector},get TimeVector(){return Vu.TimeVector},get TimeSecondVector(){return Vu.TimeSecondVector},get TimeMillisecondVector(){return Vu.TimeMillisecondVector},get TimeMicrosecondVector(){return Vu.TimeMicrosecondVector},get TimeNanosecondVector(){return Vu.TimeNanosecondVector},get UnionVector(){return Vu.UnionVector},get DenseUnionVector(){return Vu.DenseUnionVector},get SparseUnionVector(){return Vu.SparseUnionVector},get Utf8Vector(){return Vu.Utf8Vector},get ByteStream(){return Pi},get AsyncByteStream(){return Ri},get AsyncByteQueue(){return ji},get RecordBatchReader(){return la},get RecordBatchFileReader(){return fa},get RecordBatchStreamReader(){return ha},get AsyncRecordBatchFileReader(){return va},get AsyncRecordBatchStreamReader(){return da},get RecordBatchWriter(){return Ia},get RecordBatchFileWriter(){return Na},get RecordBatchStreamWriter(){return Da},get MessageReader(){return ea},get AsyncMessageReader(){return na},get JSONMessageReader(){return ra},get Message(){return Uo},get RecordBatch(){return Ti},get Dataframe(){return rc},get FilteredDataFrame(){return oc},get CountByResult(){return ic},get predicate(){return nc}};Ot=function(t,e){if(ct(t,Symbol.asyncIterator))return function(t,e){function n(t,e){var n,r,o;return i.o(function(i){switch(i.i){case 1:n=t.desiredSize,r=null;case 2:if(!(o=null==n||0<n--)){i.j(4);break}return s(i,e.next(),5);case 5:o=!(r=i.l).done;case 4:if(!o){i.j(3);break}t.enqueue(r.value),i.j(2);break;case 3:r&&r.done&&t.close(),i.i=0}})}var r=null;return new ReadableStream(Object.assign({},e,{start:function(e){return i.o(function(o){return i.m(),i.M(),s(o,n(e,r||(r=t[Symbol.asyncIterator]())),0)})},pull:function(t){return i.o(function(e){if(1==e.i)return r?s(e,n(t,r),3):(t.close(),e.j(2));e.i=0})},cancel:function(){return i.o(function(t){switch(t.i){case 1:if(!r){t.j(2);break}if(!r.return){t.j(3);break}return s(t,r.return(),4);case 4:case 3:case 2:r=null,t.i=0}})}}))}(t,e);if(ct(t,Symbol.iterator))return function(t,e){function n(t,e){for(var n=t.desiredSize,r=null;(null==n||0<n--)&&!(r=e.next()).done;)t.enqueue(r.value);r&&r.done&&t.close()}var r=null;return new ReadableStream(Object.assign({},e,{start:function(e){i.m(),i.D(),n(e,r||(r=t[Symbol.iterator]()))},pull:function(t){r?n(t,r):t.close()},cancel:function(){r&&r.return&&r.return(),r=null}}))}(t,e);throw Error("toReadableDOMStream() must be called with an Iterable or AsyncIterable")},la.throughDOM=function(){function t(){return i.o(function(t){return 1==t.i?s(t,la.from(n),3):2!=t.i?s(t,t.l.open(),2):t.return(t.l)})}function e(t,e){var n,r;return i.o(function(i){switch(i.i){case 1:n=t.desiredSize,r=null;case 2:return s(i,e.next(),4);case 4:if((r=i.l).done){i.j(3);break}if(t.enqueue(r.value),null!=n&&0>=--n)return i.return();i.j(2);break;case 3:t.close(),i.i=0}})}var n=new ji,r=null,o=new ReadableStream({cancel:function(){return i.o(function(t){return s(t,n.close(),0)})},start:function(n){var o,a,u;return i.o(function(i){return 1==i.i?(o=e,a=n,(u=r)?i.j(3):s(i,t(),4)):(3!=i.i&&(u=r=i.l),s(i,o(a,u),0))})},pull:function(t){return i.o(function(n){if(1==n.i)return r?s(n,e(t,r),3):(t.close(),n.j(2));n.i=0})}});return{writable:new WritableStream(n),readable:o}},Ia.throughDOM=function(t,e){function n(t){var e,n;return i.o(function(r){switch(r.i){case 1:e=null,n=t.desiredSize;case 2:return s(r,a.read(n||null),4);case 4:if(!(e=r.l)){r.j(3);break}if(t.enqueue(0!==e.buffer.byteLength?e:e.slice()),null!=n&&0>=(n-=e.byteLength))return r.return();r.j(2);break;case 3:t.close(),r.i=0}})}var r=new ji,o=(new this).reset(r),a=new Ri(r);return e=new ReadableStream({type:"bytes",cancel:function(){return i.o(function(t){return s(t,r.close(),0)})},pull:function(t){return i.o(function(e){return s(e,n(t),0)})},start:function(t){return i.o(function(e){return s(e,n(t),0)})}},e),{writable:new WritableStream(o,t),readable:e}},Object.assign(arguments[0],{get ArrowType(){return sc.ArrowType},get DateUnit(){return sc.DateUnit},get IntervalUnit(){return sc.IntervalUnit},get MessageHeader(){return sc.MessageHeader},get MetadataVersion(){return sc.MetadataVersion},get Precision(){return sc.Precision},get TimeUnit(){return sc.TimeUnit},get Type(){return sc.Type},get UnionMode(){return sc.UnionMode},get VectorType(){return sc.VectorType},get Data(){return sc.Data},get DataType(){return sc.DataType},get Null(){return sc.Null},get Bool(){return sc.Bool},get Int(){return sc.Int},get Int8(){return sc.Int8},get Int16(){return sc.Int16},get Int32(){return sc.Int32},get Int64(){return sc.Int64},get Uint8(){return sc.Uint8},get Uint16(){return sc.Uint16},get Uint32(){return sc.Uint32},get Uint64(){return sc.Uint64},get Float(){return sc.Float},get Float16(){return sc.Float16},get Float32(){return sc.Float32},get Float64(){return sc.Float64},get Utf8(){return sc.Utf8},get Binary(){return sc.Binary},get FixedSizeBinary(){return sc.FixedSizeBinary},get Date_(){return sc.Date_},get DateDay(){return sc.DateDay},get DateMillisecond(){return sc.DateMillisecond},get Timestamp(){return sc.Timestamp},get TimestampSecond(){return sc.TimestampSecond},get TimestampMillisecond(){return sc.TimestampMillisecond},get TimestampMicrosecond(){return sc.TimestampMicrosecond},get TimestampNanosecond(){return sc.TimestampNanosecond},get Time(){return sc.Time},get TimeSecond(){return sc.TimeSecond},get TimeMillisecond(){return sc.TimeMillisecond},get TimeMicrosecond(){return sc.TimeMicrosecond},get TimeNanosecond(){return sc.TimeNanosecond},get Decimal(){return sc.Decimal},get List(){return sc.List},get Struct(){return sc.Struct},get Union(){return sc.Union},get DenseUnion(){return sc.DenseUnion},get SparseUnion(){return sc.SparseUnion},get Dictionary(){return sc.Dictionary},get Interval(){return sc.Interval},get IntervalDayTime(){return sc.IntervalDayTime},get IntervalYearMonth(){return sc.IntervalYearMonth},get FixedSizeList(){return sc.FixedSizeList},get Map_(){return sc.Map_},get Table(){return sc.Table},get Column(){return sc.Column},get Schema(){return sc.Schema},get Field(){return sc.Field},get Visitor(){return sc.Visitor},get Vector(){return sc.Vector},get BaseVector(){return sc.BaseVector},get BinaryVector(){return sc.BinaryVector},get BoolVector(){return sc.BoolVector},get ChunkedVector(){return sc.ChunkedVector},get DateVector(){return sc.DateVector},get DateDayVector(){return sc.DateDayVector},get DateMillisecondVector(){return sc.DateMillisecondVector},get DecimalVector(){return sc.DecimalVector},get DictionaryVector(){return sc.DictionaryVector},get FixedSizeBinaryVector(){return sc.FixedSizeBinaryVector},get FixedSizeListVector(){return sc.FixedSizeListVector},get FloatVector(){return sc.FloatVector},get Float16Vector(){return sc.Float16Vector},get Float32Vector(){return sc.Float32Vector},get Float64Vector(){return sc.Float64Vector},get IntervalVector(){return sc.IntervalVector},get IntervalDayTimeVector(){return sc.IntervalDayTimeVector},get IntervalYearMonthVector(){return sc.IntervalYearMonthVector},get IntVector(){return sc.IntVector},get Int8Vector(){return sc.Int8Vector},get Int16Vector(){return sc.Int16Vector},get Int32Vector(){return sc.Int32Vector},get Int64Vector(){return sc.Int64Vector},get Uint8Vector(){return sc.Uint8Vector},get Uint16Vector(){return sc.Uint16Vector},get Uint32Vector(){return sc.Uint32Vector},get Uint64Vector(){return sc.Uint64Vector},get ListVector(){return sc.ListVector},get MapVector(){return sc.MapVector},get NullVector(){return sc.NullVector},get StructVector(){return sc.StructVector},get TimestampVector(){return sc.TimestampVector},get TimestampSecondVector(){return sc.TimestampSecondVector},get TimestampMillisecondVector(){return sc.TimestampMillisecondVector},get TimestampMicrosecondVector(){return sc.TimestampMicrosecondVector},get TimestampNanosecondVector(){return sc.TimestampNanosecondVector},get TimeVector(){return sc.TimeVector},get TimeSecondVector(){return sc.TimeSecondVector},get TimeMillisecondVector(){return sc.TimeMillisecondVector},get TimeMicrosecondVector(){return sc.TimeMicrosecondVector},get TimeNanosecondVector(){return sc.TimeNanosecondVector},get UnionVector(){return sc.UnionVector},get DenseUnionVector(){return sc.DenseUnionVector},get SparseUnionVector(){return sc.SparseUnionVector},get Utf8Vector(){return sc.Utf8Vector},get ByteStream(){return sc.ByteStream},get AsyncByteStream(){return sc.AsyncByteStream},get AsyncByteQueue(){return sc.AsyncByteQueue},get RecordBatchReader(){return sc.RecordBatchReader},get RecordBatchFileReader(){return sc.RecordBatchFileReader},get RecordBatchStreamReader(){return sc.RecordBatchStreamReader},get AsyncRecordBatchFileReader(){return sc.AsyncRecordBatchFileReader},get AsyncRecordBatchStreamReader(){return sc.AsyncRecordBatchStreamReader},get RecordBatchWriter(){return sc.RecordBatchWriter},get RecordBatchFileWriter(){return sc.RecordBatchFileWriter},get RecordBatchStreamWriter(){return sc.RecordBatchStreamWriter},get MessageReader(){return sc.MessageReader},get AsyncMessageReader(){return sc.AsyncMessageReader},get JSONMessageReader(){return sc.JSONMessageReader},get Message(){return sc.Message},get RecordBatch(){return sc.RecordBatch},get Dataframe(){return sc.Dataframe},get FilteredDataFrame(){return sc.FilteredDataFrame},get CountByResult(){return sc.CountByResult},get predicate(){return sc.predicate},get util(){return ac}})}).bind(this)(e)}).call(this,n(39))},function(t,e,n){"use strict";var r=n(20),i=n(18),o=n(1),a=n(2),s=n(45);var u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,t),this.storage=function(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(a.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}(),c=n(36),l=n(47),f={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function h(t){return"string"==typeof t?f[t.toUpperCase()]||f.WHITE:t}function d(t,e){if(!t)throw new Error("Assertion failed. ".concat(e))}n.d(e,"a",function(){return b});var v={debug:s.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},p={enabled:!1,priority:0};function g(){}var y={};var b=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(o.a)(this,t),this.id=e,this.VERSION=s.a,this._startTs=Object(c.a)(),this._deltaTs=Object(c.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new u("__probe-".concat(this.id,"__"),p),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof t[n]&&(e.find(function(t){return n===t})||(t[n]=t[n].bind(t)))},c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(this),Object.seal(this)}return Object(a.a)(t,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((Object(c.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Object(c.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({priority:t}),this}},{key:"warn",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:v.warn,once:!0})}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:v.error})}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:v.log,time:!0,once:!0})}},{key:"log",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:v.debug})}},{key:"info",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:console.info})}},{key:"once",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:v.debug||v.info,once:!0})}},{key:"table",value:function(t,e,n){if(e){var r=function(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}(e);return this._getLogFunction({priority:t,message:e,args:n&&[n],tag:r,method:console.table||g})}return g}},{key:"image",value:function(t){var e=t.priority,n=t.image,r=t.message,i=void 0===r?"":r,o=t.scale,a=void 0===o?1:o;return e>this.getPriority()?g:s.b?this._logImageInBrowser({image:n,message:i,scale:a}):this._logImageInNode({image:n,message:i,scale:a})}},{key:"_logImageInNode",value:function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,o=null;try{o=n(105)}catch(t){}return o?function(){return o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(t){return console.log(t)})}:g}},{key:"_logImageInBrowser",value:function(t){var e=t.image,n=t.message,r=void 0===n?"":n,o=t.scale,a=void 0===o?1:o;if("string"==typeof e){var s=new Image;return s.onload=function(){var t,e=Object(l.a)(s,r,a);(t=console).log.apply(t,Object(i.a)(e))},s.src=e,g}var u,c=e.nodeName||"";if("img"===c.toLowerCase())return(u=console).log.apply(u,Object(i.a)(Object(l.a)(e,r,a))),g;if("canvas"===c.toLowerCase()){var f=new Image;return f.onload=function(){var t;return(t=console).log.apply(t,Object(i.a)(Object(l.a)(f,r,a)))},f.src=e.toDataURL(),g}return g}},{key:"time",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeStamp||g})}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=(n=this._normalizeArguments({priority:t,message:e,opts:n})).collapsed;return this._getLogFunction({priority:t,message:e,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction({priority:t,message:"",method:console.groupEnd||g})}},{key:"withGroup",value:function(t,e,n){var r=this._normalizeArguments({priority:t,message:e});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return 0===(t=this._normalizePriority(t))||this.isEnabled()&&this.getPriority()>=t}},{key:"_getElapsedTime",value:function(){var t=this.getTotal(),e=this.getDelta();return this._deltaTs=Object(c.a)(),{total:t,delta:e}}},{key:"_getLogFunction",value:function(t){if(this._shouldLog(t.priority)){var e=t.method;t=this._parseArguments(t),d(e);var n=t.message,r=t.tag||t.message;if(t.once){if(y[r])return g;y[r]=Object(c.a)()}return n=this._decorateMessage(n,t),e.bind.apply(e,[console,n].concat(Object(i.a)(t.args)))}return g}},{key:"_parseArguments",value:function(t){var e=this._normalizeArguments(t),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(t,e,{delta:r,total:i})}},{key:"_normalizePriority",value:function(t){var e;switch(Object(r.a)(t)){case"number":e=t;break;case"object":e=t.priority||0;break;default:e=0}return d(Number.isFinite(e)&&e>=0),e}},{key:"_normalizeArguments",value:function(t){var e=t.priority,n=t.message,i=t.args,o=void 0===i?[]:i,a=t.opts,s={priority:this._normalizePriority(e),message:n,args:o};switch(Object(r.a)(e)){case"string":case"function":void 0!==n&&o.unshift(n),Object.assign(s,{message:e});break;case"object":Object.assign(s,e)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),d("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function(t,e){if("string"==typeof t){var n="";if(e.time){var r=this._getElapsedTime().total;n=Object(l.c)(Object(l.b)(r))}t=e.time?"".concat(this.id,": ").concat(n,"  ").concat(t):"".concat(this.id,": ").concat(t),i=t,o=e.color,a=e.background,s.b||"string"!=typeof i||(o&&(o=h(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=h(a),i="[".concat(a+10,"m").concat(i,"[49m"))),t=i}var i,o,a;return t}},{key:"priority",set:function(t){return this._storage.updateConfiguration({priority:t}),this},get:function(){return this._storage.config.priority}}]),t}();b.VERSION=s.a},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])p(u)||!_(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(b(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=l(t,i,r)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(g(e))return t.stylize(""+e,"number");if(v(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),O(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return f(n)}var c,_="",S=!1,A=["{","}"];(d(n)&&(S=!0,A=["[","]"]),E(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return m(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),O(n)&&(_=" "+f(n)),0!==a.length||S&&0!=n.length?r<0?m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=S?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)j(e,String(a))?o.push(h(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}(t,n,r,s,a):a.map(function(e){return h(t,n,r,s,e,S)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,A)):A[0]+_+A[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),j(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=p(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function p(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function b(t){return void 0===t}function m(t){return _(t)&&"[object RegExp]"===S(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===S(t)}function O(t){return _(t)&&("[object Error]"===S(t)||t instanceof Error)}function E(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(b(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=v,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=m,e.isObject=_,e.isDate=w,e.isError=O,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(109);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(110),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(39),n(55))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e,n){t.exports=n(116)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var r=n(117),i=n(120);(void 0!==t?t:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,n(39))},function(t,e,n){"use strict";var r=n(118);Object.defineProperty(e,"__esModule",{value:!0}),e.installParameterDefinitions=function(){},e.TEXTURE_PARAMETERS=e.SAMPLER_PARAMETERS=e.RENDERBUFFER_PARAMETERS=e.PROGRAM_PARAMETERS=e.FRAMEBUFFER_STATUS=e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=e.FENCE_SYNC_PARAMETERS=e.BUFFER_PARAMETERS=e.GLboolean=e.GLuint=e.GLint=e.GLfloat=e.GLenum=void 0;var i,o,a,s,u,c,l=r(n(119));e.GLenum="GLenum";e.GLfloat="GLfloat";e.GLint="GLint";e.GLuint="GLint";e.GLboolean="GLboolean";var f=(i={},(0,l.default)(i,34660,{webgl1:0}),(0,l.default)(i,34661,{webgl1:0}),i);e.BUFFER_PARAMETERS=f;e.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var h=(o={},(0,l.default)(o,36053,"Success. Framebuffer is correctly set up"),(0,l.default)(o,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,l.default)(o,36055,"Framebuffer has no attachment"),(0,l.default)(o,36057,"Framebuffer attachments do not have the same size"),(0,l.default)(o,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,l.default)(o,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),o);e.FRAMEBUFFER_STATUS=h;var d=(a={},(0,l.default)(a,35712,{webgl1:0}),(0,l.default)(a,35714,{webgl1:0}),(0,l.default)(a,35715,{webgl1:0}),(0,l.default)(a,35717,{webgl1:0}),(0,l.default)(a,35721,{webgl1:0}),(0,l.default)(a,35718,{webgl1:0}),(0,l.default)(a,35967,{webgl2:0}),(0,l.default)(a,35971,{webgl2:0}),(0,l.default)(a,35382,{webgl2:0}),a);e.PROGRAM_PARAMETERS=d;var v=(s={},(0,l.default)(s,36162,{webgl1:0}),(0,l.default)(s,36163,{webgl1:0}),(0,l.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,l.default)(s,36177,{webgl1:0}),(0,l.default)(s,36178,{webgl1:0}),(0,l.default)(s,36176,{webgl1:0}),(0,l.default)(s,36179,{webgl1:0}),(0,l.default)(s,36180,{webgl1:0}),(0,l.default)(s,36181,{webgl1:0}),(0,l.default)(s,36011,{webgl2:1}),s);e.RENDERBUFFER_PARAMETERS=v;var p=(u={},(0,l.default)(u,10240,{webgl2:!0}),(0,l.default)(u,10241,{webgl2:!0}),(0,l.default)(u,10242,{webgl2:!0}),(0,l.default)(u,10243,{webgl2:!0}),(0,l.default)(u,32882,{webgl2:!0}),(0,l.default)(u,33084,{webgl2:!0}),(0,l.default)(u,33085,{webgl2:!0}),(0,l.default)(u,34893,{webgl2:!0}),(0,l.default)(u,34892,{webgl2:!0}),(0,l.default)(u,33082,{webgl2:!0}),(0,l.default)(u,33083,{webgl2:!0}),u);e.SAMPLER_PARAMETERS=p;var g=(c={},(0,l.default)(c,10240,{type:"GLenum",webgl1:9729}),(0,l.default)(c,10241,{type:"GLenum",webgl1:9986}),(0,l.default)(c,10242,{type:"GLenum",webgl1:10497}),(0,l.default)(c,10243,{type:"GLenum",webgl1:10497}),(0,l.default)(c,32882,{type:"GLenum",webgl2:10497}),(0,l.default)(c,33084,{webgl2:0}),(0,l.default)(c,33085,{webgl2:1e3}),(0,l.default)(c,34893,{type:"GLenum",webgl2:515}),(0,l.default)(c,34892,{type:"GLenum",webgl2:0}),(0,l.default)(c,33082,{webgl2:-1e3}),(0,l.default)(c,33083,{webgl2:1e3}),(0,l.default)(c,4096,{webgl1:0}),(0,l.default)(c,4097,{webgl1:0}),c);e.TEXTURE_PARAMETERS=g},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){(function(e){WebGLDebugUtils=function(){var t;void 0===t&&(t=e);var n=function(e){t.console&&t.console.error?t.console.error(e):function(e){t.console&&t.console.log&&t.console.log(e)}(e)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},i=null,o=null;function a(t){if(null==i)for(var e in i={},o={},t)"number"==typeof t[e]&&(i[t[e]]=e,o[e]=t[e])}function s(){if(null==i)throw"WebGLDebugUtils.init(ctx) not called"}function u(t){s();var e=i[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function c(t,e,n,i){var a;if(void 0!==(a=r[t])&&(void 0!==(a=a[e])&&a[n])){if("object"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var s=a[n].enumBitwiseOr,c=0,l=[],f=0;f<s.length;++f){var h=o[s[f]];0!=(i&h)&&(c|=h,l.push(u(h)))}return c===i?l.join(" | "):u(i)}return u(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function l(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function f(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);for(var i=0;i<n;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0),e&&t.vertexAttribDivisor(i,0);t.deleteBuffer(r);var o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<o;++i)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(i,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);var a=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<a;++i)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)t.bindBufferBase(t.UNIFORM_BUFFER,i,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}return{init:a,mightBeEnum:function(t){return s(),void 0!==i[t]},glEnumToString:u,glFunctionArgToString:c,glFunctionArgsToString:function(t,e){for(var n="",r=e.length,i=0;i<r;++i)n+=(0==i?"":", ")+c(t,r,i,e[i]);return n},makeDebugContext:function t(e,r,i,o){o=o||e,a(e),r=r||function(t,e,r){for(var i="",o=r.length,a=0;a<o;++a)i+=(0==a?"":", ")+c(e,o,a,r[a]);n("WebGL error "+u(t)+" in "+e+"("+i+")")};var s={};function f(t,e){return function(){i&&i(e,arguments);var n=t[e].apply(t,arguments),a=o.getError();return 0!=a&&(s[a]=!0,r(a,e,arguments)),n}}var h={};for(var d in e)if("function"==typeof e[d])if("getExtension"!=d)h[d]=f(e,d);else{var v=f(e,d);h[d]=function(){var n=v.apply(e,arguments);return n?t(n,r,i,o):null}}else l(h,e,d);return h.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return e.NO_ERROR},h},makeLostContextSimulatingCanvas:function(e){var n,r,i,o=[],a=[],s={},u=1,c=!1,h=[],d=0,v=0,p=!1,g=0,y={};function b(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}e.getContext=(i=e.getContext,function(){var o=i.apply(e,arguments);if(o instanceof WebGLRenderingContext||t.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext){if(o!=n){if(n)throw"got different context";r=t.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext,s=function(t){for(var e in t)"function"==typeof t[e]?s[e]=O(t,e):l(s,t,e);s.getError=function(){if(w(),!c)for(;t=n.getError();)y[t]=!0;for(var t in y)if(y[t])return delete y[t],t;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var o=0;o<i.length;++o){var a=i[o];s[a]=function(e){return function(){if(w(),c)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=u,h.push(n),n}}(t[a])}var f=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&f.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var o=0;o<f.length;++o){var a=f[o];s[a]=function(e){return function(){return w(),c?null:e.apply(t,arguments)}}(s[a])}var d,v=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&v.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var o=0;o<v.length;++o){var a=v[o];s[a]=function(e){return function(){return w(),!c&&e.apply(t,arguments)}}(s[a])}return s.checkFramebufferStatus=(d=s.checkFramebufferStatus,function(){return w(),c?s.FRAMEBUFFER_UNSUPPORTED:d.apply(t,arguments)}),s.getAttribLocation=function(e){return function(){return w(),c?-1:e.apply(t,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(e){return function(){return w(),c?0:e.apply(t,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return c},r&&(s.getFragDataLocation=function(e){return function(){return w(),c?-1:e.apply(t,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(e){return function(){return w(),c?s.WAIT_FAILED:e.apply(t,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(e){return function(){return w(),c?s.INVALID_INDEX:e.apply(t,arguments)}}(s.getUniformBlockIndex)),s}(n=o)}return s}return o});var m=function(t){o.push(b(t))},_=function(t){a.push(b(t))};function w(){++v,c||d==v&&e.loseContext()}function O(t,e){var n=t[e];return function(){if(w(),!c)return n.apply(t,arguments)}}function E(t){return{statusMessage:t,preventDefault:function(){p=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":m(r);break;case"webglcontextrestored":_(r);break;default:e.apply(t,arguments)}}}(e),e.loseContext=function(){if(!c){for(c=!0,d=0,++u;n.getError(););!function(){for(var t=Object.keys(y),e=0;e<t.length;++e)delete y[t[e]]}(),y[n.CONTEXT_LOST_WEBGL]=!0;var t=E("context lost"),r=o.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);g>=0&&setTimeout(function(){e.restoreContext()},g)},0)}},e.restoreContext=function(){c&&a.length&&setTimeout(function(){if(!p)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<h.length;++t){var e=h[t];e instanceof WebGLBuffer?n.deleteBuffer(e):e instanceof WebGLFramebuffer?n.deleteFramebuffer(e):e instanceof WebGLProgram?n.deleteProgram(e):e instanceof WebGLRenderbuffer?n.deleteRenderbuffer(e):e instanceof WebGLShader?n.deleteShader(e):e instanceof WebGLTexture?n.deleteTexture(e):r&&(e instanceof WebGLQuery?n.deleteQuery(e):e instanceof WebGLSampler?n.deleteSampler(e):e instanceof WebGLSync?n.deleteSync(e):e instanceof WebGLTransformFeedback?n.deleteTransformFeedback(e):e instanceof WebGLVertexArrayObject&&n.deleteVertexArray(e))}}(),f(n),c=!1,v=0,p=!1;for(var t=a.slice(),e=E("context restored"),i=0;i<t.length;++i)t[i](e)},0)},e.loseContextInNCalls=function(t){if(c)throw"You can not ask a lost contet to be lost";d=v+t},e.getNumCalls=function(){return v},e.setRestoreTimeout=function(t){g=t},e},resetToInitialState:f}}(),t.exports=WebGLDebugUtils}).call(this,n(39))},function(t,e,n){"use strict";t.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(t,e,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),f="function",h=Math.round,d=Math.abs,v=Date.now;function p(t,e,n){return setTimeout(O(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function b(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var m=b(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),_=b(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function w(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function O(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==f?t.apply(e&&e[0]||s,e):t}function S(t,e){return t===s?e:t}function A(t,e,n){y(R(e),function(e){t.addEventListener(e,n,!1)})}function T(t,e,n){y(R(e),function(e){t.removeEventListener(e,n,!1)})}function j(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function P(t,e){return t.indexOf(e)>-1}function R(t){return t.trim().split(/\s+/g)}function I(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];I(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function M(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var C=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var L="ontouchstart"in i,N=M(i,"PointerEvent")!==s,D=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,U=1,V=2,z=4,G=8,W=1,H=2,X=4,q=8,Y=16,Z=H|X,K=q|Y,Q=Z|K,J=["x","y"],$=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&U&&r-i==0,a=e&(z|G)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=nt(e));i>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=rt(r);e.timeStamp=v(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=st(u,c),e.distance=at(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==U&&o.eventType!==z||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var l=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,e.scale=a?(f=a.pointers,h=r,at(h[0],h[1],$)/at(f[0],f[1],$)):1,e.rotation=a?function(t,e){return st(e[1],e[0],$)+st(t[1],t[0],$)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=G&&(u>B||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=it(u,c,l);r=f.x,i=f.y,n=d(f.x)>d(f.y)?f.x:f.y,o=ot(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var f,h;var p=t.element;j(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:v(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?W:d(t)>=d(e)?t<0?H:X:e<0?q:Y}function at(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function st(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(F(this.element),this.evWin,this.domHandler)}};var ut={mousedown:U,mousemove:V,mouseup:z},ct="mousedown",lt="mousemove mouseup";function ft(){this.evEl=ct,this.evWin=lt,this.pressed=!1,tt.apply(this,arguments)}w(ft,tt,{handler:function(t){var e=ut[t.type];e&U&&0===t.button&&(this.pressed=!0),e&V&&1!==t.which&&(e=z),this.pressed&&(e&z&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ht={pointerdown:U,pointermove:V,pointerup:z,pointercancel:G,pointerout:G},dt={2:"touch",3:"pen",4:"mouse",5:"kinect"},vt="pointerdown",pt="pointermove pointerup pointercancel";function gt(){this.evEl=vt,this.evWin=pt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(vt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),w(gt,tt,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ht[r],o=dt[t.pointerType]||t.pointerType,a="touch"==o,s=I(e,t.pointerId,"pointerId");i&U&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(z|G)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var yt={touchstart:U,touchmove:V,touchend:z,touchcancel:G},bt="touchstart",mt="touchstart touchmove touchend touchcancel";function _t(){this.evTarget=bt,this.evWin=mt,this.started=!1,tt.apply(this,arguments)}w(_t,tt,{handler:function(t){var e=yt[t.type];if(e===U&&(this.started=!0),this.started){var n=function(t,e){var n=k(t.touches),r=k(t.changedTouches);e&(z|G)&&(n=x(n.concat(r),"identifier",!0));return[n,r]}.call(this,t,e);e&(z|G)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var wt={touchstart:U,touchmove:V,touchend:z,touchcancel:G},Ot="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=Ot,this.targetIds={},tt.apply(this,arguments)}w(Et,tt,{handler:function(t){var e=wt[t.type],n=function(t,e){var n=k(t.touches),r=this.targetIds;if(e&(U|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=k(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return j(t.target,u)}),e===U)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;i=0;for(;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(z|G)&&delete r[a[i].identifier],i++;if(!s.length)return;return[x(o.concat(s),"identifier",!0),s]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var St=2500,At=25;function Tt(){tt.apply(this,arguments);var t=O(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ft(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function jt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},St)}}w(Tt,tt,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(t,e){t&U?(this.primaryTouch=e.changedPointers[0].identifier,jt.call(this,e)):t&(z|G)&&jt.call(this,e)}).call(this,e,n);else if(i&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=At&&a<=At)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pt=M(l.style,"touchAction"),Rt=Pt!==s,It="auto",kt="manipulation",xt="none",Mt="pan-x",Ct="pan-y",Ft=function(){if(!Rt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function Lt(t,e){this.manager=t,this.set(e)}Lt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Rt&&this.manager.element.style&&Ft[t]&&(this.manager.element.style[Pt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(P(t,xt))return xt;var e=P(t,Mt),n=P(t,Ct);if(e&&n)return xt;if(e||n)return e?Mt:Ct;if(P(t,kt))return kt;return It}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=P(r,xt)&&!Ft[xt],o=P(r,Ct)&&!Ft[Ct],a=P(r,Mt)&&!Ft[Mt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&Z||a&&n&K?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Nt=1,Dt=2,Bt=4,Ut=8,Vt=Ut,zt=16;function Gt(t){this.options=u({},this.defaults,t||{}),this.id=C++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Nt,this.simultaneous={},this.requireFail=[]}function Wt(t){return t&zt?"cancel":t&Ut?"end":t&Bt?"move":t&Dt?"start":""}function Ht(t){return t==Y?"down":t==q?"up":t==H?"left":t==X?"right":""}function Xt(t,e){var n=e.manager;return n?n.get(t):t}function qt(){Gt.apply(this,arguments)}function Yt(){qt.apply(this,arguments),this.pX=null,this.pY=null}function Zt(){qt.apply(this,arguments)}function Kt(){Gt.apply(this,arguments),this._timer=null,this._input=null}function Qt(){qt.apply(this,arguments)}function Jt(){qt.apply(this,arguments)}function $t(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=S(e.recognizers,te.defaults.preset),new ee(t,e)}Gt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Xt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)?this:(t=Xt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=Xt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Xt(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Ut&&r(e.options.event+Wt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Ut&&r(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Nt)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Vt|zt|32)&&(this.state=Nt),this.state=this.process(e),this.state&(Dt|Bt|Ut|zt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(qt,Gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Dt|Bt),i=this.attrTest(t);return r&&(n&G||!i)?e|zt:r||i?n&z?e|Ut:e&Dt?e|Bt:Dt:32}}),w(Yt,qt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&Z&&e.push(Ct),t&K&&e.push(Mt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Z?(i=0===o?W:o<0?H:X,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?W:a<0?q:Y,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return qt.prototype.attrTest.call(this,t)&&(this.state&Dt||!(this.state&Dt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Zt,qt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Dt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Kt,Gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[It]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(z|G)&&!i)this.reset();else if(t.eventType&U)this.reset(),this._timer=p(function(){this.state=Vt,this.tryEmit()},e.time,this);else if(t.eventType&z)return Vt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Vt&&(t&&t.eventType&z?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),w(Qt,qt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Dt)}}),w(Jt,qt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|K,pointers:1},getTouchAction:function(){return Yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Z|K)?e=t.overallVelocity:n&Z?e=t.overallVelocityX:n&K&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&z},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w($t,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&U&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=z)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Vt,this.tryEmit()},e.interval,this),Dt):Vt}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Qt,{enable:!1}],[Zt,{enable:!1},["rotate"]],[Jt,{direction:Z}],[Yt,{direction:Z},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){var n;this.options=u({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?gt:D?Et:L?Tt:ft))(n,et),this.touchAction=new Lt(this,this.options.touchAction),ne(this,!0),y(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ne(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,function(i,o){n=M(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Vt)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Dt|Bt|Ut)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Gt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=I(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return y(R(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return y(R(t),function(t){e?n[t]&&n[t].splice(I(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(te,{INPUT_START:U,INPUT_MOVE:V,INPUT_END:z,INPUT_CANCEL:G,STATE_POSSIBLE:Nt,STATE_BEGAN:Dt,STATE_CHANGED:Bt,STATE_ENDED:Ut,STATE_RECOGNIZED:Vt,STATE_CANCELLED:zt,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:H,DIRECTION_RIGHT:X,DIRECTION_UP:q,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:K,DIRECTION_ALL:Q,Manager:ee,Input:tt,TouchAction:Lt,TouchInput:Et,MouseInput:ft,PointerEventInput:gt,TouchMouseInput:Tt,SingleTouchInput:_t,Recognizer:Gt,AttrRecognizer:qt,Tap:$t,Pan:Yt,Swipe:Jt,Pinch:Zt,Rotate:Qt,Press:Kt,on:A,off:T,each:y,merge:_,extend:m,assign:u,inherit:w,bindFn:O,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=te,(r=function(){return te}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},function(t,e,n){t.exports=n(124).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r,i=n(125),o=(r=i)&&r.__esModule?r:{default:r};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transport;return n||(n=a.transportFactory()),n(t,e)}a.transportFactory=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){s||(s=function(){if("undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body"))return o.default;if(function(t){try{var e=new XMLHttpRequest;return e.responseType=t,e.responseType===t}catch(t){}return!1}("moz-chunked-arraybuffer"))return(0,a.makeXhrTransport)({responseType:"moz-chunked-arraybuffer",responseParserFactory:function(){return function(t){return new Uint8Array(t)}}});return(0,a.makeXhrTransport)({responseType:"text",responseParserFactory:function(){var t=new TextEncoder,e=0;return function(n){var r=n.substr(e);return e=n.length,t.encode(r,{stream:!0})}}})}());return s};var r,i=n(126),o=(r=i)&&r.__esModule?r:{default:r},a=n(127);var s=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return fetch(t,e).then(function(t){return{body:t.body,headers:t.headers,ok:t.ok,status:t.status,statusText:t.statusText,url:t.url}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeXhrTransport=function(t){var e=t.responseType,n=t.responseParserFactory;return function(t,r){var s=new XMLHttpRequest,u=n(),c=void 0,l=!1,f=new ReadableStream({start:function(t){c=t},cancel:function(){l=!0,s.abort()}}),h=r.method,d=void 0===h?"GET":h,v=r.signal;if(s.open(d,t),s.responseType=e,s.withCredentials="omit"!==r.credentials,r.headers){var p=!0,g=!1,y=void 0;try{for(var b,m=r.headers.entries()[Symbol.iterator]();!(p=(b=m.next()).done);p=!0){var _=b.value;s.setRequestHeader(_[0],_[1])}}catch(t){g=!0,y=t}finally{try{!p&&m.return&&m.return()}finally{if(g)throw y}}}return new Promise(function(e,n){if(!r.body||"GET"!==d&&"HEAD"!==d||n(new TypeError("Failed to execute 'fetchStream' on 'Window': Request with GET/HEAD method cannot have body")),v){if(v.aborted)return void n(i());v.addEventListener("abort",function(){s.abort(),c&&c.error(i()),n(i())},{once:!0})}s.onreadystatechange=function(){if(s.readyState===s.HEADERS_RECEIVED)return e({body:f,headers:a(s.getAllResponseHeaders()),ok:s.status>=200&&s.status<300,status:s.status,statusText:s.statusText,url:o(s.responseURL,t)})},s.onerror=function(){return n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onprogress=function(){if(!l){var t=u(s.response);c.enqueue(t)}},s.onload=function(){c.close()},s.send(r.body)})}},e.parseResposneHeaders=a;var r=n(128);function i(){try{return new DOMException("Aborted","AbortError")}catch(e){var t=new Error("Aborted");return t.name="AbortError",t}}function o(t,e){return t||("http"!==e.substring(0,4)?location.origin+e:e)}function a(t){var e="undefined"!=typeof Headers?new Headers:new r.Headers;if(t)for(var n=t.split("\r\n"),i=0;i<n.length;i++){var o=n[i],a=o.indexOf(": ");if(a>0){var s=o.substring(0,a),u=o.substring(a+2);e.append(s,u)}}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Headers=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.h={},n instanceof t&&n.forEach(function(t,n){return e.append(n,t)}),Object.getOwnPropertyNames(n).forEach(function(t){return e.append(t,n[t])})}return r(t,[{key:"append",value:function(t,e){t=t.toLowerCase(),Array.isArray(this.h[t])||(this.h[t]=[]),this.h[t].push(e)}},{key:"set",value:function(t,e){this.h[t.toLowerCase()]=[e]}},{key:"has",value:function(t){return Array.isArray(this.h[t.toLowerCase()])}},{key:"get",value:function(t){if(t=t.toLowerCase(),Array.isArray(this.h[t]))return this.h[t][0]}},{key:"getAll",value:function(t){return this.h[t.toLowerCase()].concat()}},{key:"entries",value:function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),function(t){return e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}},n=Symbol.iterator,r=function(){return this},n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e;var e,n,r}(t)}},{key:"forEach",value:function(t,e){var n=this;Object.getOwnPropertyNames(this.h).forEach(function(r){n.h[r].forEach(function(i){return t.call(e,i,r,n)})},this)}}]),t}()},function(t,e,n){(function(t){!function(e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"},a=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function s(){}var u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0,c={default:s},l=Number.isNaN||function(t){return t!=t};function f(t){return t&&t.default||t}f(c);var h=function(t,e){return function(t,e){var n=o('is "detached" for our purposes');function r(t,e,n){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,n)}function i(t,e,n){try{return Promise.resolve(r(t,e,n))}catch(t){return Promise.reject(t)}}e.typeIsObject=function(t){return"object"==typeof t&&null!==t||"function"==typeof t},e.createDataProperty=function(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,n,r,i){new Uint8Array(t).set(new Uint8Array(n,r,i),e)},e.IsFiniteNonNegativeNumber=function(t){return!1!==e.IsNonNegativeNumber(t)&&t!==1/0},e.IsNonNegativeNumber=function(t){return!("number"!=typeof t||l(t)||t<0)},e.Call=r,e.CreateAlgorithmFromUnderlyingMethod=function(t,e,n,r){var o=t[e];if(void 0!==o){if("function"!=typeof o)throw new TypeError(o+" is not a method");switch(n){case 0:return function(){return i(o,t,r)};case 1:return function(e){var n=[e].concat(r);return i(o,t,n)}}}return function(){return Promise.resolve()}},e.InvokeOrNoop=function(t,e,n){var i=t[e];if(void 0!==i)return r(i,t,n)},e.PromiseCall=i,e.TransferArrayBuffer=function(t){var e=t.slice();return Object.defineProperty(t,"byteLength",{get:function(){return 0}}),t[n]=!0,e},e.IsDetachedBuffer=function(t){return n in t},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),l(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.MakeSizeAlgorithmFromSizeFunction=function(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return function(e){return t(e)}},e.PerformPromiseThen=function(t,e,n){return Promise.prototype.then.call(t,e,n)},e.WaitForAll=function(t,n,r){for(var i=!1,o=function(t){!1===i&&(i=!0,r(t))},a=0,s=0,u=t.length,c=new Array(u),l=function(r){var i=t[r],l=a;e.PerformPromiseThen(i,function(t){c[l]=t,++s===u&&n(c)},o),++a},f=0;f<t.length;f++)l(f)},e.WaitForAllPromise=function(t,n,r){var i,o;void 0===r&&(r=void 0);var a=new Promise(function(t,e){i=t,o=e});return void 0===r&&(r=function(t){throw t}),e.WaitForAll(t,function(t){try{var e=n(t);i(e)}catch(t){o(t)}},function(t){try{var e=r(t);i(e)}catch(t){o(t)}}),a}}(e={exports:{}},e.exports),e.exports}();function d(){}h.typeIsObject,h.createDataProperty,h.createArrayFromList,h.ArrayBufferCopy,h.IsFiniteNonNegativeNumber,h.IsNonNegativeNumber,h.Call,h.CreateAlgorithmFromUnderlyingMethod,h.InvokeOrNoop,h.PromiseCall,h.TransferArrayBuffer,h.IsDetachedBuffer,h.ValidateAndNormalizeHighWaterMark,h.MakeSizeAlgorithmFromSizeFunction,h.PerformPromiseThen,h.WaitForAll,h.WaitForAllPromise,d.AssertionError=s;var v=f({default:d}),p=function(t){t&&t instanceof v.AssertionError&&setTimeout(function(){throw t},0)},g=h.IsFiniteNonNegativeNumber,y=function(t){var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},b=function(t,e,n){if(n=Number(n),!g(n))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:n}),t._queueTotalSize+=n},m=function(t){t._queue=[],t._queueTotalSize=0},_=f({default:s}),w=(_("streams:writable-stream:verbose"),h.CreateAlgorithmFromUnderlyingMethod),O=h.InvokeOrNoop,E=h.ValidateAndNormalizeHighWaterMark,S=(h.IsNonNegativeNumber,h.MakeSizeAlgorithmFromSizeFunction),A=h.typeIsObject,T=p,j=y,P=b,R=function(t){return t._queue[0].value},I=m,k=o("[[AbortSteps]]"),x=o("[[ErrorSteps]]"),M=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),L(this);var n=e.size,r=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var i=S(n);void 0===r&&(r=1),function(t,e,n,r){var i=Object.create(J.prototype),o=w(e,"write",1,[i]),a=w(e,"close",0,[]),s=w(e,"abort",1,[]);$(t,i,function(){return O(e,"start",[i])},o,a,s,n,r)}(this,t,r=E(r),i)}var e=t.prototype;return e.abort=function(t){return!1===N(this)?Promise.reject(at("abort")):!0===D(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):B(this,t)},e.getWriter=function(){if(!1===N(this))throw at("getWriter");return F(this)},r(t,[{key:"locked",get:function(){if(!1===N(this))throw at("locked");return D(this)}}]),t}(),C={AcquireWritableStreamDefaultWriter:F,CreateWritableStream:function(t,e,n,r,i,o){void 0===i&&(i=1),void 0===o&&(o=function(){return 1});var a=Object.create(M.prototype);L(a);var s=Object.create(J.prototype);return $(a,s,t,e,n,r,i,o),a},IsWritableStream:N,IsWritableStreamLocked:D,WritableStream:M,WritableStreamAbort:B,WritableStreamDefaultControllerErrorIfNeeded:rt,WritableStreamDefaultWriterCloseWithErrorPropagation:function(t){var e=t._ownerWritableStream,n=e._state;return!0===G(e)||"closed"===n?Promise.resolve():"errored"===n?Promise.reject(e._storedError):Y(t)},WritableStreamDefaultWriterRelease:K,WritableStreamDefaultWriterWrite:Q,WritableStreamCloseQueuedOrInFlight:G};function F(t){return new X(t)}function L(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=[],t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function N(t){return!!A(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function D(t){return void 0!==t._writer}function B(t,e){var n=t._state;if("closed"===n||"errored"===n)return Promise.resolve(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;var r=!1;"erroring"===n&&(r=!0,e=void 0);var i=new Promise(function(n,i){t._pendingAbortRequest={_resolve:n,_reject:i,_reason:e,_wasAlreadyErroring:r}});return t._pendingAbortRequest._promise=i,!1===r&&V(t,e),i}function U(t,e){"writable"!==t._state?z(t):V(t,e)}function V(t,e){var n=t._writableStreamController;t._state="erroring",t._storedError=e;var r=t._writer;void 0!==r&&Z(r,e),!1===function(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}(t)&&!0===n._started&&z(t)}function z(t){t._state="errored",t._writableStreamController[x]();for(var e=t._storedError,n=0,r=t._writeRequests;n<r.length;n++)r[n]._reject(e);if(t._writeRequests=[],void 0!==t._pendingAbortRequest){var i=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===i._wasAlreadyErroring)return i._reject(e),void W(t);t._writableStreamController[k](i._reason).then(function(){i._resolve(),W(t)},function(e){i._reject(e),W(t)})}else W(t)}function G(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function W(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(lt(e,t._storedError),e._closedPromise.catch(function(){}))}function H(t,e){var n=t._writer;void 0!==n&&e!==t._backpressure&&(!0===e?function(t){t._readyPromise=new Promise(function(e,n){t._readyPromise_resolve=e,t._readyPromise_reject=n}),t._readyPromiseState="pending"}(n):dt(n)),t._backpressure=e}var X=function(){function t(t){if(!1===N(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===D(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var e=t._state;if("writable"===e)!1===G(t)&&!0===t._backpressure?function(t){t._readyPromise=new Promise(function(e,n){t._readyPromise_resolve=e,t._readyPromise_reject=n}),t._readyPromiseState="pending"}(this):ht(this),ct(this);else if("erroring"===e)ft(this,t._storedError),this._readyPromise.catch(function(){}),ct(this);else if("closed"===e)ht(this),function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(this);else{var n=t._storedError;ft(this,n),this._readyPromise.catch(function(){}),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}(this,n),this._closedPromise.catch(function(){})}}var e=t.prototype;return e.abort=function(t){return!1===q(this)?Promise.reject(st("abort")):void 0===this._ownerWritableStream?Promise.reject(ut("abort")):function(t,e){return B(t._ownerWritableStream,e)}(this,t)},e.close=function(){if(!1===q(this))return Promise.reject(st("close"));var t=this._ownerWritableStream;return void 0===t?Promise.reject(ut("close")):!0===G(t)?Promise.reject(new TypeError("cannot close an already-closing stream")):Y(this)},e.releaseLock=function(){if(!1===q(this))throw st("releaseLock");void 0!==this._ownerWritableStream&&K(this)},e.write=function(t){return!1===q(this)?Promise.reject(st("write")):void 0===this._ownerWritableStream?Promise.reject(ut("write to")):Q(this,t)},r(t,[{key:"closed",get:function(){return!1===q(this)?Promise.reject(st("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===q(this))throw st("desiredSize");if(void 0===this._ownerWritableStream)throw ut("desiredSize");return t=this._ownerWritableStream,"errored"===(e=t._state)||"erroring"===e?null:"closed"===e?0:et(t._writableStreamController);var t,e}},{key:"ready",get:function(){return!1===q(this)?Promise.reject(st("ready")):this._readyPromise}}]),t}();function q(t){return!!A(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function Y(t){var e=t._ownerWritableStream,n=e._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed"));var r=new Promise(function(t,n){var r={_resolve:t,_reject:n};e._closeRequest=r});return!0===e._backpressure&&"writable"===n&&dt(t),function(t){P(t,"close",0),nt(t)}(e._writableStreamController),r}function Z(t,e){"pending"===t._readyPromiseState?function(t,e){t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}(t,e):function(t,e){t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}(t,e),t._readyPromise.catch(function(){})}function K(t){var e=t._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Z(t,n),function(t,e){"pending"===t._closedPromiseState?lt(t,e):function(t,e){t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}(t,e),t._closedPromise.catch(function(){})}(t,n),e._writer=void 0,t._ownerWritableStream=void 0}function Q(t,e){var n=t._ownerWritableStream,r=n._writableStreamController,i=function(t,e){try{return t._strategySizeAlgorithm(e)}catch(e){return rt(t,e),1}}(r,e);if(n!==t._ownerWritableStream)return Promise.reject(ut("write to"));var o=n._state;if("errored"===o)return Promise.reject(n._storedError);if(!0===G(n)||"closed"===o)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return Promise.reject(n._storedError);var a=function(t){return new Promise(function(e,n){var r={_resolve:e,_reject:n};t._writeRequests.push(r)})}(n);return function(t,e,n){var r={chunk:e};try{P(t,r,n)}catch(e){return void rt(t,e)}var i=t._controlledWritableStream;if(!1===G(i)&&"writable"===i._state){var o=it(t);H(i,o)}nt(t)}(r,e,i),a}var J=function(){function t(){throw new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}var e=t.prototype;return e.error=function(t){if(!1===function(t){return!!A(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&ot(this,t)},e[k]=function(t){var e=this._abortAlgorithm(t);return tt(this),e},e[x]=function(){I(this)},t}();function $(t,e,n,r,i,o,a,s){e._controlledWritableStream=t,t._writableStreamController=e,e._queue=void 0,e._queueTotalSize=void 0,I(e),e._started=!1,e._strategySizeAlgorithm=s,e._strategyHWM=a,e._writeAlgorithm=r,e._closeAlgorithm=i,e._abortAlgorithm=o;var u=it(e);H(t,u);var c=n();Promise.resolve(c).then(function(){e._started=!0,nt(e)},function(n){e._started=!0,U(t,n)}).catch(T)}function tt(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function et(t){return t._strategyHWM-t._queueTotalSize}function nt(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var n=e._state;if("closed"!==n&&"errored"!==n)if("erroring"!==n){if(0!==t._queue.length){var r=R(t);"close"===r?function(t){var e=t._controlledWritableStream;(function(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0})(e),j(t);var n=t._closeAlgorithm();tt(t),n.then(function(){!function(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,"erroring"===t._state&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var e=t._writer;void 0!==e&&function(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(e)}(e)},function(t){!function(t,e){t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),U(t,e)}(e,t)}).catch(T)}(t):function(t,e){var n=t._controlledWritableStream;(function(t){t._inFlightWriteRequest=t._writeRequests.shift()})(n),t._writeAlgorithm(e).then(function(){!function(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}(n);var e=n._state;if(j(t),!1===G(n)&&"writable"===e){var r=it(t);H(n,r)}nt(t)},function(e){"writable"===n._state&&tt(t),function(t,e){t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,U(t,e)}(n,e)}).catch(T)}(t,r.chunk)}}else z(e)}}function rt(t,e){"writable"===t._controlledWritableStream._state&&ot(t,e)}function it(t){return et(t)<=0}function ot(t,e){var n=t._controlledWritableStream;tt(t),V(n,e)}function at(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function st(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function ut(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function ct(t){t._closedPromise=new Promise(function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n,t._closedPromiseState="pending"})}function lt(t,e){t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function ft(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function ht(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function dt(t){t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}var vt=C.WritableStream,pt=h.ArrayBufferCopy,gt=h.CreateAlgorithmFromUnderlyingMethod,yt=h.IsFiniteNonNegativeNumber,bt=h.InvokeOrNoop,mt=h.IsDetachedBuffer,_t=h.TransferArrayBuffer,wt=h.ValidateAndNormalizeHighWaterMark,Ot=(h.IsNonNegativeNumber,h.MakeSizeAlgorithmFromSizeFunction),Et=h.createArrayFromList,St=h.typeIsObject,At=h.WaitForAllPromise,Tt=p,jt=y,Pt=b,Rt=m,It=C.AcquireWritableStreamDefaultWriter,kt=C.IsWritableStream,xt=C.IsWritableStreamLocked,Mt=C.WritableStreamAbort,Ct=C.WritableStreamDefaultWriterCloseWithErrorPropagation,Ft=C.WritableStreamDefaultWriterRelease,Lt=C.WritableStreamDefaultWriterWrite,Nt=C.WritableStreamCloseQueuedOrInFlight,Dt=o("[[CancelSteps]]"),Bt=o("[[PullSteps]]"),Ut=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Wt(this);var n=e.size,r=e.highWaterMark,i=t.type;if("bytes"===String(i)){if(void 0!==n)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===r&&(r=0),function(t,e,n){var r=Object.create(Se.prototype),i=gt(e,"pull",0,[r]),o=gt(e,"cancel",1,[]),s=e.autoAllocateChunkSize;if(void 0!==s&&(s=Number(s),!1===a(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");ze(t,r,function(){return bt(e,"start",[r])},i,o,n,s)}(this,t,r=wt(r))}else{if(void 0!==i)throw new RangeError("Invalid type is specified");var o=Ot(n);void 0===r&&(r=1),function(t,e,n,r){var i=Object.create(he.prototype),o=gt(e,"pull",0,[i]),a=gt(e,"cancel",1,[]);Oe(t,i,function(){return bt(e,"start",[i])},o,a,n,r)}(this,t,r=wt(r),o)}}var e=t.prototype;return e.cancel=function(t){return!1===Ht(this)?Promise.reject(Ge("cancel")):!0===Xt(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):Zt(this,t)},e.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Ht(this))throw Ge("getReader");if(void 0===e)return zt(this);if("byob"===(e=String(e)))return function(t){return new oe(t)}(this);throw new RangeError("Invalid mode is specified")},e.pipeThrough=function(t,e){var n=t.writable,r=t.readable;if(void 0===n||void 0===r)throw new TypeError("readable and writable arguments must be defined");return function(t){try{Promise.prototype.then.call(t,void 0,function(){})}catch(t){}}(this.pipeTo(n,e)),r},e.pipeTo=function(t,e){var n=this,r=void 0===e?{}:e,i=r.preventClose,o=r.preventAbort,a=r.preventCancel,s=r.signal;if(!1===Ht(this))return Promise.reject(Ge("pipeTo"));if(!1===kt(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(i=Boolean(i),o=Boolean(o),a=Boolean(a),void 0!==s&&!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getOwnPropertyDescriptor(AbortSignal.prototype,"aborted").get;try{return e.call(t),!0}catch(t){return!1}}(s))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal"));if(!0===Xt(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===xt(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var u=zt(this),c=It(t),l=!1,f=Promise.resolve();return new Promise(function(e,r){var h;if(void 0!==s){if(h=function(){var e=new DOMException("Aborted","AbortError"),r=[];!1===o&&r.push(function(){return"writable"===t._state?Mt(t,e):Promise.resolve()}),!1===a&&r.push(function(){return"readable"===n._state?Zt(n,e):Promise.resolve()}),g(function(){return At(r.map(function(t){return t()}),function(t){return t})},!0,e)},!0===s.aborted)return void h();s.addEventListener("abort",h)}if(p(n,u._closedPromise,function(e){!1===o?g(function(){return Mt(t,e)},!0,e):y(!0,e)}),p(t,c._closedPromise,function(t){!1===a?g(function(){return Zt(n,t)},!0,t):y(!0,t)}),function(t,e,n){"closed"===t._state?n():e.then(n).catch(Tt)}(n,u._closedPromise,function(){!1===i?g(function(){return Ct(c)}):y()}),!0===Nt(t)||"closed"===t._state){var d=new TypeError("the destination writable stream closed before all data could be piped to it");!1===a?g(function(){return Zt(n,d)},!0,d):y(!0,d)}function v(){var t=f;return f.then(function(){return t!==f?v():void 0})}function p(t,e,n){"errored"===t._state?n(t._storedError):e.catch(n).catch(Tt)}function g(e,n,r){function i(){e().then(function(){return b(n,r)},function(t){return b(!0,t)}).catch(Tt)}!0!==l&&(l=!0,"writable"===t._state&&!1===Nt(t)?v().then(i):i())}function y(e,n){!0!==l&&(l=!0,"writable"===t._state&&!1===Nt(t)?v().then(function(){return b(e,n)}).catch(Tt):b(e,n))}function b(t,n){Ft(c),le(u),void 0!==s&&s.removeEventListener("abort",h),t?r(n):e(void 0)}new Promise(function(t,e){!function n(r){r?t():(!0===l?Promise.resolve(!0):c._readyPromise.then(function(){return fe(u).then(function(t){var e=t.value,n=t.done;return!0===n||(f=Lt(c,e).catch(function(){}),!1)})})).then(n,e)}(!1)}).catch(function(t){f=Promise.resolve(),Tt(t)})})},e.tee=function(){if(!1===Ht(this))throw Ge("tee");var t=function(t,e){var n,r,i,o,a,s=zt(t),u=!1,c=!1,l=!1,f=new Promise(function(t){a=t});function h(){return fe(s).then(function(t){var e=t.value,n=t.done;if(!0===n&&!1===u&&(!1===c&&ye(i._readableStreamController),!1===l&&ye(o._readableStreamController),u=!0),!0!==u){var r=e,a=e;!1===c&&be(i._readableStreamController,r),!1===l&&be(o._readableStreamController,a)}})}function d(){}return i=Gt(d,h,function(e){if(c=!0,n=e,!0===l){var i=Et([n,r]),o=Zt(t,i);a(o)}return f}),o=Gt(d,h,function(e){if(l=!0,r=e,!0===c){var i=Et([n,r]),o=Zt(t,i);a(o)}return f}),s._closedPromise.catch(function(t){!0!==u&&(me(i._readableStreamController,t),me(o._readableStreamController,t),u=!0)}),[i,o]}(this);return Et(t)},r(t,[{key:"locked",get:function(){if(!1===Ht(this))throw Ge("locked");return Xt(this)}}]),t}(),Vt={CreateReadableByteStream:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=void 0);var o=Object.create(Ut.prototype);Wt(o);var a=Object.create(Se.prototype);return ze(o,a,t,e,n,r,i),o},CreateReadableStream:Gt,ReadableStream:Ut,IsReadableStreamDisturbed:function(t){return t._disturbed},ReadableStreamDefaultControllerClose:ye,ReadableStreamDefaultControllerEnqueue:be,ReadableStreamDefaultControllerError:me,ReadableStreamDefaultControllerGetDesiredSize:_e,ReadableStreamDefaultControllerHasBackpressure:function(t){return!0!==pe(t)},ReadableStreamDefaultControllerCanCloseOrEnqueue:we};function zt(t){return new ie(t)}function Gt(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i=function(){return 1});var o=Object.create(Ut.prototype);return Wt(o),Oe(o,Object.create(he.prototype),t,e,n,r,i),o}function Wt(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function Ht(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function Xt(t){return void 0!==t._reader}function qt(t,e){return new Promise(function(n,r){var i={_resolve:n,_reject:r,_forAuthorCode:e};t._reader._readIntoRequests.push(i)})}function Yt(t,e){return new Promise(function(n,r){var i={_resolve:n,_reject:r,_forAuthorCode:e};t._reader._readRequests.push(i)})}function Zt(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(Kt(t),t._readableStreamController[Dt](e).then(function(){}))}function Kt(t){t._state="closed";var e=t._reader;if(void 0!==e){if(!0===se(e)){for(var n=0,r=e._readRequests;n<r.length;n++){var i=r[n];(0,i._resolve)(Qt(void 0,!0,i._forAuthorCode))}e._readRequests=[]}!function(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(e)}}function Qt(t,e,n){var r=null;!0===n&&(r=Object.prototype);var i=Object.create(r);return Object.defineProperty(i,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(i,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),i}function Jt(t,e){t._state="errored",t._storedError=e;var n=t._reader;if(void 0!==n){if(!0===se(n)){for(var r=0,i=n._readRequests;r<i.length;r++)i[r]._reject(e);n._readRequests=[]}else{for(var o=0,a=n._readIntoRequests;o<a.length;o++)a[o]._reject(e);n._readIntoRequests=[]}Xe(n,e),n._closedPromise.catch(function(){})}}function $t(t,e,n){var r=t._reader._readRequests.shift();r._resolve(Qt(e,n,r._forAuthorCode))}function te(t){return t._reader._readIntoRequests.length}function ee(t){return t._reader._readRequests.length}function ne(t){var e=t._reader;return void 0!==e&&!1!==ae(e)}function re(t){var e=t._reader;return void 0!==e&&!1!==se(e)}var ie=function(){function t(t){if(!1===Ht(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Xt(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ue(this,t),this._readRequests=[]}var e=t.prototype;return e.cancel=function(t){return!1===se(this)?Promise.reject(He("cancel")):void 0===this._ownerReadableStream?Promise.reject(We("cancel")):ce(this,t)},e.read=function(){return!1===se(this)?Promise.reject(He("read")):void 0===this._ownerReadableStream?Promise.reject(We("read from")):fe(this,!0)},e.releaseLock=function(){if(!1===se(this))throw He("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");le(this)}},r(t,[{key:"closed",get:function(){return!1===se(this)?Promise.reject(He("closed")):this._closedPromise}}]),t}(),oe=function(){function t(t){if(!Ht(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Ae(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Xt(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ue(this,t),this._readIntoRequests=[]}var e=t.prototype;return e.cancel=function(t){return ae(this)?void 0===this._ownerReadableStream?Promise.reject(We("cancel")):ce(this,t):Promise.reject(qe("cancel"))},e.read=function(t){return ae(this)?void 0===this._ownerReadableStream?Promise.reject(We("read from")):ArrayBuffer.isView(t)?!0===mt(t.buffer)?Promise.reject(new TypeError("Cannot read into a view onto a detached ArrayBuffer")):0===t.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(t,e,n){void 0===n&&(n=!1);var r=t._ownerReadableStream;return r._disturbed=!0,"errored"===r._state?Promise.reject(r._storedError):function(t,e,n){var r=t._controlledReadableByteStream,i=1;e.constructor!==DataView&&(i=e.constructor.BYTES_PER_ELEMENT);var o=e.constructor,a={buffer:_t(e.buffer),byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:i,ctor:o,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(a),qt(r,n);if("closed"===r._state){var s=new e.constructor(a.buffer,a.byteOffset,0);return Promise.resolve(Qt(s,!0,n))}if(t._queueTotalSize>0){if(!0===xe(t,a)){var u=Ie(a);return Ce(t),Promise.resolve(Qt(u,!1,n))}if(!0===t._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ue(t,c),Promise.reject(c)}}t._pendingPullIntos.push(a);var l=qt(r,n);return je(t),l}(r._readableStreamController,e,n)}(this,t,!0):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(qe("read"))},e.releaseLock=function(){if(!ae(this))throw qe("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");le(this)}},r(t,[{key:"closed",get:function(){return ae(this)?this._closedPromise:Promise.reject(qe("closed"))}}]),t}();function ae(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function se(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function ue(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?function(t){t._closedPromise=new Promise(function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n})}(t):"closed"===e._state?function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t):(function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t,e._storedError),t._closedPromise.catch(function(){}))}function ce(t,e){return Zt(t._ownerReadableStream,e)}function le(t){"readable"===t._ownerReadableStream._state?Xe(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){t._closedPromise=Promise.reject(e)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch(function(){}),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function fe(t,e){void 0===e&&(e=!1);var n=t._ownerReadableStream;return n._disturbed=!0,"closed"===n._state?Promise.resolve(Qt(void 0,!0,e)):"errored"===n._state?Promise.reject(n._storedError):n._readableStreamController[Bt](e)}var he=function(){function t(){throw new TypeError}var e=t.prototype;return e.close=function(){if(!1===de(this))throw Ye("close");if(!1===we(this))throw new TypeError("The stream is not in a state that permits close");ye(this)},e.enqueue=function(t){if(!1===de(this))throw Ye("enqueue");if(!1===we(this))throw new TypeError("The stream is not in a state that permits enqueue");return be(this,t)},e.error=function(t){if(!1===de(this))throw Ye("error");me(this,t)},e[Dt]=function(t){Rt(this);var e=this._cancelAlgorithm(t);return ge(this),e},e[Bt]=function(t){var e=this._controlledReadableStream;if(this._queue.length>0){var n=jt(this);return!0===this._closeRequested&&0===this._queue.length?(ge(this),Kt(e)):ve(this),Promise.resolve(Qt(n,!1,t))}var r=Yt(e,t);return ve(this),r},r(t,[{key:"desiredSize",get:function(){if(!1===de(this))throw Ye("desiredSize");return _e(this)}}]),t}();function de(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")}function ve(t){!1!==pe(t)&&(!0!==t._pulling?(t._pulling=!0,t._pullAlgorithm().then(function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,ve(t)},function(e){me(t,e)}).catch(Tt)):t._pullAgain=!0)}function pe(t){var e=t._controlledReadableStream;return!1!==we(t)&&!1!==t._started&&(!0===Xt(e)&&ee(e)>0||_e(t)>0)}function ge(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ye(t){var e=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ge(t),Kt(e))}function be(t,e){var n=t._controlledReadableStream;if(!0===Xt(n)&&ee(n)>0)$t(n,e,!1);else{var r;try{r=t._strategySizeAlgorithm(e)}catch(e){throw me(t,e),e}try{Pt(t,e,r)}catch(e){throw me(t,e),e}}ve(t)}function me(t,e){var n=t._controlledReadableStream;"readable"===n._state&&(Rt(t),ge(t),Jt(n,e))}function _e(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function we(t){var e=t._controlledReadableStream._state;return!1===t._closeRequested&&"readable"===e}function Oe(t,e,n,r,i,o,a){e._controlledReadableStream=t,e._queue=void 0,e._queueTotalSize=void 0,Rt(e),e._started=!1,e._closeRequested=!1,e._pullAgain=!1,e._pulling=!1,e._strategySizeAlgorithm=a,e._strategyHWM=o,e._pullAlgorithm=r,e._cancelAlgorithm=i,t._readableStreamController=e;var s=n();Promise.resolve(s).then(function(){e._started=!0,ve(e)},function(t){me(e,t)}).catch(Tt)}var Ee=function(){function t(){throw new TypeError("ReadableStreamBYOBRequest cannot be used directly")}var e=t.prototype;return e.respond=function(t){if(!1===Te(this))throw Ze("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!0===mt(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");!function(t,e){if(e=Number(e),!1===yt(e))throw new RangeError("bytesWritten must be a finite");Ne(t,e)}(this._associatedReadableByteStreamController,t)},e.respondWithNewView=function(t){if(!1===Te(this))throw Ze("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(!0===mt(t.buffer))throw new TypeError("The supplied view's buffer has been detached and so cannot be used as a response");!function(t,e){var n=t._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=e.buffer,Ne(t,e.byteLength)}(this._associatedReadableByteStreamController,t)},r(t,[{key:"view",get:function(){if(!1===Te(this))throw Ze("view");return this._view}}]),t}(),Se=function(){function t(){throw new TypeError("ReadableByteStreamController constructor cannot be used directly")}var e=t.prototype;return e.close=function(){if(!1===Ae(this))throw Ke("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t._controlledReadableByteStream;if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0){var n=t._pendingPullIntos[0];if(n.bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ue(t,r),r}}Be(t),Kt(e)}}(this)},e.enqueue=function(t){if(!1===Ae(this))throw Ke("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");if(!0===mt(t.buffer))throw new TypeError("Cannot enqueue a view onto a detached ArrayBuffer");!function(t,e){var n=t._controlledReadableByteStream,r=e.buffer,i=e.byteOffset,o=e.byteLength,a=_t(r);if(!0===re(n))if(0===ee(n))ke(t,a,i,o);else{var s=new Uint8Array(a,i,o);$t(n,s,!1)}else!0===ne(n)?(ke(t,a,i,o),Le(t)):ke(t,a,i,o);je(t)}(this,t)},e.error=function(t){if(!1===Ae(this))throw Ke("error");Ue(this,t)},e[Dt]=function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),Rt(this);var e=this._cancelAlgorithm(t);return Be(this),e},e[Bt]=function(t){var e=this._controlledReadableByteStream;if(this._queueTotalSize>0){var n,r=this._queue.shift();this._queueTotalSize-=r.byteLength,Ce(this);try{n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(t){return Promise.reject(t)}return Promise.resolve(Qt(n,!1,t))}var i=this._autoAllocateChunkSize;if(void 0!==i){var o;try{o=new ArrayBuffer(i)}catch(t){return Promise.reject(t)}var a={buffer:o,byteOffset:0,byteLength:i,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}var s=Yt(e,t);return je(this),s},r(t,[{key:"byobRequest",get:function(){if(!1===Ae(this))throw Ke("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(Ee.prototype);!function(t,e,n){t._associatedReadableByteStreamController=e,t._view=n}(n,this,e),this._byobRequest=n}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===Ae(this))throw Ke("desiredSize");return Ve(this)}}]),t}();function Ae(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")}function Te(t){return!!St(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function je(t){!1!==function(t){var e=t._controlledReadableByteStream;return"readable"===e._state&&!0!==t._closeRequested&&!1!==t._started&&(!0===re(e)&&ee(e)>0||!0===ne(e)&&te(e)>0||Ve(t)>0)}(t)&&(!0!==t._pulling?(t._pulling=!0,t._pullAlgorithm().then(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,je(t))},function(e){Ue(t,e)}).catch(Tt)):t._pullAgain=!0)}function Pe(t){Fe(t),t._pendingPullIntos=[]}function Re(t,e){var n=!1;"closed"===t._state&&(n=!0);var r=Ie(e);"default"===e.readerType?$t(t,r,n):function(t,e,n){var r=t._reader._readIntoRequests.shift();r._resolve(Qt(e,n,r._forAuthorCode))}(t,r,n)}function Ie(t){var e=t.bytesFilled,n=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/n)}function ke(t,e,n,r){t._queue.push({buffer:e,byteOffset:n,byteLength:r}),t._queueTotalSize+=r}function xe(t,e){var n=e.elementSize,r=e.bytesFilled-e.bytesFilled%n,i=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),o=e.bytesFilled+i,a=o-o%n,s=i,u=!1;a>r&&(s=a-e.bytesFilled,u=!0);for(var c=t._queue;s>0;){var l=c[0],f=Math.min(s,l.byteLength),h=e.byteOffset+e.bytesFilled;pt(e.buffer,h,l.buffer,l.byteOffset,f),l.byteLength===f?c.shift():(l.byteOffset+=f,l.byteLength-=f),t._queueTotalSize-=f,Me(t,f,e),s-=f}return u}function Me(t,e,n){Fe(t),n.bytesFilled+=e}function Ce(t){0===t._queueTotalSize&&!0===t._closeRequested?(Be(t),Kt(t._controlledReadableByteStream)):je(t)}function Fe(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function Le(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===xe(t,e)&&(De(t),Re(t._controlledReadableByteStream,e))}}function Ne(t,e){var n=t._pendingPullIntos[0];if("closed"===t._controlledReadableByteStream._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=_t(e.buffer);var n=t._controlledReadableByteStream;if(!0===ne(n))for(;te(n)>0;)Re(n,De(t))}(t,n)}else!function(t,e,n){if(n.bytesFilled+e>n.byteLength)throw new RangeError("bytesWritten out of range");if(Me(t,e,n),!(n.bytesFilled<n.elementSize)){De(t);var r=n.bytesFilled%n.elementSize;if(r>0){var i=n.byteOffset+n.bytesFilled,o=n.buffer.slice(i-r,i);ke(t,o,0,o.byteLength)}n.buffer=_t(n.buffer),n.bytesFilled-=r,Re(t._controlledReadableByteStream,n),Le(t)}}(t,e,n);je(t)}function De(t){var e=t._pendingPullIntos.shift();return Fe(t),e}function Be(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function Ue(t,e){var n=t._controlledReadableByteStream;"readable"===n._state&&(Pe(t),Rt(t),Be(t),Jt(n,e))}function Ve(t){var e=t._controlledReadableByteStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function ze(t,e,n,r,i,o,a){e._controlledReadableByteStream=t,e._pullAgain=!1,e._pulling=!1,Pe(e),e._queue=e._queueTotalSize=void 0,Rt(e),e._closeRequested=!1,e._started=!1,e._strategyHWM=wt(o),e._pullAlgorithm=r,e._cancelAlgorithm=i,e._autoAllocateChunkSize=a,e._pendingPullIntos=[],t._readableStreamController=e;var s=n();Promise.resolve(s).then(function(){e._started=!0,je(e)},function(t){Ue(e,t)}).catch(Tt)}function Ge(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function We(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function He(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function Xe(t,e){t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function qe(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Ye(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Ze(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Ke(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}var Qe=Vt.ReadableStream,Je=h.createDataProperty,$e=function(){function t(t){var e=t.highWaterMark;Je(this,"highWaterMark",e)}return t.prototype.size=function(t){return t.byteLength},t}(),tn=h.createDataProperty,en=function(){function t(t){var e=t.highWaterMark;tn(this,"highWaterMark",e)}return t.prototype.size=function(){return 1},t}(),nn=(_("streams:transform-stream:verbose"),h.InvokeOrNoop),rn=h.CreateAlgorithmFromUnderlyingMethod,on=h.PromiseCall,an=h.typeIsObject,sn=h.ValidateAndNormalizeHighWaterMark,un=(h.IsNonNegativeNumber,h.MakeSizeAlgorithmFromSizeFunction),cn=Vt.CreateReadableStream,ln=Vt.ReadableStreamDefaultControllerClose,fn=Vt.ReadableStreamDefaultControllerEnqueue,hn=Vt.ReadableStreamDefaultControllerError,dn=Vt.ReadableStreamDefaultControllerGetDesiredSize,vn=Vt.ReadableStreamDefaultControllerHasBackpressure,pn=Vt.ReadableStreamDefaultControllerCanCloseOrEnqueue,gn=C.CreateWritableStream,yn=C.WritableStreamDefaultControllerErrorIfNeeded,bn=function(){function t(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n={});var r=e.size,i=e.highWaterMark,o=n.size,a=n.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var s=un(r);if(void 0===i&&(i=1),i=sn(i),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var u,c=un(o);void 0===a&&(a=0),a=sn(a),mn(this,new Promise(function(t){u=t}),i,s,a,c),function(t,e){var n=Object.create(Sn.prototype),r=function(t){try{return Pn(n,t),Promise.resolve()}catch(t){return Promise.reject(t)}},i=e.transform;if(void 0!==i){if("function"!=typeof i)throw new TypeError("transform is not a method");r=function(t){return on(i,e,[t,n])}}var o=rn(e,"flush",0,[n]);Tn(t,n,r,o)}(this,t);var l=nn(t,"start",[this._transformStreamController]);u(l)}return r(t,[{key:"readable",get:function(){if(!1===_n(this))throw kn("readable");return this._readable}},{key:"writable",get:function(){if(!1===_n(this))throw kn("writable");return this._writable}}]),t}();function mn(t,e,n,r,i,o){function a(){return e}t._writable=gn(a,function(e){return function(t,e){var n=t._transformStreamController;if(!0===t._backpressure){var r=t._backpressureChangePromise;return r.then(function(){var r=t._writable,i=r._state;if("erroring"===i)throw r._storedError;return Rn(n,e)})}return Rn(n,e)}(t,e)},function(){return function(t){var e=t._readable,n=t._transformStreamController,r=n._flushAlgorithm();return jn(n),r.then(function(){if("errored"===e._state)throw e._storedError;var t=e._readableStreamController;!0===pn(t)&&ln(t)}).catch(function(n){throw wn(t,n),e._storedError})}(t)},function(e){return function(t,e){return wn(t,e),Promise.resolve()}(t,e)},n,r),t._readable=cn(a,function(){return function(t){return En(t,!1),t._backpressureChangePromise}(t)},function(e){return On(t,e),Promise.resolve()},i,o),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,En(t,!0),t._transformStreamController=void 0}function _n(t){return!!an(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}function wn(t,e){hn(t._readable._readableStreamController,e),On(t,e)}function On(t,e){jn(t._transformStreamController),yn(t._writable._writableStreamController,e),!0===t._backpressure&&En(t,!1)}function En(t,e){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=new Promise(function(e){t._backpressureChangePromise_resolve=e}),t._backpressure=e}var Sn=function(){function t(){throw new TypeError("TransformStreamDefaultController instances cannot be created directly")}var e=t.prototype;return e.enqueue=function(t){if(!1===An(this))throw In("enqueue");Pn(this,t)},e.error=function(t){if(!1===An(this))throw In("error");!function(t,e){wn(t._controlledTransformStream,e)}(this,t)},e.terminate=function(){if(!1===An(this))throw In("terminate");!function(t){var e=t._controlledTransformStream,n=e._readable._readableStreamController;!0===pn(n)&&ln(n);var r=new TypeError("TransformStream terminated");On(e,r)}(this)},r(t,[{key:"desiredSize",get:function(){if(!1===An(this))throw In("desiredSize");var t=this._controlledTransformStream._readable._readableStreamController;return dn(t)}}]),t}();function An(t){return!!an(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function Tn(t,e,n,r){e._controlledTransformStream=t,t._transformStreamController=e,e._transformAlgorithm=n,e._flushAlgorithm=r}function jn(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function Pn(t,e){var n=t._controlledTransformStream,r=n._readable._readableStreamController;if(!1===pn(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{fn(r,e)}catch(t){throw On(n,t),n._readable._storedError}vn(r)!==n._backpressure&&En(n,!0)}function Rn(t,e){return t._transformAlgorithm(e).catch(function(e){throw wn(t._controlledTransformStream,e),e})}function In(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function kn(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}var xn=bn;void 0!==u&&i(u,{ReadableStream:Qe,WritableStream:vt,ByteLengthQueuingStrategy:$e,CountQueuingStrategy:en,TransformStream:xn}),e.ReadableStream=Qe,e.WritableStream=vt,e.ByteLengthQueuingStrategy=$e,e.CountQueuingStrategy=en,e.TransformStream=xn,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(39))},function(t,e,n){"use strict";n.r(e),n.d(e,"createReadableStreamWrapper",function(){return d}),n.d(e,"createWrappingReadableSource",function(){return v}),n.d(e,"createWritableStreamWrapper",function(){return _}),n.d(e,"createWrappingWritableSink",function(){return w}),n.d(e,"createTransformStreamWrapper",function(){return E}),n.d(e,"createWrappingTransformer",function(){return S});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){if(!t)throw new TypeError("Assertion failed")}function a(){}function s(t){return"object"==typeof t&&null!==t||"function"==typeof t}function u(t){if("function"!=typeof t)return!1;var e=!1;try{new t({start:function(){e=!0}})}catch(t){}return e}function c(t){return!!s(t)&&"function"==typeof t.getReader}function l(t){return!!s(t)&&"function"==typeof t.getWriter}function f(t){return!!s(t)&&(!!c(t.readable)&&!!l(t.writable))}function h(t){try{return t.getReader({mode:"byob"}).releaseLock(),!0}catch(t){return!1}}function d(t){o(function(t){return!!u(t)&&!!c(new t)}(t));var e=function(t){try{return new t({type:"bytes"}),!0}catch(t){return!1}}(t);return function(n,r){var i=(void 0===r?{}:r).type;if("bytes"!==(i=p(i))||e||(i=void 0),n.constructor===t&&("bytes"!==i||h(n)))return n;var o=v(n,{type:i});return new t(o)}}function v(t,e){var n=(void 0===e?{}:e).type;return o(c(t)),o(!1===t.locked),"bytes"===(n=p(n))?new m(t):new y(t)}function p(t){var e=String(t);if("bytes"===e)return e;if(void 0===t)return t;throw new RangeError("Invalid type is specified")}var g=function(){function t(t){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=t,this._attachDefaultReader()}return t.prototype.start=function(t){this._readableStreamController=t},t.prototype.cancel=function(t){return o(void 0!==this._underlyingReader),this._underlyingReader.cancel(t)},t.prototype._attachDefaultReader=function(){if("default"!==this._readerMode){this._detachReader();var t=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(t)}},t.prototype._attachReader=function(t){var e=this;o(void 0===this._underlyingReader),this._underlyingReader=t;var n=this._underlyingReader.closed;n&&n.then(function(){return e._finishPendingRead()}).then(function(){t===e._underlyingReader&&e._readableStreamController.close()},function(n){t===e._underlyingReader&&e._readableStreamController.error(n)}).catch(a)},t.prototype._detachReader=function(){void 0!==this._underlyingReader&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},t.prototype._pullWithDefaultReader=function(){var t=this;this._attachDefaultReader();var e=this._underlyingReader.read().then(function(e){var n=e.value,r=e.done,i=t._readableStreamController;r?t._tryClose():i.enqueue(n)});return this._setPendingRead(e),e},t.prototype._tryClose=function(){try{this._readableStreamController.close()}catch(t){}},t.prototype._setPendingRead=function(t){var e,n=this,r=function(){n._pendingRead===e&&(n._pendingRead=void 0)};this._pendingRead=e=t.then(r,r)},t.prototype._finishPendingRead=function(){var t=this;if(this._pendingRead){var e=function(){return t._finishPendingRead()};return this._pendingRead.then(e,e)}},t}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.pull=function(){return this._pullWithDefaultReader()},e}(g);function b(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var m=function(t){function e(e){var n=this,r=h(e);return(n=t.call(this,e)||this)._supportsByob=r,n}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"bytes"},enumerable:!0,configurable:!0}),e.prototype._attachByobReader=function(){if("byob"!==this._readerMode){o(this._supportsByob),this._detachReader();var t=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(t)}},e.prototype.pull=function(){if(this._supportsByob){var t=this._readableStreamController.byobRequest;if(void 0!==t)return this._pullWithByobRequest(t)}return this._pullWithDefaultReader()},e.prototype._pullWithByobRequest=function(t){var e=this;this._attachByobReader();var n=new Uint8Array(t.view.byteLength),r=this._underlyingReader.read(n).then(function(n){var r,i,o,a=n.value,s=n.done;e._readableStreamController;s?(e._tryClose(),t.respond(0)):(r=a,i=t.view,o=b(r),b(i).set(o,0),t.respond(a.byteLength))});return this._setPendingRead(r),r},e}(g);function _(t){return o(function(t){return!!u(t)&&!!l(new t)}(t)),function(e){if(e.constructor===t)return e;var n=w(e);return new t(n)}}function w(t){o(l(t)),o(!1===t.locked);var e=t.getWriter();return new O(e)}var O=function(){function t(t){var e=this;this._writableStreamController=void 0,this._pendingWrite=void 0,this._state="writable",this._storedError=void 0,this._underlyingWriter=t,this._errorPromise=new Promise(function(t,n){e._errorPromiseReject=n}),this._errorPromise.catch(a)}return t.prototype.start=function(t){var e=this;this._writableStreamController=t,this._underlyingWriter.closed.then(function(){e._state="closed"}).catch(function(t){return e._finishErroring(t)})},t.prototype.write=function(t){var e=this,n=this._underlyingWriter;if(null===n.desiredSize)return n.ready;var r=n.write(t);r.catch(function(t){return e._finishErroring(t)}),n.ready.catch(function(t){return e._startErroring(t)});var i=Promise.race([r,this._errorPromise]);return this._setPendingWrite(i),i},t.prototype.close=function(){var t=this;return void 0===this._pendingWrite?this._underlyingWriter.close():this._finishPendingWrite().then(function(){return t.close()})},t.prototype.abort=function(t){if("errored"!==this._state)return this._underlyingWriter.abort(t)},t.prototype._setPendingWrite=function(t){var e,n=this,r=function(){n._pendingWrite===e&&(n._pendingWrite=void 0)};this._pendingWrite=e=t.then(r,r)},t.prototype._finishPendingWrite=function(){var t=this;if(void 0===this._pendingWrite)return Promise.resolve();var e=function(){return t._finishPendingWrite()};return this._pendingWrite.then(e,e)},t.prototype._startErroring=function(t){var e=this;if("writable"===this._state){this._state="erroring",this._storedError=t;var n=function(){return e._finishErroring(t)};void 0===this._pendingWrite?n():this._finishPendingWrite().then(n,n),this._writableStreamController.error(t)}},t.prototype._finishErroring=function(t){"writable"===this._state&&this._startErroring(t),"erroring"===this._state&&(this._state="errored",this._errorPromiseReject(this._storedError))},t}();function E(t){return o(function(t){return!!u(t)&&!!f(new t)}(t)),function(e){if(e.constructor===t)return e;var n=S(e);return new t(n)}}function S(t){o(f(t));var e=t.readable,n=t.writable;o(!1===e.locked),o(!1===n.locked);var r,i=e.getReader();try{r=n.getWriter()}catch(t){throw i.releaseLock(),t}return new A(i,r)}var A=function(){function t(t,e){var n=this;this._transformStreamController=void 0,this._onRead=function(t){var e=t.done,r=t.value;if(!e)return n._transformStreamController.enqueue(r),n._reader.read().then(n._onRead)},this._onError=function(t){n._flushReject(t),n._transformStreamController.error(t),n._reader.cancel(t).catch(a),n._writer.abort(t).catch(a)},this._onTerminate=function(){n._flushResolve(),n._transformStreamController.terminate();var t=new TypeError("TransformStream terminated");n._writer.abort(t).catch(a)},this._reader=t,this._writer=e,this._flushPromise=new Promise(function(t,e){n._flushResolve=t,n._flushReject=e})}return t.prototype.start=function(t){this._transformStreamController=t,this._reader.read().then(this._onRead).then(this._onTerminate,this._onError);var e=this._reader.closed;e&&e.then(this._onTerminate,this._onError)},t.prototype.transform=function(t){return this._writer.write(t)},t.prototype.flush=function(){var t=this;return this._writer.close().then(function(){return t._flushPromise})},t}()},function(t,e,n){"use strict";n.r(e);var r=n(56),i=n(12);if(r.global.deck&&"6.3.2"!==r.global.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(r.global.deck.VERSION," vs ").concat("6.3.2"));r.global.deck||(i.a.log(0,"deck.gl ".concat("6.3.2"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),r.global.deck=r.global.deck||{VERSION:"6.3.2",version:"6.3.2",log:i.a}),console.table||(console.table=function(){}),n(82);n(82);var o=n(16),a=n(9),s=n(10),u=n(23),c=n.n(u),l=n(11),f=n.n(l);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},b=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=v(this,p(e).call(this,t,r));var i=r.transition,o=void 0!==i&&i,a=r.noAlloc,s=void 0!==a&&a,u=r.update,c=void 0===u?null:u,l=r.accessor,f=void 0===l?null:l,h=r.bufferLayout,d=void 0===h?null:h,g=r.defaultValue,b=void 0===g?[0,0,0,0]:g;return b=Array.isArray(b)?b:[b],Object.assign(n.userData,y,r,{transition:o,noAlloc:s,update:c,accessor:f,defaultValue:b,bufferLayout:d}),Object.seal(n.userData),n._validateAttributeUpdaters(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,s["i"]),n=e,(r=[{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,e=void 0!==t&&t,n=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!e,n}},{key:"getInstanceCount",value:function(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function(){var t=this.userData.accessor;return[this.id].concat(t||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"supportsTransition",value:function(){return this.userData.transition}},{key:"getTransitionSetting",value:function(t){var e=this.userData,n=e.transition,r=e.accessor;if(!n)return null;var i=Array.isArray(r)?t[r.find(function(e){return t[e]})]:t[r];return Number.isFinite(i)&&(i={duration:i}),i&&i.duration>0?Object.assign({},n,i):null}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||t}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||t}},{key:"allocate",value:function(t){var e=this.userData;if(e.isExternalBuffer||e.noAlloc)return!1;var n=this.getInstanceCount();if((0===n||n<t)&&(e.update||e.accessor)){Object(a.a)(Number.isFinite(t));var r=Math.max(t,1),i=m(this.type||f.a.FLOAT);return this.constant=!1,this.value=new i(this.size*r),e.needsUpdate=!0,e.allocedInstances=r,!0}return!1}},{key:"updateBuffer",value:function(t){var e=t.numInstances,n=t.data,r=t.props,i=t.context;if(!this.needsUpdate())return!1;var o=this.userData,a=o.update,s=o.accessor,u=!0;return a?(a.call(i,this,{data:n,props:r,numInstances:e}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):s?(this._updateBufferViaStandardAccessor(n,r),this._checkAttributeArray()):u=!1,o.needsUpdate=!1,o.needsRedraw=!0,u}},{key:"setGenericValue",value:function(t){var e=this.userData;if(void 0===t||"function"==typeof t)return e.isExternalBuffer=!1,!1;t=this._normalizeValue(t);var n=!this.constant||!this._areValuesEqual(t,this.value);return n&&this.update({constant:!0,value:t}),e.needsRedraw=e.needsUpdate||n,e.needsUpdate=!1,e.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function(t,e){var n=this.userData;if(t){if(n.isExternalBuffer=!0,n.needsUpdate=!1,t instanceof s.b)this.externalBuffer!==t&&(this.update({constant:!1,buffer:t}),n.needsRedraw=!0);else{var r=m(this.type||f.a.FLOAT);if(!(t instanceof r))throw new Error("Attribute ".concat(this.id," must be of type ").concat(r.name));if(n.auto&&t.length<=e*this.size)throw new Error("Attribute prop array must match length and size");this.value!==t&&(this.update({constant:!1,value:t}),n.needsRedraw=!0)}return!0}return n.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.userData.defaultValue;if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return e[n]=Number.isFinite(t)?t:r[0],e;switch(this.size){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0]}return e}},{key:"_areValuesEqual",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function(t,e){var n=this.userData.accessor,r=this.value,i=this.size,o=e[n];Object(a.a)("function"==typeof o,'accessor "'.concat(n,'" is not a function'));var s=0,u=!0,c=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=o(f.value);this._normalizeValue(d,r,s),s+=i}}catch(t){c=!0,l=t}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}this.update({value:r})}},{key:"_validateAttributeUpdaters",value:function(){var t=this.userData;if(!(t.noAlloc||"function"==typeof t.update||"string"==typeof t.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value;if(t&&t.length>=4&&!(Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(t){this.userData.bufferLayout=t}}])&&d(n.prototype,r),i&&d(n,i),e}();function m(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===e||e;switch(t){case f.a.FLOAT:return Float32Array;case f.a.UNSIGNED_SHORT:case f.a.UNSIGNED_SHORT_5_6_5:case f.a.UNSIGNED_SHORT_4_4_4_4:case f.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case f.a.UNSIGNED_INT:return Uint32Array;case f.a.UNSIGNED_BYTE:return n?Uint8ClampedArray:Uint8Array;case f.a.BYTE:return Int8Array;case f.a.SHORT:return Int16Array;case f.a.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function _(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,o=t.end,a=t.getData;o=o||n.length;var s=e.length,u=o-i;if(s>u)n.set(e.subarray(0,u),i);else if(n.set(e,i),a)for(var c=s;c<u;)for(var l=a(c,e),f=0;f<l.length;f++)n[i+c]=l[f],c++}var w={1:"float",2:"vec2",3:"vec3",4:"vec4"};function O(t){var e={},n={};for(var r in t){var i=t[r],o=i.fromState,a=i.toState,s=i.buffer;e["".concat(r,"From")]=o,e["".concat(r,"To")]=a,n["".concat(r)]=s}return{sourceBuffers:e,feedbackBuffers:n}}function E(t){var e=t.fromState,n=t.toState,r=t.fromLength,i=t.toLength,o=t.fromBufferLayout,a=t.toBufferLayout,u=t.getData,c=void 0===u?function(t){return t}:u;if((o&&a||!(r>=i))&&e instanceof s.b){var l=new Float32Array(i),f=e.getData({}),h=n.value,d=n.buffer,v=n.size,p=n.constant,g=h||d.getData({}),y=p?function(t,e){return c(h,e)}:function(t,e){return c(g.subarray(t,t+v),e)};!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,o=t.sourceLayout,a=t.targetLayout;if(!Array.isArray(a))return _({source:e,target:n,getData:i}),n;for(var s=0,u=0,c=i&&function(t,e){return i(t+u,e)},l=Math.min(o.length,a.length),f=0;f<l;f++){var h=o[f]*r,d=a[f]*r;_({source:e.subarray(s,s+h),target:n,start:u,end:u+d,getData:c}),s+=h,u+=d}u<n.length&&_({source:[],target:n,start:u,getData:c})}({source:f,target:l,sourceLayout:o,targetLayout:a,size:n.size,getData:y}),e.setData({data:l})}}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function T(){}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._startTime=null,this._state=A.NONE,this.duration=1,this.easing=function(t){return t},this.onStart=T,this.onUpdate=T,this.onInterrupt=T,this.onEnd=T,Object.assign(this,e)}var e,n,r;return e=t,(n=[{key:"start",value:function(t){this.inProgress&&this.onInterrupt(this),Object.assign(this,t),this._setState(A.PENDING)}},{key:"cancel",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(A.NONE))}},{key:"update",value:function(t){if(this.state===A.PENDING&&(this._startTime=t,this._setState(A.IN_PROGRESS)),this.state===A.IN_PROGRESS){var e=!1,n=(t-this._startTime)/this.duration;return n>=1&&(n=1,e=!0),this.time=this.easing(n),this.onUpdate(this),e&&this._setState(A.ENDED),!0}return!1}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,t){case A.PENDING:this.onStart(this);break;case A.ENDED:this.onEnd(this)}}},{key:"state",get:function(){return this._state}},{key:"inProgress",get:function(){return this._state===A.PENDING||this._state===A.IN_PROGRESS}}])&&S(e.prototype,n),r&&S(e,r),t}();function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var R=function(){},I={duration:0,easing:function(t){return t},onStart:R,onEnd:R,onInterrupt:R},k=function(){function t(e,n){var r=n.id;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=r,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,s.h.isSupported(e)?this.isSupported=!0:i.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){for(var t in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=void 0===n?{}:n,i=t.numInstances;if(this.opts=r,this.numInstances=i,this.isSupported){var o=this.attributeTransitions,a={};for(var s in e){this._updateAttribute(s,e[s])&&(a[s]=o[s])}for(var u in o){var c=e[u];c&&c.supportsTransition()||this._removeTransition(u)}if(this.transform){if(this.transform){var l=O(a),f=l.sourceBuffers,h=l.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:f,feedbackBuffers:h})}}else this._createModel()}}},{key:"hasAttribute",value:function(t){return t in this.attributeTransitions}},{key:"getAttributes",value:function(){var t={};for(var e in this.attributeTransitions){var n=this.attributeTransitions[e];n.buffer&&(t[e]=n.attributeInTransition)}return t}},{key:"setCurrentTime",value:function(t){if(!this.transform||0===this.numInstances)return!1;var e={},n=this.needsRedraw;for(var r in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[r];i.update(t)&&(e["".concat(r,"Time")]=i.time,n=!0)}return n&&this.transform.run({uniforms:e}),n}},{key:"_createTransition",value:function(t,e){var n=this.attributeTransitions[t];return n?null:(n=new j({name:t,attribute:e,attributeInTransition:new b(this.gl,e),bufferLayout:e.bufferLayout}),this.attributeTransitions[t]=n,this._invalidateModel(),n)}},{key:"_removeTransition",value:function(t){var e=this.attributeTransitions[t];e&&(e.buffer&&e.buffer.delete(),e._swapBuffer&&e._swapBuffer.delete(),delete this.attributeTransitions[t],this._invalidateModel())}},{key:"_updateAttribute",value:function(t,e){var n=e.getTransitionSetting(this.opts);if(n){var r,i=this.attributeTransitions[t];if(i?r=e.needsRedraw():(i=this._createTransition(t,e),r=!0),r)return this._triggerTransition(i,n),!0}return!1}},{key:"_invalidateModel",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new s.h(this.gl,Object.assign({elementCount:this.numInstances},O(this.attributeTransitions),function(t){var e=[],n=[],r=[],i=[],o=[];for(var a in t){var s=t[a],u=w[s.attribute.size];u&&(s.bufferIndex=e.length,e.push(a),n.push("attribute ".concat(u," ").concat(a,"From;")),n.push("attribute ".concat(u," ").concat(a,"To;")),r.push("uniform float ".concat(a,"Time;")),i.push("varying ".concat(u," ").concat(a,";")),o.push("".concat(a," = mix(").concat(a,"From, ").concat(a,"To,\n        ").concat(a,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(n.join("\n"),"\n").concat(r.join("\n"),"\n").concat(i.join("\n"),"\n\nvoid main(void) {\n  ").concat(o.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(i.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:e}}(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function(t,e){var n,r=t.attribute,i=r.size;n=r.constant?{constant:!0,value:r.value,size:i}:{constant:!1,buffer:r.getBuffer(),size:i,value:r.externalBuffer?null:r.value};var o=t.buffer||n,a=this.numInstances*i,u=o instanceof s.b&&o.getElementCount()||a,c=t._swapBuffer;return t._swapBuffer=t.buffer,c?c.getElementCount()<a&&c.setData({data:new Float32Array(a)}):c=new s.b(this.gl,{data:new Float32Array(a),usage:f.a.DYNAMIC_COPY}),t.attributeInTransition.update({buffer:c}),E({fromState:o,toState:n,fromLength:u,toLength:a,fromBufferLayout:t.bufferLayout,toBufferLayout:r.bufferLayout,getData:e.enter}),t.bufferLayout=r.bufferLayout,{fromState:o,toState:n,buffer:c}}},{key:"_triggerTransition",value:function(t,e){Object(a.a)(e&&e.duration>0),this.needsRedraw=!0;var n=Object.assign({},I,e);t.start(Object.assign({},this._getNextTransitionStates(t,e),n))}}])&&P(e.prototype,n),r&&P(e,r),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}function C(){}var F={savedMessages:null,timeStart:null,onLog:function(t){var e=t.level,n=t.message;i.a.log(e,n)()},onUpdateStart:function(t){t.level,t.numInstances;F.savedMessages=[],F.timeStart=new Date},onUpdate:function(t){t.level;var e=t.message;F.savedMessages&&F.savedMessages.push(e)},onUpdateEnd:function(t){var e=t.level,n=t.id,r=t.numInstances,o=Math.round(new Date-F.timeStart),a="".concat(o,"ms");i.a.group(e,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a),{collapsed:!0})();var s=!0,u=!1,c=void 0;try{for(var l,f=F.savedMessages[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;i.a.log(e,h)()}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}i.a.groupEnd(e,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a))(),F.savedMessages=null}},L=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,o=n.stats;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new k(e,{id:"".concat(i,"-transitions")}),Object.seal(this)}return M(t,null,[{key:"setDefaultLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,n=t.onUpdateStart,r=t.onUpdate,i=t.onUpdateEnd;void 0!==e&&(F.onLog=e||C),void 0!==n&&(F.onUpdateStart=n||C),void 0!==r&&(F.onUpdate=r||C),void 0!==i&&(F.onUpdateEnd=i||C)}}]),M(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e,n&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t){var e=this._invalidateTrigger(t);F.onLog({level:3,message:"invalidated attributes ".concat(e," (").concat(t,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(){for(var t in this.attributes)this.attributes[t].setNeedsUpdate();F.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.transitions,i=t.props,o=void 0===i?{}:i,a=t.buffers,s=void 0===a?{}:a,u=t.context,c=void 0===u?{}:u,l=!1;for(var f in F.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.timeStart("attribute updates",this.id),this.attributes){var h=this.attributes[f];h.setExternalBuffer(s[f],this.numInstances)||h.setGenericValue(o[h.getAccessor()])||h.needsUpdate()&&(l=!0,this._updateAttribute({attribute:h,numInstances:n,data:e,props:o,context:c})),this.needsRedraw|=h.needsRedraw()}l&&(this.stats&&this.stats.timeEnd("attribute updates",this.id),F.onUpdateEnd({level:2,id:this.id,numInstances:n})),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(t){t.clearChangedFlags;var e=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in e){var o=e[i];o.needsRedraw({clearChangedFlags:!0})&&(n.hasAttribute(i)||(r[i]=o))}return r}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&i.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var o in t){var a=t[o];r[o]=new b(this.gl,Object.assign({},a,{id:o,constant:a.constant||!1,isIndexed:a.isIndexed||a.elements,size:a.elements?1:a.size,value:a.value||null,instanced:a.instanced||n.instanced}))}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach(function(t){e[t]||(e[t]=[]),e[t].push(n)})};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t){var e=this.attributes,n=this.updateTriggers[t];if(n)n.forEach(function(t){var n=e[t];n&&n.setNeedsUpdate()});else{var r="invalidating non-existent trigger ".concat(t," for ").concat(this.id,"\n");r+="Valid triggers: ".concat(Object.keys(e).join(", ")),i.a.warn(r,n)()}return n}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances,r=t.data,i=t.props,o=t.context;e.allocate(n)&&F.onUpdate({level:3,message:"".concat(e.id," allocated ").concat(n),id:this.id});var a=Date.now();if(e.updateBuffer({numInstances:n,data:r,props:i,context:o})){this.needsRedraw=!0;var s=Math.round(Date.now()-a);F.onUpdate({level:3,message:"".concat(e.id," updated ").concat(n," in ").concat(s,"ms")})}}}]),t}();function N(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var D=new Map,B=function(t){if(c.a.isReady()&&t.id){var e=D.get(t.id);e&&e.forEach(function(e,n){!function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)}(t,n,e),"data"===n[0]&&(t.data=N(t.data))})}},U=function(t){c.a.isReady()&&c.a.listenFor("deck.gl",t)},V=function(t){c.a.isReady()&&c.a.listenFor("init",t)},z=function(t){if(c.a.isReady()&&t){var e=[t.constructor.layerName];c.a.listItem("deck.gl",t.id,{badges:e,links:t.state&&t.state.model?["luma.gl:".concat(t.state.model.id)]:void 0,parent:t.parent?t.parent.id:void 0})}},G=function(t){if(c.a.isReady()&&!c.a.throttle("deck.gl:".concat(t.id),1e3)){var e=function(t){var e=[{path:"objects.props",data:t.props}],n=[t.constructor.layerName];if(t.state){if(t.getAttributeManager()){var r=t.getAttributeManager().getAttributes();e.push({path:"objects.attributes",data:r}),n.push(t.getAttributeManager().stats.getTimeString())}if(t.state.model){t.state.model.setProps({timerQueryEnabled:!0});var i=t.state.model.stats.lastFrameTime;i&&n.push("".concat((1e3*i).toFixed(0),"s"))}}return e.push({path:"badges",data:n}),e}(t);c.a.multiUpdate("deck.gl",t.id,e)}};function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){var n=X({newProps:t,oldProps:e,propTypes:Y(t),ignoreProps:{data:null,updateTriggers:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=t.dataComparator;if(n){if(!n(t.data,e.data))return"Data comparator detected a change"}else if(t.data!==e.data)return"A new data container was supplied";return null}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){var n=q(t,e,"all");if(n)return{all:!0}}var r={},i=!1;for(var o in t.updateTriggers)if("all"!==o){var a=q(t,e,o);a&&(r[o]=!0,i=r)}return i}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i}}function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,o=t.propTypes,s=void 0===o?{}:o,u=t.triggerName,c=void 0===u?"props":u;if(Object(a.a)(void 0!==n&&void 0!==e,"compareProps args"),n===e)return null;if("object"!==W(e)||null===e)return"".concat(c," changed shallowly");if("object"!==W(n)||null===n)return"".concat(c," changed shallowly");for(var l in n)if(!(l in i)){if(!(l in e))return"".concat(c,".").concat(l," dropped: ").concat(n[l]," -> undefined");var f=e[l],h=n[l],d=s[l],v=d&&d.equal;if(v&&!v(f,h,d))return"".concat(c,".").concat(l," changed deeply: ").concat(h," -> ").concat(f);if(!v&&(v=f&&h&&f.equals)&&!v.call(f,h))return"".concat(c,".").concat(l," changed deeply: ").concat(h," -> ").concat(f);if(!v&&h!==f)return"".concat(c,".").concat(l," changed shallowly: ").concat(h," -> ").concat(f)}for(var p in e)if(!(p in i||p in n))return"".concat(c,".").concat(p," added: undefined -> ").concat(e[p]);return null}function q(t,e,n){var r=t.updateTriggers[n];r=null==r?{}:r;var i=e.updateTriggers[n];return X({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function Y(t){var e=t._component,n=e&&e.constructor;return n?n._propTypes:{}}function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var K="count(): argument not an object",Q="count(): argument not a container";function J(t){if(null===(e=t)||"object"!==Z(e))throw new Error(K);var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===Z(t)&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error(Q)}var $=n(70),tt={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var rt={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return st(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return it(t,e)}},accessor:{validate:function(t,e){var n=ut(t);return"function"===n||n===ut(e.value)},equal:function(t,e,n){return"function"==typeof e||it(t,e)}},array:{validate:function(t,e){return e.optional&&!t||st(t)},equal:function(t,e,n){return n.compare?it(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"==typeof t},equal:function(t,e,n){return!n.compare||t===e}}};function it(t,e){if(t===e)return!0;if(!st(t)||!st(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ot(t,e){switch(ut(e)){case"object":return at(t,e);case"array":return at(t,{type:"array",value:e,compare:!1});case"boolean":return at(t,{type:"boolean",value:e});case"number":return at(t,{type:"number",value:e});case"function":return at(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function at(t,e){return"type"in e?Object.assign({name:t},rt[e.type],e):"value"in e?Object.assign({name:t,type:ut(e.value)},e):{name:t,type:"object",value:e}}function st(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ut(t){return st(t)?"array":null===t?"null":et(t)}function ct(t){var e=ft(t,"_mergedDefaultProps");return e?{defaultProps:e,propTypes:ft(t,"_propTypes")}:function(t){var e=t.prototype;if(!e)return{defaultProps:{}};var n=Object.getPrototypeOf(t),r=e&&ct(n)||null,o=function(t){for(var e={},n={},r=Object.entries(t),i=0;i<r.length;i++){var o=nt(r[i],2),a=o[0],s=ot(a,o[1]);e[a]=s,n[a]=s.value}return{propTypes:e,defaultProps:n}}(ft(t,"defaultProps")||{}),a=Object.assign({},r&&r.propTypes,o.propTypes),s=function(t,e,n,r){var o=Object.create(null);Object.assign(o,e,t);var a=function(t){var e=ft(t,"layerName")||ft(t,"componentName");e||i.a.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(r);return delete t.id,Object.defineProperties(o,{id:{configurable:!1,writable:!0,value:a}}),function(t,e){var n={},r={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in e){var o=e[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=lt(a))}Object.defineProperties(t,r)}(o,n),o}(o.defaultProps,r&&r.defaultProps,a,t);return t._mergedDefaultProps=s,t._propTypes=a,{propTypes:a,defaultProps:s}}(t)}function lt(t){return{configurable:!1,enumerable:!0,set:function(e){"string"==typeof e||e instanceof Promise?this._asyncPropOriginalValues[t]=e:this._asyncPropResolvedValues[t]=e},get:function(){if(this._asyncPropResolvedValues){if(t in this._asyncPropResolvedValues){var e=this._asyncPropResolvedValues[t];return"data"===t?e||this._asyncPropDefaultValues[t]:e}if(t in this._asyncPropOriginalValues){var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(t))return n.getAsyncProp(t)}}return this._asyncPropDefaultValues[t]}}}function ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var dt=Object.freeze({}),vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=dt,this.oldAsyncProps=null}var e,n,r;return e=t,(n=[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[t]=this.oldProps[t]}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}},{key:"setAsyncProps",value:function(t){var e=t._asyncPropResolvedValues||{},n=t._asyncPropOriginalValues||t,r=t._asyncPropDefaultValues||{};for(var i in e){var o=e[i];this._createAsyncPropData(i,o,r[i]),this._updateAsyncProp(i,o)}for(var a in n){var s=n[a];this._createAsyncPropData(a,s,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function(t,e){if(this._didAsyncInputValueChange(t,e)){if("string"==typeof e)e=(0,this.layer.props.fetch)(e);e instanceof Promise?this._watchPromise(t,e):this._setPropValue(t,e)}}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){var n=this.asyncProps[t];n.value=e,n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&(Object(a.a)(void 0!==e),this.freezeAsyncOldProps(),e=this._postProcessValue(t,e),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this,r=this.asyncProps[t];r.pendingLoadCount++;var o=r.pendingLoadCount;e.then(function(e){return n._setAsyncPropValue(t,e,o)}).catch(function(t){return i.a.error(t)()})}},{key:"_postProcessValue",value:function(t,e){var n=(this.component?this.component.props:{}).dataTransform;return"data"===t&&n&&(e=n(e)),e}},{key:"_createAsyncPropData",value:function(t,e,n){this.asyncProps[t]||(this.asyncProps[t]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}])&&ht(e.prototype,n),r&&ht(e,r),t}();function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=0,yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.props=function(){for(var t=ct(this.constructor).defaultProps,e=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),n=0;n<arguments.length;++n)Object.assign(e,arguments[n]);return B(e),Object.freeze(e),e}.apply(this,arguments),this.id=this.props.id,this.count=gt++,this.lifecycle=tt.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}var e,n,r;return e=t,(n=[{key:"clone",value:function(t){return new this.constructor(Object.assign({},this.props,t))}},{key:"_initState",value:function(){this.internalState=new vt({})}},{key:"stats",get:function(){return this.internalState.stats}}])&&pt(e.prototype,n),r&&pt(e,r),t}();function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}yt.defaultProps={};var Et=function(t){function e(t){var n,r=t.attributeManager,i=t.layer;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_t(this,wt(e).call(this,i))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,vt),n=e,(r=[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}}])&&mt(n.prototype,r),i&&mt(n,i),e}(),St=n(24);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt={data:{type:"data",value:Object.freeze([]),async:!0},dataComparator:null,dataTransform:{type:"function",value:function(t){return t},compare:!1},fetch:{type:"function",value:function(t){return fetch(t).then(function(t){return t.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:o.a.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},xt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,Rt(e).apply(this,arguments))}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,yt),n=e,(r=[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setLayerNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t;return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var t=this.props.data,e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){return i.value}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return null}},{key:"project",value:function(t){var e=this.context.viewport,n=Object($.a)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),r=Tt(Object(St.k)(n,e.pixelProjectionMatrix),3),i=r[0],o=r[1],a=r[2];return 2===t.length?[i,o]:[i,o,a]}},{key:"unproject",value:function(t){var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.unproject(t)}},{key:"projectPosition",value:function(t){return Object(a.a)(Array.isArray(t)),Object($.b)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(t){i.a.deprecated("layer.projectFlat","layer.projectPosition")();var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.projectFlat(t)}},{key:"unprojectFlat",value:function(t){i.a.deprecated("layer.unprojectFlat")();var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.unprojectFlat(t)}},{key:"use64bitProjection",value:function(){if(this.props.fp64){if(this.props.coordinateSystem===o.a.LNGLAT_DEPRECATED)return!0;i.a.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function(){return this.props.fp64||this.props.coordinateSystem===o.a.LNGLAT}},{key:"screenToDevicePixels",value:function(t){return i.a.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),t*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function(t){this.props.onHover&&this.props.onHover(t,this.context.pickingEvent)}},{key:"onClick",value:function(t){this.props.onClick&&this.props.onClick(t,this.context.pickingEvent)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){return Object(a.a)(0==(t+1>>24&255),"index out of picking color range"),[t+1&255,t+1>>8&255,t+1>>8>>8&255]}},{key:"decodePickingColor",value:function(t){Object(a.a)(t instanceof Uint8Array);var e=Tt(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,n=this.getAttributeManager();e.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=this.getAttributeManager();o&&o.finalize()}},{key:"draw",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.draw(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===t?(i.a.log(1,"updateTriggers invalidating all attributes: ".concat(e))(),n.invalidateAll()):(i.a.log(1,"updateTriggers invalidating attribute ".concat(t,": ").concat(e))(),n.invalidate(t)))}},{key:"updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t);e.update({data:t.data,numInstances:n,props:t,transitions:t.transitions,buffers:t,context:this,ignoreUnknownAttributes:!0});var r=this.getSingleModel();if(r){var i=e.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(i)}}}},{key:"updateTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"calculateInstancePickingColors",value:function(t,e){for(var n=e.numInstances,r=t.value,i=t.size,o=0;o<n;o++){var a=this.encodePickingColor(o);r[o*i+0]=a[0],r[o*i+1]=a[1],r[o*i+2]=a[2]}}},{key:"_clearInstancePickingColor",value:function(t){var e=this.getAttributeManager().attributes.instancePickingColors,n=e.value,r=e.size,i=this.decodePickingColor(t);n[i*r+0]=0,n[i*r+1]=0,n[i*r+2]=0,e.update({value:n})}},{key:"_clearPickingColor",value:function(t){for(var e=this.getAttributeManager().attributes.pickingColors,n=e.value,r=0;r<n.length;r+=3)n[r+0]===t[0]&&n[r+1]===t[1]&&n[r+2]===t[2]&&(n[r+0]=0,n[r+1]=0,n[r+2]=0);e.update({value:n})}},{key:"clearPickingColor",value:function(t){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(t):this._clearInstancePickingColor(t)}},{key:"copyPickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors;return new Uint8ClampedArray((e||n).value)}},{key:"restorePickingColors",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors;(n||r).update({value:t})}},{key:"getNumInstances",value:function(t){return t=t||this.props,this.state&&void 0!==this.state.numInstances?this.state.numInstances:void 0!==t.numInstances?t.numInstances:J(this.props.data)}},{key:"_initialize",value:function(){Object(a.a)(this.context.gl),this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var t=this.getSingleModel();t&&(t.id=this.props.id,t.program.id="".concat(this.props.id,"-program"),t.geometry.id="".concat(this.props.id,"-geometry"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var t=this._getUpdateParams();this.updateState(t),this.isComposite?this._renderLayers(t):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function(){var t;Object(a.a)(this.internalState&&this.state),this.finalizeState(this.context),t=this.id,c.a.isReady()&&t&&c.a.deleteItem("deck.gl",t)}},{key:"drawLayer",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,o=void 0===i?{}:i,a=t.parameters,u=void 0===a?{}:a;o.picking_uActive||this.updateTransition(),r&&this.setModuleParameters(r);var c=this.context.animationProps;if(c){var l=!0,f=!1,h=void 0;try{for(var d,v=this.getModels()[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){d.value._setAnimationProps(c)}}catch(t){f=!0,h=t}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}}var p=this.props.getPolygonOffset,g=p&&p(o)||[0,0];u.polygonOffset=g,Object(s.z)(this.context.gl,u,function(){e.draw({moduleParameters:r,uniforms:o,parameters:u,context:e.context})})}},{key:"pickLayer",value:function(t){return this.getPickingInfo(t)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;t.dataChanged&&!n.dataChanged&&(n.dataChanged=t.dataChanged,i.a.log(2,function(){return"dataChanged: ".concat(t.dataChanged," in ").concat(e.id)})()),t.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&t.updateTriggersChanged?Object.assign({},t.updateTriggersChanged,n.updateTriggersChanged):t.updateTriggersChanged||n.updateTriggersChanged,i.a.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(t.updateTriggersChanged).join(", ")," in ").concat(e.id)})()),t.propsChanged&&!n.propsChanged&&(n.propsChanged=t.propsChanged,i.a.log(2,function(){return"propsChanged: ".concat(t.propsChanged," in ").concat(e.id)})()),t.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=t.viewportChanged,i.a.log(3,function(){return"viewportChanged: ".concat(t.viewportChanged," in ").concat(e.id)})()),t.stateChanged&&!n.stateChanged&&(n.stateChanged=t.stateChanged,i.a.log(2,function(){return"stateChanged: ".concat(t.stateChanged," in ").concat(e.id)})());var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var t=this.internalState.changeFlags;return"".concat(t.dataChanged?"data ":"").concat(t.propsChanged?"props ":"").concat(t.updateTriggersChanged?"triggers ":"").concat(t.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(t,e){var n=H(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(t){var e=Y(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}},{key:"setModuleParameters",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.updateModuleSettings(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw({clearRedrawFlags:t}),i=this._modelNeedsRedraw(t);return e=e||r||i}},{key:"_modelNeedsRedraw",value:function(t){var e=!1,n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getNeedsRedraw({clearRedrawFlags:t});u&&"string"!=typeof u&&(u="model ".concat(s.id)),e=e||u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"_getAttributeManager",value:function(){return new L(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function(){Object(a.a)(!this.internalState&&!this.state);var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:f.a.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new Et({attributeManager:t,layer:this}),this.state={},this.state.attributeManager=t,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){var e=t.state,n=t.internalState;if(Object(a.a)(e&&n),this!==t){this.internalState=n,this.internalState.component=this,this.state=e,e.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,i=!1,o=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){s.value.userData.layer=this}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(t){this.invalidateAttribute(t)}},{key:"_updateBaseUniforms",value:function(){var t=this,e={opacity:"function"==typeof this.props.opacity?function(e){return Math.pow(t.props.opacity(e),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.setUniforms(e)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"setUniforms",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.setUniforms(t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.setNeedsRedraw(),i.a.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function(){return i.a.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}])&&jt(n.prototype,r),u&&jt(n,u),e}();xt.layerName="Layer",xt.defaultProps=kt;var Mt=2,Ct=0,Ft=function(t){var e=t.useDevicePixels;return Object(a.a)("boolean"==typeof e,"Invalid useDevicePixels"),e&&"undefined"!=typeof window?window.devicePixelRatio:1},Lt=function(t,e){var n=e.viewport,r=e.pixelRatio,i=t.canvas?t.canvas.clientHeight:100,o=n;return[o.x*r,(i-o.y-o.height)*r,o.width*r,o.height*r]};function Nt(t,e){var n=e.layers,r=e.viewports,o=e.views,a=e.onViewportActive,u=e.useDevicePixels,c=e.drawPickingColors,l=void 0!==c&&c,h=e.deviceRect,d=void 0===h?null:h,v=e.parameters,p=void 0===v?{}:v,g=e.layerFilter,y=void 0===g?null:g,b=e.pass,m=void 0===b?"draw":b,_=e.redrawReason,w=void 0===_?"":_,O=e.stats;e.customRender||function(t,e){e.useDevicePixels;var n=t.drawingBufferWidth,r=t.drawingBufferHeight;Object(s.z)(t,{viewport:[0,0,n,r]},function(){t.clear(f.a.COLOR_BUFFER_BIT|f.a.DEPTH_BUFFER_BIT)})}(t,{useDevicePixels:u}),r.forEach(function(e,r){var c=function(t){return t.viewport?t.viewport:t}(e),f=o&&o[c.id];a(c),function(t,e){var n=e.layers,r=e.viewport,o=e.view,a=e.useDevicePixels,u=e.drawPickingColors,c=void 0!==u&&u,l=(e.deviceRect,e.parameters),f=void 0===l?{}:l,h=e.layerFilter,d=e.pass,v=void 0===d?"draw":d,p=e.redrawReason,g=void 0===p?"":p,y=e.stats,b=Ft({useDevicePixels:a}),m=Lt(t,{viewport:r,pixelRatio:b});if(o&&o.props.clear){var _=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;Object(s.z)(t,{scissorTest:!0,scissor:m},function(){return Object(s.o)(t,_)})}var w={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(s.x)(t,f||{}),n.forEach(function(e,n){var i=!e.isComposite&&e.props.visible;c&&(i=i&&e.props.pickable),i&&h&&(i=h({layer:e,viewport:r,isPicking:c})),i&&e.props.pickable&&w.pickableCount++,e.isComposite&&w.compositeCount++,i&&(w.visibleCount++,function(t){t.gl;var e=t.layer,n=t.layerIndex,r=t.drawPickingColors,i=t.pixelRatio,o=t.glViewport,a=t.parameters,s=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:r?1:0,devicePixelRatio:i}),u=Object.assign({},e.context.uniforms,{layerIndex:n}),c=Object.assign({},e.props.parameters||{},a);Object.assign(c,{viewport:o}),r?Object.assign(c,{blendColor:[0,0,0,(n+1)/255]}):Object.assign(s,function(t){var e=t.props,n=e.highlightedObjectIndex,r=e.highlightColor,i={pickingHighlightColor:[r[0],r[1],r[2],r[3]||255]};Number.isInteger(n)&&(i.pickingSelectedColor=n>=0?t.encodePickingColor(n):null);return i}(e));e.drawLayer({moduleParameters:s,uniforms:u,parameters:c})}({gl:t,layer:e,layerIndex:n,drawPickingColors:c,pixelRatio:b,glViewport:m,parameters:f}))}),Ct++,function(t){var e=t.renderStats,n=t.pass,r=t.redrawReason,o=t.stats;if(i.a.priority>=Mt){var a=e.totalCount,s=e.visibleCount,u=e.compositeCount,c=e.pickableCount,l=a-u,f=l-s,h="";h+="RENDER #".concat(Ct," ").concat(s," (of ").concat(a," layers) to ").concat(n," because ").concat(r," "),i.a.priority>Mt&&(h+="(".concat(f," hidden, ").concat(u," composite ").concat(c," pickable)")),i.a.log(Mt,h)(),o&&o.increment("redraw layers",s)}}({renderStats:w,pass:v,redrawReason:g,stats:y})}(t,{layers:n,viewport:c,view:f,useDevicePixels:u,drawPickingColors:l,deviceRect:d,parameters:p,layerFilter:y,pass:m,redrawReason:w,stats:O})})}var Dt={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Bt(t,e){for(var n=e.layers,r=e.viewports,i=e.x,o=e.y,a=e.radius,s=e.layerFilter,u=e.depth,c=void 0===u?1:u,l=e.mode,f=e.onViewportActive,h=e.pickingFBO,d=e.lastPickedInfo,v=e.useDevicePixels,p=Ft({useDevicePixels:v}),g=Math.round(i*p),y=Math.round(t.canvas.height-o*p),b=Math.round(a*p),m=function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,o=t.deviceHeight;if(!(e>=0&&n>=0&&e<i&&n<o))return null;var a=Math.max(0,e-r),s=Math.max(0,n-r),u=Math.min(i,e+r)-a+1,c=Math.min(o,n+r)-s+1;return{x:a,y:s,width:u,height:c}}({deviceX:g,deviceY:y,deviceRadius:b,deviceWidth:h.width,deviceHeight:h.height}),_=[],w={},O=0;O<c;O++){var E=m&&Vt(t,{layers:n,viewports:r,onViewportActive:f,useDevicePixels:v,pickingFBO:h,deviceRect:m,layerFilter:s,redrawReason:l}),S=E&&Gt(t,{pickedColors:E,layers:n,deviceX:g,deviceY:y,deviceRadius:b,deviceRect:m})||Dt;if(S.pickedColor&&O+1<c){var A=S.pickedColor[3]-1;w[A]||(w[A]=n[A].copyPickingColors()),n[A].clearPickingColor(S.pickedColor)}var T=zt({pickInfo:S,lastPickedInfo:d,mode:l,layers:n,viewports:r,x:i,y:o,deviceX:g,deviceY:y,pixelRatio:p});if(T&&T.forEach(function(t){return _.push(t)}),!S.pickedColor)break}return Object.keys(w).forEach(function(t){return n[t].restorePickingColors(w[t])}),_}function Ut(t,e){var n=e.layers,r=e.viewports,o=e.x,a=e.y,s=e.width,u=e.height,c=e.mode,l=e.layerFilter,f=e.onViewportActive,h=e.pickingFBO,d=e.useDevicePixels,v=Ft({useDevicePixels:d}),p=Math.round(o*v),g=Math.round(t.canvas.height-a*v),y=Math.round((o+s)*v),b=Math.round(t.canvas.height-(a+u)*v),m=function(t,e){var n=e.pickedColors,r=e.layers,o=new Map;if(n)for(var a=0;a<n.length;a+=4){var s=n[a+3]-1;if(s>=0){var u=n.slice(a,a+4),c=u.join(",");if(!o.has(c)){var l=r[s];l?o.set(c,{pickedColor:u,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(u)}):i.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}(0,{pickedColors:Vt(t,{layers:n,viewports:r,onViewportActive:f,pickingFBO:h,useDevicePixels:d,deviceRect:{x:p,y:b,width:y-p,height:g-b},layerFilter:l,redrawReason:c}),layers:n}),_=new Map;return m.forEach(function(t){var e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:o,y:a,width:s,height:u,pixelRatio:v};e=Wt({layer:t.pickedLayer,info:e,mode:c}),_.has(e.object)||_.set(e.object,e)}),Array.from(_.values())}function Vt(t,e){var n=e.layers,r=e.viewports,i=e.onViewportActive,o=e.useDevicePixels,u=e.pickingFBO,c=e.deviceRect,l=e.layerFilter,f=e.redrawReason;if(Object(a.a)(c),Object(a.a)(Number.isFinite(c.width)&&c.width>0,"`width` must be > 0"),Object(a.a)(Number.isFinite(c.height)&&c.height>0,"`height` must be > 0"),n.filter(function(t){return t.isPickable()}).length<1)return null;!function(t,e){var n=e.layers,r=e.viewports,i=e.onViewportActive,o=e.useDevicePixels,a=e.pickingFBO,u=e.deviceRect,c=u.x,l=u.y,f=u.width,h=u.height,d=e.layerFilter,v=void 0===d?null:d,p=e.redrawReason,g=void 0===p?"":p;Object(s.z)(t,{framebuffer:a,scissorTest:!0,scissor:[c,l,f,h],clearColor:[0,0,0,0]},function(){Nt(t,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,drawPickingColors:!0,layerFilter:v,pass:"picking",redrawReason:g,parameters:{blend:!0,blendFunc:[t.ONE,t.ZERO,t.CONSTANT_ALPHA,t.ZERO],blendEquation:t.FUNC_ADD,blendColor:[0,0,0,0]}})})}(t,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,pickingFBO:u,deviceRect:c,layerFilter:l,redrawReason:f});var h=c.x,d=c.y,v=c.width,p=c.height,g=new Uint8Array(v*p*4);return u.readPixels({x:h,y:d,width:v,height:p,pixelArray:g}),g}function zt(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,o=t.viewports,a=t.x,s=t.y,u=t.deviceX,c=t.deviceY,l=t.pixelRatio,f=e.pickedColor,h=e.pickedLayer,d=e.pickedObjectIndex,v=h?[h]:[];if("hover"===r){var p=n.index,g=n.layerId,y=h&&h.props.id;if(y!==g||d!==p){if(y!==g){var b=i.find(function(t){return t.props.id===g});b&&v.unshift(b)}n.layerId=y,n.index=d,n.info=null}}var m={viewports:o}.viewports[0],_=m&&m.unproject([a,s]),w={color:null,layer:null,index:-1,picked:!1,x:a,y:s,pixel:[a,s],coordinate:_,lngLat:_,devicePixel:[u,c],pixelRatio:l},O=new Map;return v.forEach(function(t){var e=Object.assign({},w);t===h&&(e.color=f,e.index=d,e.picked=!0),e=Wt({layer:t,info:e,mode:r}),t===h&&"hover"===r&&(n.info=e),e&&O.set(e.layer.id,e);var i=t.props.autoHighlight&&h===t?f:null;t.setModuleParameters({pickingSelectedColor:i})}),function(t,e){var n=[];return t.forEach(function(t){var r=!1;switch(e){case"click":r=t.layer.onClick(t);break;case"hover":r=t.layer.onHover(t);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(t)}),n}(O,r)}function Gt(t,e){var n=e.pickedColors,r=e.layers,o=e.deviceX,s=e.deviceY,u=e.deviceRadius,c=e.deviceRect;Object(a.a)(n);for(var l=c.x,f=c.y,h=c.width,d=c.height,v=u*u,p=-1,g=0,y=0;y<d;y++){var b=y+f-s,m=b*b;if(m>v)g+=4*h;else for(var _=0;_<h;_++){if(n[g+3]-1>=0){var w=_+l-o,O=w*w+m;O<=v&&(v=O,p=g)}g+=4}}if(p>=0){var E=n[p+3]-1,S=n.slice(p,p+4),A=r[E];if(A){var T=A.decodePickingColor(S);return{pickedColor:S,pickedLayer:A,pickedObjectIndex:T}}i.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Dt}function Wt(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||e;n.layer=e,n=e.pickLayer({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}function Ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter,r=void 0===n?function(){return!0}:n,i=e.map,o=void 0===i?function(t){return t}:i,a=e.result,s=void 0===a?[]:a;return Array.isArray(t)?function t(e,n,r,i){var o=-1;for(;++o<e.length;){var a=e[o];Array.isArray(a)?t(a,n,r,i):n(a)&&i.push(r(a))}return i}(t,r,o,s):r(t)?[o(t)]:[]}var Xt=n(1),qt=n(2),Yt=n(36),Zt=n(47),Kt=function(){function t(e){var n=e.id;Object(Xt.a)(this,t),this.id=n,this.time=Object(Yt.a)(),this.counters={},Object.seal(this)}return Object(qt.a)(t,[{key:"addCounter",value:function(t){return this._getCounter(t),this}},{key:"bump",value:function(t){var e=this._getCounter(t);return e.call++,e.count++,this}},{key:"increment",value:function(t,e){var n=this._getCounter(t);return n.call++,n.count+=e,this}},{key:"addTimer",value:function(t){return this._getCounter(t).time=0,this}},{key:"addTime",value:function(t,e){var n=this._getCounter(t);return n.time+=e,n.count++,this}},{key:"timeStart",value:function(t,e){this._getCounter(t)._startTime=Object(Yt.a)()}},{key:"timeEnd",value:function(t,e){var n=this._getCounter(t);this.addTime(t,Object(Yt.a)()-n._startTime)}},{key:"reset",value:function(){for(var t in this.time=Object(Yt.a)(),this.counters){var e=this.counters[t];e.count=0,e.time=0}return this}},{key:"hasTimeElapsed",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(Yt.a)()-this.time>1e3}},{key:"getStats",value:function(){var t=(Object(Yt.a)()-this.time)/1e3,e={};for(var n in this.counters){var r=this.counters[n];e[r.title]={total:r.count,fps:Math.round(r.count/t)},r.time&&(e[r.title].totalTime=Object(Zt.b)(r.time),e[r.title].avgTime=Object(Zt.b)(r.time/r.count))}return e}},{key:"getStatsTable",value:function(){var t=this.getStats();for(var e in t)0===t[e].total&&delete t[e];return t}},{key:"getStatNames",value:function(){return Object.keys(this.counters)}},{key:"get",value:function(t){return this._getCounter(t).count}},{key:"getCount",value:function(t){return this._getCounter(t).count}},{key:"getFPS",value:function(t){var e=this._getCounter(t),n=(Object(Yt.a)()-this.time)/1e3;return Math.round(e.count/n)}},{key:"getTimeString",value:function(){return"".concat(this.id,":").concat(Object(Zt.b)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(t)}},{key:"_getCounter",value:function(t){var e=this.counters[t];return e||(e={title:t,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[t]=e),e}},{key:"_incrementTimer",value:function(t,e,n){t.count+=n,t.totalTime+=e,t.averageTime=t.totalTime/n}}]),t}(),Qt=n(100),Jt=n.n(Qt),$t=n(44),te=n.n($t);function ee(t,e){if(!t)return null;var n=te()([0,0,0,0],e,t),r=1/n[3];return Jt()(n,n,[r,r,r,r]),n}var ne=n(17),re=n(133),ie=n(69),oe=n(48),ae=n.n(oe),se=n(53),ue=n.n(se),ce=n(29),le=n.n(ce),fe=n(65),he=n.n(fe);function de(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pe=Math.PI/180,ge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ye=[0,0,0],be={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,u=e.width,c=void 0===u?1:u,l=e.height,f=void 0===l?1:l;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=s,this.width=c||1,this.height=f||1,this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}var e,n,r;return e=t,(n=[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&Object(ne.e)(e.projectionMatrix,this.projectionMatrix)&&Object(ne.e)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===e||e,r=this.projectPosition(t),i=Object(St.k)(r,this.pixelProjectionMatrix),o=de(i,2),a=o[0],s=o[1],u=n?s:this.height-s;return 2===t.length?[a,u]:[a,u,i[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=de(t,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,l=i&&i*this.distanceScales.pixelsPerMeter[2],f=Object(St.h)([a,c,u],this.pixelUnprojectionMatrix,l),h=de(this.unprojectPosition(f),3),d=h[0],v=h[1],p=h[2];return Number.isFinite(u)?[d,v,p]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(t){var e=de(this.projectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=de(this.unprojectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?Object(St.g)(t,e):t}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?Object(St.j)(t,e):t}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Object(St.b)({longitude:t[0],latitude:t[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,e=void 0===t?null:t,n=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,i=this.pixelUnprojectionMatrix;return e&&(n=le()([],this.viewProjectionMatrix,e),r=le()([],this.pixelProjectionMatrix,e),i=he()([],r)),Object.assign({modelViewProjectionMatrix:n,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:i,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(t,e){var n=de(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=de(this._metersToLngLatDelta(e),3),u=s[0],c=s[1],l=s[2],f=void 0===l?0:l;return 2===t.length?[r+u,i+c]:[r+u,i+c,a+f]}},{key:"_metersToLngLatDelta",value:function(t){var e=de(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to Viewport");var s=this.distanceScales,u=s.pixelsPerMeter,c=s.degreesPerPixel,l=n*u[0]*c[0],f=r*u[1]*c[1];return 2===t.length?[l,f]:[l,f,o]}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,o=t.near,s=t.far;return Object(a.a)(Number.isFinite(n)),e?(new re.a).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:s}):(new re.a).perspective({fovy:n,aspect:r,near:o,far:s})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?ge:e,r=t.longitude,i=void 0===r?null:r,o=t.latitude,a=void 0===o?null:o,s=t.zoom,u=void 0===s?null:s,c=t.position,l=void 0===c?null:c,f=t.modelMatrix,h=void 0===f?null:f,d=t.focalDistance,v=void 0===d?1:d,p=t.distanceScales,g=void 0===p?null:p;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(St.c)({latitude:a})+Math.log2(v):0),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?Object(St.b)({latitude:a,longitude:i,scale:this.scale}):g||be,this.focalDistance=v,this.distanceScales.metersPerPixel=new ie.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new ie.a(this.distanceScales.pixelsPerMeter),this.position=ye,this.meterOffset=ye,l&&(this.position=l,this.modelMatrix=h,this.meterOffset=h?h.transformVector(l):l),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a}),this.viewMatrixUncentered=ae()([],n,[1,-1,1]),this.viewMatrix=(new re.a).multiplyRight(this.viewMatrixUncentered).translate(new ie.a(this.center||ye).negate())):(this.center=l,this.viewMatrixUncentered=n,this.viewMatrix=n)}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.scale,o=this.distanceScales,a=this.projectFlat([e,n],i),s=new ie.a(a[0],a[1],0);if(r){var u=new ie.a(r).scale(o.pixelsPerMeter);s.add(u)}return s}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,o=t.fovyRadians,a=t.fovyDegrees,s=t.fovy,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?1e3:l,h=t.focalDistance,d=void 0===h?1:h,v=t.orthographicFocalDistance,p=o||(a||s||75)*pe;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:p,aspect:this.width/this.height,focalDistance:v||d,near:c,far:f})}},{key:"_initPixelMatrices",value:function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];le()(t,t,this.projectionMatrix),le()(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=he()([],this.viewMatrix)||this.viewMatrix;var e,n,r,o=(e={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=e.viewMatrix,{eye:[(r=e.viewMatrixInverse)[12],r[13],r[14]],direction:[n[2],n[6],n[10]],up:[n[1],n[5],n[9]]}),a=o.eye,s=o.direction,u=o.up;this.cameraPosition=a,this.cameraDirection=s,this.cameraUp=u;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ae()(c,c,[this.width/2,-this.height/2,1]),ue()(c,c,[1,-1,0]),le()(l,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=c,this.pixelUnprojectionMatrix=he()([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.a.warn("Pixel project matrix not invertible")()}}])&&ve(e.prototype,n),r&&ve(e,r),t}();function _e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}me.displayName="Viewport";var Oe=Object.seal({layerManager:null,gl:null,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,pickingEvent:null,lastPickedInfo:null,animationProps:null,userData:{}}),Ee=function(t){return t instanceof xt?"".concat(t):t?"invalid":"null"},Se=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.stats,i=n.viewport,o=void 0===i?null:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},Oe,{layerManager:this,gl:e,shaderCache:new s.m({gl:e,_cachePrograms:!0}),stats:r||new Kt({id:"deck.gl"}),lastPickedInfo:{index:-1,layerId:null,info:null},viewport:o||new me({id:"DEFAULT-INITIAL-VIEWPORT"})}),this.layerFilter=null,this.drawPickingColors=!1,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._activateViewport=this._activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),V(this._initSeer),U(this._editSeer)}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){c.a.removeListener(this._initSeer),c.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t;return this._checkIfNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,e=void 0===t?null:t;return e?this.layers.filter(function(t){return e.find(function(e){return 0===t.id.indexOf(e)})}):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"useDevicePixels"in t&&(this.context.useDevicePixels=t.useDevicePixels),"layers"in t&&this.setLayers(t.layers),"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in t&&t.drawPickingColors!==this.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this.setNeedsRedraw("drawPickingColors changed"))}},{key:"setLayers",value:function(t){if(t===this.lastRenderedLayers)return i.a.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=t,t=Ht(t,{filter:Boolean});var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.context=this.context}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}var s=this._updateLayers({oldLayers:this.layers,newLayers:t}),u=s.error,c=s.generatedLayers;if(this.layers=c,u)throw u;return this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(_e(this.lastRenderedLayers)))}},{key:"drawLayers",value:function(t){var e=t.pass,n=void 0===e?"render to screen":e,r=t.viewports,i=t.views,o=t.redrawReason,a=void 0===o?"unknown reason":o,s=t.customRender,u=void 0!==s&&s,c=this.drawPickingColors,l=this.context,f=l.gl,h=l.useDevicePixels;Nt(f,{layers:this.layers,viewports:r,views:i,onViewportActive:this._activateViewport,useDevicePixels:h,drawPickingColors:c,pass:n,layerFilter:this.layerFilter,redrawReason:a,customRender:u})}},{key:"getLastPickedObject",value:function(t){var e=t.x,n=t.y,r=t.viewports,i=this.context.lastPickedInfo.info,o=i&&i.layer&&i.layer.id,a=o?this.layers.find(function(t){return t.id===o}):null,s=r[0]&&r[0].unproject([e,n]),u={x:e,y:n,coordinate:s,lngLat:s,layer:a};return a?Object.assign({},i,u):Object.assign(u,{color:null,object:null,index:-1})}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,r=t.mode,i=t.radius,o=void 0===i?0:i,a=t.layerIds,s=t.viewports,u=t.depth,c=void 0===u?1:u,l=t.event,f=void 0===l?null:l,h=this.context,d=h.gl,v=h.useDevicePixels;this.context.pickingEvent=f;var p=Bt(d,{x:e,y:n,radius:o,layers:this.getLayers({layerIds:a}),mode:r,layerFilter:this.layerFilter,depth:c,viewports:s,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:v});return this.context.pickingEvent=null,p}},{key:"pickObjects",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.layerIds,a=t.viewports,s=this.context,u=s.gl,c=s.useDevicePixels;return Ut(u,{x:e,y:n,width:r,height:i,layers:this.getLayers({layerIds:o}),layerFilter:this.layerFilter,mode:"pickObjects",viewports:a,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),useDevicePixels:c})}},{key:"_checkIfNeedsRedraw",value:function(t){var e=this._needsRedraw;t&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value.getNeedsRedraw({clearRedrawFlags:t});e=e||s}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"_activateViewport",value:function(t){var e=this.context.viewport;if(!e||!t.equals(e)){i.a.log(4,"Viewport changed",t)(),this.context.viewport=t;var n=!0,r=!1,o=void 0;try{for(var s,u=this.layers[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;c.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(c)}}catch(t){r=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}}return Object(a.a)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function(){var t=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new s.d(t),this.context.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function(t){var e=t.oldLayers,n=t.newLayers,r={},o=!0,a=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r[l.id]?i.a.warn("Multiple old layers with same id ".concat(Ee(l)))():r[l.id]=l}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}var f=[],h=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:f}),d=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:h||d,generatedLayers:f}}},{key:"_updateSublayersRecursively",value:function(t){var e=t.newLayers,n=t.oldLayerMap,r=t.generatedLayers,o=null,a=!0,s=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;f.context=this.context;var h=n[f.id];null===h&&i.a.warn("Multiple new layers with same id ".concat(Ee(f)))(),n[f.id]=null;var d=null;try{this._debug&&h!==f&&f.validateProps(),h?(this._transferLayerState(h,f),this._updateLayer(f),G(f)):(this._initializeLayer(f),z(f)),r.push(f),d=f.isComposite&&f.getSubLayers()}catch(t){i.a.warn("error during matching of ".concat(Ee(f)),t)(),o=o||t}d&&this._updateSublayersRecursively({newLayers:d,oldLayerMap:n,generatedLayers:r})}}catch(t){s=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return o}},{key:"_finalizeOldLayers",value:function(t){var e=null;for(var n in t){var r=t[n];r&&(e=e||this._finalizeLayer(r))}return e}},{key:"_initializeLayer",value:function(t){i.a.log(2,"initializing ".concat(Ee(t)))();var e=null;try{t._initialize(),t.lifecycle=tt.INITIALIZED}catch(n){i.a.warn("error while initializing ".concat(Ee(t),"\n"),n)(),e=e||n}t.internalState.layer=t;var n=!0,r=!1,o=void 0;try{for(var a,s=t.getModels()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.userData.layer=t}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return e}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=tt.MATCHED,e!==t?(i.a.log(4,"matched ".concat(Ee(e)),t,"->",e)(),t.lifecycle=tt.AWAITING_GC):i.a.log(4,"Matching layer is unchanged ".concat(e.id))()}},{key:"_updateLayer",value:function(t){i.a.log(4,"updating ".concat(t," because: ").concat(t.printChangeFlags()))();var e=null;try{t._update()}catch(n){i.a.warn("error during update of ".concat(Ee(t)),n)(),e=n}return e}},{key:"_finalizeLayer",value:function(t){Object(a.a)(t.lifecycle!==tt.AWAITING_FINALIZATION),t.lifecycle=tt.AWAITING_FINALIZATION;var e=null;this.setNeedsRedraw("finalized ".concat(Ee(t)));try{t._finalize()}catch(n){i.a.warn("error during finalization of ".concat(Ee(t)),n)(),e=n}return t.lifecycle=tt.FINALIZED,i.a.log(2,"finalizing ".concat(Ee(t)))(),e}},{key:"_initSeer",value:function(){this.layers.forEach(function(t){z(t),G(t)})}},{key:"_editSeer",value:function(t){if("edit"===t.type&&"props"===t.valuePath[0]){var e,n,r;e=t.itemKey,n=t.valuePath.slice(1),r=t.value,c.a.isReady()&&(D.has(e)||D.set(e,new Map),D.get(e).set(n,r));var i=this.layers.map(function(t){return new t.constructor(t.props)});this.updateLayers({newLayers:i})}}}])&&we(e.prototype,n),r&&we(e,r),t}();function Ae(t,e){return t===e||Object.keys(t).every(function(n){return Array.isArray(t[n])&&Array.isArray(e[n])?Ae(t[n],e[n]):t[n]===e[n]})}function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var je=/([0-9]+\.?[0-9]*)(%|px)/;function Pe(t){switch(Te(t)){case"number":return{position:t,relative:!1};case"string":var e=t.match(je);if(e&&e.length>=3){var n="%"===e[2],r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Re(t,e){return t.relative?Math.round(t.position*e):t.position}function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,s=e.y,u=void 0===s?0:s,c=e.width,l=void 0===c?"100%":c,f=e.height,h=void 0===f?"100%":f,d=e.projectionMatrix,v=void 0===d?null:d,p=e.fovy,g=void 0===p?75:p,y=e.near,b=void 0===y?.1:y,m=e.far,_=void 0===m?1e3:m,w=e.modelMatrix,O=void 0===w?null:w,E=e.viewportInstance,S=void 0===E?null:E,A=e.type,T=void 0===A?me:A;Object(a.a)(!S||S instanceof me),this.viewportInstance=S,this.id=r||this.constructor.displayName||"view",this.type=T,this.props=Object.assign({},e,{projectionMatrix:v,fovy:g,near:b,far:_,modelMatrix:O}),this._parseDimensions({x:o,y:u,width:l,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}var e,n,r;return e=t,(n=[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):Ae(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n}),o=Object.assign({viewState:r},r,this.props,i);return this._getViewport(o)}},{key:"getViewStateId",value:function(){switch(Ie(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===Ie(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var e=Object.assign({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:Re(this._x,e),y:Re(this._y,n),width:Re(this._width,e),height:Re(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=Pe(e),this._y=Pe(n),this._width=Pe(r),this._height=Pe(i)}}])&&ke(e.prototype,n),r&&ke(e,r),t}();function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t,n=this._needsRedraw;return e&&(this._needsRedraw=!1),n}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"getViewports",value:function(t){return t?this._viewports.filter(function(e){return e.containsPixel(t)}):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach(function(e){t[e.id]=e}),t}},{key:"getView",value:function(t){return"string"==typeof t?this.views.find(function(e){return e.id===t}):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"project",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.contains(t,e))return i.project(t,e)}return null}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.containsPixel(t,e))return i.unproject(t)}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){Object(a.a)(Number.isFinite(t)&&Number.isFinite(e)),t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=Ht(t,{filter:Boolean}).map(function(t){return t instanceof me?new xe({viewportInstance:t}):t}),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!Ae(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):i.a.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t){return new(0,t.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},t))}},{key:"_updateController",value:function(t,e,n,r){if(t.controller){var i=Object.assign({},t.controller,t.defaultState,e,{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function(){var t=this,e=this.width,n=this.height,r=this.views,i=this.controllers;for(var o in this.controllers={},this._viewports=r.map(function(r){var o=t.getViewState(r),a=r.makeViewport({width:e,height:n,viewState:o});return t.controllers[r.id]=t._updateController(r,o,a,i[r.id]),a}),i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach(function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)})}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some(function(n,r){return!t[r].equals(e[r])})}}])&&Me(e.prototype,n),r&&Me(e,r),t}(),Fe=n(14),Le=n(7),Ne=n(6),De=n(8),Be=n(15),Ue=n(34),Ve=n(31),ze=Object(Ue.a)(),Ge=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?ze:i,a=e.projectionMatrix,s=void 0===a?ze:a;Object(Xt.a)(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=s;var u=Object(Ue.a)();Ve.c(u,u,this.projectionMatrix),Ve.c(u,u,this.viewMatrix),this.viewProjectionMatrix=u;var c=Object(Ue.a)();Ve.g(c,c,[this.width/2,-this.height/2,1]),Ve.h(c,c,[1,-1,0]),Ve.c(c,c,this.viewProjectionMatrix);var l=Ve.b(Object(Ue.a)(),c);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(qt.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&Ve.a(e.projectionMatrix,this.projectionMatrix)&&Ve.a(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===e||e,r=this.projectPosition(t),i=Object(St.k)(r,this.pixelProjectionMatrix),o=Object(Fe.a)(i,2),a=o[0],s=o[1],u=n?s:this.height-s;return 2===t.length?[a,u]:[a,u,i[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=Object(Fe.a)(t,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,l=i&&i*this.pixelsPerMeter,f=Object(St.h)([a,c,u],this.pixelUnprojectionMatrix,l),h=this.unprojectPosition(f),d=Object(Fe.a)(h,3),v=d[0],p=d[1],g=d[2];return Number.isFinite(u)?[v,p,g]:Number.isFinite(i)?[v,p,i]:[v,p]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(Fe.a)(e,2);return[n[0],n[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(Fe.a)(e,2);return[n[0],n[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),t}(),We=n(41),He=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=void 0===o?0:o,s=n.longitude,u=void 0===s?0:s,c=n.zoom,l=void 0===c?0:c,f=n.pitch,h=void 0===f?0:f,d=n.bearing,v=void 0===d?0:d,p=n.altitude,g=void 0===p?1.5:p,y=n.nearZMultiplier,b=n.farZMultiplier;Object(Xt.a)(this,e),r=r||1,i=i||1;var m=Object(St.l)(l);g=Math.max(.75,g);var _=Object(St.g)([u,a],m);_[2]=0;var w=Object(St.d)({width:r,height:i,pitch:h,bearing:v,altitude:g,nearZMultiplier:y||1/i,farZMultiplier:b||1.01}),O=Object(St.f)({height:i,center:_,pitch:h,bearing:v,altitude:g,flipY:!0});return(t=Object(Le.a)(this,Object(Ne.a)(e).call(this,{width:r,height:i,viewMatrix:O,projectionMatrix:w}))).latitude=a,t.longitude=u,t.zoom=l,t.pitch=h,t.bearing=v,t.altitude=g,t.scale=m,t.center=_,t.pixelsPerMeter=Object(St.b)(Object(Be.a)(Object(Be.a)(t))).pixelsPerMeter[2],Object.freeze(Object(Be.a)(Object(Be.a)(t))),t}return Object(De.a)(e,t),Object(qt.a)(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(St.g)(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(St.j)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(St.h)(n,this.pixelUnprojectionMatrix),i=Object(St.g)(e,this.scale),o=We.a([],i,We.d([],r)),a=We.a([],this.center,o);return Object(St.j)(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=qe(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}(Ge),Xe=n(54);function qe(t){var e=t.width,n=t.height,r=t.bounds,i=t.padding,o=void 0===i?0:i,a=t.offset,s=void 0===a?[0,0]:a,u=Object(Fe.a)(r,2),c=Object(Fe.a)(u[0],2),l=c[0],f=c[1],h=Object(Fe.a)(u[1],2),d=h[0],v=h[1];if(Number.isFinite(o)){o={top:o,bottom:o,left:o,right:o}}else Object(Xe.a)(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));var p=new He({width:e,height:n,longitude:0,latitude:0,zoom:0}),g=p.project([l,v]),y=p.project([d,f]),b=[Math.abs(y[0]-g[0]),Math.abs(y[1]-g[1])],m=[e-o.left-o.right-2*Math.abs(s[0]),n-o.top-o.bottom-2*Math.abs(s[1])];Object(Xe.a)(m[0]>0&&m[1]>0);var _=m[0]/b[0],w=m[1]/b[1],O=(o.right-o.left)/2/_,E=(o.bottom-o.top)/2/w,S=[(y[0]+g[0])/2+O,(y[1]+g[1])/2+E],A=p.unproject(S),T=p.zoom+Math.log2(Math.abs(Math.min(_,w)));return{longitude:A[0],latitude:A[1],zoom:T}}var Ye=n(80),Ze=n.n(Ye),Ke=n(101),Qe=n.n(Ke);function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var on=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.latitude,i=void 0===r?0:r,o=n.longitude,a=void 0===o?0:o,s=n.zoom,u=void 0===s?11:s,c=n.pitch,l=void 0===c?0:c,f=n.bearing,h=void 0===f?0:f,d=n.nearZMultiplier,v=void 0===d?.1:d,p=n.farZMultiplier,g=void 0===p?10:p,y=n.orthographic,b=void 0!==y&&y,m=n.width,_=n.height,w=n.altitude,O=void 0===w?1.5:w;m=m||1,_=_||1,O=Math.max(.75,O);var E,S,A=Object(St.e)({width:m,height:_,pitch:l,altitude:O,nearZMultiplier:v,farZMultiplier:g}),T=A.fov,j=A.aspect,P=A.focalDistance,R=A.near,I=A.far,k=Object(St.f)({height:_,pitch:l,bearing:h,altitude:O}),x=n.position&&[n.position[0],n.position[1],0],M=Object.assign({},n,{width:m,height:_,viewMatrix:k,longitude:a,latitude:i,zoom:u,position:x,orthographic:b,fovyRadians:T,aspect:j,orthographicFocalDistance:P,near:R,far:I});return E=this,(t=!(S=en(e).call(this,M))||"object"!==Je(S)&&"function"!=typeof S?rn(E):S).latitude=i,t.longitude=a,t.zoom=u,t.pitch=l,t.bearing=h,t.altitude=O,t.orthographic=b,t.metersToLngLatDelta=t.metersToLngLatDelta.bind(rn(rn(t))),t.lngLatDeltaToMeters=t.lngLatDeltaToMeters.bind(rn(rn(t))),t.addMetersToLngLat=t.addMetersToLngLat.bind(rn(rn(t))),Object.freeze(rn(rn(t))),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(e,me),n=e,(r=[{key:"metersToLngLatDelta",value:function(t){var e=$e(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var s=this.distanceScales,u=s.pixelsPerMeter,c=s.degreesPerPixel,l=n*u[0]*c[0],f=r*u[1]*c[1];return 2===t.length?[l,f]:[l,f,o]}},{key:"lngLatDeltaToMeters",value:function(t){var e=$e(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var s=this.distanceScales,u=s.pixelsPerDegree,c=s.metersPerPixel,l=n*u[0]*c[0],f=r*u[1]*c[1];return 2===t.length?[l,f]:[l,f,o]}},{key:"addMetersToLngLat",value:function(t,e){return Object(St.a)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(St.h)(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Ze()([],i,Qe()([],r)),a=Ze()([],this.center,o);return this.unprojectFlat(a)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=qe(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}])&&tn(n.prototype,r),i&&tn(n,i),e}();function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}on.displayName="WebMercatorViewport";var sn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,r=n.compare,i=n.extract,o=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=o}var e,n,r;return e=t,(n=[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!Object(ne.e)(t[s],e[s]))return!1}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r={},i={},o=!0,a=!1,s=void 0;try{for(var u,c=this._propsToExtract[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r[l]=t[l],i[l]=e[l]}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}n={start:r,end:i}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){Object(a.a)(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach(function(e){var n=t[e];Object(a.a)(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))})}}])&&an(e.prototype,n),r&&an(e,r),t}();function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ln(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dn=["longitude","latitude","zoom","bearing","pitch"],vn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ln(this,fn(e).call(this,t))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(e,sn),n=e,(r=[{key:"interpolateProps",value:function(t,e,n){var r={};for(var i in e)r[i]=Object(ne.g)(t[i],e[i],n);return r}}])&&cn(n.prototype,r),i&&cn(n,i),e}();function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gn=function(){},yn=1,bn=2,mn=3,_n={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new vn,transitionInterruption:yn,onTransitionStart:gn,onTransitionInterrupt:gn,onTransitionEnd:gn},wn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object(a.a)(e),this.ControllerState=e,this.props=Object.assign({},_n,n),this.animation=null,this.propsInTransition=null,this.transition=new j,this.onViewStateChange=n.onViewStateChange,this._onTransitionFrame=this._onTransitionFrame.bind(this),this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){cancelAnimationFrame(this.animation)}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=Object.assign({},_n,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=Object.assign({},n,this.transition.interruption===bn?this.transition.endProps:this.propsInTransition||n);this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}},{key:"_isTransitionEnabled",value:function(t){return t.transitionDuration>0&&t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.interruption===mn||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){Object(a.a)(this._isTransitionEnabled(e),"Transition is not enabled"),cancelAnimationFrame(this.animation);var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.transition.start({duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:i.start,endProps:i.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.animation=requestAnimationFrame(this._onTransitionFrame),this.transition.update(Date.now())}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){cancelAnimationFrame(e.animation),e.propsInTransition=null,t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.interpolator,n=t.startProps,r=t.endProps,i=t.time,o=e.interpolateProps(n,r,i);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,o)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}])&&pn(e.prototype,n),r&&pn(e,r),t}();function On(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}wn.defaultProps=_n;var Sn={transitionDuration:0},An=["wheel"],Tn=["panstart","panmove","panend"],jn=["pinchstart","pinchmove","pinchend"],Pn=["doubletap"],Rn=["keydown"],In=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object(a.a)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new wn(e,n),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(Object.assign({},this.controllerStateProps,this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t){var e=this.controllerStateProps,n=e.width,r=e.height;return t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewportChange"in t&&i.a.removed("onViewportChange")(),"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,r=t.dragPan,o=void 0===r||r,a=t.dragRotate,s=void 0===a||a,u=t.doubleClickZoom,c=void 0===u||u,l=t.touchZoom,f=void 0===l||l,h=t.touchRotate,d=void 0!==h&&h,v=t.keyboard,p=void 0===v||v,g=Boolean(this.onViewStateChange);this.toggleEvents(An,g&&n),this.toggleEvents(Tn,g&&(o||s)),this.toggleEvents(jn,g&&(f||d)),this.toggleEvents(Pn,g&&c),this.toggleEvents(Rn,g&&p),this.scrollZoom=n,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=c,this.touchZoom=f,this.touchRotate=d,this.keyboard=p}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"setOptions",value:function(t){return this.setProps(t)}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t.getViewportProps(),e);if(this.controllerState!==t){var i=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:i})}Object.assign(this._state,Object.assign({},t.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,Sn,{isDragging:!0})}},{key:"_onPan",value:function(t){var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,Sn,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){return!!this.dragRotate&&(this.invertPan?this._onPanRotateMap(t):this._onPanRotateStandard(t))}},{key:"_onPanRotateStandard",value:function(t){var e=t.deltaX,n=t.deltaY,r=this.controllerState.getViewportProps(),i=e/r.width,o=n/r.height,a=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(a,Sn,{isDragging:!0})}},{key:"_onPanRotateMap",value:function(t){var e=t.deltaX,n=t.deltaY,r=On(this.getCenter(t),2)[1],i=r-n,o=this.controllerState.getViewportProps(),a=o.width,s=o.height,u=e/a,c=0;n>0?Math.abs(s-i)>5&&(c=n/(i-s)*1.2):n<0&&i>5&&(c=1-r/i),c=Math.min(1,Math.max(-1,c));var l=this.controllerState.rotate({deltaScaleX:u,deltaScaleY:c});return this.updateViewport(l,Sn,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=t.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:e,scale:r});return this.updateViewport(i,Sn)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,Sn,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,Sn,{isDragging:!0})}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps())}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.controllerState;switch(t.srcEvent.keyCode){case 189:e=n?r.zoomOut().zoomOut():r.zoomOut();break;case 187:e=n?r.zoomIn().zoomIn():r.zoomIn();break;case 37:e=n?r.rotateLeft():r.moveLeft();break;case 39:e=n?r.rotateRight():r.moveRight();break;case 38:e=n?r.rotateUp():r.moveUp();break;case 40:e=n?r.rotateDown():r.moveDown();break;default:return!1}return this.updateViewport(e,this._getTransitionProps())}},{key:"_getTransitionProps",value:function(){return Sn}}])&&En(e.prototype,n),r&&En(e,r),t}(),kn=n(102),xn=n.n(kn),Mn=6371e3,Cn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.phi,r=e.theta,i=e.radius,o=e.bearing,a=e.pitch,s=(e.altitude,e.radiusScale),u=void 0===s?Mn:s;Object(Xt.a)(this,t),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(r)?(this.phi=n||0,this.theta=r||0):(Number.isFinite(o)||Number.isFinite(a))&&(this.bearing=o||0,this.pitch=a||0),this.radius=i||1,this.radiusScale=u||1,this.check()}return Object(qt.a)(t,[{key:"toString",value:function(){return this.formatString(ne.c)}},{key:"formatString",value:function(t){var e=t.printTypes,n=(t.printDegrees,ne.f);return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(t){return Object(ne.e)(this.radius,t.radius)&&Object(ne.e)(this.theta,t.theta)&&Object(ne.e)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(t){var e=Object(Fe.a)(t,3),n=e[0],r=e[1],i=e[2];this.radius=1+i/this.radiusScale,this.phi=Object(ne.h)(r),this.theta=Object(ne.h)(n)}},{key:"fromVector3",value:function(t){return this.radius=xn()(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(Object(ne.b)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new ie.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object(ne.d)(this.phi)},set:function(t){this.phi=Math.PI-Object(ne.h)(t)}},{key:"pitch",get:function(){return Object(ne.d)(this.theta)},set:function(t){this.theta=Object(ne.h)(t)}},{key:"longitude",get:function(){return Object(ne.d)(this.phi)}},{key:"latitude",get:function(){return Object(ne.d)(this.theta)}},{key:"lng",get:function(){return Object(ne.d)(this.phi)}},{key:"lat",get:function(){return Object(ne.d)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),t}();function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ln={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},Nn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.width,r=e.height,i=e.position,o=void 0===i?Ln.position:i;Object(a.a)(Number.isFinite(n),"`width` must be supplied"),Object(a.a)(Number.isFinite(r),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},e,{position:new ie.a(o)}))}var e,n,r;return e=t,(n=[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new Cn({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(t){return new Cn({bearing:t,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}])&&Fn(e.prototype,n),r&&Fn(e,r),t}(),Dn=85.05113,Bn=-85.05113;function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e,n){return e&&Gn(t.prototype,e),n&&Gn(t,n),t}function Hn(t,e){return!e||"object"!==Un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yn(t,e)}function Yn(t,e){return(Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zn={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new vn,transitionInterruption:yn},Kn={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},Qn={pitch:0,bearing:0,altitude:1.5},Jn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,s=n.longitude,u=n.zoom,c=n.bearing,l=void 0===c?Qn.bearing:c,f=n.pitch,h=void 0===f?Qn.pitch:f,d=n.altitude,v=void 0===d?Qn.altitude:d,p=n.maxZoom,g=void 0===p?Kn.maxZoom:p,y=n.minZoom,b=void 0===y?Kn.minZoom:y,m=n.maxPitch,_=void 0===m?Kn.maxPitch:m,w=n.minPitch,O=void 0===w?Kn.minPitch:w,E=n.startPanLngLat,S=n.startZoomLngLat,A=n.startBearing,T=n.startPitch,j=n.startZoom;return zn(this,e),Object(a.a)(Number.isFinite(s),"`longitude` must be supplied"),Object(a.a)(Number.isFinite(o),"`latitude` must be supplied"),Object(a.a)(Number.isFinite(u),"`zoom` must be supplied"),(t=Hn(this,Xn(e).call(this,{width:r,height:i,latitude:o,longitude:s,zoom:u,bearing:l,pitch:h,altitude:v,maxZoom:g,minZoom:b,maxPitch:_,minPitch:O})))._interactiveState={startPanLngLat:E,startZoomLngLat:S,startBearing:A,startPitch:T,startZoom:j},t}return qn(e,Nn),Wn(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=Vn(this._calculateNewLngLat({startPanLngLat:r,pos:e}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=void 0===e?0:e,r=t.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),c=u.pitch,l=u.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale;Object(a.a)(r>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,s=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e)),Object(a.a)(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var u=this._calculateNewZoom({scale:r,startZoom:o}),c=Vn(new He(Object.assign({},this._viewportProps,{zoom:u})).getLocationAtPoint({lngLat:s,pos:e}),2),l=c[0],f=c[1];return this._getUpdatedState({zoom:u,longitude:l,latitude:f})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object(ne.b)(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=Object(ne.b)(a,o,i),Object.assign(t,function(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,o=t.zoom,a=t.pitch,s=void 0===a?0:a,u=t.bearing,c=void 0===u?0:u;(r<-180||r>180)&&(r=Object(Ue.c)(r+180,360)-180),(c<-180||c>180)&&(c=Object(Ue.c)(c+180,360)-180);var l=new He({width:e,height:n,longitude:r,latitude:i,zoom:o}),f=l.project([r,Dn])[1],h=l.project([r,Bn])[1],d=0;return h-f<n&&(o+=Math.log2(n/(h-f)),f=(l=new He({width:e,height:n,longitude:r,latitude:i,zoom:o})).project([r,Dn])[1],h=l.project([r,Bn])[1]),f>0?d=f:h<n&&(d=h-n),d&&(i=l.unproject([e/2,n/2+d])[1]),{width:e,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:c}}(t)),t}},{key:"_unproject",value:function(t){var e=new He(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new He(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(e);return Object(ne.b)(a,o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Object(ne.b)(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),e}(),$n=function(t){function e(t){var n;return zn(this,e),(n=Hn(this,Xn(e).call(this,Jn,t))).invertPan=!0,n}return qn(e,In),Wn(e,[{key:"_getTransitionProps",value:function(){return Zn}}]),e}();function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nr(t,e){return!e||"object"!==tr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var or=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nr(this,rr(e).call(this,Object.assign({},t,{type:on})))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(e,xe),n=e,(r=[{key:"controller",get:function(){return this._getControllerProps({type:$n})}}])&&er(n.prototype,r),i&&er(n,i),e}();function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}or.displayName="MapView";var sr=function(){function t(e){var n=e.gl,r=e.layerManager;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=n,this.layerManager=r,this._effects=[]}var e,n,r;return e=t,(n=[{key:"addEffect",value:function(t){this._effects.push(t),this._sortEffects(),t.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(t){var e=this._effects.indexOf(t);return e>=0&&(t.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(e,1),!0)}},{key:"preDraw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"draw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:t.count-e.count})}}])&&ar(e.prototype,n),r&&ar(e,r),t}();function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cr=0,lr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="effect",this.count=cr++,this.visible=!0,this.priority=0,this.needsRedraw=!1}var e,n,r;return e=t,(n=[{key:"initialize",value:function(t){t.gl,t.layerManager}},{key:"finalize",value:function(t){t.gl,t.layerManager}},{key:"preDraw",value:function(t){t.gl,t.layerManager}},{key:"draw",value:function(t){t.gl,t.layerManager}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=t}}])&&ur(e.prototype,n),r&&ur(e,r),t}(),fr=1,hr=2,dr=4,vr={mousedown:fr,mousemove:hr,mouseup:dr};var pr,gr,yr=null;"undefined"!=typeof document&&(yr=n(122),pr=yr.PointerEventInput,gr=pr.prototype.handler,pr.prototype.handler=function(t){var e=this.store;t.button>0&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(e,function(e){return e.pointerId===t.pointerId})||e.push(t)),gr.call(this,t)},yr.MouseInput.prototype.handler=function(t){var e=vr[t.type];e&fr&&t.button>=0&&(this.pressed=!0),e&hr&&0===t.which&&(e=dr),this.pressed&&(e&dr&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))});var br=yr;var mr=br?[[br.Rotate,{enable:!1}],[br.Pinch,{enable:!1}],[br.Swipe,{enable:!1}],[br.Pan,{threshold:0,enable:!1}],[br.Press,{enable:!1}],[br.Tap,{event:"doubletap",taps:2,enable:!1}],[br.Tap,{enable:!1}]]:null,_r={rotate:["pinch"]},wr={doubletap:["tap"]},Or={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Er=["keydown","keyup"],Sr=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Ar=["wheel","mousewheel","DOMMouseScroll"],Tr={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},jr={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Pr=n(66),Rr=-1!==Pr.a.indexOf("firefox"),Ir=Ar,kr=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Xt.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=Ir.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return Object(qt.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"wheel"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;Pr.b.WheelEvent&&(Rr&&t.deltaMode===Pr.b.WheelEvent.DOM_DELTA_PIXEL&&(e/=Pr.b.devicePixelRatio),t.deltaMode===Pr.b.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%4.000244140625==0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:"wheel",center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),xr=Sr,Mr=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Xt.a)(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=xr.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return Object(qt.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"pointermove"===t&&(this.enableMoveEvent=e),"pointerover"===t&&(this.enableOverEvent=e),"pointerout"===t&&(this.enableOutEvent=e),"pointerleave"===t&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:"pointerover",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:"pointerout",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:"pointerleave",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),Cr=Er,Fr=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Xt.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Cr.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return Object(qt.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"keydown"===t&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:"keydown",srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}]),t}(),Lr=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Xt.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return Object(qt.a)(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){"contextmenu"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:"contextmenu",center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),Nr=1,Dr=2,Br=4,Ur={pointerdown:Nr,pointermove:Dr,pointerup:Br,mousedown:Nr,mousemove:Dr,mouseup:Br},Vr=1,zr=2,Gr=3,Wr=0,Hr=1,Xr=2,qr=1,Yr=2,Zr=4;var Kr=function(){function t(e){Object(Xt.a)(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(qt.a)(t,[{key:"isEmpty",value:function(){return 0===this.handlers.length}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",r=this.handlers,i=this.handlersByElement;i.has(n)||i.set(n,[]);var o={type:t,handler:e,srcElement:n};r.push(o),i.get(n).push(o)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n)for(var r=!1,i=function(){t.handled=!0},o=function(){t.handled=!0,r=!0},a=0;a<n.length;a++){var s=n[a],u=s.type;if((0,s.handler)(Object.assign({},t,{type:u,stopPropagation:i,stopImmediatePropagation:o})),r)break}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=Ur[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,u=!1;return e===Br||e===Dr&&!Number.isFinite(r)?(a=o===Vr,s=o===zr,u=o===Gr):e===Dr?(a=Boolean(r&qr),s=Boolean(r&Zr),u=Boolean(r&Yr)):e===Nr&&(a=i===Wr,s=i===Hr,u=i===Xr),{leftButton:a,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth,a=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}]),t}(),Qr={events:null,recognizers:null,Manager:br?br.Manager:function(t){var e={},n=function(){return e};return e.get=function(){return null},e.set=n,e.on=n,e.off=n,e.destroy=n,e.emit=n,e},touchAction:"none"},Jr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Xt.a)(this,t),this.options=Object.assign({},Qr,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return Object(qt.a)(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||mr}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(_r).forEach(function(t){var n=e.manager.get(t);n&&_r[t].forEach(function(t){n.recognizeWith(t)})}),this.wheelInput=new kr(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Mr(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Fr(t,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new Lr(t,this._onOtherEvent,{enable:!1});var i=!0,o=!1,a=void 0;try{for(var s,u=this.events[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=Object(Fe.a)(s.value,2),l=c[0],f=c[1];f.isEmpty()||(this._toggleRecognizer(f.recognizerName,!0),this.manager.on(l,f.handleEvent))}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){if("string"==typeof t)this._addEventHandler(t,e,n);else for(var r in n=e,t)this._addEventHandler(r,t[r],n)}},{key:"off",value:function(t,e){if("string"==typeof t)this._removeEventHandler(t,e);else for(var n in t)this._removeEventHandler(n,t[n])}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=wr[t];i&&!this.options.recognizers&&i.forEach(function(i){var o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n){var r=this.manager,i=this.events,o=jr[t]||t,a=i.get(o);a||(a=new Kr(this),i.set(o,a),a.recognizerName=Tr[o]||o,r&&r.on(o,a.handleEvent)),this._toggleRecognizer(a.recognizerName,!0),a.add(t,e,n)}},{key:"_removeEventHandler",value:function(t,e){var n=this.events,r=jr[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var o=i.recognizerName,a=!1,s=!0,u=!1,c=void 0;try{for(var l,f=n.values()[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;if(h.recognizerName===o&&!h.isEmpty()){a=!0;break}}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}a||this._toggleRecognizer(o,!1)}}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=Or[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}(),$r="";try{var ti=document.createElement("div").style,ei=/^(webkit|moz|ms|o)(?=[A-Z])/;for(var ni in ti)if(ei.test(ni)){$r="-".concat(ni.match(ei)[0],"-");break}}catch(t){}function ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ii(){}var oi="-webkit-"===$r?$r:"",ai={GRABBING:"".concat(oi,"grabbing"),GRAB:"".concat(oi,"grab"),POINTER:"pointer"};var si={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:ii,onResize:ii,onViewStateChange:ii,onBeforeRender:ii,onAfterRender:ii,onLayerClick:null,onLayerHover:null,onLoad:ii,getCursor:function(t){return t.isDragging?ai.GRABBING:ai.GRAB},debug:!1,drawPickingColors:!1},ui=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({},si,e),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.stats=new Kt({id:"deck.gl"}),this._needsRedraw=!0,this.viewState=e.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.setProps(e),this.animationLoop.start()}var e,n,r;return e=t,(n=[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy()}},{key:"setProps",value:function(t){this.stats.timeStart("deck.setProps"),t=Object.assign({},this.props,t),this.props=t,this._setCanvasSize(t);var e=Object.assign({},t,{views:this._getViews(t),width:this.width,height:this.height}),n=this._getViewState(t);n&&(e.viewState=n),this.viewManager&&this.viewManager.setProps(e),this.layerManager&&this.layerManager.setProps(e),this.animationLoop&&this.animationLoop.setProps(e),this.stats.timeEnd("deck.setProps")}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t;if(this.props._animate)return"Deck._animate";var n=this._needsRedraw;e&&(this._needsRedraw=!1);var r=this.viewManager.needsRedraw({clearRedrawFlags:e}),i=this.layerManager.needsRedraw({clearRedrawFlags:e});return n=n||r||i}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o;this.stats.timeStart("deck.pickObject");var s=this.layerManager.pickObject({x:e,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:e,y:n}),mode:"query",depth:1});return this.stats.timeEnd("deck.pickObject"),s.length?s[0]:null}},{key:"pickMultipleObjects",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o,s=t.depth,u=void 0===s?10:s;this.stats.timeStart("deck.pickMultipleObjects");var c=this.layerManager.pickObject({x:e,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:e,y:n}),mode:"query",depth:u});return this.stats.timeEnd("deck.pickMultipleObjects"),c}},{key:"pickObjects",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o,s=t.layerIds,u=void 0===s?null:s;this.stats.timeStart("deck.pickObjects");var c=this.layerManager.pickObjects({x:e,y:n,width:i,height:a,layerIds:u,viewports:this.getViewports({x:e,y:n,width:i,height:a})});return this.stats.timeEnd("deck.pickObjects"),c}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"==typeof e&&(e=document.getElementById(e),Object(a.a)(e)),e)||(e=document.createElement("canvas"),(t.parent||document.body).appendChild(e));var n=t.id,r=t.style;return e.id=n,Object.assign(e.style,r),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,o=t.glOptions,a=t.debug,u=t.useDevicePixels,c=t.autoResizeDrawingBuffer;return new s.a({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:c,onCreateContext:function(t){return i||Object(s.p)(Object.assign({},o,t,{canvas:e.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender})}},{key:"_getViewState",value:function(t){return t.viewState||this.viewState}},{key:"_getViews",value:function(t){var e=t.views||[new or({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&t.controller&&(e[0].props.controller=t.controller),e}},{key:"_pickAndCallback",value:function(t){var e=t.event.offsetCenter;if(e){var n=this.props.pickingRadius,r=this.layerManager.pickObject({x:e.x,y:e.y,radius:n,viewports:this.getViewports(e),mode:t.mode,depth:1,event:t.event});if(t.callback&&r){var i=r.find(function(t){return t.index>=0})||null;t.callback(i,r,t.event.srcEvent)}}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function(t){this.layerManager.context.animationProps=t}},{key:"_setGLContext",value:function(t){if(!this.layerManager){if(this.canvas||(this.canvas=t.canvas,Object(s.y)(t,{enable:!0,copyState:!0})),Object(s.x)(t,{blend:!0,blendFunc:[f.a.SRC_ALPHA,f.a.ONE_MINUS_SRC_ALPHA,f.a.ONE,f.a.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:f.a.LEQUAL}),this.props.onWebGLInitialized(t),!this.props._customRender)for(var e in this.eventManager=new Jr(t.canvas,{events:{click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),o.b)this.eventManager.on(e,this._onEvent);this.viewManager=new Ce({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Object(a.a)(this.viewManager);var n=this.viewManager.getViewports()[0];this.layerManager=new Se(t,{stats:this.stats,viewport:n}),this.effectManager=new sr({gl:t,layerManager:this.layerManager});var r=!0,i=!1,u=void 0;try{for(var c,l=this.props.effects[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var h=c.value;this.effectManager.addEffect(h)}}catch(t){i=!0,u=t}finally{try{r||null==l.return||l.return()}finally{if(i)throw u}}this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t){var e=this.layerManager.context.gl;Object(s.x)(e,this.props.parameters),this.props.onBeforeRender({gl:e}),this.layerManager.drawLayers({pass:"screen",viewports:this.viewManager.getViewports(),views:this.viewManager.getViews(),redrawReason:t,drawPickingColors:this.props.drawPickingColors,customRender:Boolean(this.props._customRender)}),this.props.onAfterRender({gl:e})}},{key:"_onRendererInitialized",value:function(t){var e=t.gl;this._setGLContext(e)}},{key:"_onRenderFrame",value:function(t){if(this.stats.oneSecondPassed()){var e=this.stats.getStatsTable();this.stats.reset(),i.a.table(3,e)()}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.stats.bump("fps"),this._updateAnimationProps(t);var n=this.needsRedraw({clearRedrawFlags:!0});n&&(this.stats.bump("render-fps"),this.props._customRender?this.props._customRender():this._drawLayers(n))}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState[t.viewId]=e,this.viewManager.setProps({viewState:e}))}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onClick",value:function(t){this._pickAndCallback({callback:this.props.onLayerClick,event:t,mode:"click"})}},{key:"_onEvent",value:function(t){var e=o.b[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLastPickedObject({x:n.x,y:n.y,viewports:this.getViewports(n)}),i=r.layer,a=i&&(i[e.handler]||i.props[e.handler]),s=this.props[e.handler],u=!1;a&&(u=a.call(i,r,t)),!u&&s&&s(r,t)}}},{key:"_onPointerMove",value:function(t){t.leftButton||t.rightButton||this._pickAndCallback({callback:this.props.onLayerHover,event:t,mode:"hover"})}},{key:"_onPointerLeave",value:function(t){this.layerManager.pickObject({x:-1,y:-1,viewports:[],radius:1,mode:"hover"}),this.props.onLayerHover&&this.props.onLayerHover(null,[],t.srcEvent)}}])&&ri(e.prototype,n),r&&ri(e,r),t}();function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fi(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hi(t,e,n){return(hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=di(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function di(t){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ui.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(lr)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.bool,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLayerClick:t.func,onLayerHover:t.func,onLoad:t.func,debug:t.bool,drawPickingColors:t.bool,_animate:t.bool}},ui.defaultProps=si;var pi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fi(this,di(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(e,xt),n=e,(r=[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(t){hi(di(e.prototype),"setState",this).call(this,t),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function(t){return t.info}},{key:"renderLayers",value:function(){return null}},{key:"getSubLayerProps",value:function(t){var e=this.props,n={opacity:e.opacity,pickable:e.pickable,visible:e.visible,parameters:e.parameters,getPolygonOffset:e.getPolygonOffset,highlightedObjectIndex:e.highlightedObjectIndex,autoHighlight:e.autoHighlight,highlightColor:e.highlightColor,coordinateSystem:e.coordinateSystem,coordinateOrigin:e.coordinateOrigin,wrapLongitude:e.wrapLongitude,modelMatrix:e.modelMatrix};return t&&Object.assign(n,t,{id:"".concat(this.props.id,"-").concat(t.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},t.updateTriggers)}),n}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var t=this.internalState.subLayers;t&&!this.needsUpdate()?i.a.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(t=Ht(t=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=t,i.a.log(2,"Composite layer rendered new subLayers ".concat(this),t)());var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.parent=this}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isComposite",get:function(){return!0}}])&&li(n.prototype,r),o&&li(n,o),e}();pi.layerName="CompositeLayer";n(40),n(68),n(67);function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _i(t,e){return!e||"object"!==gi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wi(t){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ei(t,e)}function Ei(t,e){return(Ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Si(t,e){return Number.isFinite(t)?t:e}var Ai=function(t){function e(t){var n,r=t.width,i=t.height,o=t.position,a=t.bearing,s=t.pitch,u=t.longitude,c=t.latitude,l=t.zoom,f=(t.syncBearing,t.bounds,t.startPanEventPosition),h=t.startPanPosition,d=t.startRotateCenter,v=t.startRotateViewport,p=t.startZoomPos,g=t.startZoom;return bi(this,e),(n=_i(this,wi(e).call(this,{width:r,height:i,position:o,bearing:a,pitch:s,longitude:u,latitude:c,zoom:l})))._interactiveState={startPanEventPosition:f,startPanPosition:h,startRotateCenter:d,startRotateViewport:v,startZoomPos:p,startZoom:g},n}var n,r,i;return Oi(e,Nn),n=e,(r=[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps,r=n.translationX,i=n.translationY;return this._getUpdatedState({startPanPosition:[r,i],startPanEventPosition:e})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanEventPosition||n;if(!r)return this;var i=yi(this._interactiveState.startPanPosition||[],2),o=i[0],a=i[1];o=Si(o,this._viewportProps.translationX),a=Si(a,this._viewportProps.translationY);var s=e[0]-r[0],u=e[1]-r[1];return this._getUpdatedState({translationX:o+s,translationY:a-u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var r=this._viewportProps,i=r.bearing,o=r.pitch;return this._getUpdatedState({bearing:i+10*e,pitch:o-10*n})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPos:e,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.minZoom,s=i.maxZoom,u=i.width,c=i.height,l=(i.translationX,i.translationY,this._interactiveState.startZoomPos||n||e),f=Object(ne.b)(o*r,a,s);e[0],l[0],e[1],l[1],l[0],l[1];return f/o<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var t=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),n=new ie.a(e).normalize().scale(1);return this._getUpdatedState({position:new ie.a(t).add(n)})}},{key:"moveBackward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),n=new ie.a(e).normalize().scale(-1);return this._getUpdatedState({position:new ie.a(t).add(n)})}},{key:"moveUp",value:function(){var t=this._viewportProps.position;return this._getUpdatedState({position:new ie.a(t).add([0,0,1])})}},{key:"moveDown",value:function(){var t=this._viewportProps.position,e=t[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new ie.a(t).add(e)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}}])&&mi(n.prototype,r),i&&mi(n,i),e}(),Ti=function(t){function e(t){return bi(this,e),_i(this,wi(e).call(this,Ai,t))}return Oi(e,In),e}();function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ri(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xi(t){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ci(t,e){return!e||"object"!==xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Li(t,e){return(Li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ri(this,Ii(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(e,xe),n=e,(r=[{key:"_getViewport",value:function(t){var e=t.viewState,n=e.modelMatrix,r=void 0===n?null:n,i=e.bearing,o=e.up,a=void 0===o?[0,0,1]:o,s=function(t){var e=t.bearing,n=t.pitch;return new Cn({bearing:e,pitch:n}).toVector3().normalize()}({bearing:i,pitch:89}),u=r?r.transformDirection(s):s,c=(new re.a).lookAt({eye:[0,0,0],center:u,up:a});return new me(Object.assign({},t,{zoom:null,viewMatrix:c}))}},{key:"controller",get:function(){return this._getControllerProps({type:Ti})}}])&&Pi(n.prototype,r),i&&Pi(n,i),e}()).displayName="FirstPersonView",(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ci(this,Fi(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Li(t,e)}(e,xe),n=e,(r=[{key:"_getViewport",value:function(t){var e=t.viewState,n=e.bearing,r=e.pitch,i=e.position,o=e.up,a=50*e.zoom,s=function(t){var e=t.bearing,n=t.pitch;return new Cn({bearing:e,pitch:n}).toVector3().normalize()}({bearing:n,pitch:r}).scale(-a).multiply(new ie.a(1,1,-1)),u=(new re.a).multiplyRight((new re.a).lookAt({eye:s,center:i,up:o}));return new me(Object.assign({},t,{id:this.id,zoom:null,viewMatrix:u}))}}])&&Mi(n.prototype,r),i&&Mi(n,i),e}()).displayName="ThirdPersonView";var Ni=n(51),Di=n.n(Ni),Bi=n(52),Ui=n.n(Bi),Vi=n(61),zi=n.n(Vi),Gi=n(62),Wi=n.n(Gi),Hi=n(63),Xi=n.n(Hi);function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Zi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ki(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qi(t,e){return!e||"object"!==qi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $i(t,e){return($i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var to=Math.PI/180,eo=function(t){function e(t){var n,r=t.id,i=void 0===r?"orbit-viewport":r,o=t.width,a=t.height,s=t.distance,u=t.rotationX,c=void 0===u?0:u,l=t.rotationOrbit,f=void 0===l?0:l,h=t.orbitAxis,d=void 0===h?"Z":h,v=t.lookAt,p=void 0===v?[0,0,0]:v,g=t.up,y=void 0===g?[0,1,0]:g,b=t.fov,m=void 0===b?75:b,_=t.near,w=void 0===_?1:_,O=t.far,E=void 0===O?100:O,S=t.zoom,A=void 0===S?1:S;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var T=zi()([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-c/180*Math.PI);"Z"===d?Xi()(T,T,-f/180*Math.PI):Wi()(T,T,-f/180*Math.PI);var j=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ae()(j,j,[A,A,A]),ue()(j,j,[-p[0],-p[1],-p[2]]);var P=Di()([],[0,0,s],[0,0,0],y),R=m*to,I=o/a,k=Ui()([],R,I,w,E);return(n=Qi(this,Ji(e).call(this,{id:i,viewMatrix:le()(P,P,le()(T,T,j)),projectionMatrix:k,width:o,height:a}))).width=o,n.height=a,n.distance=s,n.rotationX=c,n.rotationOrbit=f,n.orbitAxis=d,n.lookAt=p,n.up=y,n.fov=m,n.near=w,n.far=E,n.zoom=A,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$i(t,e)}(e,me),n=e,(r=[{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=Yi(ee(this.pixelProjectionMatrix,Zi(t).concat([1])),3),i=r[0],o=r[1],a=r[2];return[i,n?this.height-o:o,a]}},{key:"unproject",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=Yi(t,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return ee(this.pixelUnprojectionMatrix,[i,s,a,1])}},{key:"getDistance",value:function(t){var e=t.boundingBox,n=t.fov;return Math.max(e[0],e[1],e[2])/2/Math.tan(n/180*Math.PI/2)}},{key:"fitBounds",value:function(t){var n=this.width,r=this.height,i=this.rotationX,o=this.rotationOrbit,a=this.orbitAxis,s=this.lookAt,u=this.up,c=this.fov;return new e({width:n,height:r,rotationX:i,rotationOrbit:o,orbitAxis:a,up:u,fov:c,near:this.near,far:this.far,zoom:this.zoom,lookAt:s,distance:this.getDistance({boundingBox:t,fov:c})})}}])&&Ki(n.prototype,r),i&&Ki(n,i),e}();function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oo(t,e){return(oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ao(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uo(t,e,n){return e&&so(t.prototype,e),n&&so(t,n),t}eo.displayName="OrbitViewport";var co={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new vn(["zoom"]),transitionInterruption:yn},lo={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},fo={minZoom:0,maxZoom:1/0};function ho(t,e){return Number.isFinite(t)?t:e}var vo=function(){function t(e){var n=e.width,r=e.height,i=e.distance,o=e.rotationX,s=e.rotationOrbit,u=e.orbitAxis,c=e.bounds,l=e.lookAt,f=e.fov,h=e.near,d=e.far,v=e.translationX,p=e.translationY,g=e.zoom,y=e.minZoom,b=e.maxZoom,m=e.startPanViewport,_=e.startPanPos,w=e.isPanning,O=e.startRotateViewport,E=e.isRotating,S=e.startZoomViewport,A=e.startZoomPos;ao(this,t),Object(a.a)(Number.isFinite(n),"`width` must be supplied"),Object(a.a)(Number.isFinite(r),"`height` must be supplied"),Object(a.a)(Number.isFinite(i),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,distance:i,rotationX:ho(o,lo.rotationX),rotationOrbit:ho(s,lo.rotationOrbit),orbitAxis:u,bounds:c,lookAt:l||lo.lookAt,fov:ho(f,lo.fov),near:ho(h,lo.near),far:ho(d,lo.far),translationX:ho(v,lo.translationX),translationY:ho(p,lo.translationY),zoom:ho(g,lo.zoom),minZoom:ho(y,fo.minZoom),maxZoom:ho(b,fo.maxZoom)}),this._interactiveState={startPanViewport:m,startPanPos:_,isPanning:w,startRotateViewport:O,isRotating:E,startZoomViewport:S,startZoomPos:A}}return uo(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=new eo(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:e,startPanViewport:n})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var r=this._interactiveState.startPanPos||n;Object(a.a)(r,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new eo(this._viewportProps),o=e[0]-r[0],s=e[1]-r[1],u=i.project(i.lookAt),c=i.unproject([u[0]-o,u[1]-s,u[2]]);return this._getUpdatedOrbitState({lookAt:c,isPanning:!0})}},{key:"panEnd",value:function(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function(t){t.pos;var e=new eo(this._viewportProps);return this._getUpdatedOrbitState({startRotateViewport:e})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport||{},i=r.rotationX,o=r.rotationOrbit;i=ho(i,this._viewportProps.rotationX),o=ho(o,this._viewportProps.rotationOrbit);var a=Object(ne.b)(i-180*n,-89.999,89.999),s=(o-180*e)%360;return this._getUpdatedOrbitState({rotationX:a,rotationOrbit:s,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"shortestPathFrom",value:function(t){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function(t){var e=t.pos,n=new eo(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:n,startZoomPos:e})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.minZoom,s=i.maxZoom,u=i.width,c=i.height,l=this._interactiveState.startZoomPos||n||e,f=this._interactiveState.startZoomViewport||new eo(this._viewportProps),h=Object(ne.b)(o*r,a,s),d=e[0]-l[0],v=e[1]-l[1],p=l[0]-u/2,g=c/2-l[1],y=f.project(f.lookAt),b=y[0]-p+p*h/o+d,m=y[1]+g-g*h/o-v,_=f.unproject([b,m,y[2]]);return this._getUpdatedOrbitState({lookAt:_,zoom:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;return t.zoom=r>e?e:r,t.zoom=r<n?n:r,t}}]),t}(),po=function(t){function e(t){return ao(this,e),ro(this,io(e).call(this,vo,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oo(t,e)}(e,In),uo(e,[{key:"_getTransitionProps",value:function(){return co}}]),e}();function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bo(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wo(t,e,n){return e&&_o(t.prototype,e),n&&_o(t,n),t}function Oo(t,e){return!e||"object"!==go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ao(t,e)}function Ao(t,e){return(Ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var To=Math.PI/180,jo=function(t){function e(){return mo(this,e),Oo(this,Eo(e).apply(this,arguments))}return So(e,me),wo(e,[{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=yo(ee(this.pixelProjectionMatrix,bo(t).concat([1])),3),i=r[0],o=r[1],a=r[2];return[i,n?this.height-o:o,a]}},{key:"unproject",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=yo(t,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return ee(this.pixelUnprojectionMatrix,[i,s,a,1])}}]),e}();function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Io(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ko(t){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xo(t,e){return(xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(function(t){function e(){return mo(this,e),Oo(this,Eo(e).apply(this,arguments))}return So(e,xe),wo(e,[{key:"_getViewport",value:function(t){var e=t.viewState,n=t.width||1,r=t.height||1,i=t.fov||t.fovy||e.fovy||75,o=t.near||e.near||1,a=t.far||e.far||100,s=Number.isFinite(e.aspect)?e.aspect:n/r,u=i*To;return new jo({id:this.id,viewMatrix:this._getViewMatrix(t.viewState),projectionMatrix:Ui()([],u,s,o,a),x:t.x,y:t.y,width:n,height:r})}},{key:"_getViewMatrix",value:function(t){var e=t.distance,n=t.rotationX,r=void 0===n?0:n,i=t.rotationOrbit,o=void 0===i?0:i,a=t.orbitAxis,s=void 0===a?"Z":a,u=t.lookAt,c=void 0===u?[0,0,0]:u,l=t.up,f=void 0===l?[0,1,0]:l,h=t.zoom,d=void 0===h?1:h,v=zi()([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-r/180*Math.PI);"Z"===s?Xi()(v,v,-o/180*Math.PI):Wi()(v,v,-o/180*Math.PI);var p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ae()(p,p,[d,d,d]),ue()(p,p,[-c[0],-c[1],-c[2]]);var g=Di()([],[0,0,e],[0,0,0],f);return le()(g,g,le()(v,v,p)),g}},{key:"fitBounds",value:function(t,e){var n=this.width,r=this.height,i=this.fov,o=this.near,a=this.far;return this._getViewport({width:n,height:r,fov:i,near:o,far:a})}},{key:"controller",get:function(){return this._getControllerProps({type:po})}}],[{key:"getDistance",value:function(t){var e=t.boundingBox,n=t.fov;return Math.max(e[0],e[1],e[2])/2/Math.tan(n/180*Math.PI/2)}}]),e}()).displayName="OrbitView";var Mo=Math.PI/180;(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Io(this,ko(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xo(t,e)}(e,xe),n=e,(r=[{key:"_getViewport",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.viewState,a=o.eye,s=o.lookAt,u=void 0===s?[0,0,0]:s,c=o.up,l=void 0===c?[0,1,0]:c,f=t.fovy||o.fovy||75,h=t.near||o.near||1,d=t.far||o.far||100,v=Number.isFinite(o.aspect)?o.aspect:r/i,p=f*Mo;return new me({id:this.id,x:e,y:n,width:r,height:i,viewMatrix:Di()([],a,u,l),projectionMatrix:Ui()([],p,v,h,d)})}}])&&Ro(n.prototype,r),i&&Ro(n,i),e}()).displayName="PerspectiveView";var Co=n(79);function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function No(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Do(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bo(t){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vo(t,e)}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zo=.1,Go=10,Wo=function(t){function e(t){var n,r=t.width,i=t.height,o=t.offset,a=t.zoom,s=t.minZoom,u=void 0===s?zo:s,c=t.maxZoom,l=void 0===c?Go:c,f=t.startPanPosition,h=t.startPanOffset,d=t.startRotatePosition,v=t.startRotateOffset;return Lo(this,e),(n=Do(this,Bo(e).call(this,{width:r,height:i,offset:o,zoom:a,minZoom:u,maxZoom:l})))._interactiveState={startPanPosition:f,startPanOffset:h,startRotatePosition:d,startRotateOffset:v},n}var n,r,i;return Uo(e,Nn),n=e,(r=[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps.offset;return this._getUpdatedState({startPanPosition:e,startPanOffset:n})}},{key:"pan",value:function(t){var e=t.pos,n=this._interactiveState,r=n.startPanPosition,i=n.startPanOffset,o=new Co.a(e).subtract(r);return this._getUpdatedState({offset:new Co.a(i).subtract(o)})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanOffset:null})}},{key:"rotateStart",value:function(t){t.pos;return this}},{key:"rotate",value:function(t){t.deltaScaleX,t.deltaScaleY;return this}},{key:"rotateEnd",value:function(){return this}},{key:"zoom",value:function(t){var e=t.pos,n=t.scale,r=this._viewportProps,i=r.zoom,o=r.width,a=r.height,s=r.offset,u=r.minZoom,c=r.maxZoom,l=Object(ne.b)(i*n,u,c),f=o/2-s[0],h=a/2-s[1],d=(e[0]-f)*(i/l-1),v=(e[1]-h)*(i/l-1);return this._getUpdatedState({zoom:l,offset:[s[0]+d,s[1]+v]})}},{key:"moveLeft",value:function(){var t=this._viewportProps.offset,e=[10,0];return this._getUpdatedState({offset:new Co.a(t).add(e)})}},{key:"moveRight",value:function(){var t=this._viewportProps.offset,e=[-10,0];return this._getUpdatedState({offset:new Co.a(t).add(e)})}},{key:"moveUp",value:function(){var t=this._viewportProps.offset,e=[0,10];return this._getUpdatedState({offset:new Co.a(t).add(e)})}},{key:"moveDown",value:function(){var t=this._viewportProps.offset,e=[0,-10];return this._getUpdatedState({offset:new Co.a(t).add(e)})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}}])&&No(n.prototype,r),i&&No(n,i),e}(),Ho=function(t){function e(t){var n;return Lo(this,e),(n=Do(this,Bo(e).call(this,Wo,t))).invertPan=!0,n}return Uo(e,In),e}();function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yo(t,e){return!e||"object"!==Xo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zo(t){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t,e){return(Ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yo(this,Zo(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ko(t,e)}(e,xe),n=e,(r=[{key:"_getViewport",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.viewState,a=o.eye,s=void 0===a?[0,0,1]:a,u=o.lookAt,c=void 0===u?[0,0,0]:u,l=o.up,f=void 0===l?[0,1,0]:l,h=o.offset,d=void 0===h?[0,1]:h,v=o.zoom,p=void 0===v?1:v;r=r||1,i=i||1;var g=this.props,y=g.left,b=void 0===y?(-r/2+d[0])*p:y,m=g.top,_=void 0===m?(-i/2+d[1])*p:m,w=g.right,O=void 0===w?(r/2+d[0])*p:w,E=g.bottom,S=void 0===E?(i/2+d[1])*p:E,A=g.near,T=void 0===A?1:A,j=g.far,P=void 0===j?100:j;return new me({id:this.id,x:e,y:n,width:r,height:i,viewMatrix:(new re.a).lookAt({eye:s,lookAt:c,up:f}),projectionMatrix:(new re.a).ortho({left:b,right:O,bottom:S,top:_,near:T,far:P})})}},{key:"controller",get:function(){return this._getControllerProps({type:Ho})}}])&&qo(n.prototype,r),i&&qo(n,i),e}();Qo.displayName="OrthographicView";var Jo;function $o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ta={SUM:1,MEAN:2,MIN:3,MAX:4},ea=[f.a.MIN,f.a.FUNC_ADD],na=[f.a.MAX,f.a.FUNC_ADD];f.a.MAX,f.a.MIN,$o(Jo={},ta.SUM,f.a.FUNC_ADD),$o(Jo,ta.MEAN,f.a.FUNC_ADD),$o(Jo,ta.MIN,ea),$o(Jo,ta.MAX,na),ta.SUM;s.r.fp64ifyMatrix4;s.r.fp64LowPart;function ra(t){var e=new t({});try{e.context={gl:{}},e._initState(),e.initializeState()}catch(t){}var n=e.getAttributeManager().getAttributes();for(var r in n)n[r].type=n[r].type||f.a.FLOAT;return n}function ia(t){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aa(t,e){return!e||"object"!==ia(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sa(t,e,n){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ca(t,e){return(ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var la=s.r.fp64LowPart,fa={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},strokeWidth:{type:"number",min:0,value:1},outline:!1,fp64:!1,getPosition:{type:"accessor",value:function(t){return t.position}},getRadius:{type:"accessor",value:1},getColor:{type:"accessor",value:[0,0,0,255]}},ha=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,ua(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ca(t,e)}(e,xt),n=e,(r=[{key:"getShaders",value:function(t){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  vec3 offset = positions * outerRadiusPixels;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 || distToCenter < innerUnitRadius) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:f.a.UNSIGNED_BYTE,accessor:"getColor",defaultValue:[0,0,0,255]}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(sa(ua(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.radiusScale,i=n.radiusMinPixels,o=n.radiusMaxPixels,a=n.outline,s=n.strokeWidth;this.state.model.render(Object.assign({},e,{outline:a?1:0,strokeWidth:s,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o}))}},{key:"_getModel",value:function(t){return new s.f(t,Object.assign(this.getShaders(),{id:this.props.id,geometry:new s.e({drawMode:f.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getPosition,o=t.value,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=i(l.value);o[a++]=la(h[0]),o[a++]=la(h[1])}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}else t.value=new Float32Array(2)}}])&&oa(n.prototype,r),i&&oa(n,i),e}();ha.layerName="ScatterplotLayer",ha.defaultProps=fa;var da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getShaders=function(){var e=t.prototype.getShaders.call(this);return e.vs=e.vs.replace("attribute vec3 instancePositions;","attribute vec2 instancePositions;").replace(/gl_Position = .*?;/,"gl_Position = project_to_clipspace(vec4(project_position(instancePositions) + project_scale(offset.xy), 0., 1.));"),e},e.prototype.initializeState=function(){t.prototype.initializeState.call(this);var e=this.getAttributeManager().getAttributes();e.instancePositions.size=2,e.instanceRadius.type=f.a.UNSIGNED_BYTE},e}(ha),va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getShaders=function(){return{vs:"#version 300 es\n#define SHADER_NAME line-layer-vertex-shader\n\nin vec3 positions;\nin vec3 instanceSourcePositions;\nin vec3 instanceTargetPositions;\nin vec4 instanceSourceColors;\nin vec4 instanceTargetColors;\nin vec3 instancePickingColors;\n\nuniform float opacity;\n\nout vec4 vColor;\nout float vDiscard;\n\nvoid main(void) {\n  vDiscard = instanceSourcePositions.z + instanceTargetPositions.z;\n\n  vec4 source = project_to_clipspace(vec4(project_position(instanceSourcePositions.xy), 0., 1.));\n  vec4 target = project_to_clipspace(vec4(project_position(instanceTargetPositions.xy), 0., 1.));\n\n  float segmentIndex = positions.z;\n  gl_Position = mix(source, target, segmentIndex);\n\n  // Color\n  vColor = mix(instanceSourceColors, instanceTargetColors, segmentIndex);\n  vColor = vec4(vColor.rgb, vColor.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#version 300 es\n#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nin float vDiscard;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vDiscard > 0.5) {\n    discard;\n  }\n  fragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  fragColor = picking_filterHighlightColor(fragColor);\n\n  // use picking color if rendering to picking FBO.\n  fragColor = picking_filterPickingColor(fragColor);\n}\n",modules:["picking"]}},e.prototype.initializeState=function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,accessor:"getTargetPosition"},instanceSourceColors:{size:4,stride:8,type:f.a.UNSIGNED_BYTE,accessor:"getSourceColor",defaultValue:[0,0,0,255]},instanceTargetColors:{size:4,stride:8,offset:4,type:f.a.UNSIGNED_BYTE,accessor:"getTargetColor",defaultValue:[0,0,0,255]}}),this.setState({model:this._getModel(this.context.gl)})},e.prototype._getModel=function(t){return new s.f(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.e({drawMode:f.a.LINE_STRIP,attributes:{positions:new Float32Array([0,0,0,0,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))},e}(xt),pa=ra(da),ga=ra(va);function ya(t,e){t.reallocate(e*t.accessor.BYTES_PER_VERTEX)}function ba(t,e,n){t.subData({data:e,offset:n*t.accessor.BYTES_PER_VERTEX})}var ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initializeState=function(){var t,e=this.context.gl;this.setState({loadedNodeCount:0,loadedEdgeCount:0,nodeColorsBuffer:new s.b(e,{accessor:pa.instanceColors,byteLength:1}),nodeRadiusBuffer:new s.b(e,{accessor:pa.instanceRadius,byteLength:1}),nodePositionsBuffer:new s.b(e,{accessor:pa.instancePositions,byteLength:1}),edgeSourcePositionsBuffer:new s.b(e,{accessor:ga.instanceSourcePositions,byteLength:1}),edgeTargetPositionsBuffer:new s.b(e,{accessor:ga.instanceTargetPositions,byteLength:1}),edgeColorsBuffer:new s.b(e,{accessor:Object.assign({},ga.instanceSourceColors,{size:8}),byteLength:1}),resolvedEdgeCount:0,pendingEdgeCount:0,nodePositionsTexture:new s.g(e,{format:f.a.RG32F,type:f.a.FLOAT,width:1,height:1,parameters:(t={},t[f.a.TEXTURE_MIN_FILTER]=[f.a.NEAREST],t[f.a.TEXTURE_MAG_FILTER]=[f.a.NEAREST],t),mipmap:!1}),edgeIdsBuffer:new s.b(e,{accessor:{type:f.a.UNSIGNED_INT,size:2},byteLength:1}),edgeSourcePositionsBufferTemp:new s.b(e,{accessor:ga.instanceSourcePositions,byteLength:1}),edgeTargetPositionsBufferTemp:new s.b(e,{accessor:ga.instanceTargetPositions,byteLength:1})}),this.setState({edgePositionsTransform:new s.h(e,{sourceBuffers:{instanceIds:this.state.edgeIdsBuffer},feedbackBuffers:{sourcePositions:this.state.edgeSourcePositionsBufferTemp,targetPositions:this.state.edgeTargetPositionsBufferTemp},vs:"#version 300 es\n\nin vec2 instanceIds;\n\nuniform sampler2D nodePositions;\nuniform float loadedNodeCount;\nuniform float width;\n\nout vec3 sourcePositions;\nout vec3 targetPositions;\n\nivec2 getTexCoord(float id) {\n  float y = floor(id / width);\n  float x = id - width * y;\n  return ivec2(x, y);\n}\n\nvec3 getPosition(float id) {\n  if (id >= loadedNodeCount) {\n    return vec3(0., 0., 1.);\n  }\n  vec2 p = texelFetch(nodePositions, getTexCoord(id), 0).rg;\n  return vec3(p, 0.);\n}\n\nvoid main(void) {\n  sourcePositions = getPosition(instanceIds.x);\n  targetPositions = getPosition(instanceIds.y);\n}\n",varyings:["sourcePositions","targetPositions"],elementCount:1})})},e.prototype.updateState=function(t){var e=t.props,n=t.oldProps,r=e.nodeUpdates,i=e.edgeUpdates,o=e.totalNodeCount,a=e.totalEdgeCount,s=this.state,u=s.nodeColorsBuffer,c=s.nodeRadiusBuffer,l=s.nodePositionsBuffer,f=s.nodePositionsTexture,h=s.edgePositionsTransform,d=s.edgeSourcePositionsBuffer,v=s.edgeTargetPositionsBuffer,p=s.edgeSourcePositionsBufferTemp,g=s.edgeTargetPositionsBufferTemp,y=s.edgeColorsBuffer,b=s.edgeIdsBuffer,m=this.state,_=m.loadedNodeCount,w=m.loadedEdgeCount,O=m.pendingEdgeCount,E=m.resolvedEdgeCount;o&&o!==n.totalNodeCount&&(ya(u,o),ya(c,o),f.resize({width:256,height:Math.ceil(o/256)}),ya(l,f.width*f.height),_=0),a&&a!==n.totalEdgeCount&&(ya(d,a),ya(v,a),ya(y,a),ya(b,a),w=0);for(var S=r.length>0;r.length;){var A=r.shift(),T=A.length,j=A.pointColors,P=A.pointSizes,R=A.pointPositions;ba(u,j,_),ba(c,P,_),ba(l,R,_),_+=T}for(;i.length;){var I=i.shift(),k=I.length,x=I.edgeColors,M=I.logicalEdges;ba(y,x,w),ba(b,M,O),w+=k,O+=k}S&&_===o&&f.setImageData({data:l}),_===o&&O&&(ya(p,O),ya(g,O),h.update({elementCount:O}),h.run({uniforms:{loadedNodeCount:_,width:256,nodePositions:f}}),d.copyData({sourceBuffer:p,writeOffset:4*E*3,size:4*O*3}),v.copyData({sourceBuffer:g,writeOffset:4*E*3,size:4*O*3}),E+=O,O=0),this.setState({loadedNodeCount:_,loadedEdgeCount:w,resolvedEdgeCount:E,pendingEdgeCount:O})},e.prototype.renderLayers=function(){var t=this.state,e=t.loadedNodeCount,n=t.resolvedEdgeCount,r=t.nodeColorsBuffer,i=t.nodeRadiusBuffer,o=t.nodePositionsBuffer,a=t.edgeSourcePositionsBuffer,s=t.edgeTargetPositionsBuffer,u=t.edgeColorsBuffer;return[n&&new va(this.getSubLayerProps({id:"edges",visible:this.props.drawEdges,numInstances:n,instanceSourcePositions:a,instanceTargetPositions:s,instanceSourceColors:u,instanceTargetColors:u,instancePickingColors:u,pickable:!1,opacity:.01})),e&&new da(this.getSubLayerProps({id:"nodes",numInstances:e,instanceColors:r,instanceRadius:i,instancePositions:o,instancePickingColors:r,pickable:!1,radiusScale:1,opacity:.05}))]},e}(pi),_a=ma;ma.layerName="ArrowGraphLayer",ma.defaultProps={totalNodeCount:0,totalEdgeCount:0,nodeUpdates:[],edgeUpdates:[],drawEdges:!0};var wa=n(103);if("undefined"==typeof ReadableStream){var Oa=n(123),Ea=n(129),Sa=(0,n(130).createReadableStreamWrapper)(Ea.ReadableStream);window.fetch=async function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=await Oa.apply(void 0,t);return n.body=Sa(n.body),n.bodyUsed=!1,n}}function Aa(t,e){wa.RecordBatchReader.from(fetch(t,{credentials:"omit"})).then(function(t){return t.open()}).then(function t(n){return n.next().then(function(r){return r.done?n:(i=r.value,o={metadata:i.schema.metadata,length:i.length},i.schema.fields.forEach(function(t,e){var n=t.name;o[n]=i.getChildAt(e).toArray()}),e(o),t(n));var i,o})}).then(function(t){return t.cancel()})}function Ta(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}Object.assign(document.body.style,{margin:0,background:"#111"});var ja=new ui({initialViewState:{offset:[0,0],zoom:1},views:[new Qo({controller:{minZoom:0,maxZoom:1/0}})],onViewStateChange:function(t){var e=t.viewState;ja.setProps({viewState:e}),Fa({drawEdges:!1}),setTimeout(function(){return Fa({drawEdges:!0})},50)}}),Pa=!1,Ra=0,Ia=0,ka=0,xa=[],Ma=[],Ca="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/arrow/";function Fa(t){ja.setProps({layers:[new _a({id:"graph",coordinateSystem:o.a.IDENTITY,totalNodeCount:Ia,totalEdgeCount:ka,nodeUpdates:xa,edgeUpdates:Ma,version:Ra},t)]})}Aa(Ca+"/biogrid-nodes.arrow",function(t){var e=t.metadata,n=t.length,r=Ta(t,["metadata","length"]);0===Ia&&(Ia=Number(e.get("length"))),ja.width>0&&ja.height>0&&!Pa&&(Pa=!0)&&function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=Math.max((n-i)/ja.width,(r-e)/ja.height);ja.setProps({viewState:{offset:[(i+n)/2/o,(e+r)/2/o],zoom:o}})}(JSON.parse(e.get("globalBoundBox"))),xa.push(Object.assign({},{length:n},r)),Ra++,Fa()}),Aa(Ca+"/biogrid-edges.arrow",function(t){var e=t.metadata,n=t.length,r=Ta(t,["metadata","length"]);0===ka&&(ka=Number(e.get("length"))),Ma.push(Object.assign({},{length:n},r)),Ra++,Fa()})},,function(t,e,n){"use strict";var r=n(14),i=n(18),o=n(1),a=n(2),s=n(7),u=n(6),c=n(8),l=n(76),f=n(17),h=n(79),d=n(69),v=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(o.a)(this,e),t=Object(s.a)(this,Object(u.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return Object(c.a)(e,t),Object(a.a)(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(f.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(f.a)(t)}}]),e}(n(60).a),p=n(90),g=n.n(p),y=n(91),b=n.n(y),m=n(92),_=n.n(m),w=n(51),O=n.n(w),E=n(93),S=n.n(E),A=n(52),T=n.n(A),j=n(94),P=n.n(j),R=n(65),I=n.n(R),k=n(29),x=n.n(k),M=n(95),C=n.n(M),F=n(48),L=n.n(F),N=n(53),D=n.n(N),B=n(96),U=n.n(B),V=n(97),z=n.n(V),G=n(44),W=n.n(G),H=n(61),X=n.n(H),q=n(62),Y=n.n(q),Z=n(63),K=n.n(Z);n.d(e,"a",function(){return $});var Q=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function J(t,e){return t.length===e&&t.every(Number.isFinite)}var $=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Object(o.a)(this,e),t=Object(s.a)(this,Object(u.a)(e).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return Object(c.a)(e,t),Object(a.a)(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=h,this[4]=e,this[5]=o,this[6]=c,this[7]=d,this[8]=n,this[9]=a,this[10]=l,this[11]=v,this[12]=r,this[13]=s,this[14]=f,this[15]=p,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=v,this[15]=p,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,Object(i.a)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[t][e]=Object(f.a)(n):this[e][t]=Object(f.a)(n),this}},{key:"determinant",value:function(){return g()(this)}},{key:"identity",value:function(){return this.copy(Q)}},{key:"fromQuaternion",value:function(t){return b()(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return _()(this,e,n,r,i,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return O()(this,e,r,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return S()(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error("radians");var h=r/2,d=s*Math.tan(h),v=d*o;return(new e).ortho({left:-v,right:v,bottom:-d,top:d,near:c,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,c=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return T()(this,e,o,s,c),this.check()}},{key:"transpose",value:function(){return P()(this,this),this.check()}},{key:"invert",value:function(){return I()(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return x()(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return x()(this,this,t),this.check()}},{key:"rotateX",value:function(t){return X()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return Y()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return K()(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],o=e[2];return this.rotateX(n).rotateY(i).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return C()(this,this,t,e),this.check()}},{key:"scale",value:function(t){return L()(this,this,t),this.check()}},{key:"translate",value:function(t){return D()(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new h.a,U()(e,t,this),J(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new d.a,z()(e,t,this),J(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new v,W()(e,t,this),J(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:e=e||new h.a,W()(e,[t[0],t[1],0,n],this),e.length=2,J(e,2);break;case 3:e=e||new d.a,W()(e,[t[0],t[1],t[2],n],this),e.length=3,J(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new v,W()(e,t,this),J(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(l.a)}]);